var Laya=window.Laya=function(t,e){var i={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(t,e){return 1==arguments.length?i.__presubstr.call(this,t):i.__presubstr.call(this,t,e>0?e:this.length+e)},__init:function(t){t.forEach(function(t){t.__init$&&t.__init$()})},__isClass:function(t){return t&&(t.__isclass||t==Object||t==String||t==Array)},__newvec:function(t,e){var i=[];i.length=t;for(var n=0;t>n;n++)i[n]=e;return i},__extend:function(t,e){function n(){i.un(this,"constructor",t)}for(var s in e)if(e.hasOwnProperty(s)){var r=Object.getOwnPropertyDescriptor(e,s),a=r.get,o=r.set;a||o?a&&o?Object.defineProperty(t,s,r):(a&&Object.defineProperty(t,s,a),o&&Object.defineProperty(t,s,o)):t[s]=e[s]}n.prototype=e.prototype,t.prototype=new n,i.un(t.prototype,"__imps",i.__copy({},e.prototype.__imps))},__copy:function(t,e){if(!e)return null;t=t||{};for(var i in e)t[i]=e[i];return t},__package:function(e,n){if(!i.__packages[e]){i.__packages[e]=!0;var s=t,r=e.split(".");if(r.length>1)for(var a=0,o=r.length-1;o>a;a++){var h=s[r[a]];s=h?h:s[r[a]]={}}s[r[r.length-1]]||(s[r[r.length-1]]=n||{})}},__hasOwnProperty:function(t,e){function i(t,e){if(Object.hasOwnProperty.call(e.prototype,t))return!0;var n=e.prototype.__super;return null==n?null:i(t,n)}return e=e||this,Object.hasOwnProperty.call(e,t)||i(t,e.__class)},__typeof:function(t,e){if(!t||!e)return!1;if(e===String)return"string"==typeof t;if(e===Number)return"number"==typeof t;if(e.__interface__)e=e.__interface__;else if("string"!=typeof e)return t instanceof e;return t.__imps&&t.__imps[e]||t.__class==e},__as:function(t,e){return this.__typeof(t,e)?t:null},__int:function(t){return t?parseInt(t):0},"interface":function(e,n){i.__package(e,{});var s=i.__internals,r=s[e]=s[e]||{self:e};if(n){var a=n.split(",");r.extend=[];for(var o=0;o<a.length;o++){var h=a[o];s[h]=s[h]||{self:h},r.extend.push(s[h])}}for(var l=t,c=e.split("."),o=0;o<c.length-1;o++)l=l[c[o]];l[c[c.length-1]]={__interface__:e}},"class":function(e,n,s,r){if(s&&i.__extend(e,s),n)if(i.__package(n,e),i.__classmap[n]=e,n.indexOf(".")>0){if(0==n.indexOf("laya.")){var a=n.split(".");r=r||a[a.length-1],i[r]&&console.log("Warning!,this class["+r+"] already exist:",i[r]),i[r]=e}}else"Main"==n?t.Main=e:(i[n]&&console.log("Error!,this class["+n+"] already exist:",i[n]),i[n]=e);var o=i.un,h=e.prototype;o(h,"hasOwnProperty",i.__hasOwnProperty),o(h,"__class",e),o(h,"__super",s),o(h,"__className",n),o(e,"__super",s),o(e,"__className",n),o(e,"__isclass",!0),o(e,"super",function(t){this.__super.call(t)})},imps:function(t,e){function n(t){var e,r;if((e=i.__internals[t])&&(s[t]=!0,r=e.extend))for(var a=0;a<r.length;a++)n(r[a].self)}if(!e)return null;var s=t.__imps||i.un(t,"__imps",{});for(var r in e)n(r)},superSet:function(t,e,i,n){var s=t.prototype["_$set_"+i];s&&s.call(e,n)},superGet:function(t,e,i){var n=t.prototype["_$get_"+i];return n?n.call(e):null},getset:function(t,e,n,s,r){t?(s&&(e["_$GET_"+n]=s),r&&(e["_$SET_"+n]=r)):(s&&i.un(e,"_$get_"+n,s),r&&i.un(e,"_$set_"+n,r)),s&&r?Object.defineProperty(e,n,{get:s,set:r,enumerable:!1,configurable:!0}):(s&&Object.defineProperty(e,n,{get:s,enumerable:!1,configurable:!0}),r&&Object.defineProperty(e,n,{set:r,enumerable:!1,configurable:!0}))},"static":function(t,e){function i(){var i=e[n],s=e[n+1];Object.defineProperty(t,i,{get:function(){return delete this[i],this[i]=s.call(this)},set:function(t){delete this[i],this[i]=t},enumerable:!0,configurable:!0})}for(var n=0,s=e.length;s>n;n+=2)"length"==e[n]?t.length=e[n+1].call(t):i()},un:function(t,e,n){return n||(n=t[e]),i.__propun.value=n,Object.defineProperty(t,e,i.__propun),n},uns:function(t,e){e.forEach(function(e){i.un(t,e)})}};return t.console=t.console||{log:function(){}},t.trace=t.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),i}(window,document);!function(window,document,Laya){var __un=Laya.un,__uns=Laya.uns,__static=Laya["static"],__class=Laya["class"],__getset=Laya.getset,__newvec=Laya.__newvec;Laya["interface"]("fairygui.IUISource"),Laya["interface"]("laya.runtime.IMarket"),Laya["interface"]("laya.display.ILayout"),Laya["interface"]("laya.resource.IDispose"),Laya["interface"]("laya.runtime.IConchNode"),Laya["interface"]("laya.webgl.shapes.IShape"),Laya["interface"]("fairygui.gears.IColorGear"),Laya["interface"]("laya.webgl.submit.ISubmit"),Laya["interface"]("laya.filters.IFilterAction"),Laya["interface"]("laya.webgl.text.ICharSegment"),Laya["interface"]("laya.runtime.ICPlatformClass"),Laya["interface"]("fairygui.gears.IAnimationGear"),Laya["interface"]("laya.webgl.canvas.save.ISaveData"),Laya["interface"]("laya.webgl.resource.IMergeAtlasBitmap"),Laya["interface"]("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var RunDriver=function(){function t(){}return __class(t,"laya.utils.RunDriver"),t.FILTER_ACTIONS=[],t.pixelRatio=-1,t._charSizeTestDiv=null,t.now=function(){return Date.now()},t.getWindow=function(){return window},t.getPixelRatio=function(){if(t.pixelRatio<0){var e=Browser.context,i=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;t.pixelRatio=(Browser.window.devicePixelRatio||1)/i,t.pixelRatio<1&&(t.pixelRatio=1)}return t.pixelRatio},t.getIncludeStr=function(t){return null},t.createShaderCondition=function(t){var e="(function() {return "+t+";})";return Browser.window.eval(e)},t.fontMap=[],t.measureText=function(e,i){var n=t.hanzi.test(e);if(n&&t.fontMap[i])return t.fontMap[i];var s=Browser.context;s.font=i;var r=s.measureText(e);return n&&(t.fontMap[i]=r),r},t.getWebGLContext=function(t){},t.beginFlush=function(){},t.endFinish=function(){},t.addToAtlas=null,t.flashFlushImage=function(t){},t.drawToCanvas=function(t,e,i,n,s,r){var a=HTMLCanvas.create("2D"),o=new RenderContext(i,n,a);return RenderSprite.renders[e]._fun(t,o,s,r),a},t.createParticleTemplate2D=null,t.createGLTextur=null,t.createWebGLContext2D=null,t.changeWebGLSize=function(t,e){},t.createRenderSprite=function(t,e){return new RenderSprite(t,e)},t.createFilterAction=function(t){return new ColorFilterAction},t.createGraphics=function(){return new Graphics},t.clear=function(t){Render._context.ctx.clear()},t.clearAtlas=function(t){},t.addTextureToAtlas=function(t){},t.getTexturePixels=function(t,e,i,n,s){return null},t.skinAniSprite=function(){return null},__static(t,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),t}(),___Laya=function(){return __getset(1,Laya,"alertGlobalError",null,function(t){var e=0;t?Browser.window.onerror=function(t,i,n,s,r){e++<5&&r&&alert("出错啦，请把此信息截图给研发商\n"+t+"\n"+r.stack)}:Browser.window.onerror=null}),Laya.init=function(t,e,i){for(var n=[],s=2,r=arguments.length;r>s;s++)n.push(arguments[s]);if(!Laya._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=Laya._arrayBufferSlice),Laya._isinit=!0,Browser.__init__(),Context.__init__(),Graphics.__init__(),Laya.timer=new Timer,Laya.loader=new LoaderManager;for(var s=0,a=n.length;a>s;s++)n[s].enable&&n[s].enable();Font.__init__(),Style.__init__(),ResourceManager.__init__(),CacheManger.beginCheck(),Laya._currentStage=Laya.stage=new Stage,Laya.stage.conchModel&&Laya.stage.conchModel.setRootNode();var o=Browser.window.location,h=o.pathname;return h=":"==h.charAt(2)?h.substring(1):h,URL.rootPath=URL.basePath=URL.getPath("file:"==o.protocol?h:o.protocol+"//"+o.host+o.pathname),Laya.render=new Render(0,0),Laya.stage.size(t,e),RenderSprite.__init__(),KeyBoardManager.__init__(),MouseManager.instance.__init__(Laya.stage,Render.canvas),Input.__init__(),SoundManager.autoStopMusic=!0,LocalStorage.__init__(),Render.canvas}},Laya._arrayBufferSlice=function(t,e){var i=this,n=new Uint8Array(i,t,e-t),s=new Uint8Array(n.length);return s.set(n),s.buffer},Laya.stage=null,Laya.timer=null,Laya.loader=null,Laya.version="1.7.8beta",Laya.render=null,Laya._currentStage=null,Laya._isinit=!1,__static(Laya,["conchMarket",function(){return this.conchMarket=window.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=window.PlatformClass}]),Laya}(),App=function(){function t(){}return __class(t,"App"),t.init=function(){BindPackage.init(),t.dialog=new DialogManager,t.game=new GameControl(t.config.websocket),t.sdk=new WebSDK,t.sdk.init(Laya.stage)},t.dialog=null,t.debugMode=!1,t.sdk=null,t.game=null,t.player=null,__static(t,["events",function(){return this.events=new EventManager},"action",function(){return this.action=new Actions},"config",function(){return this.config=new ConfigUtil},"pool",function(){return this.pool=new GObjectPool},"splash",function(){return this.splash=new SplashScreen}]),t}(),GObject=function(){function t(){this.data=null,this.packageItem=null,this._x=0,this._y=0,this._alpha=1,this._rotation=0,this._visible=!0,this._touchable=!0,this._grayed=!1,this._draggable=!1,this._scaleX=1,this._scaleY=1,this._skewX=0,this._skewY=0,this._pivotX=0,this._pivotY=0,this._pivotAsAnchor=!1,this._pivotOffsetX=0,this._pivotOffsetY=0,this._sortingOrder=0,this._internalVisible=!0,this._handlingController=!1,this._focusable=!1,this._tooltips=null,this._pixelSnapping=!1,this._relations=null,this._group=null,this._gears=null,this._dragBounds=null,this._displayObject=null,this._yOffset=0,this.minWidth=0,this.minHeight=0,this.maxWidth=0,this.maxHeight=0,this.sourceWidth=0,this.sourceHeight=0,this.initWidth=0,this.initHeight=0,this._parent=null,this._width=0,this._height=0,this._rawWidth=0,this._rawHeight=0,this._id=null,this._name=null,this._underConstruct=!1,this._gearLocked=!1,this._sizePercentInGroup=0,this._touchDownPoint=null,this._id=""+fairygui.GObject._gInstanceCounter++,this._name="",this.createDisplayObject(),this._relations=new Relations(this),this._gears=__newvec(8,null)}__class(t,"fairygui.GObject");var e=t.prototype;return e.event=function(t,e){this._displayObject.event(t,e)},e.setXY=function(e,i){if(this._x!=e||this._y!=i){var n=e-this._x,s=i-this._y;this._x=e,this._y=i,this.handleXYChanged(),this instanceof fairygui.GGroup&&this.moveChildren(n,s),this.updateGear(1),!this._parent||this._parent instanceof fairygui.GList||(this._parent.setBoundsChangedFlag(),null!=this._group&&this._group.setBoundsChangedFlag(),this.displayObject.event("fui_xy_changed")),t.draggingObject!=this||t.sUpdateInDragging||this.localToGlobalRect(0,0,this.width,this.height,t.sGlobalRect)}},e.center=function(t){void 0===t&&(t=!1);var e;e=null!=this._parent?this.parent:this.root,this.setXY((e.width-this.width)/2,(e.height-this.height)/2),t&&(this.addRelation(e,3),this.addRelation(e,10))},e.setSize=function(t,e,i){if(void 0===i&&(i=!1),this._rawWidth!=t||this._rawHeight!=e){this._rawWidth=t,this._rawHeight=e,t<this.minWidth&&(t=this.minWidth),e<this.minHeight&&(e=this.minHeight),this.maxWidth>0&&t>this.maxWidth&&(t=this.maxWidth),this.maxHeight>0&&e>this.maxHeight&&(e=this.maxHeight);var n=t-this._width,s=e-this._height;this._width=t,this._height=e,this.handleSizeChanged(),0==this._pivotX&&0==this._pivotY||(this._pivotAsAnchor?this.applyPivot():(i||this.setXY(this.x-this._pivotX*n,this.y-this._pivotY*s),this.updatePivotOffset())),this instanceof fairygui.GGroup&&this.resizeChildren(n,s),this.updateGear(2),this._parent&&(this._relations.onOwnerSizeChanged(n,s,this._pivotAsAnchor||!i),this._parent.setBoundsChangedFlag(),null!=this._group&&this._group.setBoundsChangedFlag(!0)),this.displayObject.event("fui_size_changed")}},e.ensureSizeCorrect=function(){},e.setScale=function(t,e){this._scaleX==t&&this._scaleY==e||(this._scaleX=t,this._scaleY=e,this.handleScaleChanged(),this.applyPivot(),this.updateGear(2))},e.setSkew=function(t,e){this._skewX==t&&this._skewY==e||(this._skewX=t,this._skewY=e,null!=this._displayObject&&(this._displayObject.skew(-t,e),this.applyPivot()))},e.setPivot=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1),this._pivotX==t&&this._pivotY==e&&this._pivotAsAnchor==i||(this._pivotX=t,this._pivotY=e,this._pivotAsAnchor=i,this.updatePivotOffset(),this.handleXYChanged())},e.internalSetPivot=function(t,e,i){this._pivotX=t,this._pivotY=e,this._pivotAsAnchor=i,this._pivotAsAnchor&&this.handleXYChanged()},e.updatePivotOffset=function(){if(null!=this._displayObject)if(!this._displayObject.transform||0==this._pivotX&&0==this._pivotY)this._pivotOffsetX=0,this._pivotOffsetY=0;else{fairygui.GObject.sHelperPoint.x=this._pivotX*this._width,fairygui.GObject.sHelperPoint.y=this._pivotY*this._height;var t=this._displayObject.transform.transformPoint(fairygui.GObject.sHelperPoint);this._pivotOffsetX=this._pivotX*this._width-t.x,this._pivotOffsetY=this._pivotY*this._height-t.y}},e.applyPivot=function(){0==this._pivotX&&0==this._pivotY||(this.updatePivotOffset(),this.handleXYChanged())},e.requestFocus=function(){for(var t=this;t&&!t._focusable;)t=t.parent;null!=t&&(this.root.focus=t)},e.__rollOver=function(t){Laya.timer.once(100,this,this.__doShowTooltips)},e.__doShowTooltips=function(){var t=this.root;t&&this.root.showTooltips(this._tooltips)},e.__rollOut=function(t){Laya.timer.clear(this,this.__doShowTooltips),this.root.hideTooltips()},e.getGear=function(t){var e=this._gears[t];if(null==e){switch(t){case 0:e=new GearDisplay(this);break;case 1:e=new GearXY(this);break;case 2:e=new GearSize(this);break;case 3:e=new GearLook(this);break;case 4:e=new GearColor(this);break;case 5:e=new GearAnimation(this);break;case 6:e=new GearText(this);break;case 7:e=new GearIcon(this);break;default:throw new Error("FairyGUI: invalid gear index!")}this._gears[t]=e}return e},e.updateGear=function(t){if(!this._underConstruct&&!this._gearLocked){var e=this._gears[t];null!=e&&null!=e.controller&&e.updateState()}},e.checkGearController=function(t,e){return null!=this._gears[t]&&this._gears[t].controller==e},e.updateGearFromRelations=function(t,e,i){null!=this._gears[t]&&this._gears[t].updateFromRelations(e,i)},e.addDisplayLock=function(){var t=this._gears[0];if(t&&t.controller){var e=t.addLock();return this.checkGearDisplay(),e}return 0},e.releaseDisplayLock=function(t){var e=this._gears[0];e&&e.controller&&(e.releaseLock(t),this.checkGearDisplay())},e.checkGearDisplay=function(){if(!this._handlingController){var t=null==this._gears[0]||this._gears[0].connected;t!=this._internalVisible&&(this._internalVisible=t,this._parent&&this._parent.childStateChanged(this))}},e.addRelation=function(t,e,i){void 0===i&&(i=!1),this._relations.add(t,e,i)},e.removeRelation=function(t,e){void 0===e&&(e=0),this._relations.remove(t,e)},e.removeFromParent=function(){this._parent&&this._parent.removeChild(this)},e.dispose=function(){this.removeFromParent(),this._relations.dispose(),this._displayObject.destroy(),this._displayObject=null},e.onClick=function(t,e,i){this.on("click",t,e,i)},e.offClick=function(t,e){this.off("click",t,e)},e.hasClickListener=function(){return this._displayObject.hasListener("click")},e.on=function(t,e,i,n){this._displayObject.on(t,e,i,n)},e.off=function(t,e,i){this._displayObject.off(t,e,i)},e.startDrag=function(t){void 0===t&&(t=-1),null!=this._displayObject.stage&&this.dragBegin()},e.stopDrag=function(){this.dragEnd()},e.localToGlobal=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),this._pivotAsAnchor&&(t+=this._pivotX*this._width,e+=this._pivotY*this._height),i?(i.x=t,i.y=e,this._displayObject.localToGlobal(i,!1)):(i=fairygui.GObject.sHelperPoint,i.x=t,i.y=e,this._displayObject.localToGlobal(i,!0))},e.globalToLocal=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),i?(i.x=t,i.y=e,this._displayObject.globalToLocal(i,!1)):(i=fairygui.GObject.sHelperPoint,i.x=t,i.y=e,i=this._displayObject.globalToLocal(i,!0)),this._pivotAsAnchor&&(i.x-=this._pivotX*this._width,i.y-=this._pivotY*this._height),i},e.localToGlobalRect=function(t,e,i,n,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),null==s&&(s=new Rectangle);var r=this.localToGlobal(t,e);return s.x=r.x,s.y=r.y,r=this.localToGlobal(t+i,e+n),s.width=r.x-s.x,s.height=r.y-s.y,s},e.globalToLocalRect=function(t,e,i,n,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),null==s&&(s=new Rectangle);var r=this.globalToLocal(t,e);return s.x=r.x,s.y=r.y,r=this.globalToLocal(t+i,e+n),s.width=r.x-s.x,s.height=r.y-s.y,s},e.handleControllerChanged=function(t){this._handlingController=!0;for(var e=0;8>e;e++){var i=this._gears[e];null!=i&&i.controller==t&&i.apply()}this._handlingController=!1,this.checkGearDisplay()},e.createDisplayObject=function(){this._displayObject=new Sprite,this._displayObject.$owner=this},e.handleXYChanged=function(){var t=this._x,e=this._y+this._yOffset;this._pivotAsAnchor&&(t-=this._pivotX*this._width,e-=this._pivotY*this._height),this._pixelSnapping&&(t=Math.round(t),e=Math.round(e)),this._displayObject.pos(t+this._pivotOffsetX,e+this._pivotOffsetY)},e.handleSizeChanged=function(){null!=this._displayObject&&this._displayObject.size(this._width,this._height)},e.handleScaleChanged=function(){null!=this._displayObject&&this._displayObject.scale(this._scaleX,this._scaleY)},e.handleGrayedChanged=function(){this._displayObject&&(this._grayed?(null==t.grayFilter&&(t.grayFilter=new ColorFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])),this._displayObject.filters=[t.grayFilter]):this._displayObject.filters=null)},e.handleAlphaChanged=function(){this._displayObject&&(this._displayObject.alpha=this._alpha)},e.handleVisibleChanged=function(){this._displayObject&&(this._displayObject.visible=this.internalVisible2)},e.constructFromResource=function(){},e.setup_beforeAdd=function(t,e){t.seek(e,0),t.skip(5);var i=NaN,n=NaN;this._id=t.readS(),this._name=t.readS(),i=t.getInt32(),n=t.getInt32(),this.setXY(i,n),t.readBool()&&(this.initWidth=t.getInt32(),this.initHeight=t.getInt32(),this.setSize(this.initWidth,this.initHeight,!0)),t.readBool()&&(this.minWidth=t.getInt32(),this.maxWidth=t.getInt32(),this.minHeight=t.getInt32(),this.maxHeight=t.getInt32()),t.readBool()&&(i=t.getFloat32(),n=t.getFloat32(),this.setScale(i,n)),t.readBool()&&(i=t.getFloat32(),n=t.getFloat32(),this.setSkew(i,n)),t.readBool()&&(i=t.getFloat32(),n=t.getFloat32(),this.setPivot(i,n,t.readBool())),i=t.getFloat32(),1!=i&&(this.alpha=i),i=t.getFloat32(),0!=i&&(this.rotation=i),t.readBool()||(this.visible=!1),t.readBool()||(this.touchable=!1),t.readBool()&&(this.grayed=!0);var s=t.readByte();2==s&&(this.blendMode="lighter");var r=t.readByte();if(1==r){var a=new ColorMatrix;a.adjustBrightness(t.getFloat32()),a.adjustContrast(t.getFloat32()),a.adjustSaturation(t.getFloat32()),a.adjustHue(t.getFloat32());var o=new ColorFilter(a);this.filters=[o]}var h=t.readS();null!=h&&(this.data=h)},e.setup_afterAdd=function(t,e){t.seek(e,1);var i=t.readS();null!=i&&(this.tooltips=i);var n=t.getInt16();n>=0&&(this.group=this.parent.getChildAt(n)),t.seek(e,2);for(var s=t.getInt16(),r=0;s>r;r++){var a=t.getInt16();a+=t.pos;var o=this.getGear(t.readByte());o.setup(t),t.pos=a}},e.initDrag=function(){this._draggable?this.on("mousedown",this,this.__begin):this.off("mousedown",this,this.__begin)},e.dragBegin=function(){null!=fairygui.GObject.draggingObject&&fairygui.GObject.draggingObject.stopDrag(),fairygui.GObject.sGlobalDragStart.x=Laya.stage.mouseX,fairygui.GObject.sGlobalDragStart.y=Laya.stage.mouseY,this.localToGlobalRect(0,0,this.width,this.height,fairygui.GObject.sGlobalRect),fairygui.GObject.draggingObject=this,Laya.stage.on("mousemove",this,this.__moving2),Laya.stage.on("mouseup",this,this.__end2)},e.dragEnd=function(){fairygui.GObject.draggingObject==this&&(Laya.stage.off("mousemove",this,this.__moving2),Laya.stage.off("mouseup",this,this.__end2),fairygui.GObject.draggingObject=null),fairygui.GObject.sDraggingQuery=!1},e.reset=function(){Laya.stage.off("mousemove",this,this.__moving),Laya.stage.off("mouseup",this,this.__end)},e.__begin=function(){null==this._touchDownPoint&&(this._touchDownPoint=new Point),this._touchDownPoint.x=Laya.stage.mouseX,this._touchDownPoint.y=Laya.stage.mouseY,Laya.stage.on("mousemove",this,this.__moving),Laya.stage.on("mouseup",this,this.__end)},e.__end=function(){this.reset()},e.__moving=function(t){var e=UIConfig$1.touchDragSensitivity;null!=this._touchDownPoint&&Math.abs(this._touchDownPoint.x-Laya.stage.mouseX)<e&&Math.abs(this._touchDownPoint.y-Laya.stage.mouseY)<e||(this.reset(),fairygui.GObject.sDraggingQuery=!0,Events.dispatch("fui_drag_start",this._displayObject,t),fairygui.GObject.sDraggingQuery&&this.dragBegin())},e.__moving2=function(e){var i=Laya.stage.mouseX-fairygui.GObject.sGlobalDragStart.x+fairygui.GObject.sGlobalRect.x,n=Laya.stage.mouseY-fairygui.GObject.sGlobalDragStart.y+fairygui.GObject.sGlobalRect.y;if(null!=this._dragBounds){var s=GRoot.inst.localToGlobalRect(this._dragBounds.x,this._dragBounds.y,this._dragBounds.width,this._dragBounds.height,fairygui.GObject.sDragHelperRect);i<s.x?i=s.x:i+fairygui.GObject.sGlobalRect.width>s.right&&(i=s.right-fairygui.GObject.sGlobalRect.width,i<s.x&&(i=s.x)),n<s.y?n=s.y:n+fairygui.GObject.sGlobalRect.height>s.bottom&&(n=s.bottom-fairygui.GObject.sGlobalRect.height,n<s.y&&(n=s.y))}t.sUpdateInDragging=!0;var r=this.parent.globalToLocal(i,n,fairygui.GObject.sHelperPoint);this.setXY(Math.round(r.x),Math.round(r.y)),t.sUpdateInDragging=!1,Events.dispatch("fui_drag_move",this._displayObject,e)},e.__end2=function(t){fairygui.GObject.draggingObject==this&&(this.stopDrag(),Events.dispatch("fui_drag_end",this._displayObject,t))},__getset(0,e,"yMin",function(){return this._pivotAsAnchor?this._y-this._height*this._pivotY:this._y},function(t){this._pivotAsAnchor?this.setXY(this._x,t+this._height*this._pivotY):this.setXY(this._x,t)}),__getset(0,e,"id",function(){return this._id}),__getset(0,e,"dataSource",function(){return this.data},function(t){this.data=t}),__getset(0,e,"gearXY",function(){return this.getGear(1)}),__getset(0,e,"xMin",function(){return this._pivotAsAnchor?this._x-this._width*this._pivotX:this._x},function(t){this._pivotAsAnchor?this.setXY(t+this._width*this._pivotX,this._y):this.setXY(t,this._y)}),__getset(0,e,"scale",function(){return this.scaleX},function(t){this.setScale(t,t)}),__getset(0,e,"name",function(){return this._name},function(t){this._name=t}),__getset(0,e,"resourceURL",function(){return null!=this.packageItem?"ui://"+this.packageItem.owner.id+this.packageItem.id:null}),__getset(0,e,"onStage",function(){return null!=this._displayObject&&null!=this._displayObject.stage}),__getset(0,e,"autoAlpha",function(){return this.alpha},function(t){this.alpha=t,this.visible=t>0}),__getset(0,e,"x",function(){return this._x},function(t){this.setXY(t,this._y)}),__getset(0,e,"draggable",function(){return this._draggable},function(t){this._draggable!=t&&(this._draggable=t,this.initDrag())}),__getset(0,e,"y",function(){return this._y},function(t){this.setXY(this._x,t)}),__getset(0,e,"pixelSnapping",function(){return this._pixelSnapping},function(t){this._pixelSnapping!=t&&(this._pixelSnapping=t,this.handleXYChanged())}),__getset(0,e,"rotation",function(){return this._rotation},function(t){this._rotation!=t&&(this._rotation=t,null!=this._displayObject&&(this._displayObject.rotation=this.normalizeRotation,this.applyPivot()),this.updateGear(3))}),__getset(0,e,"width",function(){return this.ensureSizeCorrect(),this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect(),this._width},function(t){this.setSize(t,this._rawHeight)}),__getset(0,e,"height",function(){return this.ensureSizeCorrect(),this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect(),this._height},function(t){this.setSize(this._rawWidth,t)}),__getset(0,e,"asButton",function(){return this}),__getset(0,e,"actualWidth",function(){return this.width*Math.abs(this._scaleX)}),__getset(0,e,"actualHeight",function(){return this.height*Math.abs(this._scaleY)}),__getset(0,e,"blendMode",function(){return this._displayObject.blendMode},function(t){this._displayObject.blendMode=t}),__getset(0,e,"scaleX",function(){return this._scaleX},function(t){this.setScale(t,this._scaleY)}),__getset(0,e,"scaleY",function(){return this._scaleY},function(t){this.setScale(this._scaleX,t)}),__getset(0,e,"skewX",function(){return this._skewX},function(t){this.setSkew(t,this._skewY)}),__getset(0,e,"skewY",function(){return this._skewY},function(t){this.setSkew(this._skewX,t)}),__getset(0,e,"pivotAsAnchor",function(){return this._pivotAsAnchor}),__getset(0,e,"pivotX",function(){return this._pivotX},function(t){this.setPivot(t,this._pivotY)}),__getset(0,e,"asTextInput",function(){return this}),__getset(0,e,"asLoader",function(){return this}),__getset(0,e,"pivotY",function(){return this._pivotY},function(t){this.setPivot(this._pivotX,t)}),__getset(0,e,"displayObject",function(){return this._displayObject}),__getset(0,e,"normalizeRotation",function(){var t=this._rotation%360;return t>180?t-=360:-180>t&&(t=360+t),t}),__getset(0,e,"touchable",function(){return this._touchable},function(t){if(this._touchable!=t){if(this._touchable=t,this.updateGear(3),this instanceof fairygui.GImage||this instanceof fairygui.GMovieClip||this instanceof fairygui.GTextField&&!(this instanceof fairygui.GTextInput)&&!(this instanceof fairygui.GRichTextField))return;null!=this._displayObject&&(this._displayObject.mouseEnabled=this._touchable)}}),__getset(0,e,"alpha",function(){return this._alpha},function(t){this._alpha!=t&&(this._alpha=t,this.handleAlphaChanged(),this.updateGear(3))}),__getset(0,e,"grayed",function(){return this._grayed},function(t){this._grayed!=t&&(this._grayed=t,this.handleGrayedChanged(),this.updateGear(3))}),__getset(0,e,"asProgress",function(){return this}),__getset(0,e,"enabled",function(){return!this._grayed&&this._touchable},function(t){this.grayed=!t,this.touchable=t}),__getset(0,e,"sortingOrder",function(){return this._sortingOrder},function(t){if(0>t&&(t=0),this._sortingOrder!=t){var e=this._sortingOrder;this._sortingOrder=t,null!=this._parent&&this._parent.childSortingOrderChanged(this,e,this._sortingOrder)}}),__getset(0,e,"visible",function(){return this._visible},function(t){this._visible!=t&&(this._visible=t,this.handleVisibleChanged(),this._parent&&this._parent.setBoundsChangedFlag())}),__getset(0,e,"internalVisible",function(){return this._internalVisible&&(!this._group||this._group.internalVisible)&&!this._displayObject._$P.maskParent}),__getset(0,e,"internalVisible2",function(){return this._visible&&(!this._group||this._group.internalVisible2)}),__getset(0,e,"icon",function(){return null},function(t){}),__getset(0,e,"asGraph",function(){return this}),__getset(0,e,"gearSize",function(){return this.getGear(2)}),__getset(0,e,"focusable",function(){return this._focusable},function(t){this._focusable=t}),__getset(0,e,"focused",function(){return this.root.focus==this}),__getset(0,e,"tooltips",function(){return this._tooltips},function(t){this._tooltips&&(this.off("mouseover",this,this.__rollOver),this.off("mouseout",this,this.__rollOut)),this._tooltips=t,this._tooltips&&(this.on("mouseover",this,this.__rollOver),this.on("mouseout",this,this.__rollOut))}),__getset(0,e,"group",function(){return this._group},function(t){this._group!=t&&(null!=this._group&&this._group.setBoundsChangedFlag(!0),this._group=t,null!=this._group&&this._group.setBoundsChangedFlag(!0))}),__getset(0,e,"filters",function(){return this._displayObject.filters},function(t){this._displayObject.filters=t}),__getset(0,e,"inContainer",function(){return null!=this._displayObject&&null!=this._displayObject.parent}),__getset(0,e,"root",function(){if(this instanceof fairygui.GRoot)return this;for(var t=this._parent;t;){if(t instanceof fairygui.GRoot)return t;t=t.parent}return GRoot.inst}),__getset(0,e,"gearLook",function(){return this.getGear(3)}),__getset(0,e,"asCom",function(){return this}),__getset(0,e,"relations",function(){return this._relations}),__getset(0,e,"parent",function(){return this._parent},function(t){this._parent=t}),__getset(0,e,"asLabel",function(){return this}),__getset(0,e,"asTextField",function(){return this}),__getset(0,e,"asImage",function(){return this}),__getset(0,e,"asGroup",function(){return this}),__getset(0,e,"asRichTextField",function(){return this}),__getset(0,e,"asList",function(){return this}),__getset(0,e,"asSlider",function(){return this}),__getset(0,e,"asComboBox",function(){return this}),__getset(0,e,"asMovieClip",function(){return this}),__getset(0,e,"text",function(){return null},function(t){}),__getset(0,e,"dragBounds",function(){return this._dragBounds},function(t){this._dragBounds=t}),__getset(0,e,"dragging",function(){return fairygui.GObject.draggingObject==this}),t.cast=function(t){return t.$owner},t.draggingObject=null,t._gInstanceCounter=0,t.grayFilter=null,t.sDraggingQuery=!1,t.sUpdateInDragging=!1,__static(t,["sGlobalDragStart",function(){return this.sGlobalDragStart=new Point},"sGlobalRect",function(){return this.sGlobalRect=new Rectangle},"sHelperPoint",function(){return this.sHelperPoint=new Point},"sDragHelperRect",function(){return this.sDragHelperRect=new Rectangle}]),t}(),GameVideo=function(){function t(){this.objPlayer=null,this.objVideo=null,this.isMuted=!1,this.isMuted=App.config.getCache("muted")||!1}__class(t,"com.emugif.camera.game.gamefront.camera.GameVideo");var e=t.prototype;return e.close=function(){this.closeVideo()},e.show=function(t){this.showVideo(t)},e.pause=function(){this.objVideo&&this.objVideo.pause()},e.play=function(){this.objVideo&&this.objVideo.play()},e.rotate=function(t){var e=Browser.document.body.clientWidth,i=Browser.document.body.clientHeight;t?(this.objVideo.style.width=i+"px",this.objVideo.style.height=e+"px",this.objVideo.style.transform="rotate(90deg)",this.objVideo.style.position="absolute",this.objVideo.style.left=(e-i)/2+"px",this.objVideo.style.top=(i-e)/2+"px"):(this.objVideo.style.width="100%",this.objVideo.style.height="100%",this.objVideo.style.transform="",this.objVideo.style.position="",this.objVideo.style.left="",this.objVideo.style.top="")},e.showVideo=function(t){this.closeVideo(),!Browser.onSafari||Browser.onGameWebView||Browser.onWX||(this.isMuted=!0),this.objVideo=Browser.document.getElementById("GameVideo"),this.objVideo.muted=this.isMuted,this.objVideo.style.display="block";var e={};e.element=this.objVideo,e.customerID="bjweimiao",e.listener=this.onVideoEvent,this.objPlayer=Browser.window.wsrtcplayer.createWSRTCPlayer(e),this.objPlayer&&(this.objVideo.addEventListener("loadedmetadata",this.onVideoMetaData),this.objPlayer.open(App.config.liveurl.replace("%MACHINESN%",t)))},e.closeVideo=function(){this.objPlayer&&(this.objPlayer.close(),this.objPlayer.destory(),this.objPlayer=null),this.objVideo&&(this.objVideo.removeEventListener("loadedmetadata",this.onVideoMetaData),this.objVideo.pause(),this.objVideo.src="",this.objVideo.load(),this.objVideo.style.display="none")},e.onVideoEvent=function(t,e){console.log("=====================onVideoEvent==================",t,e)},e.onVideoMetaData=function(){if(this.objVideo){console.log("=====================onVideoMetaData================",this.objVideo.videoWidth,this.objVideo.videoHeight);this.objVideo.videoWidth/this.objVideo.videoHeight}},__getset(0,e,"muted",function(){return this.isMuted},function(t){this.objVideo&&(this.objVideo.muted=t),this.isMuted=t,App.config.setCache("muted",t)}),t}(),Event=function(){function t(){}__class(t,"laya.events.Event");var e=t.prototype;return e.setTo=function(t,e,i){return this.type=t,this.currentTarget=e,this.target=i,this},e.stopPropagation=function(){this._stoped=!0},__getset(0,e,"stageY",function(){return Laya.stage.mouseY}),__getset(0,e,"charCode",function(){return this.nativeEvent.charCode}),__getset(0,e,"touches",function(){var t=this.nativeEvent.touches;if(t)for(var e=Laya.stage,i=0,n=t.length;n>i;i++){var s=t[i],r=Point.TEMP;r.setTo(s.clientX,s.clientY),e._canvasTransform.invertTransformPoint(r),
e.transform.invertTransformPoint(r),s.stageX=r.x,s.stageY=r.y}return t}),__getset(0,e,"keyLocation",function(){return this.nativeEvent.keyLocation}),__getset(0,e,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),__getset(0,e,"altKey",function(){return this.nativeEvent.altKey}),__getset(0,e,"shiftKey",function(){return this.nativeEvent.shiftKey}),__getset(0,e,"stageX",function(){return Laya.stage.mouseX}),t.EMPTY=new t,t.MOUSE_DOWN="mousedown",t.MOUSE_UP="mouseup",t.CLICK="click",t.RIGHT_MOUSE_DOWN="rightmousedown",t.RIGHT_MOUSE_UP="rightmouseup",t.RIGHT_CLICK="rightclick",t.MOUSE_MOVE="mousemove",t.MOUSE_OVER="mouseover",t.MOUSE_OUT="mouseout",t.MOUSE_WHEEL="mousewheel",t.ROLL_OVER="mouseover",t.ROLL_OUT="mouseout",t.DOUBLE_CLICK="doubleclick",t.CHANGE="change",t.CHANGED="changed",t.RESIZE="resize",t.ADDED="added",t.REMOVED="removed",t.DISPLAY="display",t.UNDISPLAY="undisplay",t.ERROR="error",t.COMPLETE="complete",t.LOADED="loaded",t.PROGRESS="progress",t.INPUT="input",t.RENDER="render",t.OPEN="open",t.MESSAGE="message",t.CLOSE="close",t.KEY_DOWN="keydown",t.KEY_PRESS="keypress",t.KEY_UP="keyup",t.FRAME="enterframe",t.DRAG_START="dragstart",t.DRAG_MOVE="dragmove",t.DRAG_END="dragend",t.ENTER="enter",t.SELECT="select",t.BLUR="blur",t.FOCUS="focus",t.VISIBILITY_CHANGE="visibilitychange",t.FOCUS_CHANGE="focuschange",t.PLAYED="played",t.PAUSED="paused",t.STOPPED="stopped",t.START="start",t.END="end",t.ENABLE_CHANGED="enablechanged",t.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",t.COMPONENT_ADDED="componentadded",t.COMPONENT_REMOVED="componentremoved",t.LAYER_CHANGED="layerchanged",t.HIERARCHY_LOADED="hierarchyloaded",t.RECOVERING="recovering",t.RECOVERED="recovered",t.RELEASED="released",t.LINK="link",t.LABEL="label",t.FULL_SCREEN_CHANGE="fullscreenchange",t.DEVICE_LOST="devicelost",t.MESH_CHANGED="meshchanged",t.MATERIAL_CHANGED="materialchanged",t.RENDERQUEUE_CHANGED="renderqueuechanged",t.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",t.ANIMATION_CHANGED="animationchanged",t}(),WebSDK=function(){function t(){this.strUserid=null,this.strUsername=null,this.strPassword=null,this.failedHandler=null,this.guestHandler=null,this.btnUserInfo=null,this.objShare=null,this.objCurrentAD=null,this.objVideoAD=null,this.arrShareInfo=null,this.objTrigger=null,this.openDataContext=null,this.objTrigger=new Object}__class(t,"com.emugif.camera.plugin.sdk.web.WebSDK");var e=t.prototype;return e.init=function(t){var e=this,i={};if(i.withShareTicket=!0,Browser.window.alerCallback||(Browser.window.alerCallback=function(t){try{var e=JSON.parse(t);"paySuccess"==e.action?(App.dialog.closeModalWait(),App.player.update()):(console.log("发送消息: "+e.action),App.events.dispatch(e.action))}catch(i){App.dialog.alert(i.message)}}),Browser.onWX){var n="xi";Browser.window["Wei"+n+"nJSBridge"]?this.doPlay():Browser.document.addEventListener("Wei"+n+"nJSBridgeReady",function(){e.doPlay()},!1)}else Browser.onGameWebView?this.doPlay():this.doPlay()},e.showBannerAD=function(t){},e.initVideoAD=function(t){},e.showVideoAD=function(t){},e.onShareInfo=function(t){this.arrShareInfo=t},e.setDebugMode=function(t){void 0===t&&(t=1),console.log("setDebugMode: "+t)},e.buy=function(t){Browser.window.webkit&&(Browser.window.webkit.messageHandlers.call.postMessage({action:"buyItem",data:t}),App.dialog.showModalWait("正在支付")),console.log("购买商品: ",t)},e.postMessage=function(t,e){this.openDataContext&&this.openDataContext.postMessage({action:t,data:e})},e.setClipboard=function(t,e){void 0===e&&(e="air:text");try{}catch(i){}},e.share=function(t,e){return!0},e.exit=function(t,e){void 0===t&&(t=!1),void 0===e&&(e="exitGame"),Browser.window.webkit?(t&&App.dialog.showModalWait("退出游戏"),Browser.window.webkit.messageHandlers.call.postMessage({action:e})):(t&&App.dialog.showModalWait("退出游戏"),console.log("cmd"),App.dialog.setScreenRotate(!1,!1),App.dialog.closeAll(),App.dialog.closeAll(!1))},e.showToast=function(t){},e.setTrigger=function(t,e){var i=Utils.getCache(e)||[];i.push((new Date).getTime()),Utils.setCache(e,i,!1),Utils.setCache("last_counttype:"+t,"times_shared"==e?1:2)},e.getConst=function(t){var e=this.objTrigger[t];return e?e.desc:""},e.doPlay=function(){if(Browser.onWX){var t="xi";Browser.window["Wei"+t+"nJSBridge"].invoke("getNetworkType",{},function(t){Browser.document.getElementById("GameVideo").src=App.config.cdn+"game/libs/blank.mp4"})}else Browser.onGameWebView?Browser.document.getElementById("GameVideo").src=App.config.cdn+"game/libs/blank.mp4":Browser.document.getElementById("GameVideo").src=App.config.cdn+"game/libs/blank.mp4"},e.countTimes=function(t){var e=Utils.getCache(t);return e?e.length:0},e.parseTrigger=function(t){this.objTrigger=new Object;for(var e=0;e<t.length;e++)this.objTrigger[t[e].code]=t[e]},e.gotoMore=function(t){},__getset(0,e,"applicationVersion",function(){return getVersion()}),__getset(0,e,"applicationName",function(){return"星球大作战"}),__getset(0,e,"applicationID",function(){return"com.emugif.camerah5"}),__getset(0,e,"gameId",function(){return"popslime"}),t.BONUS_LEVELUP="bonus_levelup",t.BUY_NOITEM="buy_noitem",t.BUY_GAMEOVER="buy_gameover",t.SHARE_MODE1RANK="share_mode1rank",t.CONST_AD_TITLE="const_ad_title",t.CONST_AD_GAME="const_ad_game",t.CONST_AD_VIDEO="const_ad_video",t.CONST_APP_TITLE="const_app_title",t.TIMES_SHARED="times_shared",t.TIMES_WATCHED="times_watched",t.LAST_COUNTTYPE="last_counttype",t.TYPE_NONE=0,t.TYPE_SHARE=1,t.TYPE_VIDEO=2,t}(),Actions=function(){function t(){this.auth=null,this.user=null,this.sys=null,this.room=null,this.event=null;var t=App.config.gateway+"",e=new RestConnection(t);this.auth=new AuthAction(e),this.user=new UserAction(e),this.sys=new SystemAction(e),this.room=new RoomAction(e),this.event=new EventAction(e)}return __class(t,"com.emugif.camera.service.action.Actions"),t}(),AuthAction=function(){function t(t){this.connection=null,this.connection=t}__class(t,"com.emugif.camera.service.action.AuthAction");var e=t.prototype;return e.login=function(t,e,i,n,s){var r={};r.mobile=t,r.code=e,r.platform=i,this.connection.load("/login",r,n,s,"POST")},e.register=function(t,e,i,n,s){var r={};r.nickName=t,r.avatarUrl=e,r.sex=i,this.connection.load("mobileBind",r,n,s,"POST")},e.captcha=function(t,e,i){var n={};n.mobile=t,this.connection.load("/mobile/captcha",n,e,i,"POST")},e.realAuth=function(t,e,i,n){var s={};s.name=t,s.card=e,this.connection.load("/user/name/auth",s,i,n,"POST")},e.edit=function(t,e,i,n){void 0===e&&(e="");var s={};t&&(s.nickname=t),e&&(s.avatar=e),this.connection.load("/user/edit",s,i,n,"POST")},e.inviteCode=function(t,e,i){var n={};n.code=t,this.connection.load("/invite/code",n,e,i,"POST")},e.cancel=function(t,e){this.connection.load("/member/cancel/v2",null,t,e,"POST")},t}(),EventAction=function(){function t(t){this.connection=null,this.connection=t}__class(t,"com.emugif.camera.service.action.EventAction");var e=t.prototype;return e.signList=function(t,e){this.connection.load("/signList/v2",null,t,e,"GET")},e.sign=function(t,e){this.connection.load("/sign/v2",null,t,e,"POST")},e.taskList=function(t,e){this.connection.load("/task/space/list",null,t,e,"GET")},e.taskReceive=function(t,e,i,n){var s={};s.taskKey=t,s.childId=e,this.connection.load("/task/space/receive",s,i,n,"GET")},e.medalList=function(t,e){this.connection.load("/space/medal/list",null,t,e,"GET")},e.metalReceive=function(t,e,i){var n={};n.id=t,this.connection.load("/space/medal/receive",n,e,i,"GET")},t}(),RoomAction=function(){function t(t){this.connection=null,this.connection=t}__class(t,"com.emugif.camera.service.action.RoomAction");var e=t.prototype;return e.groupList=function(t,e){this.connection.load("/room/group/list/V2",null,t,e,"GET")},e.list=function(t,e,i,n,s,r){void 0===e&&(e=""),void 0===i&&(i=0),void 0===n&&(n=20);var a={};a.groupId=t,a.page=i,a.size=n,this.connection.load("/room/list",a,s,r,"GET")},e.enter=function(t,e,i,n){void 0===n&&(n=!0);var s={};s.roomId=t,this.connection.load("/room/enter/v2",s,e,i,"POST",n)},e.report=function(t,e,i){var n={};n.machineSn=t,n.warningStatus=1,this.connection.load("/machine/warning",n,e,i,"POST")},t.ITEM_ADD="add",t.ITEM_REDUCE="reduce",t}(),SystemAction=function(){function t(t){this.connection=null,this.connection=t}__class(t,"com.emugif.camera.service.action.SystemAction");var e=t.prototype;return e.scoreRank=function(t,e){this.connection.load("/summary/rank/point/v2",null,t,e,"GET")},e.chargeRank=function(t,e){this.connection.load("/summary/rank/diamond/v2",null,t,e,"GET")},e.chargeList=function(t,e,i){var n={};n.type=t,this.connection.load("/charge/list/channel/v3",n,e,i,"GET")},e.charge=function(t,e,i,n){var s={};s.productId=t,s.returnUrl=e,this.connection.load("/charge/a"+String("L").toLowerCase()+"i/buy/v2",s,i,n,"POST")},e.exchangeCoinList=function(t,e){this.connection.load("/pm/option",null,t,e,"GET")},e.exchangeDiamondList=function(t,e){this.connection.load("/pm/diamondOption",null,t,e,"GET")},e.exchangeCoin=function(t,e,i){var n={};n.optionId=t,this.connection.load("/pm/exchange/coin",n,e,i,"POST")},e.exchangeDiamond=function(t,e,i){var n={};n.optionId=t,this.connection.load("/pm/exchange/diamond",n,e,i,"POST")},e.uploadImage=function(t,e,i){var n={};n.image=t,this.connection.load("/upload/image",n,e,i,"FILE")},t}(),UserAction=function(){function t(t){this.connection=null,this.connection=t}__class(t,"com.emugif.camera.service.action.UserAction");var e=t.prototype;return e.info=function(t,e,i){void 0===i&&(i=!1),this.connection.load("/user/info/v2",null,t,e,"GET",i)},e.logList=function(t,e,i){var n={};n.type=t,this.connection.load("/doll/log",n,e,i,"GET")},e.logInfo3=function(t,e,i){var n={};n.id=t,this.connection.load("/doll/log/info",n,e,i,"GET")},e.logInfo4=function(t,e,i){var n={};n.id=t,this.connection.load("/doll/settle/info",n,e,i,"GET")},e.billList=function(t,e,i,n){var s={};s.source=t,s.type=e,this.connection.load("/doll/money/source/list",s,i,n,"GET")},e.dollList=function(t,e){this.connection.load("/doll/log",null,t,e,"GET")},e.appealList=function(t,e){var i={};this.connection.load("/doll/appeal/log",i,t,e,"GET")},e.appealInfo=function(t,e,i){var n={};n.id=t,this.connection.load("/doll/appeal/info",n,e,i,"GET")},e.appeal3=function(t,e,i,n,s){var r={};r.id=t,r.reason=e,r.type=i,this.connection.load("/doll/appeal/v15",r,n,s,"POST")},e.appeal4=function(t,e,i,n){var s={};s.id=t,s.reason=e,this.connection.load("/doll/settle/appeal",s,i,n,"POST")},t.ITEM_ADD="add",t.ITEM_REDUCE="reduce",t}(),EventDispatcher=function(){function t(){this._events=null}var e;__class(t,"laya.events.EventDispatcher");var i=t.prototype;return i.hasListener=function(t){var e=this._events&&this._events[t];return!!e},i.event=function(t,e){if(!this._events||!this._events[t])return!1;var i=this._events[t];if(i.run)i.once&&delete this._events[t],null!=e?i.runWith(e):i.run();else{for(var n=0,s=i.length;s>n;n++){var r=i[n];r&&(null!=e?r.runWith(e):r.run()),r&&!r.once||(i.splice(n,1),n--,s--)}0===i.length&&this._events&&delete this._events[t]}return!0},i.on=function(t,e,i,n){return this._createListener(t,e,i,n,!1)},i.once=function(t,e,i,n){return this._createListener(t,e,i,n,!0)},i._createListener=function(t,i,n,s,r,a){void 0===a&&(a=!0),a&&this.off(t,i,n,r);var o=e.create(i||this,n,s,r);this._events||(this._events={});var h=this._events;return h[t]?h[t].run?h[t]=[h[t],o]:h[t].push(o):h[t]=o,this},i.off=function(t,e,i,n){if(void 0===n&&(n=!1),!this._events||!this._events[t])return this;var s=this._events[t];if(null!=i)if(s.run)e&&s.caller!==e||s.method!==i||n&&!s.once||(delete this._events[t],s.recover());else{for(var r=0,a=0,o=s.length;o>a;a++){var h=s[a];!h||e&&h.caller!==e||h.method!==i||n&&!h.once||(r++,s[a]=null,h.recover())}r===o&&delete this._events[t]}return this},i.offAll=function(t){var e=this._events;if(!e)return this;if(t)this._recoverHandlers(e[t]),delete e[t];else{for(var i in e)this._recoverHandlers(e[i]);this._events=null}return this},i._recoverHandlers=function(t){if(t)if(t.run)t.recover();else for(var e=t.length-1;e>-1;e--)t[e]&&(t[e].recover(),t[e]=null)},i.isMouseEvent=function(e){return t.MOUSE_EVENTS[e]},t.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},t.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0}),e=function(t){function e(t,i,n,s){e.__super.call(this,t,i,n,s)}__class(e,"",t);var i=e.prototype;return i.recover=function(){this._id>0&&(this._id=0,e._pool.push(this.clear()))},e.create=function(t,i,n,s){return void 0===s&&(s=!0),e._pool.length?e._pool.pop().setTo(t,i,n,s):new e(t,i,n,s)},e._pool=[],e}(Handler)},t}(),Handler=function(){function t(t,e,i,n){this.once=!1,this._id=0,void 0===n&&(n=!1),this.setTo(t,e,i,n)}__class(t,"laya.utils.Handler");var e=t.prototype;return e.setTo=function(e,i,n,s){return this._id=t._gid++,this.caller=e,this.method=i,this.args=n,this.once=s,this},e.run=function(){if(null==this.method)return null;var t=this._id,e=this.method.apply(this.caller,this.args);return this._id===t&&this.once&&this.recover(),e},e.runWith=function(t){if(null==this.method)return null;var e=this._id;if(null==t)var i=this.method.apply(this.caller,this.args);else i=this.args||t.unshift?this.args?this.method.apply(this.caller,this.args.concat(t)):this.method.apply(this.caller,t):this.method.call(this.caller,t);return this._id===e&&this.once&&this.recover(),i},e.clear=function(){return this.caller=null,this.method=null,this.args=null,this},e.recover=function(){this._id>0&&(this._id=0,t._pool.push(this.clear()))},t.create=function(e,i,n,s){return void 0===s&&(s=!0),t._pool.length?t._pool.pop().setTo(e,i,n,s):new t(e,i,n,s)},t._pool=[],t._gid=1,t}(),PlayerVO=function(){function t(){this.mobile=NaN,this.gender=NaN,this.authStatus=NaN,this.isSign=NaN,this.avatar=null,this.hxId=null,this.hxPwd=null,this.inviteCode=null,this.aliasId=null,this.angelPoints=NaN,this.type=NaN,this.showCoin=NaN,this.account=null,this.nickname=null,this.memberId=NaN,this.memberLevelDto=null,this.points=NaN,this.registerTime=null,this.accessToken=null,this.refreshToken=null,this.expireTime=NaN}__class(t,"com.emugif.camera.service.PlayerVO");var e=t.prototype;return e.parse=function(t){if(!t||t instanceof Array||"string"==typeof t||!isNaN(t))return null;var e=this;return e.mobile=this.parseNum(t.mobile),e.gender=this.parseNum(t.gender),e.authStatus=this.parseNum(t.authStatus),e.avatar=this.parseStr(t.avatar),e.hxId=this.parseStr(t.hxId),e.hxPwd=this.parseStr(t.hxPwd),e.inviteCode=this.parseStr(t.inviteCode),e.aliasId=this.parseStr(t.aliasId),e.angelPoints=this.parseNum(t.angelPoints),e.type=this.parseNum(t.type),e.showCoin=1==App.config.coinType?this.parseNum(t.money):this.parseNum(t.goldCoin),e.account=this.parseStr(t.account),e.nickname=this.parseStr(t.nickname),e.points=this.parseNum(t.points),e.memberId=this.parseNum(t.memberId),e.isSign=this.parseNum(t.isSign),e.registerTime=this.parseStr(t.registerTime),e.memberLevelDto=t.memberLevelDto,t.accessToken?(e.accessToken=this.parseStr(t.accessToken.accessToken),e.refreshToken=this.parseStr(t.accessToken.refreshToken),e.expireTime=this.parseNum(t.accessToken.expireTime)):(e.accessToken="",e.refreshToken="",e.expireTime=-1),e},e.isAuth=function(t){return void 0===t&&(t=!1),App.config.needAuth?Browser.onGameWebView?!0:1==this.authStatus?!0:(t&&App.dialog.showPanel(RealAuthView),!1):!0},e.charge=function(t){void 0===t&&(t=0),this.isAuth(!0)&&(1==t?App.dialog.showPanel(ShopBuyLifeNewView,0):App.dialog.showPanel(ShopBuyCoinView))},e.exchange=function(t){void 0===t&&(t=0),this.isAuth(!0)&&(1==t?App.dialog.showPanel(ShopBuyLifeNewView,1):App.dialog.showPanel(ShopBuyLifeView))},e.enterRoom=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!0),App.action.room.enter(t,Handler.create(this,this.onRoomEnter,[e]),Handler.create(this,this.onRoomError,[e]),i)},e.update=function(t){App.action.user.info(Handler.create(this,this.onUpdateComplete,[t]))},e.parseNum=function(t){return void 0==t||isNaN(t)?NaN:Number(t)},e.parseStr=function(t){return void 0==t||null==t?t:String(t)},e.parseBool=function(t){return void 0==t||null==t?!1:Boolean(t)},e.onRoomEnter=function(t,e){e&&(t&&(e.groupId=t),1==e.type?App.dialog.showPanel(GameCamera1View,e):3==e.type?App.dialog.showPanel(GameCamera3View,e):4==e.type?App.dialog.showPanel(GameCamera4View,e):App.dialog.alert("游戏尚未支持操作"))},e.onRoomError=function(t,e){if(t)var i=Handler.create(App.dialog,App.dialog.showPanel,[RoomListView,{id:t}]);else i=Handler.create(App.dialog,App.dialog.showPanel,[GameFrontView]);App.dialog.alert(e?e.errMsg||"进入房间错误":"进入房间错误",i)},e.onUpdateComplete=function(t,e){this.parse(e),t&&t.run(),App.events.dispatch("updatecache")},t}(),EventManager=function(){function t(){this.objEvent=new Object,this.arrEvents=[],this.objEvent=new Object,this.arrEvents=[]}__class(t,"com.emugif.core.global.EventManager");var e=t.prototype;return e.add=function(t,e,i){this.objEvent[t]||(this.objEvent[t]=[]);for(var n=0;n<this.objEvent[t].length;n++){var s=this.objEvent[t][n];if(s.method==i&&s.caller==e)return}this.objEvent[t].push(new Handler(e,i))},e.remove=function(t,e,i){if(this.objEvent[t])for(var n=0;n<this.objEvent[t].length;n++){var s=this.objEvent[t][n];s.method==i&&s.caller==e&&(this.objEvent[t].splice(n,1),s.recover())}},e.dispatch=function(t,e,i){if(void 0===i&&(i=!1),i&&console.log("Event Dispatch: "+t),this.objEvent[t])for(var n=0;n<this.objEvent[t].length;n++){var s=this.objEvent[t][n];s.runWith(e instanceof Array?[e]:e)}},e.cacheEvent=function(t,e,i){void 0===i&&(i=!1),i&&console.log("Cache Event: "+t),this.objEvent[t]&&this.arrEvents.push([t,e])},e.dispatchAll=function(){for(;this.arrEvents.length>0;){var t=this.arrEvents.shift();this.dispatch(t.shift(),t.shift())}},e.hasEvent=function(t){return this.objEvent[t]&&this.objEvent[t].length>0},t}(),UIResource=function(){function t(e,i,n){this.strURL=null,this.strId=null,this.objProgress=null,t.objRes||(t.objRes=new Object),e=e.replace(".fdb",""),this.strId=i,this.strURL=e.split(".")[0],this.objProgress=n}__class(t,"com.emugif.core.ui.core.UIResource");var e=t.prototype;return Laya.imps(e,{"fairygui.IUISource":!0}),e.load=function(t,e){TimeUtils.printTimeInterval("UIResource LoadZip");var i=[],n="game/fairy/";i.push({url:URL.customFormat(n+this.strURL+"_atlas0.png"),type:"image"}),"common"==this.strURL&&i.push({url:URL.customFormat(n+this.strURL+"_atlas0_1.png"),type:"image"}),i.push({url:URL.customFormat(n+this.strURL+"."+UIConfig$1.packageFileExtension),type:"arraybuffer"}),Laya.loader.load(i,Handler.create(this,this.onDataComplete,[t,e,n]),this.objProgress)},e.onDataComplete=function(e,i,n,s){t.objRes[this.strId]||(t.objRes[this.strId]=this.strURL);UIPackage.addPackage(n+this.strURL);e&&i&&e.apply(i)},__getset(0,e,"loaded",function(){return t.objRes[this.strId]}),__getset(0,e,"fileName",function(){return this.strURL},function(t){this.strURL=t.split(".")[0]}),t.objRes=null,t}(),ConfigUtil=function(){function t(){this.cdn="",this.dev=0,this.gateway="",this.websocket="",this.gameVersion="",this.appVersion="1.0.6",this.channelKey="",this.token="",this.roomid=0,this.initpage="",this.yeffect=0,this.copyright="",this.userurl="",this.policyurl="",this.liveurl="",this.uploadTimeout=0,this.uploadError=!1,this.needAuth=!1,this.chargeType=0,this.coinType=2,this.coinName=["金币","钻石","太空币"],this.coinNameS=["币","钻","币"],this.scoreType=0,this.scoreName=["能量","积分"],this.chargeNote="",this.encryptType=2,this.uiskin1=0,this.uiskin2=0,this.uiskin3=0,this.uiskin4=0,this.objRoomInfo=null,this.objRoomInfo=new Object}__class(t,"com.emugif.core.utils.ConfigUtil");var e=t.prototype;return e.parseConfig=function(t,e){if(void 0===e&&(e=!1),t)for(var i in t)e&&!t[i]||(console.log("App.portal: set "+i+" = "+t[i]),void 0!=this[i]&&(this[i]=t[i]))},e.parseSearch=function(t){if(void 0===t&&(t=""),t||(t=String(Browser.window.location.search).replace("?","")),t)for(var e=t.split("&"),i=0;i<e.length;i++)e[i]&&(console.log("App.portal search: set "+e[i].split("=")[0]+" = "+decodeURIComponent(e[i].split("=")[1])),this[e[i].split("=")[0]]=decodeURIComponent(e[i].split("=")[1]))},e.clearUser=function(t){void 0===t&&(t=""),t?this.clearCache(t):(this.clearCache("account"),this.clearCache("sign"))},e.saveConfig=function(t,e){this.setCache("config_"+t,e)},e.loadConfig=function(t){return this.getCache("config_"+t)},e.reloadGame=function(t){void 0===t&&(t=!0),t&&this.clearUser(),Browser.window.location.reload()},e.setCache=function(t,e,i){void 0===i&&(i=!0);try{i?LocalStorage.setJSON(t,e):LocalStorage.setItem(t,e)}catch(n){console.log("setCache Error: "+t,e)}},e.getCache=function(t,e){void 0===e&&(e=!0);try{return e?LocalStorage.getJSON(t):LocalStorage.getItem(t)}catch(i){console.log("getCache Error: "+t)}return null},e.clearCache=function(t){try{LocalStorage.removeItem(t)}catch(e){console.log("clearCache Error: "+t)}},t}(),Dictionary=function(){function t(){this._values=[],this._keys=[]}__class(t,"com.emugif.core.utils.Dictionary");var e=t.prototype;return e.set=function(t,e){var i=this.indexOf(t);return i>=0?void(this._values[i]=e):(this._keys.push(t),void this._values.push(e))},e.indexOf=function(t){var e=this._keys.indexOf(t);return e>=0?e:(t="string"==typeof t?Number(t):"number"==typeof t?t.toString():t,this._keys.indexOf(t))},e.get=function(t){var e=this.indexOf(t);return 0>e?null:this._values[e]},e.remove=function(t){var e=this.indexOf(t);return e>=0?(this._keys.splice(e,1),this._values.splice(e,1),!0):!1},e.clear=function(){this._values.length=0,this._keys.length=0},__getset(0,e,"values",function(){return this._values}),__getset(0,e,"keys",function(){return this._keys}),t}(),TimeUtils=function(){function t(){}return __class(t,"com.emugif.core.utils.TimeUtils"),t.initSeverTime=function(e){t._serverTime=e,t._clientTime=(new Date).getTime()},t.getClientTime=function(){return t._serverTime?1e3*t._serverTime+(new Date).getTime()-t._clientTime:(new Date).getTime()},t.getLeftTime=function(e){var i=(t.getClientTime()-1e3*e)/1e3;return 3600>i?Math.floor(i/60)+" 分钟":86400>i?Math.floor(i/3600)+" 小时":Math.floor(i/86400)+" 天"},t.getCountdownTime=function(e,i){void 0===i&&(i=!0);var n=Math.floor(e-t.getClientTime());return t.getCountdownTimeToString(n,i)},t.getCountdownTimeToString=function(t,e){void 0===e&&(e=!0);var i="",n=Math.floor(t/1e3);if(0>n&&(n=0),n>86400){var s=Math.floor(n/86400);i+=s+(e?"天":":"),n-=86400*s}if(n>3600){var r=Math.floor(n/3600);i+=(10>r?"0":"")+r+(e?"小时":":"),n-=3600*r}if(n>60){var a=Math.floor(n/60);i+=(10>a?"0":"")+a+(e?"分":":"),n-=60*a}return i+=(10>n?"0":"")+n+(e?"秒":"")},t.getCDTime=function(e){var i=(1e3*e-t.getClientTime())/1e3,n="",s=Math.floor(i/60),r=Math.floor(i%60);return n+=0>=s?"00:":10>s?"0"+s+":":s+":",n+=0>=r?"00":10>r?"0"+r:r},t.isPassData=function(e,i){var n=!0,s=t.toTimeFromLong(e),r=t.toTimeFromLong(i),a=parseInt(s.substr(0,4)),o=parseInt(r.substr(0,4));o!=a&&(n=!1);var h=parseInt(s.substr(5,2)),l=parseInt(r.substr(5,2));l!=h&&(n=!1);var c=parseInt(s.substr(8,2)),u=parseInt(r.substr(8,2));return u!=c&&(n=!1),n},t.toTimeStringMs=function(e){return t.toTimeString(e/1e3)},t.toTimeString=function(t){var e="",i=Math.floor(t/3600),n=Math.floor((t-3600*i)/60),s=Math.floor(t%60);return e+=0>=i?"00:":10>i?"0"+i+":":i+":",e+=0>=n?"00:":10>n?"0"+n+":":n+":",e+=0>=s?"00":10>s?"0"+s:s},t.toTimeFromParam=function(t,e,i,n,s,r){var a=new Date;return a.setFullYear(t,e-1,i),a.setHours(n,s,r,0),a.getTime()},t.toTimeFromLong=function(t,e){void 0===e&&(e=0);var i,n,s,r,a,o=new Date;return o.setTime(t),i=o.getMonth()+1<10?"0"+String(o.getMonth()+1):String(o.getMonth()+1),n=o.getDate()<10?"0"+String(o.getDate()):String(o.getDate()),s=o.getHours()<10?"0"+String(o.getHours()):String(o.getHours()),r=o.getMinutes()<10?"0"+String(o.getMinutes()):String(o.getMinutes()),a=o.getSeconds()<10?"0"+String(o.getSeconds()):String(o.getSeconds()),2==e?i+"-"+n+" "+s+":"+r:e?o.getFullYear()+"/"+i+"/"+n:o.getFullYear()+"-"+i+"-"+n+" "+s+":"+r+":"+a},t.toReportTime=function(e){var i=1e3*e,n=t.getClientTime(),s=n-i;s/=1e3;var r="";if(Math.floor(s/60/60/24)>0)r=Math.floor(s/60/60/24)+"天前";else if(Math.floor(s/60/60)>0)r=Math.floor(s/60/60)+"小时前";else if(Math.floor(s/60)>0)r=Math.floor(s/60)+"分钟前";else{if(!(s>0))return"";r=Math.floor(s)+"秒前"}return r},t.ShopCountDownTimeToString=function(t,e){var i=24*t*60,n=e/1e3/60,s=(i-n)/60/24,r=i-n,a=(i-n)/60;return s>0?"剩余时间:"+s+"天":a>0?"剩余时间:"+a+"小时":r>0?"剩余时间:"+r+"分钟":""},t.printTimeInterval=function(e){t.intTimeCount||(t.intTimeCount=(new Date).getTime());var i=(new Date).getTime();console.log("TimeInterval: ["+e+"]"+t.intTimeCount+", "+(i-t.intTimeCount)+"ms"),t.intTimeCount=i},t.intTimeCount=NaN,t._serverTime=NaN,t._clientTime=NaN,t}(),UIPoolUtil=function(){function t(){}return __class(t,"com.emugif.core.utils.UIPoolUtil"),t.getObject=function(e,i){return t.objPool[e]||(t.objPool[e]=[]),t.objPool[e].length<1?i?new i:null:t.objPool[e].pop()},t.putObject=function(e){var i=String(e.__proto__.__className).split(".").pop();t.objPool[i]||(t.objPool[i]=[]),e.hasOwnProperty("parent")&&e.parent&&e.parent.removeChild(e),t.objPool[i].push(e)},__static(t,["objPool",function(){return this.objPool=new Object}]),t}(),Utils=function(){function t(){}return __class(t,"com.emugif.core.utils.Utils"),t.mergeItemInfo=function(t,e,i,n,s){void 0===s&&(s=!1),t=t||[],e=e||[];for(var r in t)for(var a in e)if(String(t[r][i])==String(e[a][n])){for(var o in e[a])(s||void 0==t[r][o]||null==t[r][o])&&(t[r][o]=e[a][o]);break}return t},t.mergeItem=function(t,e,i){void 0===i&&(i=!1),t=t||{},e=e||{};for(var n in e)(i||void 0==t[n]||null==t[n])&&(t[n]=e[n]);return t},t.mergeArrayField=function(t,e,i){t=t||[];for(var n=0;n<t.length;n++)t[n]&&(t[n][e]=i);return t},t.findItemInArray=function(t,e,i,n){if(void 0===n&&(n=!0),!t)return null;for(var s=0;s<t.length;s++){var r=t[s][e];if(n&&r==i)return t[s];if(!n&&r!=i)return t[s]}return null},t.findItemsInArray=function(t,e,i,n){void 0===n&&(n=!0);var s=[];if(!t)return s;for(var r=0;r<t.length;r++)if(t[r]){var a=t[r][e];n&&a==i?s.push(t[r]):n||a==i||s.push(t[r])}return s},t.formatTime=function(t,e){if(void 0===e&&(e=!0),0>=t)return"0秒";var i="";return t>=3600&&(i+=Math.floor(t/3600)+(e?"小时":":")),t%=3600,t>=60&&(i+=Math.floor(t/60)+(e?"分钟":":")),t%=60,i+=t+(e?"秒":"")},t.formatNumber=function(t,e){return void 0===e&&(e=0),isNaN(t)?"":1e3>t?t.toFixed(e):1e4>t?Math.floor(t/1e3).toFixed(e)+"K":1e7>t?Math.floor(t/1e4).toFixed(e)+"W":Math.floor(t/1e7).toFixed(e)+"KW"},t.formatString=function(t,e){return t?t.length>e?t.substr(0,e)+"…":t:""},t.makeSortableString=function(t,e){for(var i=t.toString(),n="",s=0;s<e-i.length;)n+="0",s++;return i=n+i},t.makeNumberArray=function(t,e,i,n){void 0===n&&(n=0);for(var s=[],r=e;i>=r;r++)s.push({data:String(r),label:t.replace("$D",r)});return s},t.isPhone=function(t){var e=/^1([38]\d|4[57]|5[0-35-9]|7[06-8]|8[89])\d{8}$/;return e.test(t)},t.isNumSix=function(t){var e=/^\d{6}$/;return e.test(t)},t.setCache=function(e,i,n){void 0===n&&(n=!0),t.objConfig||(t.objConfig=t.getFile("config"),console.log("objConfig",t.objConfig)),t.objConfig[e]=i,n&&t.setFile("config",t.objConfig)},t.getCache=function(e){return t.objConfig||(t.objConfig=t.getFile("config"),console.log("objConfig",t.objConfig)),t.objConfig[e]},t.clearCache=function(e){t.objConfig||(t.objConfig=t.getFile("config")),delete t.objConfig[e],t.setFile("config",t.objConfig)},t.getFile=function(t){return{}},t.setFile=function(t,e){},t.objConfig=null,t}(),BindPackage=function(){function t(){}return __class(t,"com.emugif.camera.ui.BindPackage"),t.init=function(){UIObjectFactory.setPackageItemExtension("ui://1a4c5800122huea",com.emugif.camera.ui.common.component.GroupListItemUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800brpxf",com.emugif.camera.ui.common.component.TipUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800idlauvk",com.emugif.camera.ui.common.component.ShopBuyLifeListItemNewUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800idlauvm",com.emugif.camera.ui.common.component.LogListItemNewUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800iz9qurm",com.emugif.camera.ui.common.component.TipCenterUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800iz9qurq",com.emugif.camera.ui.common.component.MetalListItemUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800iz9qus3",com.emugif.camera.ui.common.component.RankListItemUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800iz9qus4",com.emugif.camera.ui.common.component.RankListItem0UI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800iz9qusc",com.emugif.camera.ui.common.component.GameSeatItemUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800iz9qusd",com.emugif.camera.ui.common.component.UserInfoItemUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800iz9qusi",com.emugif.camera.ui.common.component.LogListItemUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800iz9qusl",com.emugif.camera.ui.common.component.LogDetailItemUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800iz9qusq",com.emugif.camera.ui.common.component.ShopBuyLifeListItemUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800iz9qusu",com.emugif.camera.ui.common.component.BillListItemUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800lo5susz",com.emugif.camera.ui.common.component.LogAppealItemUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800n3jcuvo",com.emugif.camera.ui.common.component.DisableUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800npds22",com.emugif.camera.ui.common.component.ShopBuyCoinListItemUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800wn00ura",com.emugif.camera.ui.common.component.RoomListItemUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800wn00urh",com.emugif.camera.ui.common.component.SignDailyItemUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800wn00uri",com.emugif.camera.ui.common.component.SignDailyItem1UI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800yipsui9",com.emugif.camera.ui.common.component.GroupListRoomItemUI),UIObjectFactory.setPackageItemExtension("ui://1a4c5800yipsuid",com.emugif.camera.ui.common.component.MissionListItemUI)},t}(),Config=function(){function t(){}return __class(t,"Config"),t.WebGLTextCacheCount=500,t.atlasEnable=!1,t.showCanvasMark=!1,t.animationInterval=50,t.isAntialias=!1,t.isAlpha=!1,t.premultipliedAlpha=!0,t.isStencil=!0,t.preserveDrawingBuffer=!1,t}(),Graphics=function(){function t(){this._one=null,this._cmds=null,this._render=this._renderEmpty,Render.isConchNode&&(this._nativeObj=new _conchGraphics,this.id=this._nativeObj.conchID)}__class(t,"laya.display.Graphics");var e=t.prototype;return e.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},e.clear=function(e){if(void 0===e&&(e=!1),e){var i=this._one;if(this._cmds){var n=0,s=this._cmds.length;for(n=0;s>n;n++)i=this._cmds[n],!i||i.callee!==Render._context._drawTexture&&i.callee!==Render._context._drawTextureWithTransform||(i[0]=null,t._cache.push(i));this._cmds.length=0}else i&&(!i||i.callee!==Render._context._drawTexture&&i.callee!==Render._context._drawTextureWithTransform||(i[0]=null,t._cache.push(i)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(n=0,s=this._vectorgraphArray.length;s>n;n++)VectorGraphManager.getInstance().deleteShape(this._vectorgraphArray[n]);this._vectorgraphArray.length=0}},e._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},e._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new GraphicsBounds,this._graphicBounds._graphics=this)},e._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},e._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},e.getBounds=function(t){return void 0===t&&(t=!1),this._initGraphicBounds(),
this._graphicBounds.getBounds(t)},e.getBoundPoints=function(t){return void 0===t&&(t=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(t)},e._addCmd=function(t){this._cmds=this._cmds||[],t.callee=t.shift(),this._cmds.push(t)},e.drawTexture=function(e,i,n,s,r,a,o){if(void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===r&&(r=0),void 0===o&&(o=1),!e||.01>o)return null;s||(s=e.sourceWidth),r||(r=e.sourceHeight);var h=s/e.sourceWidth,l=r/e.sourceHeight;if(s=e.width*h,r=e.height*l,e.loaded&&(0>=s||0>=r))return null;if(i+=e.offsetX*h,n+=e.offsetY*l,this._sp&&(this._sp._renderType|=512),t._cache.length){var c=t._cache.pop();c[0]=e,c[1]=i,c[2]=n,c[3]=s,c[4]=r,c[5]=a,c[6]=o}else c=[e,i,n,s,r,a,o];return c.callee=a||1!=o?Render._context._drawTextureWithTransform:Render._context._drawTexture,null!=this._one||a||1!=o?this._saveToCmd(c.callee,c):(this._one=c,this._render=this._renderOneImg),!e.loaded&&e.once&&e.once("loaded",this,this._textureLoaded,[e,c]),this._repaint(),c},e.cleanByTexture=function(t,e,i,n,s){if(void 0===n&&(n=0),void 0===s&&(s=0),!t)return this.clear();if(this._one&&this._render===this._renderOneImg){n||(n=t.sourceWidth),s||(s=t.sourceHeight);var r=n/t.sourceWidth,a=s/t.sourceHeight;n=t.width*r,s=t.height*a,e+=t.offsetX*r,i+=t.offsetY*a,this._one[0]=t,this._one[1]=e,this._one[2]=i,this._one[3]=n,this._one[4]=s}else this.clear(),t&&this.drawTexture(t,e,i,n,s)},e.drawTextures=function(t,e){t&&this._saveToCmd(Render._context._drawTextures,[t,e])},e.fillTexture=function(t,e,i,n,s,r,a){if(void 0===n&&(n=0),void 0===s&&(s=0),void 0===r&&(r="repeat"),t){var o=[t,e,i,n,s,r,a||Point.EMPTY,{}];t.loaded||t.once("loaded",this,this._textureLoaded,[t,o]),this._saveToCmd(Render._context._fillTexture,o)}},e._textureLoaded=function(t,e){e[3]=e[3]||t.width,e[4]=e[4]||t.height,this._repaint()},e._saveToCmd=function(t,e){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=e,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(e)),e.callee=t,this._repaint(),e},e.clipRect=function(t,e,i,n){this._saveToCmd(Render._context._clipRect,[t,e,i,n])},e.fillText=function(t,e,i,n,s,r){this._saveToCmd(Render._context._fillText,[t,e,i,n||Font.defaultFont,s,r])},e.fillBorderText=function(t,e,i,n,s,r,a,o){this._saveToCmd(Render._context._fillBorderText,[t,e,i,n||Font.defaultFont,s,r,a,o])},e.strokeText=function(t,e,i,n,s,r,a){this._saveToCmd(Render._context._strokeText,[t,e,i,n||Font.defaultFont,s,r,a])},e.alpha=function(t){this._saveToCmd(Render._context._alpha,[t])},e.setAlpha=function(t){this._saveToCmd(Render._context._setAlpha,[t])},e.transform=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._saveToCmd(Render._context._transform,[t,e,i])},e.rotate=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._saveToCmd(Render._context._rotate,[t,e,i])},e.scale=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this._saveToCmd(Render._context._scale,[t,e,i,n])},e.translate=function(t,e){this._saveToCmd(Render._context._translate,[t,e])},e.save=function(){this._saveToCmd(Render._context._save,[])},e.restore=function(){this._saveToCmd(Render._context._restore,[])},e.replaceText=function(t){this._repaint();var e=this._cmds;if(e){for(var i=e.length-1;i>-1;i--)if(this._isTextCmd(e[i].callee))return e[i][0].toUpperCase?e[i][0]=t:e[i][0].setText(t),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=t:this._one[0].setText(t),!0;return!1},e._isTextCmd=function(t){return t===Render._context._fillText||t===Render._context._fillBorderText||t===Render._context._strokeText},e.replaceTextColor=function(t){this._repaint();var e=this._cmds;if(e)for(var i=e.length-1;i>-1;i--)this._isTextCmd(e[i].callee)&&(e[i][4]=t,e[i][0].toUpperCase||(e[i][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=t,this._one[0].toUpperCase||(this._one[0].changed=!0))},e.loadImage=function(t,e,i,n,s,r){function a(t){t&&(o.drawTexture(t,e,i,n,s),null!=r&&r.call(o._sp,t))}var o=this;void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0);var h=Loader.getRes(t);h?a(h):Laya.loader.load(t,Handler.create(null,a),null,"image")},e._renderEmpty=function(t,e,i,n){},e._renderAll=function(t,e,i,n){for(var s,r=this._cmds,a=0,o=r.length;o>a;a++)(s=r[a]).callee.call(e,i,n,s)},e._renderOne=function(t,e,i,n){this._one.callee.call(e,i,n,this._one)},e._renderOneImg=function(t,e,i,n){this._one.callee.call(e,i,n,this._one),2305!==t._renderType&&(t._renderType|=1)},e.drawLine=function(t,e,i,n,s,r){void 0===r&&(r=1);var a=0;Render.isWebGL&&(a=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(a));var o=r%2===0?0:.5,h=[t+o,e+o,i+o,n+o,s,r,a];this._saveToCmd(Render._context._drawLine,h)},e.drawLines=function(t,e,i,n,s){void 0===s&&(s=1);var r=0;if(i&&!(i.length<1)){Render.isWebGL&&(r=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(r));var a=s%2===0?0:.5,o=[t+a,e+a,i,n,s,r];this._saveToCmd(Render._context._drawLines,o)}},e.drawCurves=function(t,e,i,n,s){void 0===s&&(s=1);var r=[t,e,i,n,s];this._saveToCmd(Render._context._drawCurves,r)},e.drawRect=function(t,e,i,n,s,r,a){void 0===a&&(a=1);var o=r?a/2:0,h=r?a:0,l=[t+o,e+o,i-h,n-h,s,r,a];this._saveToCmd(Render._context._drawRect,l)},e.drawCircle=function(t,e,i,n,s,r){void 0===r&&(r=1);var a=s?r/2:0,o=0;Render.isWebGL&&(o=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(o));var h=[t,e,i-a,n,s,r,o];this._saveToCmd(Render._context._drawCircle,h)},e.drawPie=function(t,e,i,n,s,r,a,o){void 0===o&&(o=1);var h=a?o/2:0,l=a?o:0,c=0;Render.isWebGL&&(c=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(c));var u=[t+h,e+h,i-l,n,s,r,a,o,c];u[3]=Utils$1.toRadian(n),u[4]=Utils$1.toRadian(s),this._saveToCmd(Render._context._drawPie,u)},e.drawPoly=function(t,e,i,n,s,r){void 0===r&&(r=1);var a=0;if(Render.isWebGL){a=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(a);var o=!1;o=!(i.length>6)}var h=s?r%2===0?0:.5:0,l=[t+h,e+h,i,n,s,r,a,o];this._saveToCmd(Render._context._drawPoly,l)},e.drawPath=function(t,e,i,n,s){var r=[t,e,i,n,s];this._saveToCmd(Render._context._drawPath,r)},__getset(0,e,"cmds",function(){return this._cmds},function(t){this._sp&&(this._sp._renderType|=512),this._cmds=t,this._render=this._renderAll,this._repaint()}),t.__init__=function(){if(Render.isConchNode){for(var t=laya.display.Graphics.prototype,e=ConchGraphics.prototype,i=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],n=0,s=i.length;s>=n;n++){var r=i[n];t[r]=e[r]}t._saveToCmd=null,e.drawImageS&&(t.drawTextures=function(t,e){if(t&&t.loaded&&t.bitmap&&t.source){var i=t.uv,n=t.bitmap.width,s=t.bitmap.height;this.drawImageS(t.bitmap.source,i[0]*n,i[1]*s,(i[2]-i[0])*n,(i[5]-i[3])*s,t.offsetX,t.offsetY,t.width,t.height,e)}}),t.drawTexture=function(t,e,i,n,s,r,a){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===a&&(a=1),t){if(!t.loaded)return void t.once("loaded",this,function(){this.drawTexture(t,e,i,n,s,r)});if(t.loaded&&t.bitmap&&t.source&&(n||(n=t.sourceWidth),s||(s=t.sourceHeight),n=n-t.sourceWidth+t.width,s=s-t.sourceHeight+t.height,!(0>=n||0>=s))){e+=t.offsetX,i+=t.offsetY;var o=t.uv,h=t.bitmap.width,l=t.bitmap.height;this.drawImageM(t.bitmap.source,o[0]*h,o[1]*l,(o[2]-o[0])*h,(o[5]-o[3])*l,e,i,n,s,r,a),this._repaint()}}},t.fillTexture=function(t,e,i,n,s,r,a){if(void 0===n&&(n=0),void 0===s&&(s=0),void 0===r&&(r="repeat"),t&&t.loaded){var o,h=Render._context.ctx,l=t.bitmap.width,c=t.bitmap.height,u=t.uv;o=t.uv!=Texture.DEF_UV?h.createPattern(t.bitmap.source,r,u[0]*l,u[1]*c,(u[2]-u[0])*l,(u[5]-u[3])*c):h.createPattern(t.bitmap.source,r);var _=0,d=0;a&&(e+=a.x%t.width,i+=a.y%t.height,_-=a.x%t.width,d-=a.y%t.height),this._fillImage(o,e,i,_,d,n,s)}}}},t._cache=[],t}(),BitmapFont=function(){function t(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}__class(t,"laya.display.BitmapFont");var e=t.prototype;return e.loadFont=function(t,e){this._path=t,this._complete=e,Laya.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],Handler.create(this,this.onLoaded))},e.onLoaded=function(){this.parseFont(Loader.getRes(this._path),Loader.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.run()},e.parseFont=function(t,e){if(null!=t&&null!=e){this._texture=e;var i=1,n=t.getElementsByTagName("info");this.fontSize=parseInt(n[0].attributes.size.nodeValue);var s=n[0].attributes.padding.nodeValue,r=s.split(",");this._padding=[parseInt(r[0]),parseInt(r[1]),parseInt(r[2]),parseInt(r[3])];var a=t.getElementsByTagName("char"),o=0;for(o=0;o<a.length;o++){var h=a[o].attributes,l=parseInt(h.id.nodeValue),c=parseInt(h.xoffset.nodeValue)/i,u=parseInt(h.yoffset.nodeValue)/i,_=parseInt(h.xadvance.nodeValue)/i,d=new Rectangle;d.x=parseInt(h.x.nodeValue),d.y=parseInt(h.y.nodeValue),d.width=parseInt(h.width.nodeValue),d.height=parseInt(h.height.nodeValue);var f=Texture.create(e,d.x,d.y,d.width,d.height,c,u);this._maxWidth=Math.max(this._maxWidth,_+this.letterSpacing),this._fontCharDic[l]=f,this._fontWidthMap[l]=_}}},e.getCharTexture=function(t){return this._fontCharDic[t.charCodeAt(0)]},e.destroy=function(){if(this._texture){for(var t in this._fontCharDic){var e=this._fontCharDic[t];e&&e.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},e.setSpaceWidth=function(t){this._spaceWidth=t},e.getCharWidth=function(t){var e=t.charCodeAt(0);return this._fontWidthMap[e]?this._fontWidthMap[e]+this.letterSpacing:" "==t?this._spaceWidth+this.letterSpacing:0},e.getTextWidth=function(t){for(var e=0,i=0,n=t.length;n>i;i++)e+=this.getCharWidth(t.charAt(i));return e},e.getMaxWidth=function(){return this._maxWidth},e.getMaxHeight=function(){return this.fontSize},e.drawText=function(t,e,i,n,s,r){var a,o=this.getTextWidth(t),h=0;"center"===s&&(h=(r-o)/2),"right"===s&&(h=r-o);for(var l=0,c=0,u=t.length;u>c;c++)a=this.getCharTexture(t.charAt(c)),a&&(e.graphics.drawTexture(a,i+l+h,n),l+=this.getCharWidth(t.charAt(c)))},t}(),Style=function(){function t(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=t._TF_EMPTY}__class(t,"laya.display.css.Style");var e=t.prototype;return e.getTransform=function(){return this._tf},e.setTransform=function(e){this._tf="none"!==e&&e?e:t._TF_EMPTY},e.setTranslateX=function(e){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.translateX=e},e.setTranslateY=function(e){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.translateY=e},e.setScaleX=function(e){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleX=e},e.setScale=function(e,i){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleX=e,this._tf.scaleY=i},e.setScaleY=function(e){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleY=e},e.setRotate=function(e){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.rotate=e},e.setSkewX=function(e){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.skewX=e},e.setSkewY=function(e){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.skewY=e},e.destroy=function(){this.scrollRect=null},e.render=function(t,e,i,n){},e.getCSSStyle=function(){return CSSStyle.EMPTY},e._enableLayout=function(){return!1},__getset(0,e,"scaleX",function(){return this._tf.scaleX},function(t){this.setScaleX(t)}),__getset(0,e,"transform",function(){return this.getTransform()},function(t){this.setTransform(t)}),__getset(0,e,"translateX",function(){return this._tf.translateX},function(t){this.setTranslateX(t)}),__getset(0,e,"translateY",function(){return this._tf.translateY},function(t){this.setTranslateY(t)}),__getset(0,e,"scaleY",function(){return this._tf.scaleY},function(t){this.setScaleY(t)}),__getset(0,e,"block",function(){return 0!=(1&this._type)}),__getset(0,e,"skewY",function(){return this._tf.skewY},function(t){this.setSkewY(t)}),__getset(0,e,"rotate",function(){return this._tf.rotate},function(t){this.setRotate(t)}),__getset(0,e,"skewX",function(){return this._tf.skewX},function(t){this.setSkewX(t)}),__getset(0,e,"paddingLeft",function(){return 0}),__getset(0,e,"paddingTop",function(){return 0}),__getset(0,e,"absolute",function(){return!0}),t.__init__=function(){t._TF_EMPTY=new TransformInfo,t.EMPTY=new t},t.EMPTY=null,t._TF_EMPTY=null,t}(),Font=function(){function t(e){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=Color.create(t.defaultColor),this.family=t.defaultFamily,this.stroke=t._STROKE,this.size=t.defaultSize,e&&e!==t.EMPTY&&e.copyTo(this)}__class(t,"laya.display.css.Font");var e=t.prototype;return e.set=function(t){this._text=null;for(var e=t.split(" "),i=0,n=e.length;n>i;i++){var s=e[i];switch(s){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}s.indexOf("px")>0&&(this.size=parseInt(s),this.family=e[i+1],i++)}},e.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},e.copyTo=function(e){e._type=this._type,e._text=this._text,e._weight=this._weight,e._color=this._color,e.family=this.family,e.stroke=this.stroke!=t._STROKE?this.stroke.slice():t._STROKE,e.indent=this.indent,e.size=this.size},__getset(0,e,"password",function(){return 0!==(1024&this._type)},function(t){t?this._type|=1024:this._type&=-1025}),__getset(0,e,"color",function(){return this._color.strColor},function(t){this._color=Color.create(t)}),__getset(0,e,"italic",function(){return 0!==(512&this._type)},function(t){t?this._type|=512:this._type&=-513}),__getset(0,e,"bold",function(){return 0!==(2048&this._type)},function(t){t?this._type|=2048:this._type&=-2049}),__getset(0,e,"weight",function(){return""+this._weight},function(t){var e=0;switch(t){case"normal":break;case"bold":this.bold=!0,e=700;break;case"bolder":e=800;break;case"lighter":e=100;break;default:e=parseInt(t)}this._weight=e,this._text=null}),__getset(0,e,"decoration",function(){return this._decoration?this._decoration.value:"none"},function(t){var e=t.split(" ");switch(this._decoration||(this._decoration={}),e[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=e[0]}e[1]&&(this._decoration.color=Color.create(e)),this._decoration.value=t}),t.__init__=function(){t.EMPTY=new t(null)},t.EMPTY=null,t.defaultColor="#000000",t.defaultSize=12,t.defaultFamily="Arial",t.defaultFont="12px Arial",t._STROKE=[0,"#000000"],t._ITALIC=512,t._PASSWORD=1024,t._BOLD=2048,t}(),TransformInfo=function(){function t(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return __class(t,"laya.display.css.TransformInfo"),t}(),GraphicsBounds=function(){function t(){this._cacheBoundsType=!1}__class(t,"laya.display.GraphicsBounds");var e=t.prototype;return e.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},e.reset=function(){this._temp&&(this._temp.length=0)},e.getBounds=function(t){return void 0===t&&(t=!1),(!this._bounds||!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._bounds=Rectangle._getWrapRec(this.getBoundPoints(t),this._bounds)),this._cacheBoundsType=t,this._bounds},e.getBoundPoints=function(t){return void 0===t&&(t=!1),(!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(t)),this._cacheBoundsType=t,this._rstBoundPoints=Utils$1.copyArray(this._rstBoundPoints,this._temp)},e._getCmdPoints=function(e){void 0===e&&(e=!1);var i,n=Render._context,s=this._graphics.cmds;if(i=this._temp||(this._temp=[]),i.length=0,s||null==this._graphics._one||(t._tempCmds.length=0,t._tempCmds.push(this._graphics._one),s=t._tempCmds),!s)return i;var r;r=t._tempMatrixArrays,r.length=0;var a=t._initMatrix;a.identity();for(var o,h,l=t._tempMatrix,c=0,u=s.length;u>c;c++)switch(o=s[c],o.callee){case n._save:case 7:r.push(a),a=a.clone();break;case n._restore:case 8:a=r.pop();break;case n._scale:case 5:l.identity(),l.translate(-o[2],-o[3]),l.scale(o[0],o[1]),l.translate(o[2],o[3]),this._switchMatrix(a,l);break;case n._rotate:case 3:l.identity(),l.translate(-o[1],-o[2]),l.rotate(o[0]),l.translate(o[1],o[2]),this._switchMatrix(a,l);break;case n._translate:case 6:l.identity(),l.translate(o[0],o[1]),this._switchMatrix(a,l);break;case n._transform:case 4:l.identity(),l.translate(-o[1],-o[2]),l.concat(o[0]),l.translate(o[1],o[2]),this._switchMatrix(a,l);break;case 16:case 24:t._addPointArrToRst(i,Rectangle._getBoundPointS(o[0],o[1],o[2],o[3]),a);break;case 17:a.copyTo(l),l.concat(o[4]),t._addPointArrToRst(i,Rectangle._getBoundPointS(o[0],o[1],o[2],o[3]),l);break;case n._drawTexture:if(h=o[0],e)o[3]&&o[4]?t._addPointArrToRst(i,Rectangle._getBoundPointS(o[1],o[2],o[3],o[4]),a):(h=o[0],t._addPointArrToRst(i,Rectangle._getBoundPointS(o[1],o[2],h.width,h.height),a));else{var _=(o[3]||h.sourceWidth)/h.width,d=(o[4]||h.sourceHeight)/h.height,f=_*h.sourceWidth,p=d*h.sourceHeight,g=h.offsetX>0?h.offsetX:0,m=h.offsetY>0?h.offsetY:0;g*=_,m*=d,t._addPointArrToRst(i,Rectangle._getBoundPointS(o[1]-g,o[2]-m,f,p),a)}break;case n._fillTexture:o[3]&&o[4]?t._addPointArrToRst(i,Rectangle._getBoundPointS(o[1],o[2],o[3],o[4]),a):(h=o[0],t._addPointArrToRst(i,Rectangle._getBoundPointS(o[1],o[2],h.width,h.height),a));break;case n._drawTextureWithTransform:var v;o[5]?(a.copyTo(l),l.concat(o[5]),v=l):v=a,e?o[3]&&o[4]?t._addPointArrToRst(i,Rectangle._getBoundPointS(o[1],o[2],o[3],o[4]),v):(h=o[0],t._addPointArrToRst(i,Rectangle._getBoundPointS(o[1],o[2],h.width,h.height),v)):(h=o[0],_=(o[3]||h.sourceWidth)/h.width,d=(o[4]||h.sourceHeight)/h.height,f=_*h.sourceWidth,p=d*h.sourceHeight,g=h.offsetX>0?h.offsetX:0,m=h.offsetY>0?h.offsetY:0,g*=_,m*=d,t._addPointArrToRst(i,Rectangle._getBoundPointS(o[1]-g,o[2]-m,f,p),v));break;case n._drawRect:case 13:t._addPointArrToRst(i,Rectangle._getBoundPointS(o[0],o[1],o[2],o[3]),a);break;case n._drawCircle:case n._fillCircle:case 14:t._addPointArrToRst(i,Rectangle._getBoundPointS(o[0]-o[2],o[1]-o[2],o[2]+o[2],o[2]+o[2]),a);break;case n._drawLine:case 20:t._tempPoints.length=0;var y=NaN;y=.5*o[5],o[0]==o[2]?t._tempPoints.push(o[0]+y,o[1],o[2]+y,o[3],o[0]-y,o[1],o[2]-y,o[3]):o[1]==o[3]?t._tempPoints.push(o[0],o[1]+y,o[2],o[3]+y,o[0],o[1]-y,o[2],o[3]-y):t._tempPoints.push(o[0],o[1],o[2],o[3]),t._addPointArrToRst(i,t._tempPoints,a);break;case n._drawCurves:case 22:t._addPointArrToRst(i,Bezier.I.getBezierPoints(o[2]),a,o[0],o[1]);break;case n._drawPoly:case n._drawLines:case 18:t._addPointArrToRst(i,o[2],a,o[0],o[1]);break;case n._drawPath:case 19:t._addPointArrToRst(i,this._getPathPoints(o[2]),a,o[0],o[1]);break;case n._drawPie:case 15:t._addPointArrToRst(i,this._getPiePoints(o[0],o[1],o[2],o[3],o[4]),a)}return i.length>200?i=Utils$1.copyArray(i,Rectangle._getWrapRec(i)._getBoundPoints()):i.length>8&&(i=GrahamScan.scanPList(i)),i},e._switchMatrix=function(t,e){e.concat(t),e.copyTo(t)},e._getPiePoints=function(e,i,n,s,r){var a=t._tempPoints;t._tempPoints.length=0,a.push(e,i);var o=Math.PI/10,h=NaN;for(h=s;r>h;h+=o)a.push(e+n*Math.cos(h),i+n*Math.sin(h));return r!=h&&a.push(e+n*Math.cos(r),i+n*Math.sin(r)),a},e._getPathPoints=function(e){var i=0,n=0,s=t._tempPoints;s.length=0,n=e.length;var r;for(i=0;n>i;i++)r=e[i],r.length>1&&(s.push(r[1],r[2]),r.length>3&&s.push(r[3],r[4]));return s},t._addPointArrToRst=function(e,i,n,s,r){void 0===s&&(s=0),void 0===r&&(r=0);var a=0,o=0;for(o=i.length,a=0;o>a;a+=2)t._addPointToRst(e,i[a]+s,i[a+1]+r,n)},t._addPointToRst=function(t,e,i,n){var s=Point.TEMP;s.setTo(e?e:0,i?i:0),n.transformPoint(s),t.push(s.x,s.y)},t._tempPoints=[],t._tempMatrixArrays=[],t._tempCmds=[],__static(t,["_tempMatrix",function(){return this._tempMatrix=new Matrix},"_initMatrix",function(){return this._initMatrix=new Matrix}]),t}(),KeyBoardManager=function(){function t(){}return __class(t,"laya.events.KeyBoardManager"),t.__init__=function(){t._addEvent("keydown"),t._addEvent("keypress"),t._addEvent("keyup")},t._addEvent=function(t){Browser.document.addEventListener(t,function(e){laya.events.KeyBoardManager._dispatch(e,t)},!0)},t._dispatch=function(e,i){if(t.enabled){t._event._stoped=!1,t._event.nativeEvent=e,t._event.keyCode=e.keyCode||e.which||e.charCode,"keydown"===i?t._pressKeys[t._event.keyCode]=!0:"keyup"===i&&(t._pressKeys[t._event.keyCode]=null);for(var n=Laya.stage.focus&&null!=Laya.stage.focus.event&&Laya.stage.focus.displayedInStage?Laya.stage.focus:Laya.stage,s=n;s;)s.event(i,t._event.setTo(i,s,n)),s=s.parent}},t.hasKeyDown=function(e){return t._pressKeys[e]},t._pressKeys={},t.enabled=!0,__static(t,["_event",function(){return this._event=new Event}]),t}(),MouseManager=function(){function t(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new Event,this._matrix=new Matrix,this._point=new Point,this._rect=new Rectangle,this._prePoint=new Point,this._curTouchID=NaN}__class(t,"laya.events.MouseManager");var e=t.prototype;return e.__init__=function(e,i){this._stage=e;var n=this,s=this._eventList;i.oncontextmenu=function(e){return t.enabled?!1:void 0},i.addEventListener("mousedown",function(e){t.enabled&&(Browser.onIE||e.preventDefault(),s.push(e),n.mouseDownTime=Browser.now())}),i.addEventListener("mouseup",function(e){t.enabled&&(e.preventDefault(),s.push(e),n.mouseDownTime=-Browser.now())},!0),i.addEventListener("mousemove",function(e){if(t.enabled){e.preventDefault();var i=Browser.now();if(i-n._lastMoveTimer<10)return;n._lastMoveTimer=i,s.push(e)}},!0),i.addEventListener("mouseout",function(e){t.enabled&&s.push(e)}),i.addEventListener("mouseover",function(e){t.enabled&&s.push(e)}),i.addEventListener("touchstart",function(e){t.enabled&&(s.push(e),Input.isInputting||e.preventDefault(),n.mouseDownTime=Browser.now())}),i.addEventListener("touchend",function(e){t.enabled&&(Input.isInputting||e.preventDefault(),s.push(e),n.mouseDownTime=-Browser.now())},!0),i.addEventListener("touchmove",function(e){t.enabled&&(e.preventDefault(),s.push(e))},!0),i.addEventListener("touchcancel",function(e){t.enabled&&(e.preventDefault(),s.push(e))},!0),i.addEventListener("mousewheel",function(e){t.enabled&&s.push(e)}),i.addEventListener("DOMMouseScroll",function(e){t.enabled&&s.push(e)})},e.initEvent=function(t,e){var i=this;i._event._stoped=!1,i._event.nativeEvent=e||t,i._target=null,this._point.setTo(t.pageX||t.clientX,t.pageY||t.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),i.mouseX=this._point.x,i.mouseY=this._point.y,i._event.touchId=t.identifier||0,this._tTouchID=i._event.touchId;var n;n=TouchManager.I._event,n._stoped=!1,n.nativeEvent=i._event.nativeEvent,n.touchId=i._event.touchId},e.checkMouseWheel=function(t){this._event.delta=t.wheelDelta?.025*t.wheelDelta:-t.detail;for(var e=TouchManager.I.getLastOvers(),i=0,n=e.length;n>i;i++){var s=e[i];s.event("mousewheel",this._event.setTo("mousewheel",s,this._target))}},e.onMouseMove=function(t){TouchManager.I.onMouseMove(t,this._tTouchID)},e.onMouseDown=function(t){if(Input.isInputting&&Laya.stage.focus&&Laya.stage.focus.focus&&!Laya.stage.focus.contains(this._target)){var e=Laya.stage.focus._tf||Laya.stage.focus,i=t._tf||t;i instanceof laya.display.Input&&i.multiline==e.multiline?e._focusOut():e.focus=!1}TouchManager.I.onMouseDown(t,this._tTouchID,this._isLeftMouse)},e.onMouseUp=function(t){TouchManager.I.onMouseUp(t,this._tTouchID,this._isLeftMouse)},e.check=function(t,e,i,n){this._point.setTo(e,i),t.fromParentPoint(this._point),e=this._point.x,i=this._point.y;var s=t.scrollRect;if(s&&(this._rect.setTo(s.x,s.y,s.width,s.height),!this._rect.contains(e,i)))return!1;if(!this.disableMouseEvent){if(t.hitTestPrior&&!t.mouseThrough&&!this.hitTest(t,e,i))return!1;for(var r=t._childs.length-1;r>-1;r--){var a=t._childs[r];if(!a.destroyed&&a.mouseEnabled&&a.visible&&this.check(a,e,i,n))return!0}}var o=!t.hitTestPrior||t.mouseThrough||this.disableMouseEvent?this.hitTest(t,e,i):!0;return o?(this._target=t,n.call(this,t)):n===this.onMouseUp&&t===this._stage&&(this._target=this._stage,n.call(this,this._target)),o},e.hitTest=function(t,e,i){var n=!1;if(t.scrollRect&&(e-=t.scrollRect.x,i-=t.scrollRect.y),t.hitArea instanceof laya.utils.HitArea)return t.hitArea.isHit(e,i);if(t.width>0&&t.height>0||t.mouseThrough||t.hitArea)if(t.mouseThrough)n=t.getGraphicBounds().contains(e,i);else{var s=this._rect;t.hitArea?s=t.hitArea:s.setTo(0,0,t.width,t.height),n=s.contains(e,i)}return n},e.runEvent=function(){var e=this._eventList.length;if(e){for(var i=this,n=0;e>n;){var s=this._eventList[n];switch("mousemove"!==s.type&&(this._prePoint.x=this._prePoint.y=-1e6),s.type){case"mousedown":this._touchIDs[0]=this._id++,t._isTouchRespond?t._isTouchRespond=!1:(i._isLeftMouse=0===s.button,i.initEvent(s),i.check(i._stage,i.mouseX,i.mouseY,i.onMouseDown));break;case"mouseup":i._isLeftMouse=0===s.button,i.initEvent(s),i.check(i._stage,i.mouseX,i.mouseY,i.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-s.clientX)+Math.abs(this._prePoint.y-s.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=s.clientX,this._prePoint.y=s.clientY,i.initEvent(s),i.check(i._stage,i.mouseX,i.mouseY,i.onMouseMove));break;case"touchstart":t._isTouchRespond=!0,i._isLeftMouse=!0;for(var r=s.changedTouches,a=0,o=r.length;o>a;a++){var h=r[a];(t.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=h.identifier,this._id%200===0&&(this._touchIDs={}),this._touchIDs[h.identifier]=this._id++,i.initEvent(h,s),i.check(i._stage,i.mouseX,i.mouseY,i.onMouseDown))}break;case"touchend":case"touchcancel":t._isTouchRespond=!0,i._isLeftMouse=!0;var l=s.changedTouches;for(a=0,o=l.length;o>a;a++)if(h=l[a],t.multiTouchEnabled||h.identifier==this._curTouchID){this._curTouchID=NaN,i.initEvent(h,s);var c=!1;c=i.check(i._stage,i.mouseX,i.mouseY,i.onMouseUp),c||i.onMouseUp(null)}break;case"touchmove":var u=s.changedTouches;for(a=0,o=u.length;o>a;a++)h=u[a],(t.multiTouchEnabled||h.identifier==this._curTouchID)&&(i.initEvent(h,s),i.check(i._stage,i.mouseX,i.mouseY,i.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":i.checkMouseWheel(s);break;case"mouseout":i._stage.event("mouseout",i._event.setTo("mouseout",i._stage,i._stage));break;case"mouseover":i._stage.event("mouseover",i._event.setTo("mouseover",i._stage,i._stage))}n++}this._eventList.length=0}},t.enabled=!0,t.multiTouchEnabled=!0,t._isTouchRespond=!1,__static(t,["instance",function(){return this.instance=new t}]),t}(),TouchManager=function(){function t(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new Event}__class(t,"laya.events.TouchManager");var e=t.prototype;return e.getTouchFromArr=function(t,e){var i=0,n=0;n=e.length;var s;for(i=0;n>i;i++)if(s=e[i],s.id==t)return s;return null},e.removeTouchFromArr=function(t,e){var i=0;for(i=e.length-1;i>=0;i--)e[i].id==t&&e.splice(i,1)},e.createTouchO=function(t,e){var i;return i=Pool.getItem("TouchData")||{},i.id=e,i.tar=t,i},e.onMouseDown=function(e,i,n){if(void 0===n&&(n=!1),this.enable){var s,r,a;s=this.getTouchFromArr(i,this.preOvers),a=this.getEles(e,null,t._tEleArr),s?s.tar=e:(r=this.createTouchO(e,i),this.preOvers.push(r)),Browser.onMobile&&this.sendEvents(a,"mouseover",i);var o;o=n?this.preDowns:this.preRightDowns,s=this.getTouchFromArr(i,o),s?s.tar=e:(r=this.createTouchO(e,i),o.push(r)),this.sendEvents(a,n?"mousedown":"rightmousedown",i)}},e.sendEvents=function(t,e,i){void 0===i&&(i=0);var n=0,s=0;s=t.length,this._event._stoped=!1;var r;r=t[0];var a;for(n=0;s>n;n++){if(a=t[n],a.destroyed)return;if(a.event(e,this._event.setTo(e,a,r)),this._event._stoped)break}},e.getEles=function(t,e,i){for(i?i.length=0:i=[];t&&t!=e;)i.push(t),t=t.parent;return i},e.checkMouseOutAndOverOfMove=function(e,i,n){if(void 0===n&&(n=0),i!=e){var s,r,a=0,o=0;if(i.contains(e))r=this.getEles(e,i,t._tEleArr),this.sendEvents(r,"mouseover",n);else if(e.contains(i))r=this.getEles(i,e,t._tEleArr),this.sendEvents(r,"mouseout",n);else{r=t._tEleArr,r.length=0;var h;h=this.getEles(i,null,t._oldArr);var l;l=this.getEles(e,null,t._newArr),o=h.length;var c=0;for(a=0;o>a;a++){if(s=h[a],c=l.indexOf(s),c>=0){l.splice(c,l.length-c);break}r.push(s)}r.length>0&&this.sendEvents(r,"mouseout",n),l.length>0&&this.sendEvents(l,"mouseover",n)}}},e.onMouseMove=function(e,i){if(this.enable){var n;n=this.getTouchFromArr(i,this.preOvers);var s;n?(this.checkMouseOutAndOverOfMove(e,n.tar),n.tar=e,s=this.getEles(e,null,t._tEleArr)):(s=this.getEles(e,null,t._tEleArr),this.sendEvents(s,"mouseover",i),this.preOvers.push(this.createTouchO(e,i))),this.sendEvents(s,"mousemove",i)}},e.getLastOvers=function(){return t._tEleArr.length=0,this.preOvers.length>0&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,t._tEleArr):(t._tEleArr.push(Laya.stage),t._tEleArr)},e.onMouseUp=function(e,i,n){if(void 0===n&&(n=!1),this.enable){var s,r,a,o,h,l=0,c=0,u=Browser.onMobile;r=this.getEles(e,null,t._tEleArr),this.sendEvents(r,n?"mouseup":"rightmouseup",i);var _;if(_=n?this.preDowns:this.preRightDowns,s=this.getTouchFromArr(i,_)){var d=!1,f=Browser.now();if(d=f-this._lastClickTime<300,this._lastClickTime=f,e==s.tar)h=r;else for(a=this.getEles(s.tar,null,t._oldArr),h=t._newArr,h.length=0,c=a.length,l=0;c>l;l++)o=a[l],r.indexOf(o)>=0&&h.push(o);h.length>0&&this.sendEvents(h,n?"click":"rightclick",i),n&&d&&this.sendEvents(h,"doubleclick",i),this.removeTouchFromArr(i,_),s.tar=null,Pool.recover("TouchData",s)}else;s=this.getTouchFromArr(i,this.preOvers),s&&u&&(h=this.getEles(s.tar,null,h),h&&h.length>0&&this.sendEvents(h,"mouseout",i),this.removeTouchFromArr(i,this.preOvers),s.tar=null,Pool.recover("TouchData",s))}},t._oldArr=[],t._newArr=[],t._tEleArr=[],__static(t,["I",function(){return this.I=new t}]),t}(),Filter=function(){function t(){this._action=null}__class(t,"laya.filters.Filter");var e=t.prototype;return Laya.imps(e,{"laya.filters.IFilter":!0}),e.callNative=function(t){},__getset(0,e,"type",function(){return-1}),__getset(0,e,"action",function(){return this._action}),t.BLUR=16,t.COLOR=32,t.GLOW=8,t._filterStart=null,t._filterEnd=null,t._EndTarget=null,t._recycleScope=null,t._filter=null,t._useSrc=null,t._endSrc=null,t._useOut=null,t._endOut=null,t}(),ColorFilterAction=function(){function t(){this.data=null}__class(t,"laya.filters.ColorFilterAction");var e=t.prototype;return Laya.imps(e,{"laya.filters.IFilterAction":!0}),e.apply=function(t){var e=t.ctx.ctx,i=t.ctx.ctx.canvas;if(0==i.width||0==i.height)return i;for(var n,s=e.getImageData(0,0,i.width,i.height),r=s.data,a=0,o=r.length;o>a;a+=4)n=this.getColor(r[a],r[a+1],r[a+2],r[a+3]),0!=r[a+3]&&(r[a]=n[0],r[a+1]=n[1],r[a+2]=n[2],r[a+3]=n[3]);return e.putImageData(s,0,0),t},e.getColor=function(t,e,i,n){var s=[];if(this.data._mat&&this.data._alpha){var r=this.data._mat,a=this.data._alpha;s[0]=r[0]*t+r[1]*e+r[2]*i+r[3]*n+a[0],
s[1]=r[4]*t+r[5]*e+r[6]*i+r[7]*n+a[1],s[2]=r[8]*t+r[9]*e+r[10]*i+r[11]*n+a[2],s[3]=r[12]*t+r[13]*e+r[14]*i+r[15]*n+a[3]}return s},t}(),FilterActionGL=function(){function t(){}__class(t,"laya.filters.webgl.FilterActionGL");var e=t.prototype;return Laya.imps(e,{"laya.filters.IFilterActionGL":!0}),e.setValue=function(t){},e.setValueMix=function(t){},e.apply3d=function(t,e,i,n,s){return null},e.apply=function(t){return null},__getset(0,e,"typeMix",function(){return 0}),t}(),HTMLParse=function(){function t(){}return __class(t,"laya.html.utils.HTMLParse"),t.parse=function(e,i,n){i=i.replace(/<br>/g,"<br/>"),i="<root>"+i+"</root>",i=i.replace(t.spacePattern,t.char255);var s=Utils$1.parseXMLFromString(i);t._parseXML(e,s.childNodes[0].childNodes,n)},t._parseXML=function(e,i,n,s){var r=0,a=0;if(i.join||i.item)for(r=0,a=i.length;a>r;++r)t._parseXML(e,i[r],n,s);else{var o,h;if(3==i.nodeType){var l;return void(e instanceof laya.html.dom.HTMLDivElement?(null==i.nodeName&&(i.nodeName="#text"),h=i.nodeName.toLowerCase(),l=i.textContent.replace(/^\s+|\s+$/g,""),l.length>0&&(o=ClassUtils.getInstance(h),o&&(e.addChild(o),o.innerTEXT=l.replace(t.char255AndOneSpacePattern," ")))):(l=i.textContent.replace(/^\s+|\s+$/g,""),l.length>0&&(e.innerTEXT=l.replace(t.char255AndOneSpacePattern," "))))}if(h=i.nodeName.toLowerCase(),"#comment"==h)return;if(o=ClassUtils.getInstance(h)){o=e.addChild(o),o.URI=n,o.href=s;var c=i.attributes;if(c&&c.length>0)for(r=0,a=c.length;a>r;++r){var u=c[r],_=u.nodeName,d=u.value;o._setAttributes(_,d)}t._parseXML(o,i.childNodes,n,o.href)}else t._parseXML(e,i.childNodes,n,s)}},t.char255=String.fromCharCode(255),t.spacePattern=/&nbsp;|&#160;/g,t.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),t}(),Layout=function(){function t(){}return __class(t,"laya.html.utils.Layout"),t.later=function(e){null==t._will&&(t._will=[],Laya.stage.frameLoop(1,null,function(){if(!(t._will.length<1)){for(var e=0;e<t._will.length;e++)laya.html.utils.Layout.layout(t._will[e]);t._will.length=0}})),t._will.push(e)},t.layout=function(e){if(!e||!e._style)return null;if(0===(512&e._style._type))return null;e.getStyle()._type&=-513;var i=t._multiLineLayout(e);return Render.isConchApp&&e.layaoutCallNative&&e.layaoutCallNative(),i},t._multiLineLayout=function(e){function i(){L.y=x,x+=L.h+d,L.mWidth=M,M=0,L=new LayoutLine,I.push(L),L.h=0,S=0,R=!0,A=!1}var n=new Array;e._addChildsToLayout(n);var s,r,a,o,h,l=0,c=n.length,u=e._getCSSStyle(),_=u.letterSpacing,d=u.leading,f=u.lineHeight,p=u._widthAuto()||!u.wordWrap,g=p?999999:e.width,m=(e.height,0),v=u.italic?u.fontSize/3:0,y=u._getAlign(),w=u._getValign(),b=0!==w||0!==y||0!=f,S=0,x=0,C=0,T=0,I=new Array,L=I[0]=new LayoutLine,A=!1,P=!1;L.h=0,u.italic&&(g-=u.fontSize/3);var M=0,R=!0;for(l=0;c>l;l++)if(s=n[l],null!=s)if(R=!1,s instanceof laya.html.dom.HTMLBrElement)i(),L.y=x,L.h=f;else{if(s._isChar()){if(o=s,o.isWord)A=P||"\n"===o["char"],L.wordStartIndex=L.elements.length;else{if(I.length>0&&S+C>g&&L.wordStartIndex>0){var E=0;E=L.elements.length-L.wordStartIndex+1,L.elements.length=L.wordStartIndex,l-=E,i();continue}A=!1,M+=o.width}C=o.width+_,T=o.height,P=!1,A=A||S+C>g,A&&i(),L.minTextHeight=Math.min(L.minTextHeight,s.height)}else r=s._getCSSStyle(),h=s,a=r.padding,0===r._getCssFloat()||(b=!0),A=P||r.lineElement,C=h.width*h._style._tf.scaleX+a[1]+a[3]+_,T=h.height*h._style._tf.scaleY+a[0]+a[2],P=r.lineElement,A=A||S+C>g&&r.wordWrap,A&&i();L.elements.push(s),L.h=Math.max(L.h,T),s.x=S,s.y=x,S+=C,L.w=S-_,L.y=x,m=Math.max(S+v,m)}else R||(S+=t.DIV_ELEMENT_PADDING),L.wordStartIndex=L.elements.length;if(x=L.y+L.h,b){var B=0,k=g;for(p&&e.width>0&&(k=e.width),l=0,c=I.length;c>l;l++)I[l].updatePos(0,k,l,B,y,w,f),B+=Math.max(f,I[l].h+d);x=B}return p&&(e.width=m),x>e.height&&(e.height=x),[m,x]},t._will=null,t.DIV_ELEMENT_PADDING=0,t}(),LayoutLine=function(){function t(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}__class(t,"laya.html.utils.LayoutLine");var e=t.prototype;return e.updatePos=function(t,e,i,n,s,r,a){var o,h=0;this.elements.length>0&&(o=this.elements[this.elements.length-1],h=o.x+o.width-this.elements[0].x);var l=0,c=NaN;1===s&&(l=(e-h)/2),2===s&&(l=e-h),0===a||0!=r||(r=1);for(var u=0,_=this.elements.length;_>u;u++){o=this.elements[u];var d=o._getCSSStyle();switch(0!==l&&(o.x+=l),d._getValign()){case 0:o.y=n;break;case 1:var f=0;99999!=this.minTextHeight&&(f=this.minTextHeight);var p=(f+a)/2;p=Math.max(p,this.h),c=o instanceof laya.html.dom.HTMLImageElement?n+p-o.height:n+p-o.height,o.y=c;break;case 2:o.y=n+(a-o.height)}}},t}(),Arith=function(){function t(){}return __class(t,"laya.maths.Arith"),t.formatR=function(t){return t>Math.PI&&(t-=2*Math.PI),t<-Math.PI&&(t+=2*Math.PI),t},t.isPOT=function(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)},t.setMatToArray=function(t,e){t.a,t.b,t.c,t.d,t.tx+20,t.ty+20,1,e[0]=t.a,e[1]=t.b,e[4]=t.c,e[5]=t.d,e[12]=t.tx,e[13]=t.ty},t}(),Bezier=function(){function t(){this._controlPoints=[new Point,new Point,new Point],this._calFun=this.getPoint2}__class(t,"laya.maths.Bezier");var e=t.prototype;return e._switchPoint=function(t,e){var i=this._controlPoints.shift();i.setTo(t,e),this._controlPoints.push(i)},e.getPoint2=function(t,e){var i=this._controlPoints[0],n=this._controlPoints[1],s=this._controlPoints[2],r=Math.pow(1-t,2)*i.x+2*t*(1-t)*n.x+Math.pow(t,2)*s.x,a=Math.pow(1-t,2)*i.y+2*t*(1-t)*n.y+Math.pow(t,2)*s.y;e.push(r,a)},e.getPoint3=function(t,e){var i=this._controlPoints[0],n=this._controlPoints[1],s=this._controlPoints[2],r=this._controlPoints[3],a=Math.pow(1-t,3)*i.x+3*n.x*t*(1-t)*(1-t)+3*s.x*t*t*(1-t)+r.x*Math.pow(t,3),o=Math.pow(1-t,3)*i.y+3*n.y*t*(1-t)*(1-t)+3*s.y*t*t*(1-t)+r.y*Math.pow(t,3);e.push(a,o)},e.insertPoints=function(t,e){var i=NaN;t=t>0?t:5;var n=NaN;for(n=1/t,i=0;1>=i;i+=n)this._calFun(i,e)},e.getBezierPoints=function(t,e,i){void 0===e&&(e=5),void 0===i&&(i=2);var n=0,s=0;if(s=t.length,2*(i+1)>s)return[];var r;switch(r=[],i){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=i;)this._controlPoints.push(new Point);for(n=0;2*i>n;n+=2)this._switchPoint(t[n],t[n+1]);for(n=2*i;s>n;n+=2)this._switchPoint(t[n],t[n+1]),n/2%i==0&&this.insertPoints(e,r);return r},__static(t,["I",function(){return this.I=new t}]),t}(),GrahamScan=function(){function t(){}return __class(t,"laya.maths.GrahamScan"),t.multiply=function(t,e,i){return(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y)},t.dis=function(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)},t._getPoints=function(e,i,n){for(void 0===i&&(i=!1),t._mPointList||(t._mPointList=[]);t._mPointList.length<e;)t._mPointList.push(new Point);return n||(n=[]),n.length=0,i?t.getFrom(n,t._mPointList,e):t.getFromR(n,t._mPointList,e),n},t.getFrom=function(t,e,i){var n=0;for(n=0;i>n;n++)t.push(e[n]);return t},t.getFromR=function(t,e,i){var n=0;for(n=0;i>n;n++)t.push(e.pop());return t},t.pListToPointList=function(e,i){void 0===i&&(i=!1);var n=0,s=e.length/2,r=t._getPoints(s,i,t._tempPointList);for(n=0;s>n;n++)r[n].setTo(e[n+n],e[n+n+1]);return r},t.pointListToPlist=function(e){var i,n=0,s=e.length,r=t._temPList;for(r.length=0,n=0;s>n;n++)i=e[n],r.push(i.x,i.y);return r},t.scanPList=function(e){return Utils$1.copyArray(e,t.pointListToPlist(t.scan(t.pListToPointList(e,!0))))},t.scan=function(e){var i,n,s,r=0,a=0,o=0,h=e.length,l={};for(n=t._temArr,n.length=0,h=e.length,r=h-1;r>=0;r--)i=e[r],s=i.x+"_"+i.y,l.hasOwnProperty(s)||(l[s]=!0,n.push(i));for(h=n.length,Utils$1.copyArray(e,n),r=1;h>r;r++)(e[r].y<e[o].y||e[r].y==e[o].y&&e[r].x<e[o].x)&&(o=r);for(i=e[0],e[0]=e[o],e[o]=i,r=1;h-1>r;r++){for(o=r,a=r+1;h>a;a++)(t.multiply(e[a],e[o],e[0])>0||0==t.multiply(e[a],e[o],e[0])&&t.dis(e[0],e[a])<t.dis(e[0],e[o]))&&(o=a);i=e[r],e[r]=e[o],e[o]=i}if(n=t._temArr,n.length=0,e.length<3)return Utils$1.copyArray(n,e);for(n.push(e[0],e[1],e[2]),r=3;h>r;r++){for(;n.length>=2&&t.multiply(e[r],n[n.length-1],n[n.length-2])>=0;)n.pop();e[r]&&n.push(e[r])}return n},t._mPointList=null,t._tempPointList=[],t._temPList=[],t._temArr=[],t}(),Matrix=function(){function t(t,e,i,n,s,r){this.inPool=!1,this.bTransform=!1,void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===s&&(s=0),void 0===r&&(r=0),this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=r,this._checkTransform()}__class(t,"laya.maths.Matrix");var e=t.prototype;return e.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},e._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},e.setTranslate=function(t,e){return this.tx=t,this.ty=e,this},e.translate=function(t,e){return this.tx+=t,this.ty+=e,this},e.scale=function(t,e){this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this.bTransform=!0},e.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,r=this.tx;this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=r*e-this.ty*i,this.ty=r*i+this.ty*e,this.bTransform=!0},e.skew=function(t,e){var i=Math.tan(t),n=Math.tan(e),s=this.a,r=this.b;return this.a+=n*this.c,this.b+=n*this.d,this.c+=i*s,this.d+=i*r,this},e.invertTransformPoint=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,r=this.tx,a=e*s-i*n,o=s/a,h=-i/a,l=-n/a,c=e/a,u=(n*this.ty-s*r)/a,_=-(e*this.ty-i*r)/a;return t.setTo(o*t.x+l*t.y+u,h*t.x+c*t.y+_)},e.transformPoint=function(t){return t.setTo(this.a*t.x+this.c*t.y+this.tx,this.b*t.x+this.d*t.y+this.ty)},e.transformPointN=function(t){return t.setTo(this.a*t.x+this.c*t.y,this.b*t.x+this.d*t.y)},e.transformPointArray=function(t,e){for(var i=t.length,n=0;i>n;n+=2){var s=t[n],r=t[n+1];e[n]=this.a*s+this.c*r+this.tx,e[n+1]=this.b*s+this.d*r+this.ty}return e},e.transformPointArrayScale=function(t,e){for(var i=t.length,n=0;i>n;n+=2){var s=t[n],r=t[n+1];e[n]=this.a*s+this.c*r,e[n+1]=this.b*s+this.d*r}return e},e.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},e.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},e.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,r=t*n-e*i;return this.a=n/r,this.b=-e/r,this.c=-i/r,this.d=t/r,this.tx=(i*this.ty-n*s)/r,this.ty=-(t*this.ty-e*s)/r,this},e.setTo=function(t,e,i,n,s,r){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=r,this},e.concat=function(t){var e=this.a,i=this.c,n=this.tx;return this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d,this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this},e.scaleEx=function(t,e){var i=this.a,n=this.b,s=this.c,r=this.d;0!==n||0!==s?(this.a=t*i,this.b=t*n,this.c=e*s,this.d=e*r):(this.a=t*i,this.b=0*r,this.c=0*i,this.d=e*r),this.bTransform=!0},e.rotateEx=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.b,r=this.c,a=this.d;0!==s||0!==r?(this.a=e*n+i*r,this.b=e*s+i*a,this.c=-i*n+e*r,this.d=-i*s+e*a):(this.a=e*n,this.b=i*a,this.c=-i*n,this.d=e*a),this.bTransform=!0},e.clone=function(){var e=t.create();return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e.bTransform=this.bTransform,e},e.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t.bTransform=this.bTransform,t},e.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},e.destroy=function(){if(!this.inPool){var e=t._cache;this.inPool=!0,e._length||(e._length=0),e[e._length++]=this,this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},t.mul=function(t,e,i){var n=t.a,s=t.b,r=t.c,a=t.d,o=t.tx,h=t.ty,l=e.a,c=e.b,u=e.c,_=e.d,d=e.tx,f=e.ty;return 0!==c||0!==u?(i.a=n*l+s*u,i.b=n*c+s*_,i.c=r*l+a*u,i.d=r*c+a*_,i.tx=l*o+u*h+d,i.ty=c*o+_*h+f):(i.a=n*l,i.b=s*_,i.c=r*l,i.d=a*_,i.tx=l*o+d,i.ty=_*h+f),i},t.mul16=function(t,e,i){var n=t.a,s=t.b,r=t.c,a=t.d,o=t.tx,h=t.ty,l=e.a,c=e.b,u=e.c,_=e.d,d=e.tx,f=e.ty;return 0!==c||0!==u?(i[0]=n*l+s*u,i[1]=n*c+s*_,i[4]=r*l+a*u,i[5]=r*c+a*_,i[12]=l*o+u*h+d,i[13]=c*o+_*h+f):(i[0]=n*l,i[1]=s*_,i[4]=r*l,i[5]=a*_,i[12]=l*o+d,i[13]=_*h+f),i},t.mulPre=function(t,e,i,n,s,r,a,o){var h=t.a,l=t.b,c=t.c,u=t.d,_=t.tx,d=t.ty;return 0!==i||0!==n?(o.a=h*e+l*n,o.b=h*i+l*s,o.c=c*e+u*n,o.d=c*i+u*s,o.tx=e*_+n*d+r,o.ty=i*_+s*d+a):(o.a=h*e,o.b=l*s,o.c=c*e,o.d=u*s,o.tx=e*_+r,o.ty=s*d+a),o},t.mulPos=function(t,e,i,n,s,r,a,o){var h=t.a,l=t.b,c=t.c,u=t.d,_=t.tx,d=t.ty;return 0!==l||0!==c?(o.a=e*h+i*c,o.b=e*l+i*u,o.c=n*h+s*c,o.d=n*l+s*u,o.tx=h*r+c*a+_,o.ty=l*r+u*a+d):(o.a=e*h,o.b=i*u,o.c=n*h,o.d=s*u,o.tx=h*r+_,o.ty=u*a+d),o},t.preMul=function(t,e,i){var n=t.a,s=t.b,r=t.c,a=t.d,o=e.a,h=e.b,l=e.c,c=e.d,u=e.tx,_=e.ty;return i.a=o*n,i.b=i.c=0,i.d=c*a,i.tx=u*n+t.tx,i.ty=_*a+t.ty,0===h&&0===l&&0===s&&0===r||(i.a+=h*r,i.d+=l*s,i.b+=o*s+h*a,i.c+=l*n+c*r,i.tx+=_*r,i.ty+=u*s),i},t.preMulXY=function(t,e,i,n){var s=t.a,r=t.b,a=t.c,o=t.d;return n.a=s,n.b=r,n.c=a,n.d=o,n.tx=e*s+t.tx+i*a,n.ty=i*o+t.ty+e*r,n},t.create=function(){var e=t._cache,i=e._length?e[--e._length]:new t;return i.inPool=!1,i},t.EMPTY=new t,t.TEMP=new t,t._cache=[],t}(),Point=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}__class(t,"laya.maths.Point");var e=t.prototype;return e.setTo=function(t,e){return this.x=t,this.y=e,this},e.distance=function(t,e){return Math.sqrt((this.x-t)*(this.x-t)+(this.y-e)*(this.y-e))},e.toString=function(){return this.x+","+this.y},e.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t>0){var e=1/t;this.x*=e,this.y*=e}},t.TEMP=new t,t.EMPTY=new t,t}(),Rectangle=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n}__class(t,"laya.maths.Rectangle");var e=t.prototype;return e.setTo=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},e.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.right&&e>=this.y&&e<this.bottom},e.intersects=function(t){return!(t.x>this.x+this.width||t.x+t.width<this.x||t.y>this.y+this.height||t.y+t.height<this.y)},e.intersection=function(e,i){return this.intersects(e)?(i||(i=new t),i.x=Math.max(this.x,e.x),i.y=Math.max(this.y,e.y),i.width=Math.min(this.right,e.right)-i.x,i.height=Math.min(this.bottom,e.bottom)-i.y,i):null},e.union=function(e,i){return i||(i=new t),this.clone(i),e.width<=0||e.height<=0?i:(i.addPoint(e.x,e.y),i.addPoint(e.right,e.bottom),this)},e.clone=function(e){return e||(e=new t),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},e.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},e.equals=function(t){return!(!t||t.x!==this.x||t.y!==this.y||t.width!==this.width||t.height!==this.height)},e.addPoint=function(t,e){return this.x>t&&(this.width+=this.x-t,this.x=t),this.y>e&&(this.height+=this.y-e,this.y=e),this.width<t-this.x&&(this.width=t-this.x),this.height<e-this.y&&(this.height=e-this.y),this},e._getBoundPoints=function(){var e=t._temB;return e.length=0,0==this.width||0==this.height?e:(e.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),e)},e.isEmpty=function(){return this.width<=0||this.height<=0},__getset(0,e,"right",function(){return this.x+this.width}),__getset(0,e,"bottom",function(){return this.y+this.height}),t._getBoundPointS=function(e,i,n,s){var r=t._temA;return r.length=0,0==n||0==s?r:(r.push(e,i,e+n,i,e,i+s,e+n,i+s),r)},t._getWrapRec=function(e,i){if(!e||e.length<1)return i?i.setTo(0,0,0,0):t.TEMP.setTo(0,0,0,0);i=i?i:new t;var n,s,r,a,o,h=e.length,l=Point.TEMP;for(s=a=99999,r=o=-s,n=0;h>n;n+=2)l.x=e[n],l.y=e[n+1],s=s<l.x?s:l.x,a=a<l.y?a:l.y,r=r>l.x?r:l.x,o=o>l.y?o:l.y;return i.setTo(s,a,r-s,o-a)},t.EMPTY=new t,t.TEMP=new t,t._temB=[],t._temA=[],t}(),SoundManager=function(){function t(){}return __class(t,"laya.media.SoundManager"),__getset(1,t,"useAudioMusic",function(){return t._useAudioMusic},function(e){t._useAudioMusic=e,e?t._musicClass=AudioSound:t._musicClass=null}),__getset(1,t,"autoStopMusic",function(){return t._autoStopMusic},function(e){Laya.stage.off("blur",null,t._stageOnBlur),Laya.stage.off("focus",null,t._stageOnFocus),Laya.stage.off("visibilitychange",null,t._visibilityChange),t._autoStopMusic=e,e&&(Laya.stage.on("blur",null,t._stageOnBlur),Laya.stage.on("focus",null,t._stageOnFocus),Laya.stage.on("visibilitychange",null,t._visibilityChange))}),__getset(1,t,"muted",function(){return t._muted},function(e){e!=t._muted&&(e&&t.stopAllSound(),t.musicMuted=e,t._muted=e)}),__getset(1,t,"musicMuted",function(){return t._musicMuted},function(e){e!=t._musicMuted&&(e?(t._tMusic&&t._musicChannel&&!t._musicChannel.isStopped?Render.isConchApp?t._musicChannel._audio&&(t._musicChannel._audio.muted=!0):t._musicChannel.pause():t._musicChannel=null,t._musicMuted=e):(t._musicMuted=e,t._tMusic&&t._musicChannel&&(Render.isConchApp?t._musicChannel._audio&&(t._musicChannel._audio.muted=!1):t._musicChannel.resume())))}),__getset(1,t,"soundMuted",function(){return t._soundMuted},function(e){t._soundMuted=e}),__getset(1,t,"voiceMuted",function(){return t._voiceMuted},function(e){t._voiceMuted=e}),t.addChannel=function(e){t._channels.indexOf(e)>=0||t._channels.push(e)},t.removeChannel=function(e){var i=0;for(i=t._channels.length-1;i>=0;i--)t._channels[i]==e&&t._channels.splice(i,1)},t.disposeSoundIfNotUsed=function(e){var i=0;for(i=t._channels.length-1;i>=0;i--)if(t._channels[i].url==e)return;t.destroySound(e)},t._visibilityChange=function(){Laya.stage.isVisibility?t._stageOnFocus():t._stageOnBlur()},t._stageOnBlur=function(){t._isActive=!1,t._musicChannel&&(t._musicChannel.isStopped||(t._blurPaused=!0,t._musicChannel.pause())),t.stopAllSound(),Laya.stage.once("mousedown",null,t._stageOnFocus)},t._recoverWebAudio=function(){WebAudioSound.ctx&&"running"!=WebAudioSound.ctx.state&&WebAudioSound.ctx.resume&&WebAudioSound.ctx.resume()},t._stageOnFocus=function(){t._isActive=!0,t._recoverWebAudio(),Laya.stage.off("mousedown",null,t._stageOnFocus),t._blurPaused&&t._musicChannel&&t._musicChannel.isStopped&&(t._blurPaused=!1,t._musicChannel.resume())},t.playVoice=function(e,i,n,s,r){return void 0===i&&(i=1),void 0===r&&(r=0),t._voiceMuted?null:t.playSound(e,i,n,s,r)},t.playSound=function(e,i,n,s,r){if(void 0===i&&(i=1),void 0===r&&(r=0),!t._isActive||!e)return null;if(t._muted)return null;if(t._recoverWebAudio(),e=URL.formatURL(e),e==t._tMusic){if(t._musicMuted)return null}else{if(Render.isConchApp){var a=Utils$1.getFileExtension(e);if("wav"!=a&&"ogg"!=a)return alert("The sound only supports wav or ogg format,for optimal performance reason,please refer to the official website document."),null}if(t._soundMuted)return null}var o;Browser.onMiniGame||(o=Laya.loader.getRes(e)),s||(s=t._soundClass),o||(o=new s,o.load(e),Browser.onMiniGame||Loader.cacheRes(e,o));var h;return(h=o.play(r,i))?(h.url=e,h.volume=e==t._tMusic?t.musicVolume:t.soundVolume,h.completeHandler=n,h):null},t.destroySound=function(t){var e=Laya.loader.getRes(t);e&&(Loader.clearRes(t),e.dispose())},t.playMusic=function(e,i,n,s){return void 0===i&&(i=0),void 0===s&&(s=0),e=URL.formatURL(e),t._tMusic=e,t._musicChannel&&t._musicChannel.stop(),t._musicChannel=t.playSound(e,i,n,t._musicClass,s)},t.stopSound=function(e){e=URL.formatURL(e);var i,n=0;for(n=t._channels.length-1;n>=0;n--)i=t._channels[n],i.url==e&&i.stop()},t.stopAll=function(){t._tMusic=null;var e,i=0;for(i=t._channels.length-1;i>=0;i--)e=t._channels[i],e.stop()},t.stopAllSound=function(){var e,i=0;for(i=t._channels.length-1;i>=0;i--)e=t._channels[i],e.url!=t._tMusic&&e.stop()},t.stopMusic=function(){t._musicChannel&&t._musicChannel.stop(),t._tMusic=null},t.setSoundVolume=function(e,i){if(i)i=URL.formatURL(i),t._setVolume(i,e);else{t.soundVolume=e;var n,s=0;for(s=t._channels.length-1;s>=0;s--)n=t._channels[s],n.url!=t._tMusic&&(n.volume=e)}},t.setMusicVolume=function(e){t.musicVolume=e,t._setVolume(t._tMusic,e)},t._setVolume=function(e,i){e=URL.formatURL(e);var n,s=0;for(s=t._channels.length-1;s>=0;s--)n=t._channels[s],n.url==e&&(n.volume=i)},t.musicVolume=1,t.soundVolume=1,t.voiceVolume=1,t.playbackRate=1,t._useAudioMusic=!0,t._muted=!1,t._soundMuted=!1,t._musicMuted=!1,t._voiceMuted=!1,t._tMusic=null,t._musicChannel=null,t._channels=[],t._autoStopMusic=!1,t._blurPaused=!1,t._isActive=!0,t._soundClass=null,t._musicClass=null,t.autoReleaseSound=!0,t}(),LocalStorage=function(){function t(){}var e;return __class(t,"laya.net.LocalStorage"),t.__init__=function(){t._baseClass||(t._baseClass=e,e.init()),t.items=t._baseClass.items,t.support=t._baseClass.support},t.setItem=function(e,i){t._baseClass.setItem(e,i)},t.getItem=function(e){return t._baseClass.getItem(e)},t.setJSON=function(e,i){t._baseClass.setJSON(e,i)},t.getJSON=function(e){return t._baseClass.getJSON(e)},t.removeItem=function(e){t._baseClass.removeItem(e)},t.clear=function(){t._baseClass.clear()},t._baseClass=null,t.items=null,t.support=!1,t.__init$=function(){e=function(){function t(){}return __class(t,""),t.init=function(){try{t.items=window.localStorage,t.setItem("laya","1"),t.removeItem("laya"),t.support=!0}catch(e){}t.support||console.log("LocalStorage is not supprot or browser is private mode.")},t.setItem=function(e,i){try{t.support&&t.items.setItem(e,i)}catch(n){console.warn("set localStorage failed",n)}},t.getItem=function(e){return t.support?t.items.getItem(e):null},t.setJSON=function(e,i){try{t.support&&t.items.setItem(e,JSON.stringify(i))}catch(n){console.warn("set localStorage failed",n)}},t.getJSON=function(e){return JSON.parse(t.support?t.items.getItem(e):null)},t.removeItem=function(e){t.support&&t.items.removeItem(e)},t.clear=function(){t.support&&t.items.clear()},t.items=null,t.support=!1,t}()},t}(),URL=function(){function t(e){this._url=null,this._path=null,this._url=t.formatURL(e),this._path=t.getPath(e)}__class(t,"laya.net.URL");var e=t.prototype;return __getset(0,e,"path",function(){return this._path}),__getset(0,e,"url",function(){return this._url}),t.formatURL=function(e,i){if(!e)return"null path";if(e.indexOf(":")>0)return e;if(null!=t.customFormat&&(e=t.customFormat(e,i)),e.indexOf(":")>0)return e;var n=e.charAt(0);if("."===n)return t.formatRelativePath((i||t.basePath)+e);if("~"===n)return t.rootPath+e.substring(1);if("d"===n){if(0===e.indexOf("data:image"))return e}else if("/"===n)return e;return(i||t.basePath)+e},t.formatRelativePath=function(t){for(var e=t.split("/"),i=0,n=e.length;n>i;i++)".."==e[i]&&(e.splice(i-1,2),i-=2);return e.join("/")},t.isAbsolute=function(t){return t.indexOf(":")>0||"/"==t.charAt(0)},t.getPath=function(t){var e=t.lastIndexOf("/");return e>0?t.substr(0,e+1):""},t.getFileName=function(t){var e=t.lastIndexOf("/");return e>0?t.substr(e+1):t},t.version={},t.basePath="",t.rootPath="",t.customFormat=function(e){var i=t.version[e];return!Render.isConchApp&&i&&(e+="?v="+i),e},t}(),ShaderValue=function(){function t(){}return __class(t,"laya.webgl.shader.ShaderValue"),t}(),Render=function(){function t(e,i){function n(){Laya.stage._loop(),Browser.window.requestAnimationFrame(n)}this._timeId=0;var s=t._mainCanvas.source.style;s.position="absolute",s.top=s.left="0px",s.background="#000000",t._mainCanvas.source.id="layaCanvas";var r=laya.renders.Render.isWebGL;t._mainCanvas.source.width=e,t._mainCanvas.source.height=i,r&&t.WebGL.init(t._mainCanvas,e,i),Browser.container.appendChild(t._mainCanvas.source),t._context=new RenderContext(e,i,r?null:t._mainCanvas),t._context.ctx.setIsMainContext(),Browser.window.requestAnimationFrame(n),Laya.stage.on("visibilitychange",this,this._onVisibilitychange)}__class(t,"laya.renders.Render");var e=t.prototype;return e._onVisibilitychange=function(){Laya.stage.isVisibility?0!=this._timeId&&Browser.window.clearInterval(this._timeId):this._timeId=Browser.window.setInterval(this._enterFrame,1e3)},e._enterFrame=function(t){Laya.stage._loop()},__getset(1,t,"context",function(){return t._context}),__getset(1,t,"canvas",function(){return t._mainCanvas.source}),t._context=null,t._mainCanvas=null,t.WebGL=null,t.isConchNode=!1,t.isConchApp=!1,t.isConchWebGL=!1,t.isWebGL=!1,t.is3DMode=!1,t.optimizeTextureMemory=function(t,e){return!0},t.__init$=function(){window.ConchRenderType=window.ConchRenderType||1,window.ConchRenderType|=window.conch?4:0,t.isConchNode=5==(5&window.ConchRenderType),t.isConchApp=4==(4&window.ConchRenderType),t.isConchWebGL=6==window.ConchRenderType},t}(),RenderContext=function(){function t(e,i,n){this.x=0,this.y=0,this._drawTexture=function(t,e,i){i[0].loaded&&this.ctx.drawTexture(i[0],i[1],i[2],i[3],i[4],t,e)},this._fillTexture=function(t,e,i){i[0].loaded&&this.ctx.fillTexture(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5],i[6],i[7])},this._drawTextureWithTransform=function(t,e,i){i[0].loaded&&this.ctx.drawTextureWithTransform(i[0],i[1],i[2],i[3],i[4],i[5],t,e,i[6])},this._fillQuadrangle=function(t,e,i){this.ctx.fillQuadrangle(i[0],i[1],i[2],i[3],i[4])},this._drawRect=function(t,e,i){var n=this.ctx;null!=i[4]&&(n.fillStyle=i[4],n.fillRect(t+i[0],e+i[1],i[2],i[3],null)),null!=i[5]&&(n.strokeStyle=i[5],n.lineWidth=i[6],n.strokeRect(t+i[0],e+i[1],i[2],i[3],i[6]))},this._drawPie=function(t,e,i){var n=this.ctx;Render.isWebGL&&n.setPathId(i[8]),n.beginPath(),Render.isWebGL?(n.movePath(i[0]+t,i[1]+e),n.moveTo(0,0)):n.moveTo(t+i[0],e+i[1]),n.arc(t+i[0],e+i[1],i[2],i[3],i[4]),n.closePath(),this._fillAndStroke(i[5],i[6],i[7],!0)},this._clipRect=function(t,e,i){this.ctx.clipRect(t+i[0],e+i[1],i[2],i[3])},this._fillRect=function(t,e,i){this.ctx.fillRect(t+i[0],e+i[1],i[2],i[3],i[4])},this._drawCircle=function(e,i,n){var s=this.ctx;Render.isWebGL&&s.setPathId(n[6]),Stat.drawCall++,s.beginPath(),Render.isWebGL&&s.movePath(n[0]+e,n[1]+i),s.arc(n[0]+e,n[1]+i,n[2],0,t.PI2),s.closePath(),this._fillAndStroke(n[3],n[4],n[5],!0)},this._fillCircle=function(e,i,n){Stat.drawCall++;var s=this.ctx;s.beginPath(),s.fillStyle=n[3],s.arc(n[0]+e,n[1]+i,n[2],0,t.PI2),s.fill()},this._setShader=function(t,e,i){this.ctx.setShader(i[0])},this._drawLine=function(t,e,i){var n=this.ctx;Render.isWebGL&&n.setPathId(i[6]),n.beginPath(),n.strokeStyle=i[4],n.lineWidth=i[5],Render.isWebGL?(n.movePath(t,e),n.moveTo(i[0],i[1]),n.lineTo(i[2],i[3])):(n.moveTo(t+i[0],e+i[1]),n.lineTo(t+i[2],e+i[3])),n.stroke()},this._drawLines=function(t,e,i){var n=this.ctx;Render.isWebGL&&n.setPathId(i[5]),n.beginPath(),t+=i[0],e+=i[1],Render.isWebGL&&n.movePath(t,e),n.strokeStyle=i[3],n.lineWidth=i[4];var s=i[2],r=2,a=s.length;if(Render.isWebGL)for(n.moveTo(s[0],s[1]);a>r;)n.lineTo(s[r++],s[r++]);else for(n.moveTo(t+s[0],e+s[1]);a>r;)n.lineTo(t+s[r++],e+s[r++]);n.stroke()},this._drawLinesWebGL=function(t,e,i){this.ctx.drawLines(t+this.x+i[0],e+this.y+i[1],i[2],i[3],i[4])},this._drawCurves=function(t,e,i){this.ctx.drawCurves(t,e,i)},this._draw=function(t,e,i){i[0].call(null,this,t,e)},this._transformByMatrix=function(t,e,i){this.ctx.transformByMatrix(i[0])},this._setTransform=function(t,e,i){this.ctx.setTransform(i[0],i[1],i[2],i[3],i[4],i[5])},this._setTransformByMatrix=function(t,e,i){this.ctx.setTransformByMatrix(i[0])},this._save=function(t,e,i){this.ctx.save()},this._restore=function(t,e,i){this.ctx.restore()},this._translate=function(t,e,i){this.ctx.translate(i[0],i[1])},this._transform=function(t,e,i){this.ctx.translate(i[1]+t,i[2]+e);var n=i[0];this.ctx.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),this.ctx.translate(-t-i[1],-e-i[2])},this._rotate=function(t,e,i){this.ctx.translate(i[1]+t,i[2]+e),this.ctx.rotate(i[0]),this.ctx.translate(-t-i[1],-e-i[2])},this._scale=function(t,e,i){this.ctx.translate(i[2]+t,i[3]+e),this.ctx.scale(i[0],i[1]),this.ctx.translate(-t-i[2],-e-i[3])},this._alpha=function(t,e,i){this.ctx.globalAlpha*=i[0]},this._setAlpha=function(t,e,i){this.ctx.globalAlpha=i[0]},this._fillText=function(t,e,i){this.ctx.fillText(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5])},this._strokeText=function(t,e,i){this.ctx.strokeText(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5],i[6])},this._fillBorderText=function(t,e,i){this.ctx.fillBorderText(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5],i[6],i[7])},this._blendMode=function(t,e,i){this.ctx.globalCompositeOperation=i[0]},this._beginClip=function(t,e,i){this.ctx.beginClip&&this.ctx.beginClip(t+i[0],e+i[1],i[2],i[3])},this._setIBVB=function(t,e,i){this.ctx.setIBVB(i[0]+t,i[1]+e,i[2],i[3],i[4],i[5],i[6],i[7])},this._fillTrangles=function(t,e,i){this.ctx.fillTrangles(i[0],i[1]+t,i[2]+e,i[3],i[4])},this._drawPath=function(t,e,i){var n=this.ctx;Render.isWebGL&&n.setPathId(-1),n.beginPath(),t+=i[0],e+=i[1];for(var s=i[2],r=0,a=s.length;a>r;r++){var o=s[r];switch(o[0]){case"moveTo":n.moveTo(t+o[1],e+o[2]);break;case"lineTo":n.lineTo(t+o[1],e+o[2]);break;case"arcTo":n.arcTo(t+o[1],e+o[2],t+o[3],e+o[4],o[5]);break;case"closePath":n.closePath()}}var h=i[3];null!=h&&(n.fillStyle=h.fillStyle,n.fill());var l=i[4];null!=l&&(n.strokeStyle=l.strokeStyle,n.lineWidth=l.lineWidth||1,n.lineJoin=l.lineJoin,n.lineCap=l.lineCap,n.miterLimit=l.miterLimit,n.stroke())},this.drawPoly=function(t,e,i){this.ctx.drawPoly(t+this.x+i[0],e+this.y+i[1],i[2],i[3],i[4],i[5],i[6])},this._drawPoly=function(t,e,i){var n=this.ctx,s=i[2],r=2,a=s.length;if(Render.isWebGL)for(n.setPathId(i[6]),n.beginPath(),t+=i[0],e+=i[1],n.movePath(t,e),n.moveTo(s[0],s[1]);a>r;)n.lineTo(s[r++],s[r++]);else for(n.beginPath(),t+=i[0],e+=i[1],n.moveTo(t+s[0],e+s[1]);a>r;)n.lineTo(t+s[r++],e+s[r++]);n.closePath(),this._fillAndStroke(i[3],i[4],i[5],i[7])},this._drawSkin=function(t,e,i){var n=i[0];if(n){var s=this.ctx;n.render(s,t,e)}},this._drawParticle=function(t,e,i){this.ctx.drawParticle(t+this.x,e+this.y,i[0])},n?this.ctx=n.getContext("2d"):(n=HTMLCanvas.create("3D"),this.ctx=RunDriver.createWebGLContext2D(n),n._setContext(this.ctx)),n.size(e,i),this.canvas=n}__class(t,"laya.renders.RenderContext");var e=t.prototype;return e.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},e.drawTexture=function(t,e,i,n,s){t.loaded&&this.ctx.drawTexture(t,e,i,n,s,this.x,this.y)},e._drawTextures=function(t,e,i){i[0].loaded&&this.ctx.drawTextures(i[0],i[1],t+this.x,e+this.y)},e.drawTextureWithTransform=function(t,e,i,n,s,r,a){t.loaded&&this.ctx.drawTextureWithTransform(t,e,i,n,s,r,this.x,this.y,a)},e.fillQuadrangle=function(t,e,i,n,s){this.ctx.fillQuadrangle(t,e,i,n,s)},e.drawCanvas=function(t,e,i,n,s){this.ctx.drawCanvas(t,e+this.x,i+this.y,n,s)},e.drawRect=function(t,e,i,n,s,r){void 0===r&&(r=1);var a=this.ctx;a.strokeStyle=s,a.lineWidth=r,a.strokeRect(t+this.x,e+this.y,i,n,r)},e._fillAndStroke=function(t,e,i,n){void 0===n&&(n=!1);var s=this.ctx;null!=t&&(s.fillStyle=t,Render.isWebGL?s.fill(n):s.fill()),null!=e&&i>0&&(s.strokeStyle=e,s.lineWidth=i,s.stroke())},e.clipRect=function(t,e,i,n){this.ctx.clipRect(t+this.x,e+this.y,i,n)},e.fillRect=function(t,e,i,n,s){this.ctx.fillRect(t+this.x,e+this.y,i,n,s)},e.drawCircle=function(e,i,n,s,r){void 0===r&&(r=1),Stat.drawCall++;var a=this.ctx;a.beginPath(),a.strokeStyle=s,a.lineWidth=r,a.arc(e+this.x,i+this.y,n,0,t.PI2),a.stroke()},e.fillCircle=function(e,i,n,s){Stat.drawCall++;var r=this.ctx;r.beginPath(),r.fillStyle=s,r.arc(e+this.x,i+this.y,n,0,t.PI2),r.fill()},e.setShader=function(t){this.ctx.setShader(t)},e.drawLine=function(t,e,i,n,s,r){void 0===r&&(r=1);var a=this.ctx;a.beginPath(),a.strokeStyle=s,a.lineWidth=r,a.moveTo(this.x+t,this.y+e),a.lineTo(this.x+i,this.y+n),a.stroke()},e.clear=function(){this.ctx.clear()},e.transformByMatrix=function(t){this.ctx.transformByMatrix(t)},e.setTransform=function(t,e,i,n,s,r){this.ctx.setTransform(t,e,i,n,s,r)},e.setTransformByMatrix=function(t){this.ctx.setTransformByMatrix(t)},e.save=function(){this.ctx.save()},e.restore=function(){this.ctx.restore()},e.translate=function(t,e){this.ctx.translate(t,e)},e.transform=function(t,e,i,n,s,r){this.ctx.transform(t,e,i,n,s,r)},e.rotate=function(t){this.ctx.rotate(t)},e.scale=function(t,e){this.ctx.scale(t,e);
},e.alpha=function(t){this.ctx.globalAlpha*=t},e.setAlpha=function(t){this.ctx.globalAlpha=t},e.fillWords=function(t,e,i,n,s){this.ctx.fillWords(t,e,i,n,s)},e.fillBorderWords=function(t,e,i,n,s,r,a){this.ctx.fillBorderWords(t,e,i,n,s,r,a)},e.fillText=function(t,e,i,n,s,r){this.ctx.fillText(t,e+this.x,i+this.y,n,s,r)},e.strokeText=function(t,e,i,n,s,r,a){this.ctx.strokeText(t,e+this.x,i+this.y,n,s,r,a)},e.blendMode=function(t){this.ctx.globalCompositeOperation=t},e.flush=function(){this.ctx.flush&&this.ctx.flush()},e.addRenderObject=function(t){this.ctx.addRenderObject(t)},e.beginClip=function(t,e,i,n){this.ctx.beginClip&&this.ctx.beginClip(t,e,i,n)},e.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},e.fillTrangles=function(t,e,i){this.ctx.fillTrangles(i[0],i[1],i[2],i[3],i.length>4?i[4]:null)},t.PI2=2*Math.PI,t}(),RenderSprite=function(){function t(e,i){switch(this._next=i||t.NORENDER,e){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:return void(this._fun=this._image2);case 517:return void(this._fun=this._image2);case 32:return void(this._fun=Filter._filter);case 69905:return void(this._fun=t._initRenderFun)}this.onCreate(e)}__class(t,"laya.renders.RenderSprite");var e=t.prototype;return e.onCreate=function(t){},e._style=function(t,e,i,n){t._style.render(t,e,i,n);var s=this._next;s._fun.call(s,t,e,i,n)},e._no=function(t,e,i,n){},e._custom=function(t,e,i,n){t.customRender(e,i,n);var s=t._style._tf;this._next._fun.call(this._next,t,e,i-s.translateX,n-s.translateY)},e._clip=function(e,i,n,s){var r=this._next;if(r!=t.NORENDER){var a=e._style.scrollRect;i.ctx.save(),i.ctx.clipRect(n,s,a.width,a.height),r._fun.call(r,e,i,n-a.x,s-a.y),i.ctx.restore()}},e._blend=function(t,e,i,n){var s=t._style;s.blendMode&&(e.ctx.globalCompositeOperation=s.blendMode);var r=this._next;r._fun.call(r,t,e,i,n),e.ctx.globalCompositeOperation="source-over"},e._mask=function(t,e,i,n){var s=this._next;s._fun.call(s,t,e,i,n);var r=t.mask;r&&(e.ctx.globalCompositeOperation="destination-in",(r.numChildren>0||!r.graphics._isOnlyOne())&&(r.cacheAsBitmap=!0),r.render(e,i-t.pivotX,n-t.pivotY)),e.ctx.globalCompositeOperation="source-over"},e._graphics=function(t,e,i,n){var s=t._style._tf;t._graphics&&t._graphics._render(t,e,i-s.translateX,n-s.translateY);var r=this._next;r._fun.call(r,t,e,i,n)},e._image=function(t,e,i,n){var s=t._style;e.ctx.drawTexture2(i,n,s._tf.translateX,s._tf.translateY,t.transform,s.alpha,s.blendMode,t._graphics._one)},e._image2=function(t,e,i,n){var s=t._style._tf;e.ctx.drawTexture2(i,n,s.translateX,s.translateY,t.transform,1,null,t._graphics._one)},e._alpha=function(t,e,i,n){var s,r=t._style;if((s=r.alpha)>.01||t._needRepaint()){var a=e.ctx.globalAlpha;e.ctx.globalAlpha*=s;var o=this._next;o._fun.call(o,t,e,i,n),e.ctx.globalAlpha=a}},e._transform=function(e,i,n,s){var r=e.transform,a=this._next;r&&a!=t.NORENDER?(i.save(),i.transform(r.a,r.b,r.c,r.d,r.tx+n,r.ty+s),a._fun.call(a,e,i,0,0),i.restore()):a._fun.call(a,e,i,n,s)},e._childs_max=function(t,e,i,n){var s=t._style,r=s._tf;if(i=i-r.translateX+s.paddingLeft,n=n-r.translateY+s.paddingTop,s._calculation){var a=t._getWords();if(a){var o=s;o&&(o.stroke?e.fillBorderWords(a,i,n,o.font,o.color,o.strokeColor,o.stroke):e.fillWords(a,i,n,o.font,o.color))}}var h,l=t._childs,c=l.length;if(t.viewport||t.optimizeScrollRect&&t._style.scrollRect){var u=t.viewport||t._style.scrollRect,_=u.x,d=u.y,f=u.right,p=u.bottom,g=NaN,m=NaN;for(v=0;c>v;++v)(h=l[v]).visible&&(g=h._x)<f&&g+h.width>_&&(m=h._y)<p&&m+h.height>d&&h.render(e,i,n)}else for(var v=0;c>v;++v)(h=l[v])._style.visible&&h.render(e,i,n)},e._childs=function(t,e,i,n){if(t._childRenderMax)return void this._childs_max(t,e,i,n);for(var s,r=t._childs,a=r.length,o=0;a>o;++o)(s=r[o])._style.visible&&s.render(e,i,n)},e._canvas=function(t,e,i,n){var s=t._$P.cacheCanvas;if(!s)return void this._next._fun.call(this._next,t,e,i,n);"bitmap"===s.type?Stat.canvasBitmap++:Stat.canvasNormal++;var r=s.ctx;if(t._needRepaint()||!r)this._canvas_repaint(t,e,i,n);else{var a=s._cacheRec;e.drawCanvas(r.canvas,i+a.x,n+a.y,a.width,a.height)}},e._canvas_repaint=function(t,e,i,n){var s=t._$P.cacheCanvas,r=this._next;if(!s)return void r._fun.call(r,t,c,i,n);var a,o,h,l,c=s.ctx,u=t._needRepaint()||!c,_=s.type;if("bitmap"===_?Stat.canvasBitmap++:Stat.canvasNormal++,u){s._cacheRec||(s._cacheRec=new Rectangle);var d,f;Render.isWebGL&&"bitmap"!==_?s._cacheRec.setTo(-t.pivotX,-t.pivotY,1,1):(l=t.getSelfBounds(),l.x=l.x-t.pivotX,l.y=l.y-t.pivotY,l.x=l.x-16,l.y=l.y-16,l.width=l.width+32,l.height=l.height+32,l.x=Math.floor(l.x+i)-i,l.y=Math.floor(l.y+n)-n,l.width=Math.floor(l.width),l.height=Math.floor(l.height),s._cacheRec.copyFrom(l)),l=s._cacheRec;var p=Render.isWebGL?1:Browser.pixelRatio*Laya.stage.clientScaleX,g=Render.isWebGL?1:Browser.pixelRatio*Laya.stage.clientScaleY;if(!Render.isWebGL){var m,v=1,y=1;for(m=t;m&&m!=Laya.stage;)v*=m.scaleX,y*=m.scaleY,m=m.parent;Render.isWebGL?(1>v&&(p*=v),1>y&&(g*=y)):(v>1&&(p*=v),y>1&&(g*=y))}if(t.scrollRect){var w=t.scrollRect;l.x-=w.x,l.y-=w.y}if(d=l.width*p,f=l.height*g,o=l.x,h=l.y,Render.isWebGL&&"bitmap"===_&&(d>2048||f>2048))return console.warn("cache bitmap size larger than 2048,cache ignored"),s.ctx&&(Pool.recover("RenderContext",s.ctx),s.ctx.canvas.size(0,0),s.ctx=null),void r._fun.call(r,t,e,i,n);c||(c=s.ctx=Pool.getItem("RenderContext")||new RenderContext(d,f,HTMLCanvas.create("AUTO"))),c.ctx.sprite=t,a=c.canvas,a.clear(),(a.width!=d||a.height!=f)&&a.size(d,f),"bitmap"===_?a.context.asBitmap=!0:"normal"===_&&(a.context.asBitmap=!1);var b;if(1!=p||1!=g){var S=c.ctx;S.save(),S.scale(p,g),!Render.isConchWebGL&&Render.isConchApp&&(b=t._$P.cf,b&&S.setFilterMatrix&&S.setFilterMatrix(b._mat,b._alpha)),r._fun.call(r,t,c,-o,-h),S.restore(),Render.isConchApp&&!Render.isConchWebGL||t._applyFilters()}else S=c.ctx,!Render.isConchWebGL&&Render.isConchApp&&(b=t._$P.cf,b&&S.setFilterMatrix&&S.setFilterMatrix(b._mat,b._alpha)),r._fun.call(r,t,c,-o,-h),Render.isConchApp&&!Render.isConchWebGL||t._applyFilters();t._$P.staticCache&&(s.reCache=!1),Stat.canvasReCache++}else l=s._cacheRec,o=l.x,h=l.y,a=c.canvas;e.drawCanvas(a,i+o,n+h,l.width,l.height)},t.__init__=function(){function e(e,i){for(var n=0,s=0;s<e.length;s++)n|=e[s],t.renders[n]=i}var i,n=0,s=0;for(i=RunDriver.createRenderSprite(69905,null),s=t.renders.length=4096,n=0;s>n;n++)t.renders[n]=i;t.renders[0]=RunDriver.createRenderSprite(0,null),e([1,512,4,2],new t(1,null)),t.renders[513]=RunDriver.createRenderSprite(513,null),t.renders[517]=new t(517,null)},t._initRenderFun=function(e,i,n,s){var r=e._renderType,a=t.renders[r]=t._getTypeRender(r);a._fun(e,i,n,s)},t._getTypeRender=function(t){for(var e=null,i=2048;i>1;)i&t&&(e=RunDriver.createRenderSprite(i,e)),i>>=1;return e},t.IMAGE=1,t.ALPHA=2,t.TRANSFORM=4,t.BLEND=8,t.CANVAS=16,t.FILTERS=32,t.MASK=64,t.CLIP=128,t.STYLE=256,t.GRAPHICS=512,t.CUSTOM=1024,t.CHILDS=2048,t.INIT=69905,t.renders=[],t.NORENDER=new t(0,null),t}(),Context=function(){function t(){this._repaint=!1}__class(t,"laya.resource.Context");var e=t.prototype;return e.replaceReset=function(){var e=0,i=0;i=t.replaceKeys.length;var n;for(e=0;i>e;e++)n=t.replaceKeys[e],this[t.newKeys[e]]=this[n]},e.replaceResotre=function(){this.__restore(),this.__reset()},e.setIsMainContext=function(){},e.drawTextures=function(t,e,i,n){Stat.drawCall+=e.length/2;for(var s=t.width,r=t.height,a=0,o=e.length;o>a;a+=2)this.drawTexture(t,e[a],e[a+1],s,r,i,n)},e.drawCanvas=function(t,e,i,n,s){Stat.drawCall++,this.drawImage(t.source,e,i,n,s)},e.fillRect=function(t,e,i,n,s){Stat.drawCall++,s&&(this.fillStyle=s),this.__fillRect(t,e,i,n)},e.fillText=function(t,e,i,n,s,r){Stat.drawCall++,arguments.length>3&&null!=n&&(this.font=n,this.fillStyle=s,this.textAlign=r,this.textBaseline="top"),this.__fillText(t,e,i)},e.fillBorderText=function(t,e,i,n,s,r,a,o){Stat.drawCall++,this.font=n,this.fillStyle=s,this.textBaseline="top",this.strokeStyle=r,this.lineWidth=a,this.textAlign=o,this.__strokeText(t,e,i),this.__fillText(t,e,i)},e.strokeText=function(t,e,i,n,s,r,a){Stat.drawCall++,arguments.length>3&&null!=n&&(this.font=n,this.strokeStyle=s,this.lineWidth=r,this.textAlign=a,this.textBaseline="top"),this.__strokeText(t,e,i)},e.transformByMatrix=function(t){this.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.setTransformByMatrix=function(t){this.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clipRect=function(t,e,i,n){Stat.drawCall++,this.beginPath(),this.rect(t,e,i,n),this.clip()},e.drawTexture=function(t,e,i,n,s,r,a){Stat.drawCall++;var o=t.uv,h=t.bitmap.width,l=t.bitmap.height;this.drawImage(t.source,o[0]*h,o[1]*l,(o[2]-o[0])*h,(o[5]-o[3])*l,e+r,i+a,n,s)},e.drawTextureWithTransform=function(t,e,i,n,s,r,a,o,h){Stat.drawCall++;var l=t.uv,c=t.bitmap.width,u=t.bitmap.height;this.save(),1!=h&&(this.globalAlpha*=h),r?(this.transform(r.a,r.b,r.c,r.d,r.tx+a,r.ty+o),this.drawImage(t.source,l[0]*c,l[1]*u,(l[2]-l[0])*c,(l[5]-l[3])*u,e,i,n,s)):this.drawImage(t.source,l[0]*c,l[1]*u,(l[2]-l[0])*c,(l[5]-l[3])*u,e+a,i+o,n,s),this.restore()},e.drawTexture2=function(t,e,i,n,s,r,a,o){"use strict";var h=o[0];if(h.loaded&&h.bitmap&&h.source){Stat.drawCall++;var l=1!==r;if(l){var c=this.globalAlpha;this.globalAlpha*=r}var u=h.uv,_=h.bitmap.width,d=h.bitmap.height;s?(this.save(),this.transform(s.a,s.b,s.c,s.d,s.tx+t,s.ty+e),this.drawImage(h.source,u[0]*_,u[1]*d,(u[2]-u[0])*_,(u[5]-u[3])*d,o[1]-i,o[2]-n,o[3],o[4]),this.restore()):this.drawImage(h.source,u[0]*_,u[1]*d,(u[2]-u[0])*_,(u[5]-u[3])*d,o[1]-i+t,o[2]-n+e,o[3],o[4]),l&&(this.globalAlpha=c)}},e.fillTexture=function(t,e,i,n,s,r,a,o){if(!o.pat){if(t.uv!=Texture.DEF_UV){var h=new HTMLCanvas("2D");h.getContext("2d"),h.size(t.width,t.height),h.context.drawTexture(t,0,0,t.width,t.height,0,0),t=new Texture(h)}o.pat=this.createPattern(t.bitmap.source,r)}var l=e,c=i,u=0,_=0;a&&(l+=a.x%t.width,c+=a.y%t.height,u-=a.x%t.width,_-=a.y%t.height),this.translate(l,c),this.fillRect(u,_,n,s,o.pat),this.translate(-l,-c)},e.flush=function(){return 0},e.fillWords=function(t,e,i,n,s){n&&(this.font=n),s&&(this.fillStyle=s);this.textBaseline="top",this.textAlign="left";for(var r=0,a=t.length;a>r;r++){var o=t[r];this.__fillText(o["char"],o.x+e,o.y+i)}},e.fillBorderWords=function(t,e,i,n,s,r,a){n&&(this.font=n),s&&(this.fillStyle=s),this.textBaseline="top",this.lineWidth=a,this.textAlign="left",this.strokeStyle=r;for(var o=0,h=t.length;h>o;o++){var l=t[o];this.__strokeText(l["char"],l.x+e,l.y+i),this.__fillText(l["char"],l.x+e,l.y+i)}},e.destroy=function(){this.canvas.width=this.canvas.height=0},e.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},e.drawCurves=function(t,e,i){this.beginPath(),this.strokeStyle=i[3],this.lineWidth=i[4];var n=i[2];t+=i[0],e+=i[1],this.moveTo(t+n[0],e+n[1]);for(var s=2,r=n.length;r>s;)this.quadraticCurveTo(t+n[s++],e+n[s++],t+n[s++],e+n[s++]);this.stroke()},t.__init__=function(e){var i=laya.resource.Context.prototype;e=e||CanvasRenderingContext2D.prototype,e.__fillText=e.fillText,e.__fillRect=e.fillRect,e.__strokeText=e.strokeText;var n=["drawTextures","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"];n.forEach(function(t){e[t]=i[t]});var s=HTMLCanvasElement.prototype;if(t.replaceCanvasGetSet(s,"width")&&t.replaceCanvasGetSet(s,"height")){var r=0,a=0;for(a=t.replaceKeys.length,r=0;a>r;r++)if(!t.replaceGetSet(e,t.replaceKeys[r]))return;e.__reset=i.replaceReset,e.__restore=e.restore,e.restore=i.replaceResotre}},t.replaceCanvasGetSet=function(t,e){var i=Object.getOwnPropertyDescriptor(t,e);if(!i||!i.configurable)return!1;var n,s={};for(n in i)"set"!=n&&(s[n]=i[n]);var r=i.set;return s.set=function(t){var e=this;r.call(e,t);var i=e.getContext("2d");i&&"__reset"in i&&i.__reset()},Object.defineProperty(t,e,s),!0},t.replaceGetSet=function(e,i){var n=Object.getOwnPropertyDescriptor(e,i);if(!n||!n.configurable)return!1;var s,r={};for(s in n)"set"!=s&&(r[s]=n[s]);var a=n.set,o="___"+i+"__";return t.newKeys.push(o),r.set=function(t){var e=this;t!=e[o]&&(e[o]=t,a.call(e,t))},Object.defineProperty(e,i,r),!0},t._default=new t,t.newKeys=[],__static(t,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),t}(),ResourceManager=function(){function t(){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++t._uniqueIDCounter,this._name="Content Manager",t._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,t._resourceManagers.push(this),this._resources=[]}__class(t,"laya.resource.ResourceManager");var e=t.prototype;return Laya.imps(e,{"laya.resource.IDispose":!0}),e.getResourceByIndex=function(t){return this._resources[t]},e.getResourcesLength=function(){return this._resources.length},e.addResource=function(t){t.resourceManager&&t.resourceManager.removeResource(t);var e=this._resources.indexOf(t);return-1===e?(t._resourceManager=this,this._resources.push(t),this.addSize(t.memorySize),!0):!1},e.removeResource=function(t){var e=this._resources.indexOf(t);return-1!==e?(this._resources.splice(e,1),t._resourceManager=null,this._memorySize-=t.memorySize,!0):!1},e.unload=function(){for(var t=this._resources.slice(0,this._resources.length),e=0;e<t.length;e++){var i=t[e];i.dispose()}t.length=0},e.setUniqueName=function(e){for(var i=!0,n=0;n<t._resourceManagers.length;n++)if(t._resourceManagers[n]._name===e&&t._resourceManagers[n]!==this)return void(i=!1);i?this.name!=e&&(this.name=e,t._isResourceManagersSorted=!1):this.setUniqueName(e.concat("-copy"))},e.dispose=function(){if(this===t._systemResourceManager)throw new Error("systemResourceManager不能被释放！");t._resourceManagers.splice(t._resourceManagers.indexOf(this),1),t._isResourceManagersSorted=!1;for(var e=this._resources.slice(0,this._resources.length),i=0;i<e.length;i++){var n=e[i];n.resourceManager.removeResource(n),n.dispose()}e.length=0},e.addSize=function(t){t&&(this.autoRelease&&t>0&&this._memorySize+t>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=t)},e.garbageCollection=function(t){var e=this._resources;e=e.slice(),e.sort(function(t,e){if(!t||!e)throw new Error("a或b不能为空！");return t.released&&e.released?0:t.released?1:e.released?-1:t.lastUseFrameCount-e.lastUseFrameCount});for(var i=Stat.loopCount,n=0,s=e.length;s>n;n++){var r=e[n];if(!(i-r.lastUseFrameCount>1))return void(this._memorySize>=t&&(this._isOverflow=!0));if(r.releaseResource(),this._memorySize<t)return void(this._isOverflow=!1)}},__getset(0,e,"id",function(){return this._id}),__getset(0,e,"name",function(){return this._name},function(e){!e&&""===e||this._name===e||(this._name=e,t._isResourceManagersSorted=!1)}),__getset(0,e,"memorySize",function(){return this._memorySize}),__getset(1,t,"systemResourceManager",function(){return null===t._systemResourceManager&&(t._systemResourceManager=new t,t._systemResourceManager._name="System Resource Manager"),t._systemResourceManager}),__getset(1,t,"sortedResourceManagersByName",function(){return t._isResourceManagersSorted||(t._isResourceManagersSorted=!0,t._resourceManagers.sort(t.compareResourceManagersByName)),t._resourceManagers}),t.__init__=function(){t.currentResourceManager=t.systemResourceManager},t.getLoadedResourceManagerByIndex=function(e){return t._resourceManagers[e]},t.getLoadedResourceManagersCount=function(){return t._resourceManagers.length},t.recreateContentManagers=function(e){void 0===e&&(e=!1);for(var i=t.currentResourceManager,n=0;n<t._resourceManagers.length;n++){t.currentResourceManager=t._resourceManagers[n];for(var s=0;s<t.currentResourceManager._resources.length;s++)t.currentResourceManager._resources[s].releaseResource(e),t.currentResourceManager._resources[s].activeResource(e)}t.currentResourceManager=i},t.releaseContentManagers=function(e){void 0===e&&(e=!1);for(var i=t.currentResourceManager,n=0;n<t._resourceManagers.length;n++){t.currentResourceManager=t._resourceManagers[n];for(var s=0;s<t.currentResourceManager._resources.length;s++){var r=t.currentResourceManager._resources[s];!r.released&&r.releaseResource(e)}}t.currentResourceManager=i},t.compareResourceManagersByName=function(t,e){if(t==e)return 0;var i=t._name,n=e._name;if(null==i)return null==n?0:-1;if(null==n)return 1;var s=i.localeCompare(n);return 0!=s?s:(e.setUniqueName(n),n=e._name,i.localeCompare(n))},t._uniqueIDCounter=0,t._systemResourceManager=null,t._isResourceManagersSorted=!1,t._resourceManagers=[],t.currentResourceManager=null,t}(),System=function(){function System(){}return __class(System,"laya.system.System"),System.changeDefinition=function(name,classObj){Laya[name]=classObj;var str=name+"=classObj";eval(str)},System.__init__=function(){Render.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())},System}(),Browser=function(){function t(){}return __class(t,"laya.utils.Browser"),__getset(1,t,"pixelRatio",function(){return t.__init__(),t.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")>-1?2:RunDriver.getPixelRatio()}),__getset(1,t,"height",function(){return t.__init__(),(Laya.stage&&Laya.stage.canvasRotation?t.clientWidth:t.clientHeight)*t.pixelRatio}),__getset(1,t,"clientWidth",function(){return t.__init__(),t.window.innerWidth||t.document.body.clientWidth}),__getset(1,t,"window",function(){return t.__init__(),t._window}),__getset(1,t,"clientHeight",function(){return t.__init__(),t.window.innerHeight||t.document.body.clientHeight||t.document.documentElement.clientHeight}),__getset(1,t,"width",function(){return t.__init__(),(Laya.stage&&Laya.stage.canvasRotation?t.clientHeight:t.clientWidth)*t.pixelRatio}),__getset(1,t,"container",function(){return t.__init__(),t._container||(t._container=t.createElement("div"),t._container.id="layaContainer",t.document.body.appendChild(t._container)),t._container},function(e){t._container=e}),__getset(1,t,"document",function(){return t.__init__(),t._document}),t.__init__=function(){if(!t._window){t._window=RunDriver.getWindow(),t._document=t.window.document,t._window.addEventListener("message",function(t){laya.utils.Browser._onMessage(t)},!1),t.document.__createElement=t.document.createElement,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};var e=window.document.body.style;e.margin=0,e.overflow="hidden";for(var i=window.document.getElementsByTagName("meta"),n=0,s=!1,r="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no";n<i.length;){var a=i[n];if("viewport"==a.name){a.content=r,s=!0;break}n++}s||(a=document.createElement("meta"),a.name="viewport",a.content=r,document.getElementsByTagName("head")[0].appendChild(a)),t.userAgent=t.window.navigator.userAgent,t.u=t.userAgent,t.onIOS=!!t.u.match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),t.onMobile=t.u.indexOf("Mobile")>-1,t.onIPhone=t.u.indexOf("iPhone")>-1,t.onIPad=t.u.indexOf("iPad")>-1,t.onIE=!!t.window.ActiveXObject||"ActiveXObject"in t.window,t.onWX=t.u.indexOf("MicroMe"+String("ssenger").toLowerCase())>-1,t.onGameWebView=t.u.indexOf("Custom User Agent WWJ.cn")>-1,t.onTokenPocket=t.u.indexOf("TokenPocket")>-1,t.onPC=!t.onMobile,t.onSafari=!!t.u.match(/Version\/\d+\.\d\x20Mobile\/\S+\x20Safari/),t.httpProtocol="http:"==t.window.location.protocol,t.webAudioEnabled=!!(t.window.AudioContext||t.window.webkitAudioContext||t.window.mozAudioContext),t.soundType=t.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",Sound=t.webAudioEnabled?WebAudioSound:AudioSound,t.webAudioEnabled&&WebAudioSound.initWebAudio(),t.enableTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,window.focus(),SoundManager._soundClass=Sound,Render._mainCanvas=Render._mainCanvas||HTMLCanvas.create("2D"),t.canvas||(t.canvas=HTMLCanvas.create("2D"),t.context=t.canvas.getContext("2d"))}},t._onMessage=function(e){if(e.data&&"size"==e.data.name){if(t.window.innerWidth=e.data.width,t.window.innerHeight=e.data.height,t.window.__innerHeight=e.data.clientHeight,!t.document.createEvent)return void console.warn("no document.createEvent");var i=t.document.createEvent("HTMLEvents");return i.initEvent("resize",!1,!1),void t.window.dispatchEvent(i)}},t.createElement=function(e){return t.__init__(),t.document.__createElement(e)},t.getElementById=function(e){return t.__init__(),t.document.getElementById(e)},t.removeElement=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},t.now=function(){return RunDriver.now()},t._window=null,t._document=null,t._container=null,t.userAgent=null,t.u=null,t.onIOS=!1,t.onMobile=!1,t.onIPhone=!1,t.onIPad=!1,t.onSafari=!1,t.onIE=!1,t.onWX=!1,t.onGameWebView=!1,t.onTokenPocket=!1,t.onPC=!1,t.onMiniGame=!1,t.onMac=!1,t.httpProtocol=!1,t.webAudioEnabled=!1,t.soundType=null,t.enableTouch=!1,t.canvas=null,t.context=null,t.__init$=function(){},t}(),Byte=function(){function t(t){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,t?(this._u8d_=new Uint8Array(t),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}__class(t,"laya.utils.Byte");var e=t.prototype;return e.___resizeBuffer=function(t){try{var e=new Uint8Array(t);null!=this._u8d_&&(this._u8d_.length<=t?e.set(this._u8d_):e.set(this._u8d_.subarray(0,t))),this._u8d_=e,this._d_=new DataView(e.buffer)}catch(i){throw"___resizeBuffer err:"+t}},e.getString=function(){return this.rUTF(this.getUint16())},e.getFloat32Array=function(t,e){var i=t+e;i=i>this._length?this._length:i;var n=new Float32Array(this._d_.buffer.slice(t,i));return this._pos_=i,n},e.getUint8Array=function(t,e){var i=t+e;i=i>this._length?this._length:i;var n=new Uint8Array(this._d_.buffer.slice(t,i));return this._pos_=i,n},e.getInt16Array=function(t,e){var i=t+e;i=i>this._length?this._length:i;var n=new Int16Array(this._d_.buffer.slice(t,i));return this._pos_=i,n},e.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var t=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,t},e.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var t=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,t},e.writeFloat32=function(t){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,t,this._xd_),this._pos_+=4},e.writeFloat64=function(t){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,t,this._xd_),this._pos_+=8},e.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var t=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,t},e.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var t=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,t},e.writeInt32=function(t){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,t,this._xd_),this._pos_+=4},e.writeUint32=function(t){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,t,this._xd_),this._pos_+=4},e.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var t=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,t},e.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var t=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,t},e.writeUint16=function(t){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,t,this._xd_),this._pos_+=2},e.writeInt16=function(t){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,t,this._xd_),this._pos_+=2},e.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},e.writeUint8=function(t){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,t),this._pos_++},e._getUInt8=function(t){return this._d_.getUint8(t)},e._getUint16=function(t){return this._d_.getUint16(t,this._xd_)},e._getMatrix=function(){var t=new Matrix(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32());return t},e.rUTF=function(t){for(var e="",i=this._pos_+t,n=0,s=0,r=0,a=String.fromCharCode,o=this._u8d_,h=0;this._pos_<i;)n=o[this._pos_++],128>n?0!=n&&(e+=a(n)):224>n?e+=a((63&n)<<6|127&o[this._pos_++]):240>n?(s=o[this._pos_++],e+=a((31&n)<<12|(127&s)<<6|127&o[this._pos_++])):(s=o[this._pos_++],r=o[this._pos_++],e+=a((15&n)<<18|(127&s)<<12|r<<6&127|127&o[this._pos_++])),h++;return e},e.getCustomString=function(t){for(var e="",i=0,n=0,s=0,r=String.fromCharCode,a=this._u8d_;t>0;)if(n=a[this._pos_],128>n)e+=r(n),this._pos_++,t--;else for(i=n-128,this._pos_++,t-=i;i>0;)n=a[this._pos_++],s=a[this._pos_++],e+=r(s<<8|n),i--;return e},e.clear=function(){this._pos_=0,this.length=0},e.__getBuffer=function(){return this._d_.buffer},e.writeUTFBytes=function(t){t+="";for(var e=0,i=t.length;i>e;e++){var n=t.charCodeAt(e);127>=n?this.writeByte(n):2047>=n?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|n>>6,128|63&n],this._pos_),this._pos_+=2):65535>=n?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|n>>12,128|n>>6&63,128|63&n],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n],this._pos_),this._pos_+=4)}},e.writeUTFString=function(t){var e=this.pos;this.writeUint16(1),this.writeUTFBytes(t);var i=this.pos-e-2;if(i>=65536)throw"writeUTFString byte len more than 65536";this._d_.setUint16(e,i,this._xd_)},e.readUTFString=function(){return this.readUTFBytes(this.getUint16())},e.getUTFString=function(){return this.readUTFString()},e.readUTFBytes=function(t){if(void 0===t&&(t=-1),0==t)return"";var e=this.bytesAvailable;if(t>e)throw"readUTFBytes error - Out of bounds";return t=t>0?t:e,this.rUTF(t)},e.getUTFBytes=function(t){return void 0===t&&(t=-1),this.readUTFBytes(t)},e.writeByte=function(t){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,t),this._pos_+=1},e.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},e.getByte=function(){return this.readByte()},e.ensureWrite=function(t){this._length<t&&(this._length=t),this._allocated_<t&&(this.length=t)},e.writeArrayBuffer=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),0>e||0>i)throw"writeArrayBuffer error - Out of bounds";0==i&&(i=t.byteLength-e),this.ensureWrite(this._pos_+i);var n=new Uint8Array(t);this._u8d_.set(n.subarray(e,e+i),this._pos_),this._pos_+=i},__getset(0,e,"buffer",function(){var t=this._d_.buffer;return t.byteLength==this.length?t:t.slice(0,this.length)}),__getset(0,e,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(t){this._xd_="littleEndian"==t}),__getset(0,e,"length",function(){return this._length},function(t){this._allocated_<t?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(t,2*this._allocated_))):this._allocated_>t&&this.___resizeBuffer(this._allocated_=t),this._length=t}),__getset(0,e,"pos",function(){return this._pos_},function(t){this._pos_=t}),__getset(0,e,"bytesAvailable",function(){return this._length-this._pos_}),t.getSystemEndian=function(){if(!t._sysEndian){var e=new ArrayBuffer(2);new DataView(e).setInt16(0,256,!0),t._sysEndian=256===new Int16Array(e)[0]?"littleEndian":"bigEndian"}return t._sysEndian},t.BIG_ENDIAN="bigEndian",t.LITTLE_ENDIAN="littleEndian",t._sysEndian=null,t}(),CacheManger=function(){function t(){}return __class(t,"laya.utils.CacheManger"),t.regCacheByFunction=function(e,i){t.unRegCacheByFunction(e,i);var n;n={tryDispose:e,getCacheList:i},t._cacheList.push(n)},t.unRegCacheByFunction=function(e,i){var n=0,s=0;for(s=t._cacheList.length,n=0;s>n;n++)if(t._cacheList[n].tryDispose==e&&t._cacheList[n].getCacheList==i)return void t._cacheList.splice(n,1)},t.forceDispose=function(){var e=0,i=t._cacheList.length;for(e=0;i>e;e++)t._cacheList[e].tryDispose(!0)},t.beginCheck=function(e){void 0===e&&(e=15e3),Laya.timer.loop(e,null,t._checkLoop)},t.stopCheck=function(){Laya.timer.clear(null,t._checkLoop)},t._checkLoop=function(){var e=t._cacheList;if(!(e.length<1)){var i=Browser.now(),n=0,s=0;for(s=n=e.length;n>0&&(t._index++,t._index=t._index%s,e[t._index].tryDispose(!1),!(Browser.now()-i>t.loopTimeLimit));)n--}},t.loopTimeLimit=2,t._cacheList=[],t._index=0,t}(),ClassUtils=function(){function t(){}return __class(t,"laya.utils.ClassUtils"),t.regClass=function(e,i){t._classMap[e]=i},t.getRegClass=function(e){return t._classMap[e]},t.getInstance=function(e){var i=t.getClass(e);return i?new i:(console.warn("[error] Undefined class:",e),null)},t.createByJson=function(e,i,n,s,r){"string"==typeof e&&(e=JSON.parse(e));var a=e.props;if(!i&&(i=r?r.runWith(e):t.getInstance(a.runtime||e.type),!i))return null;var o=e.child;if(o)for(var h=0,l=o.length;l>h;h++){var c=o[h];if("render"!==c.props.name&&"render"!==c.props.renderType||!i._$set_itemRender)if("Graphic"==c.type)t.addGraphicsToSprite(c,i);else if(t.isDrawType(c.type))t.addGraphicToSprite(c,i,!0);else{var u=t.createByJson(c,null,n,s,r);"Script"==c.type?u.hasOwnProperty("owner")?u.owner=i:u.hasOwnProperty("target")&&(u.target=i):"mask"==c.props.renderType?i.mask=u:i.addChild(u)}else i.itemRender=c}if(a)for(var _ in a){var d=a[_];"var"===_&&n?n[d]=i:d instanceof Array&&"function"==typeof i[_]?i[_].apply(i,d):i[_]=d}return s&&e.customProps&&s.runWith([i,e]),i.created&&i.created(),i},t.addGraphicsToSprite=function(e,i){var n;if(n=e.child,n&&!(n.length<1)){var s;s=t._getGraphicsFromSprite(e,i);var r=0,a=0;e.props&&(r=t._getObjVar(e.props,"x",0),a=t._getObjVar(e.props,"y",0)),0!=r&&0!=a&&s.translate(r,a);var o=0,h=0;for(h=n.length,o=0;h>o;o++)t._addGraphicToGraphics(n[o],s);0!=r&&0!=a&&s.translate(-r,-a)}},t.addGraphicToSprite=function(e,i,n){void 0===n&&(n=!1);var s;s=n?t._getGraphicsFromSprite(e,i):i.graphics,t._addGraphicToGraphics(e,s)},t._getGraphicsFromSprite=function(t,e){var i;if(!t||!t.props)return e.graphics;var n;switch(n=t.props.renderType){case"hit":case"unHit":var s;e.hitArea||(e.hitArea=new HitArea),s=e.hitArea,s[n]||(s[n]=new Graphics),i=s[n]}return i||(i=e.graphics),i},t._getTransformData=function(e){var i;(e.hasOwnProperty("pivotX")||e.hasOwnProperty("pivotY"))&&(i=i||new Matrix,i.translate(-t._getObjVar(e,"pivotX",0),-t._getObjVar(e,"pivotY",0)));var n=t._getObjVar(e,"scaleX",1),s=t._getObjVar(e,"scaleY",1),r=t._getObjVar(e,"rotation",0);t._getObjVar(e,"skewX",0),t._getObjVar(e,"skewY",0);return 1==n&&1==s&&0==r||(i=i||new Matrix,i.scale(n,s),i.rotate(.0174532922222222*r)),i},t._addGraphicToGraphics=function(e,i){var n;if(n=e.props){var s;if(s=t.DrawTypeDic[e.type]){var r;r=i;var a,o=t._getParams(n,s[1],s[2],s[3]);a=t._tM,(a||1!=t._alpha)&&(r.save(),a&&r.transform(a),1!=t._alpha&&r.alpha(t._alpha)),r[s[0]].apply(r,o),(a||1!=t._alpha)&&r.restore()}}},t._adptLineData=function(t){return t[2]=parseFloat(t[0])+parseFloat(t[2]),t[3]=parseFloat(t[1])+parseFloat(t[3]),t},t._adptTextureData=function(t){return t[0]=Loader.getRes(t[0]),t},t._adptLinesData=function(e){return e[2]=t._getPointListByStr(e[2]),e},t.isDrawType=function(e){return"Image"==e?!1:t.DrawTypeDic.hasOwnProperty(e)},t._getParams=function(e,i,n,s){
void 0===n&&(n=0);var r;r=t._temParam,r.length=i.length;var a=0,o=0;for(o=i.length,a=0;o>a;a++)r[a]=t._getObjVar(e,i[a][0],i[a][1]);t._alpha=t._getObjVar(e,"alpha",1);var h;return h=t._getTransformData(e),h?(n||(n=0),h.translate(r[n],r[n+1]),r[n]=r[n+1]=0,t._tM=h):t._tM=null,s&&t[s]&&(r=t[s](r)),r},t._getPointListByStr=function(t){var e;e=t.split(",");var i=0,n=0;for(n=e.length,i=0;n>i;i++)e[i]=parseFloat(e[i]);return e},t._getObjVar=function(t,e,i){return t.hasOwnProperty(e)?t[e]:i},t._temParam=[],t._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},t.getClass=function(e){var i=t._classMap[e]||e;return"string"==typeof i?Laya.__classmap[i]:i},t._tM=null,t._alpha=NaN,__static(t,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),t}(),Color=function(){function t(e){if(this._color=[],"string"==typeof e){this.strColor=e,null===e&&(e="#000000"),"#"==e.charAt(0)&&(e=e.substr(1));var i=e.length;if(3==i||4==i){for(var n="",s=0;i>s;s++)n+=e[s]+e[s];e=n}var r=this.numColor=parseInt(e,16),a=8==e.length;if(a)return void(this._color=[parseInt(e.substr(0,2),16)/255,((16711680&r)>>16)/255,((65280&r)>>8)/255,(255&r)/255])}else r=this.numColor=e,this.strColor=Utils$1.toHexColor(r);this._color=[((16711680&r)>>16)/255,((65280&r)>>8)/255,(255&r)/255,1],this._color.__id=++t._COLODID}return __class(t,"laya.utils.Color"),t._initDefault=function(){t._DEFAULT={};for(var e in t._COLOR_MAP)t._SAVE[e]=t._DEFAULT[e]=new t(t._COLOR_MAP[e]);return t._DEFAULT},t._initSaveMap=function(){t._SAVE_SIZE=0,t._SAVE={};for(var e in t._DEFAULT)t._SAVE[e]=t._DEFAULT[e]},t.create=function(e){var i=t._SAVE[e+""];return null!=i?i:(t._SAVE_SIZE<1e3||t._initSaveMap(),t._SAVE[e+""]=new t(e))},t._SAVE={},t._SAVE_SIZE=0,t._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},t._DEFAULT=t._initDefault(),t._COLODID=1,t}(),Dragging=function(){function t(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}__class(t,"laya.utils.Dragging");var e=t.prototype;return e.start=function(t,e,i,n,s,r,a,o){void 0===o&&(o=.92),this.clearTimer(),this.target=t,this.area=e,this.hasInertia=i,this.elasticDistance=e?n:0,this.elasticBackTime=s,this.data=r,this._disableMouseEvent=a,this.ratio=o,1!=t.globalScaleX||1!=t.globalScaleY?this._parent=t.parent:this._parent=Laya.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,Laya.stage.on("mouseup",this,this.onStageMouseUp),Laya.stage.on("mouseout",this,this.onStageMouseUp),Laya.timer.frameLoop(1,this,this.loop)},e.clearTimer=function(){Laya.timer.clear(this,this.loop),Laya.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},e.stop=function(){this._dragging&&(MouseManager.instance.disableMouseEvent=!1,Laya.stage.off("mouseup",this,this.onStageMouseUp),Laya.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},e.loop=function(){var t=this._parent.getMousePoint(),e=t.x,i=t.y,n=e-this._lastX,s=i-this._lastY;if(this._clickOnly){if(!(Math.abs(n*Laya.stage._canvasTransform.getScaleX())>1||Math.abs(s*Laya.stage._canvasTransform.getScaleY())>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),MouseManager.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(n,s);0===n&&0===s||(this._lastX=e,this._lastY=i,this.target.x+=n*this._elasticRateX,this.target.y+=s*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},e.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var t=this.area.x-this.target.x;else t=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-t/this.elasticDistance),this.target.y<this.area.y)var e=this.area.y-this.target.y;else e=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-e/this.elasticDistance)}},e.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},e.onStageMouseUp=function(t){if(MouseManager.instance.disableMouseEvent=!1,Laya.stage.off("mouseup",this,this.onStageMouseUp),Laya.stage.off("mouseout",this,this.onStageMouseUp),Laya.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var e=this._offsets.length,i=Math.min(e,6),n=this._offsets.length-i,s=e-1;s>n;s--)this._offsetY+=this._offsets[s--],this._offsetX+=this._offsets[s];this._offsetX=this._offsetX/i*2,this._offsetY=this._offsetY/i*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=this._offsetX>0?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=this._offsetY>0?this.maxOffset:-this.maxOffset),Laya.timer.frameLoop(1,this,this.tweenMove)}else this.elasticDistance>0?this.checkElastic():this.clear()},e.checkElastic=function(){var t=NaN,e=NaN;if(this.target.x<this.area.x?t=this.area.x:this.target.x>this.area.x+this.area.width&&(t=this.area.x+this.area.width),this.target.y<this.area.y?e=this.area.y:this.target.y>this.area.y+this.area.height&&(e=this.area.y+this.area.height),isNaN(t)&&isNaN(e))this.clear();else{var i={};isNaN(t)||(i.x=t),isNaN(e)||(i.y=e),this._tween=Tween.to(this.target,i,this.elasticBackTime,Ease.sineOut,Handler.create(this,this.clear),0,!1,!1)}},e.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(Laya.timer.clear(this,this.tweenMove),this.elasticDistance>0?this.checkElastic():this.clear())},e.clear=function(){if(this.target){this.clearTimer();var t=this.target;this.target=null,this._parent=null,t.event("dragend",this.data)}},t}(),Ease=function(){function t(){}return __class(t,"laya.utils.Ease"),t.linearNone=function(t,e,i,n){return i*t/n+e},t.linearIn=function(t,e,i,n){return i*t/n+e},t.linearInOut=function(t,e,i,n){return i*t/n+e},t.linearOut=function(t,e,i,n){return i*t/n+e},t.bounceIn=function(e,i,n,s){return n-t.bounceOut(s-e,0,n,s)+i},t.bounceInOut=function(e,i,n,s){return.5*s>e?.5*t.bounceIn(2*e,0,n,s)+i:.5*t.bounceOut(2*e-s,0,n,s)+.5*n+i},t.bounceOut=function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},t.backIn=function(t,e,i,n,s){return void 0===s&&(s=1.70158),i*(t/=n)*t*((s+1)*t-s)+e},t.backInOut=function(t,e,i,n,s){return void 0===s&&(s=1.70158),(t/=.5*n)<1?.5*i*(t*t*(((s*=1.525)+1)*t-s))+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},t.backOut=function(t,e,i,n,s){return void 0===s&&(s=1.70158),i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},t.elasticIn=function(e,i,n,s,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var o;return 0==e?i:1==(e/=s)?i+n:(a||(a=.3*s),!r||n>0&&n>r||0>n&&-n>r?(r=n,o=a/4):o=a/t.PI2*Math.asin(n/r),-(r*Math.pow(2,10*(e-=1))*Math.sin((e*s-o)*t.PI2/a))+i)},t.elasticInOut=function(e,i,n,s,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var o;return 0==e?i:2==(e/=.5*s)?i+n:(a||(a=s*(.3*1.5)),!r||n>0&&n>r||0>n&&-n>r?(r=n,o=a/4):o=a/t.PI2*Math.asin(n/r),1>e?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e*s-o)*t.PI2/a))+i:r*Math.pow(2,-10*(e-=1))*Math.sin((e*s-o)*t.PI2/a)*.5+n+i)},t.elasticOut=function(e,i,n,s,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var o;return 0==e?i:1==(e/=s)?i+n:(a||(a=.3*s),!r||n>0&&n>r||0>n&&-n>r?(r=n,o=a/4):o=a/t.PI2*Math.asin(n/r),r*Math.pow(2,-10*e)*Math.sin((e*s-o)*t.PI2/a)+n+i)},t.strongIn=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},t.strongInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},t.strongOut=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},t.sineInOut=function(t,e,i,n){return.5*-i*(Math.cos(Math.PI*t/n)-1)+e},t.sineIn=function(e,i,n,s){return-n*Math.cos(e/s*t.HALF_PI)+n+i},t.sineOut=function(e,i,n,s){return n*Math.sin(e/s*t.HALF_PI)+i},t.quintIn=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},t.quintInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},t.quintOut=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},t.quartIn=function(t,e,i,n){return i*(t/=n)*t*t*t+e},t.quartInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t+e:.5*-i*((t-=2)*t*t*t-2)+e},t.quartOut=function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},t.cubicIn=function(t,e,i,n){return i*(t/=n)*t*t+e},t.cubicInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t+e:.5*i*((t-=2)*t*t+2)+e},t.cubicOut=function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},t.quadIn=function(t,e,i,n){return i*(t/=n)*t+e},t.quadInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t+e:.5*-i*(--t*(t-2)-1)+e},t.quadOut=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},t.expoIn=function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e-.001*i},t.expoInOut=function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=.5*n)<1?.5*i*Math.pow(2,10*(t-1))+e:.5*i*(-Math.pow(2,-10*--t)+2)+e},t.expoOut=function(t,e,i,n){return t==n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e},t.circIn=function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},t.circInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*-i*(Math.sqrt(1-t*t)-1)+e:.5*i*(Math.sqrt(1-(t-=2)*t)+1)+e},t.circOut=function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},t.HALF_PI=.5*Math.PI,t.PI2=2*Math.PI,t}(),HitArea=function(){function t(){this._hit=null,this._unHit=null}__class(t,"laya.utils.HitArea");var e=t.prototype;return e.isHit=function(e,i){return t.isHitGraphic(e,i,this.hit)?!t.isHitGraphic(e,i,this.unHit):!1},e.contains=function(t,e){return this.isHit(t,e)},__getset(0,e,"hit",function(){return this._hit||(this._hit=new Graphics),this._hit},function(t){this._hit=t}),__getset(0,e,"unHit",function(){return this._unHit||(this._unHit=new Graphics),this._unHit},function(t){this._unHit=t}),t.isHitGraphic=function(e,i,n){if(!n)return!1;var s;if(s=n.cmds,!s&&n._one&&(s=t._cmds,s.length=1,s[0]=n._one),!s)return!1;var r=0,a=0;a=s.length;var o;for(r=0;a>r;r++)if(o=s[r]){var h=Render._context;switch(o.callee){case h._translate:case 6:e-=o[0],i-=o[1]}if(t.isHitCmd(e,i,o))return!0}return!1},t.isHitCmd=function(e,i,n){if(!n)return!1;var s=Render._context,r=!1;switch(n.callee){case s._drawRect:case 13:t._rec.setTo(n[0],n[1],n[2],n[3]),r=t._rec.contains(e,i);break;case s._drawCircle:case s._fillCircle:case 14:var a=NaN;e-=n[0],i-=n[1],a=e*e+i*i,r=a<n[2]*n[2];break;case s._drawPoly:case 18:e-=n[0],i-=n[1],r=t.ptInPolygon(e,i,n[2])}return r},t.ptInPolygon=function(e,i,n){var s;s=t._ptPoint,s.setTo(e,i);var r=0,a=NaN,o=NaN,h=NaN,l=NaN,c=0;c=n.length;for(var u=0;c>u;u+=2)if(a=n[u],o=n[u+1],h=n[(u+2)%c],l=n[(u+3)%c],o!=l&&!(s.y<Math.min(o,l)||s.y>=Math.max(o,l))){var _=(s.y-o)*(h-a)/(l-o)+a;_>s.x&&r++}return r%2==1},t._cmds=[],__static(t,["_rec",function(){return this._rec=new Rectangle},"_ptPoint",function(){return this._ptPoint=new Point}]),t}(),HTMLChar=function(){function t(e,i,n,s){this["char"]=e,this.charNum=e.charCodeAt(0),this._x=this._y=0,this.width=i,this.height=n,this.style=s,this.isWord=!t._isWordRegExp.test(e)}__class(t,"laya.utils.HTMLChar");var e=t.prototype;return Laya.imps(e,{"laya.display.ILayout":!0}),e.setSprite=function(t){this._sprite=t},e.getSprite=function(){return this._sprite},e._isChar=function(){return!0},e._getCSSStyle=function(){return this.style},__getset(0,e,"width",function(){return this._w},function(t){this._w=t}),__getset(0,e,"x",function(){return this._x},function(t){this._sprite&&(this._sprite.x=t),this._x=t}),__getset(0,e,"y",function(){return this._y},function(t){this._sprite&&(this._sprite.y=t),this._y=t}),__getset(0,e,"height",function(){return this._h},function(t){this._h=t}),t._isWordRegExp=new RegExp("[\\w.]",""),t}(),Log=function(){function t(){}return __class(t,"laya.utils.Log"),t.enable=function(){t._logdiv||(t._logdiv=Browser.window.document.createElement("div"),Browser.window.document.body.appendChild(t._logdiv),t._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},t.toggle=function(){var e=t._logdiv.style;"1px"==e.width?e.width=e.height="50%":e.width=e.height="1px"},t.print=function(e){t._logdiv&&(t._count>=t.maxCount&&t.clear(),t._count++,t._logdiv.innerText+=e+"\n",t._logdiv.scrollTop=t._logdiv.scrollHeight)},t.clear=function(){t._logdiv.innerText="",t._count=0},t._logdiv=null,t._count=0,t.maxCount=20,t}(),Pool=function(){function t(){}return __class(t,"laya.utils.Pool"),t.getPoolBySign=function(e){return t._poolDic[e]||(t._poolDic[e]=[])},t.clearBySign=function(e){t._poolDic[e]&&(t._poolDic[e].length=0)},t.recover=function(e,i){i.__InPool||(i.__InPool=!0,t.getPoolBySign(e).push(i))},t.getItemByClass=function(e,i){var n=t.getPoolBySign(e),s=n.length?n.pop():new i;return s.__InPool=!1,s},t.getItemByCreateFun=function(e,i){var n=t.getPoolBySign(e),s=n.length?n.pop():i();return s.__InPool=!1,s},t.getItem=function(e){var i=t.getPoolBySign(e),n=i.length?i.pop():null;return n&&(n.__InPool=!1),n},t._poolDic={},t.InPoolSign="__InPool",t}(),Stat=function(){function t(){}return __class(t,"laya.utils.Stat"),__getset(1,t,"onclick",null,function(e){t._canvas.source.onclick=e,t._canvas.source.style.pointerEvents=""}),t.show=function(e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),Render.isConchApp)return void(conch.showFPS&&conch.showFPS(e,i));var n=Browser.pixelRatio;t._width=130*n,t._vx=75*n,t._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},t._view[1]={title:"Sprite",value:"spriteCount",color:"white",units:"int"},t._view[2]={title:"DrawCall",value:"drawCall",color:"white",units:"int"},t._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},Render.isWebGL?(t._view[4]={title:"Shader",value:"shaderCall",color:"white",units:"int"},Render.is3DMode?(t._view[0].title="FPS(3D)",t._view[5]={title:"TriFaces",value:"trianglesFaces",color:"white",units:"int"},t._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},t._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"}):(t._view[0].title="FPS(WebGL)",t._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"})):t._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"},t._fontSize=12*n;for(var s=0;s<t._view.length;s++)t._view[s].x=4,t._view[s].y=s*t._fontSize+2*n;t._height=n*(12*t._view.length+3*n)+4,t._canvas||(t._canvas=new HTMLCanvas("2D"),t._canvas.size(t._width,t._height),t._ctx=t._canvas.getContext("2d"),t._ctx.textBaseline="top",t._ctx.font=t._fontSize+"px Sans-serif",t._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;left:"+e+"px;top:"+i+"px;width:"+t._width/n+"px;height:"+t._height/n+"px;"),t._first=!0,t.loop(),t._first=!1,Browser.container.appendChild(t._canvas.source),t.enable()},t.enable=function(){Laya.timer.frameLoop(1,t,t.loop)},t.hide=function(){t._canvas&&(Browser.removeElement(t._canvas.source),Laya.timer.clear(t,t.loop))},t.clear=function(){t.trianglesFaces=t.drawCall=t.shaderCall=t.spriteCount=t.treeNodeCollision=t.treeSpriteCollision=t.canvasNormal=t.canvasBitmap=t.canvasReCache=0},t.loop=function(){t._count++;var e=Browser.now();if(!(e-t._timer<1e3)){var i=t._count;if(t.FPS=Math.round(1e3*i/(e-t._timer)),t._canvas){t.trianglesFaces=Math.round(t.trianglesFaces/i),t.drawCall=Math.round(t.drawCall/i)-2,t.shaderCall=Math.round(t.shaderCall/i),t.spriteCount=Math.round(t.spriteCount/i)-1,t.canvasNormal=Math.round(t.canvasNormal/i),t.canvasBitmap=Math.round(t.canvasBitmap/i),t.canvasReCache=Math.ceil(t.canvasReCache/i),t.treeNodeCollision=Math.round(t.treeNodeCollision/i),t.treeSpriteCollision=Math.round(t.treeSpriteCollision/i);var n=t.FPS>0?Math.floor(1e3/t.FPS).toString():" ";t._fpsStr=t.FPS+(t.renderSlow?" slow":"")+" "+n,t._canvasStr=t.canvasReCache+"/"+t.canvasNormal+"/"+t.canvasBitmap,t.currentMemorySize=ResourceManager.systemResourceManager.memorySize;var s=t._ctx;s.clearRect(t._first?0:t._vx,0,t._width,t._height);for(var r=0;r<t._view.length;r++){var a=t._view[r];t._first&&(s.fillStyle="white",s.fillText(a.title,a.x,a.y,null,null,null)),s.fillStyle=a.color;var o=t[a.value];"M"==a.units&&(o=Math.floor(o/1048576*100)/100+" M"),s.fillText(o+"",a.x+t._vx,a.y,null,null,null)}t.clear()}t._count=0,t._timer=e}},t.FPS=0,t.loopCount=0,t.shaderCall=0,t.drawCall=0,t.trianglesFaces=0,t.spriteCount=0,t.treeNodeCollision=0,t.treeSpriteCollision=0,t.canvasNormal=0,t.canvasBitmap=0,t.canvasReCache=0,t.renderSlow=!1,t.currentMemorySize=0,t._fpsStr=null,t._canvasStr=null,t._canvas=null,t._ctx=null,t._timer=0,t._count=0,t._width=0,t._height=100,t._view=[],t._fontSize=12,t._first=!1,t._vx=NaN,t}(),StringKey=function(){function t(){this._strsToID={},this._idToStrs=[],this._length=0}__class(t,"laya.utils.StringKey");var e=t.prototype;return e.add=function(t){var e=this._strsToID[t];return null!=e?e:(this._idToStrs[this._length]=t,this._strsToID[t]=this._length++)},e.getID=function(t){var e=this._strsToID[t];return null==e?-1:e},e.getName=function(t){var e=this._idToStrs[t];return null==e?void 0:e},t}(),Timer=function(){function t(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map=[],this._laters=[],this._handlers=[],this._temp=[],this._count=0,this.currTimer=Browser.now(),this._lastTimer=Browser.now(),Laya.timer&&Laya.timer.frameLoop(1,this,this._update)}var e;__class(t,"laya.utils.Timer");var i=t.prototype;return i._update=function(){if(this.scale<=0)return void(this._lastTimer=Browser.now());var t=this.currFrame=this.currFrame+this.scale,e=Browser.now();this._delta=(e-this._lastTimer)*this.scale;var i=this.currTimer=this.currTimer+this._delta;this._lastTimer=e;var n=this._handlers;for(this._count=0,a=0,o=n.length;o>a;a++)if(h=n[a],null!==h.method){var s=h.userFrame?t:i;if(s>=h.exeTime)if(h.repeat)if(h.jumpFrame)for(;s>=h.exeTime;)h.exeTime+=h.delay,h.run(!1);else h.exeTime+=h.delay,h.run(!1),s>h.exeTime&&(h.exeTime+=Math.ceil((s-h.exeTime)/h.delay)*h.delay);else h.run(!0)}else this._count++;(this._count>30||t%200===0)&&this._clearHandlers();for(var r=this._laters,a=0,o=r.length-1;o>=a;a++){var h=r[a];null!==h.method&&(this._map[h.key]=null,h.run(!1)),this._recoverHandler(h),a===o&&(o=r.length-1)}r.length=0},i._clearHandlers=function(){for(var t=this._handlers,e=0,i=t.length;i>e;e++){var n=t[e];null!==n.method?this._temp.push(n):this._recoverHandler(n)}this._handlers=this._temp,this._temp=t,this._temp.length=0},i._recoverHandler=function(e){this._map[e.key]==e&&(this._map[e.key]=null),e.clear(),t._pool.push(e)},i._create=function(i,n,s,r,a,o,h){if(!s)return a.apply(r,o),null;if(h){var l=this._getHandler(r,a);if(l)return l.repeat=n,l.userFrame=i,l.delay=s,l.caller=r,l.method=a,l.args=o,l.exeTime=s+(i?this.currFrame:this.currTimer+Browser.now()-this._lastTimer),l}return l=t._pool.length>0?t._pool.pop():new e,l.repeat=n,l.userFrame=i,l.delay=s,l.caller=r,l.method=a,l.args=o,l.exeTime=s+(i?this.currFrame:this.currTimer+Browser.now()-this._lastTimer),this._indexHandler(l),this._handlers.push(l),l},i._indexHandler=function(t){var e=t.caller,i=t.method,n=e?e.$_GID||(e.$_GID=Utils$1.getGID()):0,s=i.$_TID||(i.$_TID=1e5*this._mid++);t.key=n+s,this._map[t.key]=t},i.once=function(t,e,i,n,s){void 0===s&&(s=!0),this._create(!1,!1,t,e,i,n,s)},i.loop=function(t,e,i,n,s,r){void 0===s&&(s=!0),void 0===r&&(r=!1);var a=this._create(!1,!0,t,e,i,n,s);a&&(a.jumpFrame=r)},i.frameOnce=function(t,e,i,n,s){void 0===s&&(s=!0),this._create(!0,!1,t,e,i,n,s)},i.frameLoop=function(t,e,i,n,s){void 0===s&&(s=!0),this._create(!0,!0,t,e,i,n,s)},i.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+t._pool.length},i.clear=function(t,e){var i=this._getHandler(t,e);i&&(this._map[i.key]=null,i.key=0,i.clear())},i.clearAll=function(t){if(t)for(var e=0,i=this._handlers.length;i>e;e++){var n=this._handlers[e];n.caller===t&&(this._map[n.key]=null,n.key=0,n.clear())}},i._getHandler=function(t,e){var i=t?t.$_GID||(t.$_GID=Utils$1.getGID()):0,n=e.$_TID||(e.$_TID=1e5*this._mid++);return this._map[i+n]},i.callLater=function(i,n,s){if(null==this._getHandler(i,n)){if(t._pool.length)var r=t._pool.pop();else r=new e;r.caller=i,r.method=n,r.args=s,this._indexHandler(r),this._laters.push(r)}},i.runCallLater=function(t,e){var i=this._getHandler(t,e);i&&null!=i.method&&(this._map[i.key]=null,i.run(!0))},i.runTimer=function(t,e){this.runCallLater(t,e)},__getset(0,i,"delta",function(){return this._delta}),t._pool=[],t.__init$=function(){e=function(){function t(){this.key=0,this.repeat=!1,this.delay=0,this.userFrame=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}__class(t,"");var e=t.prototype;return e.clear=function(){this.caller=null,this.method=null,this.args=null},e.run=function(t){var e=this.caller;if(e&&e.destroyed)return this.clear();var i=this.method,n=this.args;t&&this.clear(),null!=i&&(n?i.apply(e,n):i.call(e))},t}()},t}(),Tween=function(){function t(){this.gid=0}__class(t,"laya.utils.Tween");var e=t.prototype;return e.to=function(t,e,i,n,s,r,a){return void 0===r&&(r=0),void 0===a&&(a=!1),this._create(t,e,i,n,s,r,a,!0,!1,!0)},e.from=function(t,e,i,n,s,r,a){return void 0===r&&(r=0),void 0===a&&(a=!1),this._create(t,e,i,n,s,r,a,!1,!1,!0)},e._create=function(e,i,n,s,r,a,o,h,l,c){if(!e)throw new Error("Tween:target is null");this._target=e,this._duration=n,this._ease=s||i.ease||t.easeNone,this._complete=r||i.complete,this._delay=a,this._props=[],this._usedTimer=0,this._startTimer=Browser.now(),this._usedPool=l,this.update=i.update;var u=e.$_GID||(e.$_GID=Utils$1.getGID());return t.tweenMap[u]?(o&&t.clearTween(e),t.tweenMap[u].push(this)):t.tweenMap[u]=[this],c?0>=a?this.firstStart(e,i,h):Laya.timer.once(a,this,this.firstStart,[e,i,h]):this._initProps(e,i,h),this},e.firstStart=function(t,e,i){return t.destroyed?void this.clear():(this._initProps(t,e,i),void this._beginLoop())},e._initProps=function(t,e,i){for(var n in e)if("number"==typeof t[n]){var s=i?t[n]:e[n],r=i?e[n]:t[n];this._props.push([n,s,r-s]),i||(t[n]=s)}},e._beginLoop=function(){Laya.timer.frameLoop(1,this,this._doEase)},e._doEase=function(){this._updateEase(Browser.now())},e._updateEase=function(e){var i=this._target;if(i){if(i.destroyed)return t.clearTween(i);var n=this._usedTimer=e-this._startTimer-this._delay;if(!(0>n)){if(n>=this._duration)return this.complete();for(var s=n>0?this._ease(n,0,1,this._duration):0,r=this._props,a=0,o=r.length;o>a;a++){var h=r[a];i[h[0]]=h[1]+s*h[2]}this.update&&this.update.run()}}},e.complete=function(){if(this._target){Laya.timer.runTimer(this,this.firstStart);for(var t=this._target,e=this._props,i=this._complete,n=0,s=e.length;s>n;n++){var r=e[n];t[r[0]]=r[1]+r[2]}this.update&&this.update.run(),this.clear(),i&&i.run()}},e.pause=function(){Laya.timer.clear(this,this._beginLoop),Laya.timer.clear(this,this._doEase)},e.setStartTime=function(t){this._startTimer=t},e.clear=function(){this._target&&(this._remove(),this._clear())},e._clear=function(){this.pause(),Laya.timer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._usedPool&&(this.update=null,Pool.recover("tween",this))},e.recover=function(){this._usedPool=!0,this._clear()},e._remove=function(){var e=t.tweenMap[this._target.$_GID];if(e)for(var i=0,n=e.length;n>i;i++)if(e[i]===this){e.splice(i,1);break}},e.restart=function(){this.pause(),this._usedTimer=0,this._startTimer=Browser.now();for(var t=this._props,e=0,i=t.length;i>e;e++){var n=t[e];this._target[n[0]]=n[1]}Laya.timer.once(this._delay,this,this._beginLoop)},e.resume=function(){this._usedTimer>=this._duration||(this._startTimer=Browser.now()-this._usedTimer-this._delay,this._beginLoop())},__getset(0,e,"progress",null,function(t){var e=t*this._duration;this._startTimer=Browser.now()-this._delay-e}),t.to=function(e,i,n,s,r,a,o,h){return void 0===a&&(a=0),void 0===o&&(o=!1),void 0===h&&(h=!0),Pool.getItemByClass("tween",t)._create(e,i,n,s,r,a,o,!0,h,!0)},t.from=function(e,i,n,s,r,a,o,h){return void 0===a&&(a=0),void 0===o&&(o=!1),void 0===h&&(h=!0),Pool.getItemByClass("tween",t)._create(e,i,n,s,r,a,o,!1,h,!0)},t.clearAll=function(e){if(e&&e.$_GID){var i=t.tweenMap[e.$_GID];if(i){for(var n=0,s=i.length;s>n;n++)i[n]._clear();i.length=0}}},t.clear=function(t){t.clear()},t.clearTween=function(e){t.clearAll(e)},t.easeNone=function(t,e,i,n){return i*t/n+e},t.tweenMap={},t}(),Utils$1=function(){function t(){}return __class(t,"laya.utils.Utils",null,"Utils$1"),t.toRadian=function(e){return e*t._pi2},t.toAngle=function(e){return e*t._pi},t.toHexColor=function(t){if(0>t||isNaN(t))return null;for(var e=t.toString(16);e.length<6;)e="0"+e;return"#"+e},t.getGID=function(){return t._gid++},t.concatArray=function(t,e){if(!e)return t;if(!t)return e;var i=0,n=e.length;for(i=0;n>i;i++)t.push(e[i]);return t},t.clearArray=function(t){return t?(t.length=0,t):t},t.copyArray=function(t,e){if(t||(t=[]),!e)return t;t.length=e.length;var i=0,n=e.length;for(i=0;n>i;i++)t[i]=e[i];return t},t.getGlobalRecByPoints=function(t,e,i,n,s){var r;r=new Point(e,i),r=t.localToGlobal(r);var a;return a=new Point(n,s),a=t.localToGlobal(a),Rectangle._getWrapRec([r.x,r.y,a.x,a.y])},t.getGlobalPosAndScale=function(e){return t.getGlobalRecByPoints(e,0,0,1,1)},t.bind=function(t,e){var i=t;return i=t.bind(e)},t.measureText=function(t,e){return RunDriver.measureText(t,e)},t.updateOrder=function(t){if(!t||t.length<2)return!1;for(var e,i=1,n=0,s=t.length,r=NaN;s>i;){for(n=i,e=t[n],r=t[n]._zOrder;--n>-1&&t[n]._zOrder>r;)t[n+1]=t[n];t[n+1]=e,i++}var a=e.parent.conchModel;if(a)if(null!=a.updateZOrder)a.updateZOrder();else{for(i=0;s>i;i++)a.removeChild(t[i].conchModel);for(i=0;s>i;i++)a.addChildAt(t[i].conchModel,i)}return!0},t.transPointList=function(t,e,i){var n=0,s=t.length;for(n=0;s>n;n+=2)t[n]+=e,t[n+1]+=i},t.parseInt=function(t,e){void 0===e&&(e=0);var i=Browser.window.parseInt(t,e);return isNaN(i)?0:i},t.getFileExtension=function(e){t._extReg.lastIndex=e.lastIndexOf(".");var i=t._extReg.exec(e);return i&&i.length>1?i[1].toLowerCase():null},t.getTransformRelativeToWindow=function(t,e,i){var n=Laya.stage,s=laya.utils.Utils.getGlobalPosAndScale(t),r=n._canvasTransform.clone(),a=r.tx,o=r.ty;r.rotate(-Math.PI/180*Laya.stage.canvasDegree),r.scale(Laya.stage.clientScaleX,Laya.stage.clientScaleY);var h=Laya.stage.canvasDegree%180!=0,l=NaN,c=NaN;h?(l=i+s.y,c=e+s.x,l*=r.d,c*=r.a,90==Laya.stage.canvasDegree?(l=a-l,c+=o):(l+=a,c=o-c)):(l=e+s.x,c=i+s.y,l*=r.a,c*=r.d,l+=a,c+=o),c+=Laya.stage._safariOffsetY;var u=NaN,_=NaN;return h?(u=r.d*s.height,_=r.a*s.width):(u=r.a*s.width,_=r.d*s.height),{x:l,y:c,scaleX:u,scaleY:_}},t.fitDOMElementInArea=function(e,i,n,s,r,a){e._fitLayaAirInitialized||(e._fitLayaAirInitialized=!0,e.style.transformOrigin=e.style.webKittransformOrigin="left top",e.style.position="absolute");var o=t.getTransformRelativeToWindow(i,n,s);e.style.transform=e.style.webkitTransform="scale("+o.scaleX+","+o.scaleY+") rotate("+Laya.stage.canvasDegree+"deg)",e.style.width=r+"px",e.style.height=a+"px",e.style.left=o.x+"px",e.style.top=o.y+"px"},t._gid=1,t._pi=180/Math.PI,t._pi2=Math.PI/180,t._extReg=/\.(\w+)\??/g,t.parseXMLFromString=function(t){var e;if(t=t.replace(/>\s+</g,"><"),e=(new DOMParser).parseFromString(t,"text/xml"),e.firstChild.textContent.indexOf("This page contains the following errors")>-1)throw new Error(e.firstChild.firstChild.textContent);return e},t}(),VectorGraphManager=function(){function t(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],Render.isWebGL&&CacheManger.regCacheByFunction(Utils$1.bind(this.startDispose,this),Utils$1.bind(this.getCacheList,this))}__class(t,"laya.utils.VectorGraphManager");var e=t.prototype;return e.getId=function(){return this._id++},e.addShape=function(t,e){this.shapeDic[t]=e,this.useDic[t]||(this.useDic[t]=!0)},e.addLine=function(t,e){this.shapeLineDic[t]=e,this.shapeLineDic[t]||(this.shapeLineDic[t]=!0)},e.getShape=function(t){this._checkKey&&null!=this.useDic[t]&&(this.useDic[t]=!0)},e.deleteShape=function(t){this.shapeDic[t]&&(this.shapeDic[t]=null,delete this.shapeDic[t]),this.shapeLineDic[t]&&(this.shapeLineDic[t]=null,delete this.shapeLineDic[t]),null!=this.useDic[t]&&delete this.useDic[t]},e.getCacheList=function(){var t,e=[];for(t in this.shapeDic)e.push(this.shapeDic[t]);for(t in this.shapeLineDic)e.push(this.shapeLineDic[t]);return e},e.startDispose=function(t){var e;for(e in this.useDic)this.useDic[e]=!1;this._checkKey=!0},e.endDispose=function(){if(this._checkKey){var t;for(t in this.useDic)this.useDic[t]||this.deleteShape(t);this._checkKey=!1}},t.getInstance=function(){return t.instance=t.instance||new t},t.instance=null,t}(),WeakObject=function(){function t(){this._obj=null,this._obj=t.supportWeakMap?new Browser.window.WeakMap:{},t.supportWeakMap||t._maps.push(this)}__class(t,"laya.utils.WeakObject");var e=t.prototype;return e.set=function(e,i){if(null!=e)if(t.supportWeakMap){var n=e;"string"!=typeof e&&"number"!=typeof e||(n=t._keys[e],n||(n=t._keys[e]={k:e})),this._obj.set(n,i)}else"string"==typeof e||"number"==typeof e?this._obj[e]=i:(e.$_GID||(e.$_GID=Utils$1.getGID()),this._obj[e.$_GID]=i)},e.get=function(e){if(null==e)return null;if(t.supportWeakMap){var i="string"==typeof e||"number"==typeof e?t._keys[e]:e;return i?this._obj.get(i):null}return"string"==typeof e||"number"==typeof e?this._obj[e]:this._obj[e.$_GID]},e.del=function(e){if(null!=e)if(t.supportWeakMap){var i="string"==typeof e||"number"==typeof e?t._keys[e]:e;if(!i)return;this._obj["delete"](i)}else"string"==typeof e||"number"==typeof e?delete this._obj[e]:delete this._obj[this._obj.$_GID]},e.has=function(e){if(null==e)return!1;if(t.supportWeakMap){var i="string"==typeof e||"number"==typeof e?t._keys[e]:e;
return this._obj.has(i)}return"string"==typeof e||"number"==typeof e?null!=this._obj[e]:null!=this._obj[this._obj.$_GID]},t.__init__=function(){t.supportWeakMap=null!=Browser.window.WeakMap,t.supportWeakMap||Laya.timer.loop(t.delInterval,null,t.clearCache)},t.clearCache=function(){for(var e=0,i=t._maps.length;i>e;e++){var n=t._maps[e];n._obj={}}},t.supportWeakMap=!1,t.delInterval=6e5,t._keys={},t._maps=[],__static(t,["I",function(){return this.I=new t}]),t}(),WordText=function(){function t(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}__class(t,"laya.utils.WordText");var e=t.prototype;return e.setText=function(t){this.changed=!0,this._text=t},e.toString=function(){return this._text},e.charCodeAt=function(t){return this._text?this._text.charCodeAt(t):NaN},e.charAt=function(t){return this._text?this._text.charAt(t):null},__getset(0,e,"length",function(){return this._text?this._text.length:0}),t}(),AtlasGrid=function(){function t(t,e,n){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new i,void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this._cells=null,this._rowInfo=null,this._init(t,e),this._atlasID=n}var e,i;__class(t,"laya.webgl.atlas.AtlasGrid");var n=t.prototype;return n.getAltasID=function(){return this._atlasID},n.setAltasID=function(t){t>=0&&(this._atlasID=t)},n.addTex=function(t,e,i){var n=this._get(e,i);return 0==n.ret?n:(this._fill(n.x,n.y,e,i,t),this._texCount++,n)},n._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},n._init=function(t,i){if(this._width=t,this._height=i,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=__newvec(this._height);for(var n=0;n<this._height;n++)this._rowInfo[n]=new e;return this._clear(),!0},n._get=function(t,e){var i=new MergeFillInfo;if(t>=this._failSize.width&&e>=this._failSize.height)return i;for(var n=-1,s=-1,r=this._width,a=this._height,o=this._cells,h=0;a>h;h++)if(!(this._rowInfo[h].spaceCount<t))for(var l=0;r>l;){var c=3*(h*r+l);if(0!=o[c]||o[c+1]<t||o[c+2]<e)l+=o[c+1];else{n=l,s=h;for(var u=0;t>u;u++)if(o[3*u+c+2]<e){n=-1;break}if(!(0>n))return i.ret=!0,i.x=n,i.y=s,i;l+=o[c+1]}}return i},n._fill=function(t,e,i,n,s){var r=this._width,a=this._height;this._check(r>=t+i&&a>=e+n);for(var o=e;n+e>o;++o){this._check(this._rowInfo[o].spaceCount>=i),this._rowInfo[o].spaceCount-=i;for(var h=0;i>h;h++){var l=3*(t+o*r+h);this._check(0==this._cells[l]),this._cells[l]=s,this._cells[l+1]=i,this._cells[l+2]=n}}if(t>0)for(o=0;n>o;++o){var c=0;for(h=t-1;h>=0&&0==this._cells[3*((e+o)*r+h)];--h,++c);for(h=c;h>0;--h)this._cells[3*((e+o)*r+t-h)+1]=h,this._check(h>0)}if(e>0)for(h=t;t+i>h;++h){for(c=0,o=e-1;o>=0&&0==this._cells[3*(h+o*r)];--o,c++);for(o=c;o>0;--o)this._cells[3*(h+(e-o)*r)+2]=o,this._check(o>0)}},n._check=function(t){0==t&&console.log("xtexMerger 错误啦")},n._clear=function(){this._texCount=0;for(var t=0;t<this._height;t++)this._rowInfo[t].spaceCount=this._width;for(var e=0;e<this._height;e++)for(var i=0;i<this._width;i++){var n=3*(e*this._width+i);this._cells[n]=0,this._cells[n+1]=this._width-i,this._cells[n+2]=this._width-e}this._failSize.width=this._width+1,this._failSize.height=this._height+1},t.__init$=function(){e=function(){function t(){this.spaceCount=0}return __class(t,""),t}(),i=function(){function t(){this.width=0,this.height=0}return __class(t,""),t}()},t}(),AtlasResourceManager=function(){function t(t,e,i,n){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=t,this._height=e,this._gridSize=i,this._maxAtlaserCount=n,this._gridNumX=t/i,this._gridNumY=e/i,this._curAtlasIndex=0,this._atlaserArray=[]}__class(t,"laya.webgl.atlas.AtlasResourceManager");var e=t.prototype;return e.setAtlasParam=function(e,i,n,s){if(1==this._setAtlasParam)return t._sid_=0,this._width=e,this._height=i,this._gridSize=n,this._maxAtlaserCount=s,this._gridNumX=e/n,this._gridNumY=i/n,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},e.pushData=function(e){this._setAtlasParam=!1;for(var i=Math.ceil((e.bitmap.width+2)/this._gridSize),n=Math.ceil((e.bitmap.height+2)/this._gridSize),s=!1,r=0;2>r;r++){for(var a=this._maxAtlaserCount,o=0;a>o;o++){var h=(this._curAtlasIndex+o)%a;this._atlaserArray.length-1>=h||this._atlaserArray.push(new Atlaser(this._gridNumX,this._gridNumY,this._width,this._height,t._sid_++));var l=this._atlaserArray[h],c=e.bitmap,u=l.inAtlasWebGLImagesKey.indexOf(c),_=0,d=0;if(-1!=u){var f=l.InAtlasWebGLImagesOffsetValue[u];_=f[0],d=f[1],l.addToAtlas(e,_,d),s=!0,this._curAtlasIndex=h;break}var p=l.addTex(1,i,n);if(p.ret){_=p.x*this._gridSize+1,d=p.y*this._gridSize+1,c.lock=!0,l.addToAtlasTexture(c,_,d),l.addToAtlas(e,_,d),s=!0,this._curAtlasIndex=h;break}}if(s)break;this._atlaserArray.push(new Atlaser(this._gridNumX,this._gridNumY,this._width,this._height,t._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return s||console.log(">>>AtlasManager pushData error"),s},e.addToAtlas=function(t){laya.webgl.atlas.AtlasResourceManager.instance.pushData(t)},e.garbageCollection=function(){if(this._needGC===!0){for(var t=this._atlaserArray.length-this._maxAtlaserCount,e=0;t>e;e++)this._atlaserArray[e].dispose();this._atlaserArray.splice(0,t),this._needGC=!1}return!0},e.freeAll=function(){for(var t=0,e=this._atlaserArray.length;e>t;t++)this._atlaserArray[t].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},e.getAtlaserCount=function(){return this._atlaserArray.length},e.getAtlaserByIndex=function(t){return this._atlaserArray[t]},__getset(1,t,"instance",function(){return t._Instance||(t._Instance=new t(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),t._Instance}),__getset(1,t,"enabled",function(){return t._enabled}),__getset(1,t,"atlasLimitWidth",function(){return t._atlasLimitWidth},function(e){t._atlasLimitWidth=e}),__getset(1,t,"atlasLimitHeight",function(){return t._atlasLimitHeight},function(e){t._atlasLimitHeight=e}),t._enable=function(){t._enabled=!0,Config.atlasEnable=!0},t._disable=function(){t._enabled=!1,Config.atlasEnable=!1},t.__init__=function(){t.atlasTextureWidth=2048,t.atlasTextureHeight=2048,t.maxTextureCount=6,t.atlasLimitWidth=512,t.atlasLimitHeight=512},t._enabled=!1,t._atlasLimitWidth=0,t._atlasLimitHeight=0,t.gridSize=16,t.atlasTextureWidth=0,t.atlasTextureHeight=0,t.maxTextureCount=0,t._atlasRestore=0,t.BOARDER_TYPE_NO=0,t.BOARDER_TYPE_RIGHT=1,t.BOARDER_TYPE_LEFT=2,t.BOARDER_TYPE_BOTTOM=4,t.BOARDER_TYPE_TOP=8,t.BOARDER_TYPE_ALL=15,t._sid_=0,t._Instance=null,t}(),MergeFillInfo=function(){function t(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return __class(t,"laya.webgl.atlas.MergeFillInfo"),t}(),BlendMode=function(){function t(){}return __class(t,"laya.webgl.canvas.BlendMode"),t._init_=function(e){t.fns=[t.BlendNormal,t.BlendAdd,t.BlendMultiply,t.BlendScreen,t.BlendOverlay,t.BlendLight,t.BlendMask,t.BlendDestinationOut],t.targetFns=[t.BlendNormalTarget,t.BlendAddTarget,t.BlendMultiplyTarget,t.BlendScreenTarget,t.BlendOverlayTarget,t.BlendLightTarget,t.BlendMask,t.BlendDestinationOut]},t.BlendNormal=function(t){t.blendFuncSeparate(770,771,1,1)},t.BlendAdd=function(t){t.blendFunc(770,772)},t.BlendMultiply=function(t){t.blendFunc(774,771)},t.BlendScreen=function(t){t.blendFunc(770,1)},t.BlendOverlay=function(t){t.blendFunc(1,769)},t.BlendLight=function(t){t.blendFunc(770,1)},t.BlendNormalTarget=function(t){t.blendFuncSeparate(770,771,1,771)},t.BlendAddTarget=function(t){t.blendFunc(770,772)},t.BlendMultiplyTarget=function(t){t.blendFunc(774,771)},t.BlendScreenTarget=function(t){t.blendFunc(770,1)},t.BlendOverlayTarget=function(t){t.blendFunc(1,769)},t.BlendLightTarget=function(t){t.blendFunc(770,1)},t.BlendMask=function(t){t.blendFunc(0,770)},t.BlendDestinationOut=function(t){t.blendFunc(0,0)},t.activeBlendFunction=null,t.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],t.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},t.NORMAL="normal",t.ADD="add",t.MULTIPLY="multiply",t.SCREEN="screen",t.LIGHT="light",t.OVERLAY="overlay",t.DESTINATIONOUT="destination-out",t.fns=[],t.targetFns=[],t}(),DrawStyle=function(){function t(t){this._color=Color.create("black"),this.setValue(t)}__class(t,"laya.webgl.canvas.DrawStyle");var e=t.prototype;return e.setValue=function(t){if(t){if("string"==typeof t)return void(this._color=Color.create(t));if(t instanceof laya.utils.Color)return void(this._color=t)}},e.reset=function(){this._color=Color.create("black")},e.equal=function(t){return"string"==typeof t?this._color.strColor===t:t instanceof laya.utils.Color?this._color.numColor===t.numColor:!1},e.toColorStr=function(){return this._color.strColor},t.create=function(e){if(e){var i;if("string"==typeof e?i=Color.create(e):e instanceof laya.utils.Color&&(i=e),i)return i._drawStyle||(i._drawStyle=new t(e))}return null},__static(t,["DEFAULT",function(){return this.DEFAULT=new t("#000000")}]),t}(),Path=function(){function t(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];WebGL.mainContext;this.ib=IndexBuffer2D.create(35048),this.vb=VertexBuffer2D.create(5)}__class(t,"laya.webgl.canvas.Path");var e=t.prototype;return e.addPoint=function(t,e){this.tempArray.push(t,e)},e.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},e.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},e.polygon=function(t,e,i,n,s,r){var a;return this.geomatrys.push(this._curGeomatry=a=new Polygon(t,e,i,n,s,r)),n||(a.fill=!1),void 0==r&&(a.borderWidth=0),a},e.setGeomtry=function(t){this.geomatrys.push(this._curGeomatry=t)},e.drawLine=function(t,e,i,n,s){var r;return this.closePath?this.geomatrys.push(this._curGeomatry=r=new LoopLine(t,e,i,n,s)):this.geomatrys.push(this._curGeomatry=r=new Line(t,e,i,n,s)),r.fill=!1,r},e.update=function(){var t=this.ib.byteLength,e=this.geomatrys.length;this.offset=t;for(var i=this.geoStart;e>i;i++)this.geomatrys[i].getData(this.ib,this.vb,this.vb.byteLength/20);this.geoStart=e,this.count=(this.ib.byteLength-t)/CONST3D2D.BYTES_PIDX},e.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},e.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},t}(),SaveBase=function(){function t(){}__class(t,"laya.webgl.canvas.save.SaveBase");var e=t.prototype;return Laya.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){this._dataObj[this._valueName]=this._value,t._cache[t._cache._length++]=this,this._newSubmit&&(e._curSubmit=Submit.RENDERBASE,e._renderKey=0)},t._createArray=function(){var t=[];return t._length=0,t},t._init=function(){var e=t._namemap={};return e[1]="ALPHA",e[2]="fillStyle",e[8]="font",e[256]="lineWidth",e[512]="strokeStyle",e[8192]="_mergeID",e[1024]=e[2048]=e[4096]=[],e[16384]="textBaseline",e[32768]="textAlign",e[65536]="_nBlendType",e[524288]="shader",e[1048576]="filters",e},t.save=function(e,i,n,s){if((e._saveMark._saveuse&i)!==i){e._saveMark._saveuse|=i;var r=t._cache,a=r._length>0?r[--r._length]:new t;a._value=n[a._valueName=t._namemap[i]],a._dataObj=n,a._newSubmit=s;var o=e._save;o[o._length++]=a}},t._cache=laya.webgl.canvas.save.SaveBase._createArray(),t._namemap=t._init(),t}(),SaveClipRect=function(){function t(){this._clipRect=new Rectangle}__class(t,"laya.webgl.canvas.save.SaveClipRect");var e=t.prototype;return Laya.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){e._clipRect=this._clipSaveRect,t._cache[t._cache._length++]=this,this._submitScissor.submitLength=e._submits._length-this._submitScissor.submitIndex,e._curSubmit=Submit.RENDERBASE,e._renderKey=0},t.save=function(e,i){if(131072!=(131072&e._saveMark._saveuse)){e._saveMark._saveuse|=131072;var n=t._cache,s=n._length>0?n[--n._length]:new t;s._clipSaveRect=e._clipRect,e._clipRect=s._clipRect.copyFrom(e._clipRect),s._submitScissor=i;var r=e._save;r[r._length++]=s}},t._cache=SaveBase._createArray(),t}(),SaveMark=function(){function t(){this._saveuse=0}__class(t,"laya.webgl.canvas.save.SaveMark");var e=t.prototype;return Laya.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!0},e.restore=function(e){e._saveMark=this._preSaveMark,t._no[t._no._length++]=this},t.Create=function(e){var i=t._no,n=i._length>0?i[--i._length]:new t;return n._saveuse=0,n._preSaveMark=e._saveMark,e._saveMark=n,n},t._no=SaveBase._createArray(),t}(),SaveTransform=function(){function t(){this._matrix=new Matrix}__class(t,"laya.webgl.canvas.save.SaveTransform");var e=t.prototype;return Laya.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){e._curMat=this._savematrix,t._no[t._no._length++]=this},t.save=function(e){var i=e._saveMark;if(2048!==(2048&i._saveuse)){i._saveuse|=2048;var n=t._no,s=n._length>0?n[--n._length]:new t;s._savematrix=e._curMat,e._curMat=e._curMat.copyTo(s._matrix);var r=e._save;r[r._length++]=s}},t._no=SaveBase._createArray(),t}(),SaveTranslate=function(){function t(){}__class(t,"laya.webgl.canvas.save.SaveTranslate");var e=t.prototype;return Laya.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){e._curMat;e._x=this._x,e._y=this._y,t._no[t._no._length++]=this},t.save=function(e){var i=t._no,n=i._length>0?i[--i._length]:new t;n._x=e._x,n._y=e._y;var s=e._save;s[s._length++]=n},t._no=SaveBase._createArray(),t}(),RenderTargetMAX=function(){function t(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new Rectangle}__class(t,"laya.webgl.resource.RenderTargetMAX");var e=t.prototype;return e.setSP=function(t){this._sp=t},e.size=function(t,e){var i=this;return this._width===t&&this._height===e?void this.target.size(t,e):(this.repaint=!0,this._width=t,this._height=e,this.target?this.target.size(t,e):this.target=RenderTarget2D.create(t,e),void(this.target.hasListener("recovered")||this.target.on("recovered",this,function(t){Laya.timer.callLater(i._sp,i._sp.repaint)})))},e._flushToTarget=function(t,e){if(!e._destroy){var i=RenderState2D.worldScissorTest,n=RenderState2D.worldClipRect;RenderState2D.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,RenderState2D.worldScissorTest=!1,WebGL.mainContext.disable(3089);var s=RenderState2D.worldAlpha,r=RenderState2D.worldMatrix4,a=RenderState2D.worldMatrix,o=RenderState2D.worldFilters,h=RenderState2D.worldShaderDefines;if(RenderState2D.worldMatrix=Matrix.EMPTY,RenderState2D.restoreTempArray(),RenderState2D.worldMatrix4=RenderState2D.TEMPMAT4_ARRAY,RenderState2D.worldAlpha=1,RenderState2D.worldFilters=null,RenderState2D.worldShaderDefines=null,BaseShader.activeShader=null,e.start(),Config.showCanvasMark?e.clear(0,1,0,.3):e.clear(0,0,0,0),t.flush(),e.end(),BaseShader.activeShader=null,RenderState2D.worldAlpha=s,RenderState2D.worldMatrix4=r,RenderState2D.worldMatrix=a,RenderState2D.worldFilters=o,RenderState2D.worldShaderDefines=h,RenderState2D.worldScissorTest=i,i){var l=RenderState2D.height-n.y-n.height;WebGL.mainContext.scissor(n.x,l,n.width,n.height),WebGL.mainContext.enable(3089)}RenderState2D.worldClipRect=n}},e.flush=function(t){this.repaint&&(this._flushToTarget(t,this.target),this.repaint=!1)},e.drawTo=function(t,e,i,n,s){t.drawTexture(this.target.getTexture(),e,i,n,s,0,0)},e.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},t}(),Shader2D=function(){function t(){this.ALPHA=1,this.shaderType=0,this.defines=new ShaderDefines2D}return __class(t,"laya.webgl.shader.d2.Shader2D"),t.__init__=function(){Shader.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),Shader.addInclude("parts/ColorFilter_ps_logic.glsl","gl_FragColor = gl_FragColor * colorMat + colorAlpha/255.0;"),Shader.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),Shader.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n	for(float j = 0.0;j<=c_IterationTime; ++j){\n		vec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n		vec4Color += texture2D(texture, v_texcoord + vec2FilterDir + vec2Off)/floatIterationTotalTime;\n	}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);"),Shader.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),Shader.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform float strength;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\nfloat sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\nfloat sig2 = sigma*sigma;\nfloat _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\nfloat gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return gauss1*exp(-(x*x+y*y)/_2sig2);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4Color += texture2D(texture, ctexcoord)*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),Shader.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),Shader.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);");var t,e;t="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",e='precision mediump float;\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',Shader.preCompile2D(0,1,t,e,null),t="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",e='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n	vec4 a = vec4(color.r, color.g, color.b, color.a);\n	a.w = alpha;\n	gl_FragColor = a;\n	#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',Shader.preCompile2D(0,2,t,e,null),t="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",e="precision mediump float;\n//precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n	//vec4 a=vec4(color.r, color.g, color.b, 1);\n	//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n}",Shader.preCompile2D(0,4,t,e,null),t="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",e='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',Shader.preCompile2D(0,256,t,e,null),t="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_texcoord = texcoord;  \n}",e="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\nuniform float alpha;\nvoid main() {\n	vec4 t_color = texture2D(texture, v_texcoord);\n	gl_FragColor = t_color.rgba * v_color;\n	gl_FragColor.a = gl_FragColor.a * alpha;\n}",Shader.preCompile2D(0,512,t,e,null)},t}(),ShaderDefines=function(){function t(t,e,i){this._value=0,this._name2int=t,this._int2name=e,this._int2nameMap=i}__class(t,"laya.webgl.shader.ShaderDefines");var e=t.prototype;return e.add=function(t){return"string"==typeof t&&(t=this._name2int[t]),this._value|=t,this._value},e.addInt=function(t){return this._value|=t,this._value},e.remove=function(t){return"string"==typeof t&&(t=this._name2int[t]),this._value&=~t,this._value},e.isDefine=function(t){return(this._value&t)===t},e.getValue=function(){return this._value},e.setValue=function(t){this._value=t},e.toNameDic=function(){var e=this._int2nameMap[this._value];return e?e:t._toText(this._value,this._int2name,this._int2nameMap)},t._reg=function(t,e,i,n){i[t]=e,n[e]=t},t._toText=function(t,e,i){var n=i[t];if(n)return n;for(var s={},r=1,a=0;32>a&&(r=1<<a,!(r>t));a++)if(t&r){var o=e[r];o&&(s[o]="")}return i[t]=s,s},t._toInt=function(t,e){for(var i=t.split("."),n=0,s=0,r=i.length;r>s;s++){var a=e[i[s]];if(!a)throw new Error("Defines to int err:"+t+"/"+i[s]);n|=a}return n},t}(),SkinMesh=function(){function t(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMat16=RenderState2D.getMatrArray()}__class(t,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var e=t.prototype;return e.init=function(e,i,n){if(i)this._vs=i;else{this._vs=[];var s=e.width,r=e.height,a=1,o=1,h=1,l=1;this._vs.push(0,0,0,0,a,o,h,l),this._vs.push(s,0,1,0,a,o,h,l),this._vs.push(s,r,1,1,a,o,h,l),this._vs.push(0,r,0,1,a,o,h,l)}n?this._ps=n:(t._defaultPS||(t._defaultPS=[],t._defaultPS.push(0,1,3,3,1,2)),this._ps=t._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=e},e.init2=function(t,e,i,n,s){this.transform&&(this.transform=null),i?this._ps=i:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=n,this._uvs=s,this.mEleNum=this._ps.length,this.mTexture=t,(Render.isConchNode||Render.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},e._initMyData=function(){var e=0,i=0,n=this._verticles.length,s=4*n;this._vs=t._tempVS;var r=!1;if(Render.isConchNode||Render.isConchApp?(this._vs.length=s,r=!0):this._vs.length<s&&(this._vs.length=s,r=!0),t._tVSLen=s,r)for(;s>e;)this._vs[e]=this._verticles[i],this._vs[e+1]=this._verticles[i+1],this._vs[e+2]=this._uvs[i],this._vs[e+3]=this._uvs[i+1],this._vs[e+4]=1,this._vs[e+5]=1,this._vs[e+6]=1,this._vs[e+7]=1,e+=8,i+=2;else for(;s>e;)this._vs[e]=this._verticles[i],this._vs[e+1]=this._verticles[i+1],this._vs[e+2]=this._uvs[i],this._vs[e+3]=this._uvs[i+1],e+=8,i+=2},e.getData2=function(e,i,n){this.mVBBuffer=e,this.mIBBuffer=i,this._initMyData(),e.appendEx2(this._vs,Float32Array,t._tVSLen,4),this._indexStart=i.byteLength;var s;s=t._tempIB,s.length<this._ps.length&&(s.length=this._ps.length);for(var r=0,a=this._ps.length;a>r;r++)s[r]=this._ps[r]+n;i.appendEx2(s,Uint16Array,this._ps.length,2)},e.getData=function(t,e,i){if(this.mVBBuffer=t,this.mIBBuffer=e,t.append(this.mVBData),this._indexStart=e.byteLength,this.mIBData.start!=i){for(var n=0,s=this._ps.length;s>n;n++)this.mIBData[n]=this._ps[n]+i;this.mIBData.start=i}e.append(this.mIBData)},e.render=function(t,e,i){if(Render.isWebGL&&this.mTexture){t._renderKey=0,t._shader2D.glTexture=null,SkinMeshBuffer.getInstance().addSkinMesh(this);var n=Submit.createShape(t,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,Value2D.create(512,0));this.transform||(this.transform=Matrix.EMPTY),this.transform.translate(e,i),Matrix.mul16(this.transform,t._curMat,this._tempMat16),this.transform.translate(-e,-i);var s=n.shaderValue;s.textureHost=this.mTexture,s.offsetX=0,s.offsetY=0,s.u_mmat2=this._tempMat16,s.ALPHA=t._shader2D.ALPHA,t._submits[t._submits._length++]=n}else Render.isConchApp&&this.mTexture&&(this.transform||(this.transform=Matrix.EMPTY),t.setSkinMesh&&t.setSkinMesh(e,i,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},t._tempVS=[],t._tempIB=[],t._defaultPS=null,t._tVSLen=0,t}(),SkinMeshBuffer=function(){function t(){this.ib=null,this.vb=null;WebGL.mainContext;this.ib=IndexBuffer2D.create(35048),this.vb=VertexBuffer2D.create(8)}__class(t,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var e=t.prototype;return e.addSkinMesh=function(t){t.getData2(this.vb,this.ib,this.vb.byteLength/32)},e.reset=function(){this.vb.clear(),this.ib.clear()},t.getInstance=function(){return t.instance=t.instance||new t},t.instance=null,t}(),BasePoly=function(){function t(t,e,i,n,s,r,a,o,h){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===h&&(h=0),this.x=t,this.y=e,this.width=i,this.height=n,this.edges=s,this.color=r,this.borderWidth=a,this.borderColor=o}__class(t,"laya.webgl.shapes.BasePoly");var e=t.prototype;return Laya.imps(e,{"laya.webgl.shapes.IShape":!0}),e.getData=function(t,e,i){},e.rebuild=function(t){},e.setMatrix=function(t){},e.needUpdate=function(t){return!0},e.sector=function(t,e,i){var n=this.x,s=this.y,r=this.edges,a=(this.r1-this.r0)/r,o=this.width,h=this.height,l=this.color,c=(l>>16&255)/255,u=(l>>8&255)/255,_=(255&l)/255;t.push(n,s,c,u,_);for(var d=0;r+1>d;d++)t.push(n+Math.sin(a*d+this.r0)*o,s+Math.cos(a*d+this.r0)*h),t.push(c,u,_);for(d=0;r>d;d++)e.push(i,i+d+1,i+d+2)},e.createLine2=function(t,e,i,n,s,r){var a,o,h,l,c,u,_,d,f,p,g,m,v,y,w,b,S,x,C,T,I,L=t.concat(),A=s,P=this.borderColor,M=(P>>16&255)/255,R=(P>>8&255)/255,E=(255&P)/255,B=L.length/2,k=n,O=i/2;h=L[0],l=L[1],c=L[2],u=L[3],f=-(l-u),p=h-c,I=Math.sqrt(f*f+p*p),f=f/I*O,p=p/I*O,A.push(h-f+this.x,l-p+this.y,M,R,E,h+f+this.x,l+p+this.y,M,R,E);for(var D=1;B-1>D;D++)h=L[2*(D-1)],l=L[2*(D-1)+1],c=L[2*D],u=L[2*D+1],_=L[2*(D+1)],d=L[2*(D+1)+1],f=-(l-u),p=h-c,I=Math.sqrt(f*f+p*p),f=f/I*O,p=p/I*O,g=-(u-d),m=c-_,I=Math.sqrt(g*g+m*m),g=g/I*O,m=m/I*O,v=-p+l-(-p+u),y=-f+c-(-f+h),w=(-f+h)*(-p+u)-(-f+c)*(-p+l),b=-m+d-(-m+u),S=-g+c-(-g+_),x=(-g+_)*(-m+u)-(-g+c)*(-m+d),C=v*S-b*y,Math.abs(C)<.1?(C+=10.1,A.push(c-f+this.x,u-p+this.y,M,R,E,c+f+this.x,u+p+this.y,M,R,E)):(a=(y*x-S*w)/C,o=(b*w-v*x)/C,T=(a-c)*(a-c)+(o-u)+(o-u),A.push(a+this.x,o+this.y,M,R,E,c-(a-c)+this.x,u-(o-u)+this.y,M,R,E));h=L[L.length-4],l=L[L.length-3],c=L[L.length-2],u=L[L.length-1],f=-(l-u),p=h-c,I=Math.sqrt(f*f+p*p),f=f/I*O,p=p/I*O,A.push(c-f+this.x,u-p+this.y,M,R,E,c+f+this.x,u+p+this.y,M,R,E);var F=r;for(D=1;F>D;D++)e.push(k+2*(D-1),k+2*(D-1)+1,k+2*D+1,k+2*D+1,k+2*D,k+2*(D-1));return A},e.createLine=function(t,e,i,n){var s=t.concat(),r=t,a=this.borderColor,o=(a>>16&255)/255,h=(a>>8&255)/255,l=(255&a)/255;s.splice(0,5);var c,u,_,d,f,p,g,m,v,y,w,b,S,x,C,T,I,L,A,P,M,R=s.length/5,E=n,B=i/2;_=s[0],d=s[1],f=s[5],p=s[6],v=-(d-p),y=_-f,M=Math.sqrt(v*v+y*y),v=v/M*B,y=y/M*B,r.push(_-v,d-y,o,h,l,_+v,d+y,o,h,l);for(var k=1;R-1>k;k++)_=s[5*(k-1)],d=s[5*(k-1)+1],f=s[5*k],p=s[5*k+1],g=s[5*(k+1)],m=s[5*(k+1)+1],v=-(d-p),y=_-f,M=Math.sqrt(v*v+y*y),v=v/M*B,y=y/M*B,w=-(p-m),b=f-g,M=Math.sqrt(w*w+b*b),w=w/M*B,b=b/M*B,S=-y+d-(-y+p),x=-v+f-(-v+_),C=(-v+_)*(-y+p)-(-v+f)*(-y+d),T=-b+m-(-b+p),I=-w+f-(-w+g),L=(-w+g)*(-b+p)-(-w+f)*(-b+m),A=S*I-T*x,Math.abs(A)<.1?(A+=10.1,r.push(f-v,p-y,o,h,l,f+v,p+y,o,h,l)):(c=(x*L-I*C)/A,u=(T*C-S*L)/A,P=(c-f)*(c-f)+(u-p)+(u-p),r.push(c,u,o,h,l,f-(c-f),p-(u-p),o,h,l));_=s[s.length-10],d=s[s.length-9],f=s[s.length-5],p=s[s.length-4],v=-(d-p),y=_-f,M=Math.sqrt(v*v+y*y),v=v/M*B,y=y/M*B,r.push(f-v,p-y,o,h,l,f+v,p+y,o,h,l);var O=this.edges+1;for(k=1;O>k;k++)e.push(E+2*(k-1),E+2*(k-1)+1,E+2*k+1,E+2*k+1,E+2*k,E+2*(k-1));return r},e.createLoopLine=function(t,e,i,n,s,r){var a=t.concat(),o=s?s:t,h=this.borderColor,l=(h>>16&255)/255,c=(h>>8&255)/255,u=(255&h)/255;a.splice(0,5);var _=[a[0],a[1]],d=[a[a.length-5],a[a.length-4]],f=d[0]+.5*(_[0]-d[0]),p=d[1]+.5*(_[1]-d[1]);a.unshift(f,p,0,0,0),a.push(f,p,0,0,0);var g,m,v,y,w,b,S,x,C,T,I,L,A,P,M,R,E,B,k,O,D,F=a.length/5,U=n,G=i/2;v=a[0],y=a[1],w=a[5],b=a[6],C=-(y-b),T=v-w,D=Math.sqrt(C*C+T*T),C=C/D*G,T=T/D*G,o.push(v-C,y-T,l,c,u,v+C,y+T,l,c,u);for(var N=1;F-1>N;N++)v=a[5*(N-1)],y=a[5*(N-1)+1],w=a[5*N],b=a[5*N+1],S=a[5*(N+1)],x=a[5*(N+1)+1],C=-(y-b),T=v-w,D=Math.sqrt(C*C+T*T),C=C/D*G,T=T/D*G,I=-(b-x),L=w-S,D=Math.sqrt(I*I+L*L),I=I/D*G,L=L/D*G,A=-T+y-(-T+b),P=-C+w-(-C+v),M=(-C+v)*(-T+b)-(-C+w)*(-T+y),R=-L+x-(-L+b),E=-I+w-(-I+S),B=(-I+S)*(-L+b)-(-I+w)*(-L+x),k=A*E-R*P,Math.abs(k)<.1?(k+=10.1,o.push(w-C,b-T,l,c,u,w+C,b+T,l,c,u)):(g=(P*B-E*M)/k,
m=(R*M-A*B)/k,O=(g-w)*(g-w)+(m-b)+(m-b),o.push(g,m,l,c,u,w-(g-w),b-(m-b),l,c,u));r&&(e=r);var H=this.edges+1;for(N=1;H>N;N++)e.push(U+2*(N-1),U+2*(N-1)+1,U+2*N+1,U+2*N+1,U+2*N,U+2*(N-1));return e.push(U+2*(N-1),U+2*(N-1)+1,U+1,U+1,U,U+2*(N-1)),o},t}(),Submit=function(){function t(t){void 0===t&&(t=1e4),this._renderType=t}__class(t,"laya.webgl.submit.Submit");var e=t.prototype;return Laya.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.releaseRender=function(){var e=t._cache;e[e._length++]=this,this.shaderValue.release(),this._vb=null},e.getRenderType=function(){return this._renderType},e.renderSubmit=function(){if(0===this._numEle)return 1;var t=this.shaderValue.textureHost;if(t){var e=t.source;if(!t.bitmap||!e)return 1;this.shaderValue.texture=e}this._vb.bind_upload(this._ib);var i=WebGL.mainContext;return this.shaderValue.upload(),BlendMode.activeBlendFunction!==this._blendFn&&(i.enable(3042),this._blendFn(i),BlendMode.activeBlendFunction=this._blendFn),Stat.drawCall++,Stat.trianglesFaces+=this._numEle/3,i.drawElements(4,this._numEle,5123,this._startIdx),1},t.__init__=function(){var e=t.RENDERBASE=new t(-1);e.shaderValue=new Value2D(0,0),e.shaderValue.ALPHA=-1234},t.create=function(e,i,n,s,r){var a=t._cache._length?t._cache[--t._cache._length]:new t;null==n&&(n=a._selfVb||(a._selfVb=VertexBuffer2D.create(-1)),n.clear(),s=0),a._ib=i,a._vb=n,a._startIdx=s*CONST3D2D.BYTES_PIDX,a._numEle=0;var o=e._nBlendType;a._blendFn=e._targets?BlendMode.targetFns[o]:BlendMode.fns[o],a.shaderValue=r,a.shaderValue.setValue(e._shader2D);var h=e._shader2D.filters;return h&&a.shaderValue.setFilters(h),a},t.createShape=function(e,i,n,s,r,a){var o=t._cache._length?t._cache[--t._cache._length]:new t;o._ib=i,o._vb=n,o._numEle=s,o._startIdx=r,o.shaderValue=a,o.shaderValue.setValue(e._shader2D);var h=e._nBlendType;return o._blendFn=e._targets?BlendMode.targetFns[h]:BlendMode.fns[h],o},t.TYPE_2D=1e4,t.TYPE_CANVAS=10003,t.TYPE_CMDSETRT=10004,t.TYPE_CUSTOM=10005,t.TYPE_BLURRT=10006,t.TYPE_CMDDESTORYPRERT=10007,t.TYPE_DISABLESTENCIL=10008,t.TYPE_OTHERIBVB=10009,t.TYPE_PRIMITIVE=10010,t.TYPE_RT=10011,t.TYPE_BLUR_RT=10012,t.TYPE_TARGET=10013,t.TYPE_CHANGE_VALUE=10014,t.TYPE_SHAPE=10015,t.TYPE_TEXTURE=10016,t.TYPE_FILLTEXTURE=10017,t.RENDERBASE=null,t._cache=(t._cache=[],t._cache._length=0,t._cache),t}(),SubmitCMD=function(){function t(){this.fun=null,this.args=null}__class(t,"laya.webgl.submit.SubmitCMD");var e=t.prototype;return Laya.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){return this.fun.apply(null,this.args),1},e.getRenderType=function(){return 0},e.releaseRender=function(){var e=t._cache;e[e._length++]=this},t.create=function(e,i){var n=t._cache._length?t._cache[--t._cache._length]:new t;return n.fun=i,n.args=e,n},t._cache=(t._cache=[],t._cache._length=0,t._cache),t}(),SubmitCMDScope=function(){function t(){this.variables={}}__class(t,"laya.webgl.submit.SubmitCMDScope");var e=t.prototype;return e.getValue=function(t){return this.variables[t]},e.addValue=function(t,e){return this.variables[t]=e},e.setValue=function(t,e){return this.variables.hasOwnProperty(t)?this.variables[t]=e:null},e.clear=function(){for(var t in this.variables)delete this.variables[t]},e.recycle=function(){this.clear(),t.POOL.push(this)},t.create=function(){var e=t.POOL.pop();return e||(e=new t),e},t.POOL=[],t}(),SubmitOtherIBVB=function(){function t(){this.offset=0,this.startIndex=0,this._mat=Matrix.create()}__class(t,"laya.webgl.submit.SubmitOtherIBVB");var e=t.prototype;return Laya.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.releaseRender=function(){var e=t._cache;e[e._length++]=this},e.getRenderType=function(){return 10009},e.renderSubmit=function(){var e=this._shaderValue.textureHost;if(e){var i=e.source;if(!e.bitmap||!i)return 1;this._shaderValue.texture=i}this._vb.bind_upload(this._ib);var n=RenderState2D.worldMatrix4,s=Matrix.TEMP;Matrix.mulPre(this._mat,n[0],n[1],n[4],n[5],n[12],n[13],s);var r=RenderState2D.worldMatrix4=t.tempMatrix4;r[0]=s.a,r[1]=s.b,r[4]=s.c,r[5]=s.d,r[12]=s.tx,r[13]=s.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var a=WebGL.mainContext;return BlendMode.activeBlendFunction!==this._blendFn&&(a.enable(3042),this._blendFn(a),BlendMode.activeBlendFunction=this._blendFn),Stat.drawCall++,Stat.trianglesFaces+=this._numEle/3,a.drawElements(4,this._numEle,5123,this.startIndex),RenderState2D.worldMatrix4=n,BaseShader.activeShader=null,1},t.create=function(e,i,n,s,r,a,o,h,l){void 0===l&&(l=0);var c=t._cache._length?t._cache[--t._cache._length]:new t;c._ib=n,c._vb=i,c._numEle=s,c._shader=r,c._shaderValue=a;var u=e._nBlendType;switch(c._blendFn=e._targets?BlendMode.targetFns[u]:BlendMode.fns[u],l){case 0:c.offset=0,c.startIndex=h/(CONST3D2D.BYTES_PE*i.vertexStride)*1.5,c.startIndex*=CONST3D2D.BYTES_PIDX;break;case 1:c.startIndex=o,c.offset=h}return c},t._cache=(t._cache=[],t._cache._length=0,t._cache),t.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t}(),SubmitScissor=function(){function t(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new Rectangle,this.screenRect=new Rectangle}__class(t,"laya.webgl.submit.SubmitScissor");var e=t.prototype;return Laya.imps(e,{"laya.webgl.submit.ISubmit":!0}),e._scissor=function(t,e,i,n){var s=RenderState2D.worldMatrix4,r=s[0],a=s[5],o=s[12],h=s[13];if(t=t*r+o,e=e*a+h,i*=r,n*=a,1>i||1>n)return!1;var l=t+i,c=e+n;0>t&&(t=0,i=l-t),0>e&&(e=0,n=c-e);var u=RenderState2D.worldClipRect;if(t=Math.max(t,u.x),e=Math.max(e,u.y),i=Math.min(l,u.right)-t,n=Math.min(c,u.bottom)-e,1>i||1>n)return!1;var _=RenderState2D.worldScissorTest;return this.screenRect.copyFrom(u),u.x=t,u.y=e,u.width=i,u.height=n,RenderState2D.worldScissorTest=!0,e=RenderState2D.height-e-n,WebGL.mainContext.scissor(t,e,i,n),WebGL.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),_?(e=RenderState2D.height-this.screenRect.y-this.screenRect.height,WebGL.mainContext.scissor(this.screenRect.x,e,this.screenRect.width,this.screenRect.height),WebGL.mainContext.enable(3089)):(WebGL.mainContext.disable(3089),RenderState2D.worldScissorTest=!1),u.copyFrom(this.screenRect),!0},e._scissorWithTagart=function(t,e,i,n){if(1>i||1>n)return!1;var s=t+i,r=e+n;0>t&&(t=0,i=s-t),0>e&&(e=0,n=r-e);var a=RenderState2D.worldClipRect;if(t=Math.max(t,a.x),e=Math.max(e,a.y),i=Math.min(s,a.right)-t,n=Math.min(r,a.bottom)-e,1>i||1>n)return!1;var o=RenderState2D.worldScissorTest;return this.screenRect.copyFrom(a),RenderState2D.worldScissorTest=!0,a.x=t,a.y=e,a.width=i,a.height=n,e=RenderState2D.height-e-n,WebGL.mainContext.scissor(t,e,i,n),WebGL.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),o?(e=RenderState2D.height-this.screenRect.y-this.screenRect.height,WebGL.mainContext.scissor(this.screenRect.x,e,this.screenRect.width,this.screenRect.height),WebGL.mainContext.enable(3089)):(WebGL.mainContext.disable(3089),RenderState2D.worldScissorTest=!1),a.copyFrom(this.screenRect),!0},e.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1?this.submitLength+1:(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height),this.submitLength+1)},e.getRenderType=function(){return 0},e.releaseRender=function(){var e=t._cache;e[e._length++]=this,this.context=null},t.create=function(e){var i=t._cache._length?t._cache[--t._cache._length]:new t;return i.context=e,i},t._cache=(t._cache=[],t._cache._length=0,t._cache),t}(),SubmitStencil=function(){function t(){this.step=0,this.blendMode=null,this.level=0}__class(t,"laya.webgl.submit.SubmitStencil");var e=t.prototype;return Laya.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6()}return 1},e.getRenderType=function(){return 0},e.releaseRender=function(){var e=t._cache;e[e._length++]=this},e.do1=function(){var t=WebGL.mainContext;t.enable(2960),t.clear(1024),t.colorMask(!1,!1,!1,!1),t.stencilFunc(514,this.level,255),t.stencilOp(7680,7680,7682)},e.do2=function(){var t=WebGL.mainContext;t.stencilFunc(514,this.level+1,255),t.colorMask(!0,!0,!0,!0),t.stencilOp(7680,7680,7680)},e.do3=function(){var t=WebGL.mainContext;t.colorMask(!0,!0,!0,!0),t.stencilOp(7680,7680,7680),t.clear(1024),t.disable(2960)},e.do4=function(){var t=WebGL.mainContext;t.enable(2960),t.clear(1024),t.colorMask(!1,!1,!1,!1),t.stencilFunc(519,this.level,255),t.stencilOp(7680,7680,5386)},e.do5=function(){var t=WebGL.mainContext;t.stencilFunc(514,255,255),t.colorMask(!0,!0,!0,!0),t.stencilOp(7680,7680,7680)},e.do6=function(){var t=WebGL.mainContext;BlendMode.targetFns[BlendMode.TOINT[this.blendMode]](t)},t.create=function(e){var i=t._cache._length?t._cache[--t._cache._length]:new t;return i.step=e,i},t._cache=(t._cache=[],t._cache._length=0,t._cache),t}(),SubmitTarget=function(){function t(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}__class(t,"laya.webgl.submit.SubmitTarget");var e=t.prototype;return Laya.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){this._vb.bind_upload(this._ib);var t=this.scope.getValue(this.proName);return t&&(this.shaderValue.texture=t.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[t.width,t.height]),this.shaderValue.upload(),this.blend(),Stat.drawCall++,Stat.trianglesFaces+=this._numEle/3,WebGL.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},e.blend=function(){if(BlendMode.activeBlendFunction!==BlendMode.fns[this.blendType]){var t=WebGL.mainContext;t.enable(3042),BlendMode.fns[this.blendType](t),BlendMode.activeBlendFunction=BlendMode.fns[this.blendType]}},e.getRenderType=function(){return 0},e.releaseRender=function(){var e=t._cache;e[e._length++]=this},t.create=function(e,i,n,s,r,a){var o=t._cache._length?t._cache[--t._cache._length]:new t;return o._ib=i,o._vb=n,o.proName=a,o._startIdx=s*CONST3D2D.BYTES_PIDX,o._numEle=0,o.blendType=e._nBlendType,o.shaderValue=r,o.shaderValue.setValue(e._shader2D),o},t._cache=(t._cache=[],t._cache._length=0,t._cache),t}(),CharSegment=function(){function t(){this._sourceStr=null}__class(t,"laya.webgl.text.CharSegment");var e=t.prototype;return Laya.imps(e,{"laya.webgl.text.ICharSegment":!0}),e.textToSpit=function(t){this._sourceStr=t},e.getChar=function(t){return this._sourceStr.charAt(t)},e.getCharCode=function(t){return this._sourceStr.charCodeAt(t)},e.length=function(){return this._sourceStr.length},t}(),DrawText=function(){function t(){}var e;return __class(t,"laya.webgl.text.DrawText"),t.__init__=function(){t._charsTemp=new Array,t._drawValue=new e,t._charSeg=new CharSegment},t.customCharSeg=function(e){t._charSeg=e},t.getChar=function(e,i,n){var s=WebGLCharImage.createOneChar(e,n);return-1!=i&&(t._charsCache[i]=s),s},t._drawSlow=function(e,i,n,s,r,a,o,h,l,c,u,_,d,f){var p,g,m=t._drawValue.value(a,h,l,c,d,f),v=0,y=0,w=t._charsTemp,b=0,S=NaN;if(s)for(w.length=s.length,v=0,y=s.length;y>v;v++)g=s[v],S=g.charNum+m.txtID,w[v]=p=t._charsCache[S]||t.getChar(g["char"],S,m),p.active();else{var x=n instanceof laya.utils.WordText?n.toString():n;if(Text.CharacterCache){t._charSeg.textToSpit(x);var C=t._charSeg.length();for(w.length=C,v=0,y=C;y>v;v++)S=t._charSeg.getCharCode(v)+m.txtID,w[v]=p=t._charsCache[S]||t.getChar(t._charSeg.getChar(v),S,m),p.active(),b+=p.cw}else p=t.getChar(x,-1,m),p.active(),b+=p.cw,w[0]=p}var T=0;null!==o&&"left"!==o&&(T=-("center"==o?b/2:b));var I,L,A=NaN,P=0;if(s)for(v=0,y=w.length;y>v;v++)p=w[v],p.isSpace||(g=s[v],A=p.borderSize,I=p.texture,i._drawText(I,u+T+g.x*d-A,_+g.y*f-A,I.width,I.height,r,0,0,0,0));else{for(v=0,y=w.length;y>v;v++)p=w[v],p.isSpace||(A=p.borderSize,I=p.texture,i._drawText(I,u+T-A,_-A,I.width,I.height,r,0,0,0,0),e&&(L=e[P++],L||(L=e[P-1]=[]),L[0]=I,L[1]=T-A,L[2]=-A)),T+=p.cw;e&&(e.length=P)}},t._drawFast=function(t,e,i,n,s){for(var r,a,o=0,h=t.length;h>o;o++)a=t[o],r=a[0],r.active(),e._drawText(r,n+a[1],s+a[2],r.width,r.height,i,0,0,0,0)},t.drawText=function(e,i,n,s,r,a,o,h,l,c,u){if(!(i&&0===i.length||n&&0===n.length)){var _=s.a,d=s.d;(0!==s.b||0!==s.c)&&(_=d=1);var f=1!==_||1!==d;if(f&&Laya.stage.transform){var p=Laya.stage.transform;f=p.a===_&&p.d===d}else f=!1;if(f?(s=s.copyTo(WebGLContext2D._tmpMatrix),s.scale(1/_,1/d),s._checkTransform(),c*=_,u*=d):_=d=1,n)t._drawSlow(null,e,i,n,s,r,a,o,h,l,c,u,_,d);else{if(null===i.toUpperCase){var g=_+1e5*d,m=i;return void(m.changed||m.id!==g?(m.id=g,m.changed=!1,t._drawSlow(m.save,e,i,n,s,r,a,o,h,l,c,u,_,d)):t._drawFast(m.save,e,s,c,u))}var v=i+r.toString()+o+h+l+_+d+a,y=t._textsCache[v];Text.CharacterCache?y?t._drawFast(y,e,s,c,u):(t._textsCache.__length||(t._textsCache.__length=0),t._textsCache.__length>Config.WebGLTextCacheCount&&(t._textsCache={},t._textsCache.__length=0,t._curPoolIndex=0),t._textCachesPool[t._curPoolIndex]?(y=t._textsCache[v]=t._textCachesPool[t._curPoolIndex],y.length=0):t._textCachesPool[t._curPoolIndex]=y=t._textsCache[v]=[],t._textsCache.__length++,t._curPoolIndex++,t._drawSlow(y,e,i,n,s,r,a,o,h,l,c,u,_,d)):t._drawSlow(y,e,i,n,s,r,a,o,h,l,c,u,_,d)}}},t._charsTemp=null,t._textCachesPool=[],t._curPoolIndex=0,t._charsCache={},t._textsCache={},t._drawValue=null,t.d=[],t._charSeg=null,t.__init$=function(){e=function(){function t(){}__class(t,"");var e=t.prototype;return e.value=function(e,i,n,s,r,a){this.font=e,this.fillColor=i,this.borderColor=n,this.lineWidth=s,this.scaleX=r,this.scaleY=a;var o=e.toString()+r+a+s+i+n;return this.txtID=t._keymap[o],this.txtID||(this.txtID=1e-7*++t._keymapCount,t._keymap[o]=this.txtID),this},t.clear=function(){t._keymap={},t._keymapCount=1},t._keymap={},t._keymapCount=1,t}()},t}(),FontInContext=function(){function t(e){this._index=0,this._size=14,this._italic=-2,t._cache2=t._cache2||[],this.setFont(e||"14px Arial")}__class(t,"laya.webgl.text.FontInContext");var e=t.prototype;return e.setFont=function(e){var i=t._cache2[e];if(i)this._words=i[0],this._size=i[1];else{this._words=e.split(" ");for(var n=0,s=this._words.length;s>n;n++)if(this._words[n].indexOf("px")>0){this._index=n;break}this._size=parseInt(this._words[this._index]),t._cache2[e]=[this._words,this._size]}this._text=null,this._italic=-2},e.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},e.hasType=function(t){for(var e=0,i=this._words.length;i>e;e++)if(this._words[e]===t)return e;return-1},e.removeType=function(t){for(var e=0,i=this._words.length;i>e;e++)if(this._words[e]===t){this._words.splice(e,1),this._index>e&&this._index--;break}this._text=null,this._italic=-2},e.copyTo=function(t){return t._text=this._text,t._size=this._size,t._index=this._index,t._words=this._words.slice(),t._italic=-2,t},e.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},__getset(0,e,"size",function(){return this._size},function(t){this._size=t,this._words[this._index]=t+"px",this._text=null}),t.create=function(e){var i=t._cache[e];return i?i:i=t._cache[e]=new t(e)},t.EMPTY=new t,t._cache={},t._cache2=null,t}(),CONST3D2D=function(){function t(){}return __class(t,"laya.webgl.utils.CONST3D2D"),t.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],t.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],t._TMPARRAY=[],t._OFFSETX=0,t._OFFSETY=0,__static(t,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),t}(),GlUtils=function(){function t(){}return __class(t,"laya.webgl.utils.GlUtils"),t.make2DProjection=function(t,e,i){return[2/t,0,0,0,0,-2/e,0,0,0,0,2/i,0,-1,1,0,1]},t.fillIBQuadrangle=function(t,e){if(e>65535/4)throw Error("IBQuadrangle count:"+e+" must<:"+Math.floor(65535/4));e=Math.floor(e),t._resizeBuffer(6*(e+1)*2,!1),t.byteLength=t.bufferLength;for(var i=t.getUint16Array(),n=0,s=0;e>s;s++)i[n++]=4*s,i[n++]=4*s+2,i[n++]=4*s+1,i[n++]=4*s,i[n++]=4*s+3,i[n++]=4*s+2;return t.setNeedUpload(),!0},t.expandIBQuadrangle=function(e,i){e.bufferLength>=6*i*2||t.fillIBQuadrangle(e,i)},t.mathCeilPowerOfTwo=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t},t.fillQuadrangleImgVb=function(t,e,i,n,s,r,a,o){"use strict";var h=(t._byteLength>>2)+16;t.byteLength=h<<2;var l=t.getFloat32Array();h-=16,l[h+2]=s[0],l[h+3]=s[1],l[h+6]=s[2],l[h+7]=s[3],l[h+10]=s[4],l[h+11]=s[5],l[h+14]=s[6],l[h+15]=s[7];var c=r.a,u=r.b,_=r.c,d=r.d;if(1!==c||0!==u||0!==_||1!==d){r.bTransform=!0;var f=r.tx+a,p=r.ty+o;l[h]=(n[0]+e)*c+(n[1]+i)*_+f,l[h+1]=(n[0]+e)*u+(n[1]+i)*d+p,l[h+4]=(n[2]+e)*c+(n[3]+i)*_+f,l[h+5]=(n[2]+e)*u+(n[3]+i)*d+p,l[h+8]=(n[4]+e)*c+(n[5]+i)*_+f,l[h+9]=(n[4]+e)*u+(n[5]+i)*d+p,l[h+12]=(n[6]+e)*c+(n[7]+i)*_+f,l[h+13]=(n[6]+e)*u+(n[7]+i)*d+p}else r.bTransform=!1,e+=r.tx+a,i+=r.ty+o,l[h]=e+n[0],l[h+1]=i+n[1],l[h+4]=e+n[2],l[h+5]=i+n[3],l[h+8]=e+n[4],l[h+9]=i+n[5],l[h+12]=e+n[6],l[h+13]=i+n[7];return t._upload=!0,!0},t.fillTranglesVB=function(t,e,i,n,s,r,a){"use strict";var o=(t._byteLength>>2)+n.length;t.byteLength=o<<2;var h=t.getFloat32Array();o-=n.length;for(var l=n.length,c=s.a,u=s.b,_=s.c,d=s.d,f=0;l>f;f+=4)if(h[o+f+2]=n[f+2],h[o+f+3]=n[f+3],1!==c||0!==u||0!==_||1!==d){s.bTransform=!0;var p=s.tx+r,g=s.ty+a;h[o+f]=(n[f]+e)*c+(n[f+1]+i)*_+p,h[o+f+1]=(n[f]+e)*u+(n[f+1]+i)*d+g}else s.bTransform=!1,e+=s.tx+r,i+=s.ty+a,h[o+f]=e+n[f],h[o+f+1]=i+n[f+1];return t._upload=!0,!0},t.copyPreImgVb=function(t,e,i){var n=t._byteLength>>2;t.byteLength=n+16<<2;for(var s=t.getFloat32Array(),r=0,a=n-16;4>r;r++)s[n]=s[a]+e,++n,++a,s[n]=s[a]+i,++n,++a,s[n]=s[a],++n,++a,s[n]=s[a],++n,++a;t._upload=!0},t.fillRectImgVb=function(t,e,i,n,s,r,a,o,h,l,c,u,_){void 0===_&&(_=!1);var d,f,p,g,m,v,y,w,b,S,x,C,T,I,L,A,P=1,M=o.a,R=o.b,E=o.c,B=o.d,k=e.width<99999999;if(1!==M||0!==R||0!==E||1!==B?(o.bTransform=!0,0===R&&0===E&&(P=23,b=s+i,S=r+n,x=o.tx+h,C=o.ty+l,d=M*i+x,p=M*b+x,f=B*n+C,g=B*S+C)):(P=23,o.bTransform=!1,d=i+o.tx+h,p=d+s,f=n+o.ty+l,g=f+r),k&&(m=e.x,v=e.y,y=e.width+m,w=e.height+v),1!==P&&(Math.min(d,p)>=y||Math.min(f,g)>=w||Math.max(p,d)<=m||Math.max(g,f)<=v))return!1;var O=t._byteLength>>2;t.byteLength=O+16<<2;var D=t.getFloat32Array();switch(D[O+2]=a[0],D[O+3]=a[1],D[O+6]=a[2],D[O+7]=a[3],D[O+10]=a[4],D[O+11]=a[5],D[O+14]=a[6],D[O+15]=a[7],P){case 1:x=o.tx+h,C=o.ty+l,b=s+i,S=r+n;var F=i,U=n,G=M*F,N=E*U,H=B*U,z=R*F,j=M*b,V=E*S,W=B*S,Y=R*b;_?(T=G+N+x,L=Math.round(T)-T,I=H+z+C,A=Math.round(I)-I,D[O]=T+L,D[O+1]=I+A,D[O+4]=j+N+x+L,D[O+5]=H+Y+C+A,D[O+8]=j+V+x+L,D[O+9]=W+Y+C+A,D[O+12]=G+V+x+L,D[O+13]=W+z+C+A):(D[O]=G+N+x,D[O+1]=H+z+C,D[O+4]=j+N+x,D[O+5]=H+Y+C,D[O+8]=j+V+x,D[O+9]=W+Y+C,D[O+12]=G+V+x,D[O+13]=W+z+C);break;case 23:_?(T=d+c,L=Math.round(T)-T,I=f,A=Math.round(I)-I,D[O]=T+L,D[O+1]=I+A,D[O+4]=p+c+L,D[O+5]=f+A,D[O+8]=p+L,D[O+9]=g+A,D[O+12]=d+L,D[O+13]=g+A):(D[O]=d+c,D[O+1]=f,D[O+4]=p+c,D[O+5]=f,D[O+8]=p,D[O+9]=g,D[O+12]=d,D[O+13]=g)}return t._upload=!0,!0},t.fillLineVb=function(e,i,n,s,r,a,o,h){"use strict";var l=.5*o,c=t._fillLineArray,u=-(s-a),_=n-r,d=Math.sqrt(u*u+_*_);u/=d,_/=d,u*=l,_*=l,c[0]=n-u,c[1]=s-_,c[4]=n+u,c[5]=s+_,c[8]=r+u,c[9]=a+_,c[12]=r-u,c[13]=a-_,h&&h.transformPointArray(c,c);var f=(e._byteLength>>2)+16;return e.byteLength=f<<2,e.insertData(c,f-16),!0},t._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t}(),MatirxArray=function(){function t(){}return __class(t,"laya.webgl.utils.MatirxArray"),t.ArrayMul=function(e,i,n){if(!e)return void t.copyArray(i,n);if(!i)return void t.copyArray(e,n);for(var s=NaN,r=NaN,a=NaN,o=NaN,h=0;4>h;h++)s=e[h],r=e[h+4],a=e[h+8],o=e[h+12],n[h]=s*i[0]+r*i[1]+a*i[2]+o*i[3],n[h+4]=s*i[4]+r*i[5]+a*i[6]+o*i[7],n[h+8]=s*i[8]+r*i[9]+a*i[10]+o*i[11],n[h+12]=s*i[12]+r*i[13]+a*i[14]+o*i[15]},t.copyArray=function(t,e){if(t&&e)for(var i=0;i<t.length;i++)e[i]=t[i]},t}(),RenderState2D=function(){function t(){}return __class(t,"laya.webgl.utils.RenderState2D"),t.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},t.mat2MatArray=function(t,e){var i=t,n=e;return n[0]=i.a,n[1]=i.b,n[4]=i.c,n[5]=i.d,n[12]=i.tx,n[13]=i.ty,e},t.restoreTempArray=function(){t.TEMPMAT4_ARRAY[0]=1,t.TEMPMAT4_ARRAY[1]=0,t.TEMPMAT4_ARRAY[4]=0,t.TEMPMAT4_ARRAY[5]=1,t.TEMPMAT4_ARRAY[12]=0,t.TEMPMAT4_ARRAY[13]=0},t.clear=function(){t.worldScissorTest=!1,t.worldShaderDefines=null,t.worldFilters=null,t.worldAlpha=1,t.worldClipRect.x=t.worldClipRect.y=0,t.worldClipRect.width=t.width,t.worldClipRect.height=t.height,t.curRenderTarget=null},t._MAXSIZE=99999999,t.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.worldMatrix4=t.TEMPMAT4_ARRAY,t.worldAlpha=1,t.worldScissorTest=!1,t.worldFilters=null,t.worldShaderDefines=null,t.curRenderTarget=null,t.width=0,t.height=0,__static(t,["worldMatrix",function(){return this.worldMatrix=new Matrix},"worldClipRect",function(){return this.worldClipRect=new Rectangle(0,0,99999999,99999999)}]),t}(),ShaderCompile=function(){function t(t,i,n,s,r){function a(t){for(var e=t.split(" "),i=[],n=0;n<e.length;n++)e[n].length>0&&i.push(e[n]);return i}function o(t){var i,n,s=0,o=0,h=0,l=new e(0,null,null,null),c=l,u=t.split("\n");for(s=0,o=u.length;o>s;s++){var _=u[s];if(_.indexOf("#ifdef")>=0)i=a(_),c=new e(1,i[1],"",c);else if(_.indexOf("#else")>=0)n=c.condition,c=new e(2,null,"",c.parent),c.condition=n;else if(_.indexOf("#endif")>=0)c=c.parent;else if(_.indexOf("#include")>=0){i=a(_);var d=i[1],f=d.charAt(0);'"'!==f&&"'"!==f||(d=d.substr(1,d.length-2),h=d.lastIndexOf(f),h>0&&(d=d.substr(0,h))),h=i[0].indexOf("?");var p=h>0?i[0].substr(h+1):i[0];new e(1,p,r[d],c)}else c.childs.length>0&&0===c.childs[c.childs.length-1].type?c.childs[c.childs.length-1].text+="\n"+_:new e(0,null,_,c)}return l}this._VSTXT=i,this._PSTXT=n,this._VS=o(i),this._PS=o(n),this._nameMap=s}var e;__class(t,"laya.webgl.utils.ShaderCompile");var i=t.prototype;return i.createShader=function(t,e,i){var n={},s="";if(t)for(var r in t)s+="#define "+r+"\n",n[r]=!0;var a=this._VS.toscript(n,[]),o=this._PS.toscript(n,[]);return(i||Shader.create)(s+a.join("\n"),s+o.join("\n"),e,this._nameMap)},t.IFDEF_NO=0,t.IFDEF_YES=1,t.IFDEF_ELSE=2,t.__init$=function(){e=function(){function t(t,e,i,n){if(this.childs=new Array,this.type=t,this.text=i,this.parent=n,n&&n.childs.push(this),e){for(var s="",r=!1,a=!1,o=0,h=e.length;h>o;o++){var l=e.charAt(o);a="!&|() 	".indexOf(l)<0,r!=a&&(a&&(s+="this."),r=a),s+=l}this.condition=RunDriver.createShaderCondition(s)}}__class(t,"");var e=t.prototype;return e.toscript=function(t,e){if(0===this.type&&this.text&&e.push(this.text),this.childs.length<1&&!this.text)return e;if(0!==this.type){var i=!!this.condition.call(t);if(2===this.type&&(i=!i),!i)return e;this.text&&e.push(this.text)}return this.childs.length>0&&this.childs.forEach(function(i,n,s){i.toscript(t,e)}),e},t}()},t}(),WebGL=function(){function t(){}return __class(t,"laya.webgl.WebGL"),t._uint8ArraySlice=function(){for(var t=this,e=t.length,i=new Uint8Array(t.length),n=0;e>n;n++)i[n]=t[n];return i},t._float32ArraySlice=function(){for(var t=this,e=t.length,i=new Float32Array(t.length),n=0;e>n;n++)i[n]=t[n];return i},t._uint16ArraySlice=function(t){var e,i=arguments,n=this,s=0,r=0;if(0===i.length)for(s=n.length,e=new Uint16Array(s),r=0;s>r;r++)e[r]=n[r];else if(2===i.length){var a=i[0],o=i[1];if(o>a)for(s=o-a,e=new Uint16Array(s),r=a;o>r;r++)e[r-a]=n[r];else e=new Uint16Array(0)}return e},t.expandContext=function(){var t=Context.prototype,e=CanvasRenderingContext2D.prototype;e.fillTrangles=t.fillTrangles,Buffer2D.__int__(null),e.setIBVB=function(t,e,i,n,s,r,a,o,h,l){void 0===h&&(h=0),void 0===l&&(l=0),null===i&&(this._ib=this._ib||IndexBuffer2D.QuadrangleIB,i=this._ib,GlUtils.expandIBQuadrangle(i,n.byteLength/64+8)),this._setIBVB(t,e,i,n,s,r,a,o,h,l)},e.fillTrangles=function(t,e,i,n,s){this._curMat=this._curMat||Matrix.create(),this._vb=this._vb||VertexBuffer2D.create(),this._ib||(this._ib=IndexBuffer2D.create(),GlUtils.fillIBQuadrangle(this._ib,a/4));var r=this._vb,a=n.length>>4;GlUtils.fillTranglesVB(r,e,i,n,s||this._curMat,0,0),GlUtils.expandIBQuadrangle(this._ib,r.byteLength/64+8);var o=new Value2D(1,0);o.textureHost=t;var h=new Shader2X("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; void main() {vec4 color= texture2D(texture, v_texcoord); color.a*=1.0; gl_FragColor= color;}");r._vertType=3,this._setIBVB(e,i,this._ib,r,6*a,s,h,o,0,0)}},t.enable=function(){if(Browser.__init__(),Render.isConchApp&&!Render.isConchWebGL)return RunDriver.skinAniSprite=function(){var t=new SkinMesh;return t},t.expandContext(),!1;if(RunDriver.getWebGLContext=function(e){for(var i,n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],s=0;s<n.length;s++){try{i=e.getContext(n[s],{stencil:Config.isStencil,alpha:Config.isAlpha,antialias:Config.isAntialias,premultipliedAlpha:Config.premultipliedAlpha,preserveDrawingBuffer:Config.preserveDrawingBuffer})}catch(r){}if(i)return 0!==s&&(t._isExperimentalWebgl=!0),i}return null},t.mainContext=RunDriver.getWebGLContext(Render._mainCanvas),null==t.mainContext)return!1;if(Render.isWebGL)return!0;HTMLImage.create=function(t,e){return new WebGLImage(t,e)},HTMLSubImage.create=function(t,e,i,n,s,r,a){return new WebGLSubImage(t,e,i,n,s,r,a)},Render.WebGL=t,Render.isWebGL=!0,DrawText.__init__(),RunDriver.createRenderSprite=function(t,e){return new RenderSprite3D(t,e)},RunDriver.createWebGLContext2D=function(t){return new WebGLContext2D(t)},RunDriver.changeWebGLSize=function(t,e){laya.webgl.WebGL.onStageResize(t,e)},RunDriver.createGraphics=function(){return new GraphicsGL};var e=RunDriver.createFilterAction;return RunDriver.createFilterAction=e?e:function(t){return new ColorFilterActionGL},RunDriver.clear=function(t){RenderState2D.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var e=Render.context.ctx,i=0==e._submits._length||Config.preserveDrawingBuffer?Color.create(t)._color:Laya.stage._wgColor;i&&e.clearBG(i[0],i[1],i[2],i[3]),RenderState2D.clear()},RunDriver.addToAtlas=function(t,e){void 0===e&&(e=!1);var i=t.bitmap;return Render.optimizeTextureMemory(t.url,t)?void(Laya.__typeof(i,"laya.webgl.resource.IMergeAtlasBitmap")&&i.allowMerageInAtlas&&i.on("recovered",t,t.addTextureToAtlas)):void(i.enableMerageInAtlas=!1)},AtlasResourceManager._enable(),RunDriver.beginFlush=function(){for(var t=AtlasResourceManager.instance,e=t.getAtlaserCount(),i=0;e>i;i++){var n=t.getAtlaserByIndex(i).texture;n._flashCacheImageNeedFlush&&RunDriver.flashFlushImage(n)}},RunDriver.drawToCanvas=function(t,e,i,n,s,r){s-=t.x,r-=t.y;var a=new RenderTarget2D(i,n,6408,5121,0,!1);a.start(),Render.context.clear(),t.render(Render.context,s,RenderState2D.height-n+r),Render.context.flush(),a.end();var o=a.getData(0,0,a.width,a.height);a.dispose();var h=new WebGLCanvas;h._canvas=Browser.createElement("canvas"),h.size(i,n);var l=h._canvas.getContext("2d");Browser.canvas.size(i,n);var c=Browser.context,u=c.createImageData(i,n);return u.data.set(new Uint8ClampedArray(o.buffer)),c.putImageData(u,0,0),l.save(),l.translate(0,n),l.scale(1,-1),l.drawImage(Browser.canvas.source,0,0),l.restore(),h},RunDriver.createFilterAction=function(t){var e;switch(t){case 32:e=new ColorFilterActionGL}return e},RunDriver.addTextureToAtlas=function(t){t._uvID++,AtlasResourceManager._atlasRestore++,t.bitmap.enableMerageInAtlas&&AtlasResourceManager.instance.addToAtlas(t)},RunDriver.getTexturePixels=function(t,e,i,n,s){Render.context.ctx.clear();var r=new Sprite;r.graphics.drawTexture(t,-e,-i);var a=RenderTarget2D.create(n,s);a.start(),a.clear(0,0,0,0),r.render(Render.context,0,0),Render.context.ctx.flush(),a.end();for(var o=a.getData(0,0,n,s),h=[],l=0,c=s-1;c>=0;c--)for(var u=0;n>u;u++)l=4*(c*n+u),h.push(o[l]),h.push(o[l+1]),h.push(o[l+2]),h.push(o[l+3]);return h},RunDriver.skinAniSprite=function(){var t=new SkinMesh;return t},Filter._filterStart=function(t,e,i,n,s){var r=t.getValue("bounds"),a=RenderTarget2D.create(r.width,r.height);if(a.start(),a.clear(0,0,0,0),t.addValue("src",a),t.addValue("ScissorTest",RenderState2D.worldScissorTest),RenderState2D.worldScissorTest){var o=new Rectangle;o.copyFrom(i.ctx._clipRect),t.addValue("clipRect",o),RenderState2D.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},Filter._filterEnd=function(t,e,i,n,s){var r=t.getValue("bounds"),a=t.getValue("src");a.end();var o=RenderTarget2D.create(r.width,r.height);o.start(),o.clear(0,0,0,0),t.addValue("out",o),e._set$P("_filterCache",o),e._set$P("_isHaveGlowFilter",t.getValue("_isHaveGlowFilter"))},Filter._EndTarget=function(t,e){var i=t.getValue("src");i.recycle();var n=t.getValue("out");n.end();var s=t.getValue("ScissorTest");if(s){RenderState2D.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),e.ctx.save();var r=t.getValue("clipRect");e.ctx.clipRect(r.x,r.y,r.width,r.height)}},Filter._useSrc=function(t){var e=t.getValue("out");e.end(),e=t.getValue("src"),e.start(),e.clear(0,0,0,0)},Filter._endSrc=function(t){var e=t.getValue("src");e.end()},Filter._useOut=function(t){var e=t.getValue("src");e.end(),e=t.getValue("out"),e.start(),e.clear(0,0,0,0)},Filter._endOut=function(t){var e=t.getValue("out");e.end()},Filter._recycleScope=function(t){t.recycle()},Filter._filter=function(t,e,i,n){var s=this._next;if(s){var r=t.filters,a=r.length;if(1==a&&32==r[0].type)return e.ctx.save(),e.ctx.setFilters([r[0]]),s._fun.call(s,t,e,i,n),void e.ctx.restore();var o,h,l=SubmitCMDScope.create(),c=Point.TEMP,u=e.ctx._getTransformMatrix(),_=Matrix.create();u.copyTo(_);var d=0,f=0,p=!1,g=t._$P._filterCache?t._$P._filterCache:null;if(!g||t._repaint){p=t._isHaveGlowFilter(),l.addValue("_isHaveGlowFilter",p),p&&(d=50,f=25),h=new Rectangle,h.copyFrom(t.getSelfBounds()),h.x+=t.x,h.y+=t.y,h.x-=t.pivotX+4,h.y-=t.pivotY+4;var m=h.x,v=h.y;if(h.width+=d+8,h.height+=d+8,c.x=h.x*_.a+h.y*_.c,c.y=h.y*_.d+h.x*_.b,h.x=c.x,h.y=c.y,c.x=h.width*_.a+h.height*_.c,c.y=h.height*_.d+h.width*_.b,h.width=c.x,h.height=c.y,h.width<=0||h.height<=0)return;g&&g.recycle(),l.addValue("bounds",h);var y=SubmitCMD.create([l,t,e,0,0],Filter._filterStart);e.addRenderObject(y),e.ctx._renderKey=0,e.ctx._shader2D.glTexture=null;var w=t.x-m+f,b=t.y-v+f;s._fun.call(s,t,e,w,b),y=SubmitCMD.create([l,t,e,0,0],Filter._filterEnd),e.addRenderObject(y);for(var S=0;a>S;S++){0!=S&&(y=SubmitCMD.create([l],Filter._useSrc),e.addRenderObject(y),o=Value2D.create(1,0),Matrix.TEMP.identity(),e.ctx.drawTarget(l,0,0,h.width,h.height,Matrix.TEMP,"out",o,null,BlendMode.TOINT.overlay),y=SubmitCMD.create([l],Filter._useOut),e.addRenderObject(y));var x=r[S];x.action.apply3d(l,t,e,0,0)}y=SubmitCMD.create([l,e],Filter._EndTarget),e.addRenderObject(y)}else{if(p=t._$P._isHaveGlowFilter?t._$P._isHaveGlowFilter:!1,p&&(d=50,f=25),h=t.getBounds(),h.width<=0||h.height<=0)return;h.width+=d,h.height+=d,c.x=h.x*_.a+h.y*_.c,c.y=h.y*_.d+h.x*_.b,h.x=c.x,h.y=c.y,c.x=h.width*_.a+h.height*_.c,c.y=h.height*_.d+h.width*_.b,h.width=c.x,h.height=c.y,l.addValue("out",g)}i=i-f-t.x,n=n-f-t.y,c.setTo(i,n),_.transformPoint(c),i=c.x+h.x,n=c.y+h.y,o=Value2D.create(1,0),Matrix.TEMP.identity(),e.ctx.drawTarget(l,i,n,h.width,h.height,Matrix.TEMP,"out",o,null,BlendMode.TOINT.overlay),y=SubmitCMD.create([l],Filter._recycleScope),e.addRenderObject(y),_.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=t._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=t._uint16ArraySlice),
Uint8Array.prototype.slice||(Uint8Array.prototype.slice=t._uint8ArraySlice),!0},t.onStageResize=function(e,i){null!=t.mainContext&&(t.mainContext.viewport(0,0,e,i),RenderState2D.width=e,RenderState2D.height=i)},t.isExperimentalWebgl=function(){return t._isExperimentalWebgl},t.addRenderFinish=function(){(t._isExperimentalWebgl||Render.isFlash)&&(RunDriver.endFinish=function(){Render.context.ctx.finish()})},t.removeRenderFinish=function(){t._isExperimentalWebgl&&(RunDriver.endFinish=function(){})},t.onInvalidGLRes=function(){AtlasResourceManager.instance.freeAll(),ResourceManager.releaseContentManagers(!0),t.doNodeRepaint(Laya.stage),t.mainContext.viewport(0,0,RenderState2D.width,RenderState2D.height),Laya.stage.event("devicelost")},t.doNodeRepaint=function(e){0==e.numChildren&&e.repaint();for(var i=0;i<e.numChildren;i++)t.doNodeRepaint(e.getChildAt(i))},t.init=function(e,i,n){t.mainCanvas=e,HTMLCanvas._createContext=function(t){return new WebGLContext2D(t)},t._isExperimentalWebgl=t._isExperimentalWebgl&&Browser.onWX,t.frameShaderHighPrecision=!1;var s=laya.webgl.WebGL.mainContext;try{var r=s.getShaderPrecisionFormat(35632,36338);r.precision?t.frameShaderHighPrecision=!0:t.frameShaderHighPrecision=!1}catch(a){}if(s.deleteTexture1=s.deleteTexture,s.deleteTexture=function(t){t==WebGLContext.curBindTexValue&&(WebGLContext.curBindTexValue=null),s.deleteTexture1(t)},t.onStageResize(i,n),null==t.mainContext)throw new Error("webGL getContext err!");System.__init__(),AtlasResourceManager.__init__(),ShaderDefines2D.__init__(),Submit.__init__(),WebGLContext2D.__init__(),Value2D.__init__(),Shader2D.__init__(),Buffer2D.__int__(s),BlendMode._init_(s),Render.isConchApp&&conch.setOnInvalidGLRes(t.onInvalidGLRes)},t.mainCanvas=null,t.mainContext=null,t.antialias=!0,t.frameShaderHighPrecision=!1,t._bg_null=[0,0,0,0],t._isExperimentalWebgl=!1,t}(),WebGLContext=function(){function t(){}return __class(t,"laya.webgl.WebGLContext"),t.UseProgram=function(e){return t._useProgram===e?!1:(WebGL.mainContext.useProgram(e),t._useProgram=e,!0)},t.setDepthTest=function(e,i){i!==t._depthTest&&(t._depthTest=i,i?e.enable(2929):e.disable(2929))},t.setDepthMask=function(e,i){i!==t._depthMask&&(t._depthMask=i,e.depthMask(i))},t.setDepthFunc=function(e,i){i!==t._depthFunc&&(t._depthFunc=i,e.depthFunc(i))},t.setBlend=function(e,i){i!==t._blend&&(t._blend=i,i?e.enable(3042):e.disable(3042))},t.setBlendFunc=function(e,i,n){(i!==t._sFactor||n!==t._dFactor)&&(t._sFactor=i,t._dFactor=n,e.blendFunc(i,n))},t.setCullFace=function(e,i){i!==t._cullFace&&(t._cullFace=i,i?e.enable(2884):e.disable(2884))},t.setFrontFace=function(e,i){i!==t._frontFace&&(t._frontFace=i,e.frontFace(i))},t.bindTexture=function(e,i,n){e.bindTexture(i,n),t.curBindTexTarget=i,t.curBindTexValue=n},t.DEPTH_BUFFER_BIT=256,t.STENCIL_BUFFER_BIT=1024,t.COLOR_BUFFER_BIT=16384,t.POINTS=0,t.LINES=1,t.LINE_LOOP=2,t.LINE_STRIP=3,t.TRIANGLES=4,t.TRIANGLE_STRIP=5,t.TRIANGLE_FAN=6,t.ZERO=0,t.ONE=1,t.SRC_COLOR=768,t.ONE_MINUS_SRC_COLOR=769,t.SRC_ALPHA=770,t.ONE_MINUS_SRC_ALPHA=771,t.DST_ALPHA=772,t.ONE_MINUS_DST_ALPHA=773,t.DST_COLOR=774,t.ONE_MINUS_DST_COLOR=775,t.SRC_ALPHA_SATURATE=776,t.FUNC_ADD=32774,t.BLEND_EQUATION=32777,t.BLEND_EQUATION_RGB=32777,t.BLEND_EQUATION_ALPHA=34877,t.FUNC_SUBTRACT=32778,t.FUNC_REVERSE_SUBTRACT=32779,t.BLEND_DST_RGB=32968,t.BLEND_SRC_RGB=32969,t.BLEND_DST_ALPHA=32970,t.BLEND_SRC_ALPHA=32971,t.CONSTANT_COLOR=32769,t.ONE_MINUS_CONSTANT_COLOR=32770,t.CONSTANT_ALPHA=32771,t.ONE_MINUS_CONSTANT_ALPHA=32772,t.BLEND_COLOR=32773,t.ARRAY_BUFFER=34962,t.ELEMENT_ARRAY_BUFFER=34963,t.ARRAY_BUFFER_BINDING=34964,t.ELEMENT_ARRAY_BUFFER_BINDING=34965,t.STREAM_DRAW=35040,t.STATIC_DRAW=35044,t.DYNAMIC_DRAW=35048,t.BUFFER_SIZE=34660,t.BUFFER_USAGE=34661,t.CURRENT_VERTEX_ATTRIB=34342,t.FRONT=1028,t.BACK=1029,t.CULL_FACE=2884,t.FRONT_AND_BACK=1032,t.BLEND=3042,t.DITHER=3024,t.STENCIL_TEST=2960,t.DEPTH_TEST=2929,t.SCISSOR_TEST=3089,t.POLYGON_OFFSET_FILL=32823,t.SAMPLE_ALPHA_TO_COVERAGE=32926,t.SAMPLE_COVERAGE=32928,t.NO_ERROR=0,t.INVALID_ENUM=1280,t.INVALID_VALUE=1281,t.INVALID_OPERATION=1282,t.OUT_OF_MEMORY=1285,t.CW=2304,t.CCW=2305,t.LINE_WIDTH=2849,t.ALIASED_POINT_SIZE_RANGE=33901,t.ALIASED_LINE_WIDTH_RANGE=33902,t.CULL_FACE_MODE=2885,t.FRONT_FACE=2886,t.DEPTH_RANGE=2928,t.DEPTH_WRITEMASK=2930,t.DEPTH_CLEAR_VALUE=2931,t.DEPTH_FUNC=2932,t.STENCIL_CLEAR_VALUE=2961,t.STENCIL_FUNC=2962,t.STENCIL_FAIL=2964,t.STENCIL_PASS_DEPTH_FAIL=2965,t.STENCIL_PASS_DEPTH_PASS=2966,t.STENCIL_REF=2967,t.STENCIL_VALUE_MASK=2963,t.STENCIL_WRITEMASK=2968,t.STENCIL_BACK_FUNC=34816,t.STENCIL_BACK_FAIL=34817,t.STENCIL_BACK_PASS_DEPTH_FAIL=34818,t.STENCIL_BACK_PASS_DEPTH_PASS=34819,t.STENCIL_BACK_REF=36003,t.STENCIL_BACK_VALUE_MASK=36004,t.STENCIL_BACK_WRITEMASK=36005,t.VIEWPORT=2978,t.SCISSOR_BOX=3088,t.COLOR_CLEAR_VALUE=3106,t.COLOR_WRITEMASK=3107,t.UNPACK_ALIGNMENT=3317,t.PACK_ALIGNMENT=3333,t.MAX_TEXTURE_SIZE=3379,t.MAX_VIEWPORT_DIMS=3386,t.SUBPIXEL_BITS=3408,t.RED_BITS=3410,t.GREEN_BITS=3411,t.BLUE_BITS=3412,t.ALPHA_BITS=3413,t.DEPTH_BITS=3414,t.STENCIL_BITS=3415,t.POLYGON_OFFSET_UNITS=10752,t.POLYGON_OFFSET_FACTOR=32824,t.TEXTURE_BINDING_2D=32873,t.SAMPLE_BUFFERS=32936,t.SAMPLES=32937,t.SAMPLE_COVERAGE_VALUE=32938,t.SAMPLE_COVERAGE_INVERT=32939,t.NUM_COMPRESSED_TEXTURE_FORMATS=34466,t.COMPRESSED_TEXTURE_FORMATS=34467,t.DONT_CARE=4352,t.FASTEST=4353,t.NICEST=4354,t.GENERATE_MIPMAP_HINT=33170,t.BYTE=5120,t.UNSIGNED_BYTE=5121,t.SHORT=5122,t.UNSIGNED_SHORT=5123,t.INT=5124,t.UNSIGNED_INT=5125,t.FLOAT=5126,t.DEPTH_COMPONENT=6402,t.ALPHA=6406,t.RGB=6407,t.RGBA=6408,t.LUMINANCE=6409,t.LUMINANCE_ALPHA=6410,t.UNSIGNED_SHORT_4_4_4_4=32819,t.UNSIGNED_SHORT_5_5_5_1=32820,t.UNSIGNED_SHORT_5_6_5=33635,t.FRAGMENT_SHADER=35632,t.VERTEX_SHADER=35633,t.MAX_VERTEX_ATTRIBS=34921,t.MAX_VERTEX_UNIFORM_VECTORS=36347,t.MAX_VARYING_VECTORS=36348,t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,t.MAX_TEXTURE_IMAGE_UNITS=34930,t.MAX_FRAGMENT_UNIFORM_VECTORS=36349,t.SHADER_TYPE=35663,t.DELETE_STATUS=35712,t.LINK_STATUS=35714,t.VALIDATE_STATUS=35715,t.ATTACHED_SHADERS=35717,t.ACTIVE_UNIFORMS=35718,t.ACTIVE_ATTRIBUTES=35721,t.SHADING_LANGUAGE_VERSION=35724,t.CURRENT_PROGRAM=35725,t.NEVER=512,t.LESS=513,t.EQUAL=514,t.LEQUAL=515,t.GREATER=516,t.NOTEQUAL=517,t.GEQUAL=518,t.ALWAYS=519,t.KEEP=7680,t.REPLACE=7681,t.INCR=7682,t.DECR=7683,t.INVERT=5386,t.INCR_WRAP=34055,t.DECR_WRAP=34056,t.VENDOR=7936,t.RENDERER=7937,t.VERSION=7938,t.NEAREST=9728,t.LINEAR=9729,t.NEAREST_MIPMAP_NEAREST=9984,t.LINEAR_MIPMAP_NEAREST=9985,t.NEAREST_MIPMAP_LINEAR=9986,t.LINEAR_MIPMAP_LINEAR=9987,t.TEXTURE_MAG_FILTER=10240,t.TEXTURE_MIN_FILTER=10241,t.TEXTURE_WRAP_S=10242,t.TEXTURE_WRAP_T=10243,t.TEXTURE_2D=3553,t.TEXTURE=5890,t.TEXTURE_CUBE_MAP=34067,t.TEXTURE_BINDING_CUBE_MAP=34068,t.TEXTURE_CUBE_MAP_POSITIVE_X=34069,t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,t.MAX_CUBE_MAP_TEXTURE_SIZE=34076,t.TEXTURE0=33984,t.TEXTURE1=33985,t.TEXTURE2=33986,t.TEXTURE3=33987,t.TEXTURE4=33988,t.TEXTURE5=33989,t.TEXTURE6=33990,t.TEXTURE7=33991,t.TEXTURE8=33992,t.TEXTURE9=33993,t.TEXTURE10=33994,t.TEXTURE11=33995,t.TEXTURE12=33996,t.TEXTURE13=33997,t.TEXTURE14=33998,t.TEXTURE15=33999,t.TEXTURE16=34e3,t.TEXTURE17=34001,t.TEXTURE18=34002,t.TEXTURE19=34003,t.TEXTURE20=34004,t.TEXTURE21=34005,t.TEXTURE22=34006,t.TEXTURE23=34007,t.TEXTURE24=34008,t.TEXTURE25=34009,t.TEXTURE26=34010,t.TEXTURE27=34011,t.TEXTURE28=34012,t.TEXTURE29=34013,t.TEXTURE30=34014,t.TEXTURE31=34015,t.ACTIVE_TEXTURE=34016,t.REPEAT=10497,t.CLAMP_TO_EDGE=33071,t.MIRRORED_REPEAT=33648,t.FLOAT_VEC2=35664,t.FLOAT_VEC3=35665,t.FLOAT_VEC4=35666,t.INT_VEC2=35667,t.INT_VEC3=35668,t.INT_VEC4=35669,t.BOOL=35670,t.BOOL_VEC2=35671,t.BOOL_VEC3=35672,t.BOOL_VEC4=35673,t.FLOAT_MAT2=35674,t.FLOAT_MAT3=35675,t.FLOAT_MAT4=35676,t.SAMPLER_2D=35678,t.SAMPLER_CUBE=35680,t.VERTEX_ATTRIB_ARRAY_ENABLED=34338,t.VERTEX_ATTRIB_ARRAY_SIZE=34339,t.VERTEX_ATTRIB_ARRAY_STRIDE=34340,t.VERTEX_ATTRIB_ARRAY_TYPE=34341,t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,t.VERTEX_ATTRIB_ARRAY_POINTER=34373,t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,t.COMPILE_STATUS=35713,t.LOW_FLOAT=36336,t.MEDIUM_FLOAT=36337,t.HIGH_FLOAT=36338,t.LOW_INT=36339,t.MEDIUM_INT=36340,t.HIGH_INT=36341,t.FRAMEBUFFER=36160,t.RENDERBUFFER=36161,t.RGBA4=32854,t.RGB5_A1=32855,t.RGB565=36194,t.DEPTH_COMPONENT16=33189,t.STENCIL_INDEX=6401,t.STENCIL_INDEX8=36168,t.DEPTH_STENCIL=34041,t.RENDERBUFFER_WIDTH=36162,t.RENDERBUFFER_HEIGHT=36163,t.RENDERBUFFER_INTERNAL_FORMAT=36164,t.RENDERBUFFER_RED_SIZE=36176,t.RENDERBUFFER_GREEN_SIZE=36177,t.RENDERBUFFER_BLUE_SIZE=36178,t.RENDERBUFFER_ALPHA_SIZE=36179,t.RENDERBUFFER_DEPTH_SIZE=36180,t.RENDERBUFFER_STENCIL_SIZE=36181,t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,t.COLOR_ATTACHMENT0=36064,t.DEPTH_ATTACHMENT=36096,t.STENCIL_ATTACHMENT=36128,t.DEPTH_STENCIL_ATTACHMENT=33306,t.NONE=0,t.FRAMEBUFFER_COMPLETE=36053,t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,t.FRAMEBUFFER_UNSUPPORTED=36061,t.FRAMEBUFFER_BINDING=36006,t.RENDERBUFFER_BINDING=36007,t.MAX_RENDERBUFFER_SIZE=34024,t.INVALID_FRAMEBUFFER_OPERATION=1286,t.UNPACK_FLIP_Y_WEBGL=37440,t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,t.CONTEXT_LOST_WEBGL=37442,t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,t.BROWSER_DEFAULT_WEBGL=37444,t._useProgram=null,t._depthTest=!0,t._depthMask=!0,t._depthFunc=513,t._blend=!1,t._sFactor=1,t._dFactor=0,t._cullFace=!1,t._frontFace=2305,t.curBindTexTarget=null,t.curBindTexValue=null,t}(),ControllerAction=function(){function t(){this.fromPage=null,this.toPage=null}__class(t,"fairygui.action.ControllerAction");var e=t.prototype;return e.run=function(t,e,i){null!=this.fromPage&&0!=this.fromPage.length&&-1==this.fromPage.indexOf(e)||null!=this.toPage&&0!=this.toPage.length&&-1==this.toPage.indexOf(i)?this.leave(t):this.enter(t)},e.enter=function(t){},e.leave=function(t){},e.setup=function(t){var e=0,i=0;for(e=t.getInt16(),this.fromPage=[],i=0;e>i;i++)this.fromPage[i]=t.readS();for(e=t.getInt16(),this.toPage=[],i=0;e>i;i++)this.toPage[i]=t.readS()},t.createAction=function(t){switch(t){case 0:return new PlayTransitionAction;case 1:return new ChangePageAction}return null},t}(),AssetProxy=function(){function t(){this._asset=null,this._asset=Laya.loader}__class(t,"fairygui.AssetProxy");var e=t.prototype;return e.getRes=function(t){return this._asset.getRes(t)},e.load=function(t,e,i,n,s,r){void 0===s&&(s=1),void 0===r&&(r=!0),this._asset.load(t,e,i,n,s,r)},e.setAsset=function(t){this._asset=t},__getset(1,t,"inst",function(){return null==fairygui.AssetProxy._inst&&(t._inst=new t),fairygui.AssetProxy._inst}),t._inst=null,t}(),AutoSizeType=function(){function t(){}return __class(t,"fairygui.AutoSizeType"),t.None=0,t.Both=1,t.Height=2,t.Shrink=3,t}(),ButtonMode=function(){function t(){}return __class(t,"fairygui.ButtonMode"),t.Common=0,t.Check=1,t.Radio=2,t}(),ChildrenRenderOrder=function(){function t(){}return __class(t,"fairygui.ChildrenRenderOrder"),t.Ascent=0,t.Descent=1,t.Arch=2,t}(),BitmapFont$1=function(){function t(){this.id=null,this.size=0,this.ttf=!1,this.glyphs=null,this.resizable=!1,this.glyphs={}}return __class(t,"fairygui.display.BitmapFont",null,"BitmapFont$1"),t}(),BMGlyph=function(){function t(){this.offsetX=0,this.offsetY=0,this.width=0,this.height=0,this.advance=0,this.lineHeight=0,this.channel=0,this.texture=null}return __class(t,"fairygui.display.BMGlyph"),t}(),FillUtils=function(){function t(){}return __class(t,"fairygui.display.FillUtils"),t.fill=function(t,e,i,n,s,r){if(0>=r)return null;if(r>=.9999)return[0,0,t,0,t,e,0,e];var a;switch(i){case 1:a=fairygui.display.FillUtils.fillHorizontal(t,e,n,r);break;case 2:a=fairygui.display.FillUtils.fillVertical(t,e,n,r);break;case 3:a=fairygui.display.FillUtils.fillRadial90(t,e,n,s,r);break;case 4:a=fairygui.display.FillUtils.fillRadial180(t,e,n,s,r);break;case 5:a=fairygui.display.FillUtils.fillRadial360(t,e,n,s,r)}return a},t.fillHorizontal=function(t,e,i,n){var s=t*n;return 2==i||0==i?[0,0,s,0,s,e,0,e]:[t,0,t,e,t-s,e,t-s,0]},t.fillVertical=function(t,e,i,n){var s=e*n;return 2==i||0==i?[0,0,0,s,t,s,t,0]:[0,e,t,e,t,e-s,0,e-s]},t.fillRadial90=function(t,e,i,n,s){(!n||1!=i&&2!=i)&&(n||0!=i&&3!=i)||(s=1-s);var r=NaN,a=NaN,o=NaN;r=Math.tan(Math.PI/2*s),o=t*r,a=(o-e)/o;var h;switch(i){case 0:h=n?e>=o?[0,0,t,o,t,0]:[0,0,t*(1-a),e,t,e,t,0]:e>=o?[0,0,t,o,t,e,0,e]:[0,0,t*(1-a),e,0,e];break;case 1:h=n?e>=o?[t,0,0,o,0,e,t,e]:[t,0,t*a,e,t,e]:e>=o?[t,0,0,o,0,0]:[t,0,t*a,e,0,e,0,0];break;case 2:h=n?e>=o?[0,e,t,e-o,t,0,0,0]:[0,e,t*(1-a),0,0,0]:e>=o?[0,e,t,e-o,t,e]:[0,e,t*(1-a),0,t,0,t,e];break;case 3:h=n?e>=o?[t,e,0,e-o,0,e]:[t,e,t*a,0,0,0,0,e]:e>=o?[t,e,0,e-o,0,0,t,0]:[t,e,t*a,0,t,0]}return h},t.movePoints=function(t,e,i){for(var n=t.length,s=0;n>s;s+=2)t[s]+=e,t[s+1]+=i},t.fillRadial180=function(e,i,n,s,r){var a;switch(n){case 0:.5>=r?(r/=.5,a=t.fillRadial90(e/2,i,s?0:1,s,r),s&&t.movePoints(a,e/2,0)):(r=(r-.5)/.5,a=t.fillRadial90(e/2,i,s?1:0,s,r),s?a.push(e,i,e,0):(t.movePoints(a,e/2,0),a.push(0,i,0,0)));break;case 1:.5>=r?(r/=.5,a=t.fillRadial90(e/2,i,s?3:2,s,r),s||t.movePoints(a,e/2,0)):(r=(r-.5)/.5,a=t.fillRadial90(e/2,i,s?2:3,s,r),s?(t.movePoints(a,e/2,0),a.push(0,0,0,i)):a.push(e,0,e,i));break;case 2:.5>=r?(r/=.5,a=t.fillRadial90(e,i/2,s?2:0,s,r),s||t.movePoints(a,0,i/2)):(r=(r-.5)/.5,a=t.fillRadial90(e,i/2,s?0:2,s,r),s?(t.movePoints(a,0,i/2),a.push(e,0,0,0)):a.push(e,i,0,i));break;case 3:.5>=r?(r/=.5,a=t.fillRadial90(e,i/2,s?1:3,s,r),s&&t.movePoints(a,0,i/2)):(r=(r-.5)/.5,a=t.fillRadial90(e,i/2,s?3:1,s,r),s?a.push(0,i,e,i):(t.movePoints(a,0,i/2),a.push(0,0,e,0)))}return a},t.fillRadial360=function(e,i,n,s,r){var a;switch(n){case 0:.5>=r?(r/=.5,a=t.fillRadial180(e/2,i,s?2:3,s,r),s&&t.movePoints(a,e/2,0)):(r=(r-.5)/.5,a=t.fillRadial180(e/2,i,s?3:2,s,r),s?a.push(e,i,e,0,e/2,0):(t.movePoints(a,e/2,0),a.push(0,i,0,0,e/2,0)));break;case 1:.5>=r?(r/=.5,a=t.fillRadial180(e/2,i,s?3:2,s,r),s||t.movePoints(a,e/2,0)):(r=(r-.5)/.5,a=t.fillRadial180(e/2,i,s?2:3,s,r),s?(t.movePoints(a,e/2,0),a.push(0,0,0,i,e/2,i)):a.push(e,0,e,i,e/2,i));break;case 2:.5>=r?(r/=.5,a=t.fillRadial180(e,i/2,s?1:0,s,r),s||t.movePoints(a,0,i/2)):(r=(r-.5)/.5,a=t.fillRadial180(e,i/2,s?0:1,s,r),s?(t.movePoints(a,0,i/2),a.push(e,0,0,0,0,i/2)):a.push(e,i,0,i,0,i/2));break;case 3:.5>=r?(r/=.5,a=t.fillRadial180(e,i/2,s?0:1,s,r),s&&t.movePoints(a,0,i/2)):(r=(r-.5)/.5,a=t.fillRadial180(e,i/2,s?1:0,s,r),s?a.push(0,i,e,i,e,i/2):(t.movePoints(a,0,i/2),a.push(0,0,e,0,e,i/2)))}return a},t}(),Frame=function(){function t(){this.addDelay=0,this.texture=null}return __class(t,"fairygui.display.Frame"),t}(),Events=function(){function t(){}return __class(t,"fairygui.Events"),t.createEvent=function(t,e,i){return fairygui.Events.$event.setTo(t,e,i?i.target:e),i?(fairygui.Events.$event.touchId=i.touchId,fairygui.Events.$event.nativeEvent=i.nativeEvent):fairygui.Events.$event.nativeEvent=null,fairygui.Events.$event._stoped=!1,fairygui.Events.$event},t.dispatch=function(t,e,i){e.event(t,fairygui.Events.createEvent(t,e,i))},t.STATE_CHANGED="fui_state_changed",t.XY_CHANGED="fui_xy_changed",t.SIZE_CHANGED="fui_size_changed",t.SIZE_DELAY_CHANGE="fui_size_delay_change",t.CLICK_ITEM="fui_click_item",t.SCROLL="fui_scroll",t.SCROLL_END="fui_scroll_end",t.DROP="fui_drop",t.FOCUS_CHANGED="fui_focus_changed",t.DRAG_START="fui_drag_start",t.DRAG_MOVE="fui_drag_move",t.DRAG_END="fui_drag_end",t.PULL_DOWN_RELEASE="fui_pull_down_release",t.PULL_UP_RELEASE="fui_pull_up_release",t.GEAR_STOP="fui_gear_stop",__static(t,["$event",function(){return this.$event=new Event}]),t}(),FillMethod=function(){function t(){}return __class(t,"fairygui.FillMethod"),t.None=0,t.Horizontal=1,t.Vertical=2,t.Radial90=3,t.Radial180=4,t.Radial360=5,t}(),FillOrigin=function(){function t(){}return __class(t,"fairygui.FillOrigin"),t.Top=0,t.Bottom=1,t.Left=2,t.Right=3,t.TopLeft=0,t.TopRight=1,t.BottomLeft=2,t.BottomRight=3,t}(),FlipType=function(){function t(){}return __class(t,"fairygui.FlipType"),t.None=0,t.Horizontal=1,t.Vertical=2,t.Both=3,t}(),GearBase=function(){function t(t){this._owner=null,this._controller=null,this._tweenConfig=null,this._owner=t}__class(t,"fairygui.gears.GearBase");var e=t.prototype;return e.setup=function(t){this._controller=this._owner.parent.getControllerAt(t.getInt16()),this.init();var e,i=0,n=0;if(this instanceof fairygui.gears.GearDisplay){i=t.getInt16();var s=[];for(n=0;i>n;n++)s[n]=t.readS();this.pages=s}else{for(i=t.getInt16(),n=0;i>n;n++)e=t.readS(),null!=e&&this.addStatus(e,t);t.readBool()&&this.addStatus(null,t)}t.readBool()&&(this._tweenConfig=new GearTweenConfig,this._tweenConfig.easeType=t.readByte(),this._tweenConfig.duration=t.getFloat32(),this._tweenConfig.delay=t.getFloat32())},e.updateFromRelations=function(t,e){},e.addStatus=function(t,e){},e.init=function(){},e.apply=function(){},e.updateState=function(){},__getset(0,e,"controller",function(){return this._controller},function(t){t!=this._controller&&(this._controller=t,this._controller&&this.init())}),__getset(0,e,"tweenConfig",function(){return null==this._tweenConfig&&(this._tweenConfig=new GearTweenConfig),this._tweenConfig}),t.disableAllTweenEffect=!1,t}(),GearTweenConfig=function(){function t(){this.tween=!1,this.easeType=0,this.duration=NaN,this.delay=NaN,this._displayLockToken=NaN,this._tweener=null,this.tween=!0,this.easeType=5,this.duration=.3,this.delay=0}return __class(t,"fairygui.gears.GearTweenConfig"),t}(),GObjectPool=function(){function t(){this._pool=null,this._count=0,this._pool={}}__class(t,"fairygui.GObjectPool");var e=t.prototype;return e.clear=function(){for(var t in this._pool)for(var e=this._pool[t],i=e.length,n=0;i>n;n++)e[n].dispose();this._pool={},this._count=0},e.getObject=function(t){if(t=UIPackage.normalizeURL(t),null==t)return null;var e=this._pool[t];if(null!=e&&e.length>0)return this._count--,e.shift();var i=UIPackage.createObjectFromURL(t);return i},e.returnObject=function(t){var e=t.resourceURL;if(e){var i=this._pool[e];null==i&&(i=[],this._pool[e]=i),this._count++,i.push(t)}},__getset(0,e,"count",function(){return this._count}),t}(),GroupLayoutType=function(){function t(){}return __class(t,"fairygui.GroupLayoutType"),t.None=0,t.Horizontal=1,t.Vertical=2,t}(),ListLayoutType=function(){function t(){}return __class(t,"fairygui.ListLayoutType"),t.SingleColumn=0,t.SingleRow=1,t.FlowHorizontal=2,t.FlowVertical=3,t.Pagination=4,t}(),ListSelectionMode=function(){function t(){}return __class(t,"fairygui.ListSelectionMode"),t.Single=0,t.Multiple=1,t.Multiple_SingleClick=2,t.None=3,t}(),LoaderFillType=function(){function t(){}return __class(t,"fairygui.LoaderFillType"),t.None=0,t.Scale=1,t.ScaleMatchHeight=2,t.ScaleMatchWidth=3,t.ScaleFree=4,t.ScaleNoBorder=5,t}(),Margin=function(){function t(){this.left=0,this.right=0,this.top=0,this.bottom=0}__class(t,"fairygui.Margin");var e=t.prototype;return e.copy=function(t){this.top=t.top,this.bottom=t.bottom,this.left=t.left,this.right=t.right},t}(),ObjectType=function(){function t(){}return __class(t,"fairygui.ObjectType"),t.Image=0,t.MovieClip=1,t.Swf=2,t.Graph=3,t.Loader=4,t.Group=5,t.Text=6,t.RichText=7,t.InputText=8,t.Component=9,t.List=10,t.Label=11,t.Button=12,t.ComboBox=13,t.ProgressBar=14,t.Slider=15,t.ScrollBar=16,t}(),OverflowType=function(){function t(){}return __class(t,"fairygui.OverflowType"),t.Visible=0,t.Hidden=1,t.Scroll=2,t}(),PackageItem=function(){function t(){this.owner=null,this.type=0,this.objectType=0,this.id=null,this.name=null,this.width=0,this.height=0,this.file=null,this.decoded=!1,this.rawData=null,this.scale9Grid=null,this.scaleByTile=!1,this.tileGridIndice=0,this.smoothing=!1,this.texture=null,this.pixelHitTestData=null,this.interval=0,this.repeatDelay=0,this.swing=!1,this.frames=null,this.extensionType=null,this.bitmapFont=null}__class(t,"fairygui.PackageItem");var e=t.prototype;return e.load=function(){return this.owner.getItemAsset(this)},e.toString=function(){return this.name},t}(),PackageItemType=function(){function t(){}return __class(t,"fairygui.PackageItemType"),t.Image=0,t.MovieClip=1,t.Sound=2,t.Component=3,t.Atlas=4,t.Font=5,t.Swf=6,t.Misc=7,t.Unknown=8,t}(),PageOption=function(){function t(){this._controller=null,this._id=null}__class(t,"fairygui.PageOption");var e=t.prototype;return e.clear=function(){this._id=null},__getset(0,e,"controller",null,function(t){this._controller=t}),__getset(0,e,"index",function(){return this._id?this._controller.getPageIndexById(this._id):-1},function(t){this._id=this._controller.getPageId(t)}),__getset(0,e,"name",function(){return this._id?this._controller.getPageNameById(this._id):null},function(t){this._id=this._controller.getPageIdByName(t)}),__getset(0,e,"id",function(){return this._id},function(t){this._id=t}),t}(),PopupDirection=function(){function t(){}return __class(t,"fairygui.PopupDirection"),t.Auto=0,t.Up=1,t.Down=2,t}(),ProgressTitleType=function(){function t(){}return __class(t,"fairygui.ProgressTitleType"),t.Percent=0,t.ValueAndMax=1,t.Value=2,t.Max=3,t}(),RelationItem=function(){function t(t){this._owner=null,this._target=null,this._defs=null,this._targetX=NaN,this._targetY=NaN,this._targetWidth=NaN,this._targetHeight=NaN,this._owner=t,this._defs=[]}var e;__class(t,"fairygui.RelationItem");var i=t.prototype;return i.add=function(t,e){if(24==t)return this.add(14,e),void this.add(15,e);for(var i=this._defs.length,n=0;i>n;n++)if(this._defs[n].type==t)return;this.internalAdd(t,e)},i.internalAdd=function(t,i){if(24==t)return this.internalAdd(14,i),void this.internalAdd(15,i);var n=new e;n.percent=i,n.type=t,n.axis=6>=t||14==t||t>=16&&19>=t?0:1,this._defs.push(n),(i||1==t||3==t||5==t||8==t||10==t||12==t)&&(this._owner.pixelSnapping=!0)},i.remove=function(t){if(24==t)return this.remove(14),void this.remove(15);for(var e=this._defs.length,i=0;e>i;i++)if(this._defs[i].type==t){this._defs.splice(i,1);break}},i.copyFrom=function(t){this.target=t.target,this._defs.length=0;for(var i=t._defs.length,n=0;i>n;n++){var s=t._defs[n],r=new e;r.copyFrom(s),this._defs.push(r)}},i.dispose=function(){null!=this._target&&(this.releaseRefTarget(this._target),this._target=null)},i.applyOnSelfResized=function(t,e,i){var n=this._defs.length;if(0!=n){for(var s=this._owner.x,r=this._owner.y,a=0;n>a;a++){var o=this._defs[a];switch(o.type){case 3:this._owner.x-=(.5-(i?this._owner.pivotX:0))*t;break;case 5:case 4:case 6:this._owner.x-=(1-(i?this._owner.pivotX:0))*t;break;case 10:this._owner.y-=(.5-(i?this._owner.pivotY:0))*e;break;case 12:case 11:case 13:this._owner.y-=(1-(i?this._owner.pivotY:0))*e}}if((s!=this._owner.x||r!=this._owner.y)&&(s=this._owner.x-s,r=this._owner.y-r,this._owner.updateGearFromRelations(1,s,r),null!=this._owner.parent&&this._owner.parent._transitions.length>0)){n=this._owner.parent._transitions.length;for(var h=0;n>h;h++){var l=this._owner.parent._transitions[h];l.updateFromRelations(this._owner.id,s,r)}}}},i.applyOnXYChanged=function(t,e,i){var n=NaN;switch(t.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:this._owner.x+=e;break;case 7:case 8:case 9:case 10:case 11:case 12:case 13:this._owner.y+=i;break;case 14:case 15:break;case 16:case 17:n=this._owner.xMin,this._owner.width=this._owner._rawWidth-e,this._owner.xMin=n+e;break;case 18:case 19:n=this._owner.xMin,this._owner.width=this._owner._rawWidth+e,this._owner.xMin=n;break;case 20:case 21:n=this._owner.yMin,this._owner.height=this._owner._rawHeight-i,this._owner.yMin=n+i;break;case 22:case 23:n=this._owner.yMin,this._owner.height=this._owner._rawHeight+i,this._owner.yMin=n}},i.applyOnSizeChanged=function(t){var e=0,i=0,n=0,s=NaN,r=NaN;switch(0==t.axis?(this._target!=this._owner.parent&&(e=this._target.x,this._target.pivotAsAnchor&&(i=this._target.pivotX)),t.percent?0!=this._targetWidth&&(n=this._target._width/this._targetWidth):n=this._target._width-this._targetWidth):(this._target!=this._owner.parent&&(e=this._target.y,this._target.pivotAsAnchor&&(i=this._target.pivotY)),t.percent?0!=this._targetHeight&&(n=this._target._height/this._targetHeight):n=this._target._height-this._targetHeight),t.type){case 0:t.percent?this._owner.xMin=e+(this._owner.xMin-e)*n:0!=i&&(this._owner.x+=n*-i);break;case 1:t.percent?this._owner.xMin=e+(this._owner.xMin-e)*n:this._owner.x+=n*(.5-i);break;case 2:t.percent?this._owner.xMin=e+(this._owner.xMin-e)*n:this._owner.x+=n*(1-i);break;case 3:t.percent?this._owner.xMin=e+(this._owner.xMin+.5*this._owner._rawWidth-e)*n-.5*this._owner._rawWidth:this._owner.x+=n*(.5-i);break;case 4:t.percent?this._owner.xMin=e+(this._owner.xMin+this._owner._rawWidth-e)*n-this._owner._rawWidth:0!=i&&(this._owner.x+=n*-i);break;case 5:t.percent?this._owner.xMin=e+(this._owner.xMin+this._owner._rawWidth-e)*n-this._owner._rawWidth:this._owner.x+=n*(.5-i);break;case 6:t.percent?this._owner.xMin=e+(this._owner.xMin+this._owner._rawWidth-e)*n-this._owner._rawWidth:this._owner.x+=n*(1-i);break;case 7:t.percent?this._owner.yMin=e+(this._owner.yMin-e)*n:0!=i&&(this._owner.y+=n*-i);break;case 8:t.percent?this._owner.yMin=e+(this._owner.yMin-e)*n:this._owner.y+=n*(.5-i);break;case 9:t.percent?this._owner.yMin=e+(this._owner.yMin-e)*n:this._owner.y+=n*(1-i);break;case 10:t.percent?this._owner.yMin=e+(this._owner.yMin+.5*this._owner._rawHeight-e)*n-.5*this._owner._rawHeight:this._owner.y+=n*(.5-i);break;case 11:t.percent?this._owner.yMin=e+(this._owner.yMin+this._owner._rawHeight-e)*n-this._owner._rawHeight:0!=i&&(this._owner.y+=n*-i);break;case 12:t.percent?this._owner.yMin=e+(this._owner.yMin+this._owner._rawHeight-e)*n-this._owner._rawHeight:this._owner.y+=n*(.5-i);break;case 13:t.percent?this._owner.yMin=e+(this._owner.yMin+this._owner._rawHeight-e)*n-this._owner._rawHeight:this._owner.y+=n*(1-i);break;case 14:s=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceWidth-this._target.initWidth:this._owner._rawWidth-this._targetWidth,t.percent&&(s*=n),this._target==this._owner.parent?this._owner.pivotAsAnchor?(r=this._owner.xMin,this._owner.setSize(this._target._width+s,this._owner._rawHeight,!0),this._owner.xMin=r):this._owner.setSize(this._target._width+s,this._owner._rawHeight,!0):this._owner.width=this._target._width+s;break;case 15:s=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceHeight-this._target.initHeight:this._owner._rawHeight-this._targetHeight,t.percent&&(s*=n),this._target==this._owner.parent?this._owner.pivotAsAnchor?(r=this._owner.yMin,this._owner.setSize(this._owner._rawWidth,this._target._height+s,!0),this._owner.yMin=r):this._owner.setSize(this._owner._rawWidth,this._target._height+s,!0):this._owner.height=this._target._height+s;break;case 16:r=this._owner.xMin,s=t.percent?e+(r-e)*n-r:n*-i,this._owner.width=this._owner._rawWidth-s,this._owner.xMin=r+s;break;case 17:r=this._owner.xMin,s=t.percent?e+(r-e)*n-r:n*(1-i),this._owner.width=this._owner._rawWidth-s,this._owner.xMin=r+s;break;case 18:r=this._owner.xMin,s=t.percent?e+(r+this._owner._rawWidth-e)*n-(r+this._owner._rawWidth):n*-i,this._owner.width=this._owner._rawWidth+s,this._owner.xMin=r;break;case 19:r=this._owner.xMin,t.percent?this._owner==this._target.parent?this._owner._underConstruct?this._owner.width=e+this._target._width-this._target._width*i+(this._owner.sourceWidth-e-this._target.initWidth+this._target.initWidth*i)*n:this._owner.width=e+(this._owner._rawWidth-e)*n:(s=e+(r+this._owner._rawWidth-e)*n-(r+this._owner._rawWidth),this._owner.width=this._owner._rawWidth+s,this._owner.xMin=r):this._owner==this._target.parent?this._owner._underConstruct?this._owner.width=this._owner.sourceWidth+(this._target._width-this._target.initWidth)*(1-i):this._owner.width=this._owner._rawWidth+n*(1-i):(s=n*(1-i),this._owner.width=this._owner._rawWidth+s,this._owner.xMin=r);break;case 20:r=this._owner.yMin,s=t.percent?e+(r-e)*n-r:n*-i,this._owner.height=this._owner._rawHeight-s,this._owner.yMin=r+s;break;case 21:r=this._owner.yMin,s=t.percent?e+(r-e)*n-r:n*(1-i),this._owner.height=this._owner._rawHeight-s,this._owner.yMin=r+s;break;case 22:r=this._owner.yMin,s=t.percent?e+(r+this._owner._rawHeight-e)*n-(r+this._owner._rawHeight):n*-i,this._owner.height=this._owner._rawHeight+s,this._owner.yMin=r;break;case 23:r=this._owner.yMin,t.percent?this._owner==this._target.parent?this._owner._underConstruct?this._owner.height=e+this._target._height-this._target._height*i+(this._owner.sourceHeight-e-this._target.initHeight+this._target.initHeight*i)*n:this._owner.height=e+(this._owner._rawHeight-e)*n:(s=e+(r+this._owner._rawHeight-e)*n-(r+this._owner._rawHeight),this._owner.height=this._owner._rawHeight+s,this._owner.yMin=r):this._owner==this._target.parent?this._owner._underConstruct?this._owner.height=this._owner.sourceHeight+(this._target._height-this._target.initHeight)*(1-i):this._owner.height=this._owner._rawHeight+n*(1-i):(s=n*(1-i),this._owner.height=this._owner._rawHeight+s,this._owner.yMin=r)}},i.addRefTarget=function(t){t!=this._owner.parent&&t.on("fui_xy_changed",this,this.__targetXYChanged),t.on("fui_size_changed",this,this.__targetSizeChanged),t.on("fui_size_delay_change",this,this.__targetSizeWillChange),this._targetX=this._target.x,this._targetY=this._target.y,this._targetWidth=this._target._width,this._targetHeight=this._target._height},i.releaseRefTarget=function(t){null!=t.displayObject&&(t.off("fui_xy_changed",this,this.__targetXYChanged),t.off("fui_size_changed",this,this.__targetSizeChanged),t.off("fui_size_delay_change",this,this.__targetSizeWillChange))},i.__targetXYChanged=function(t){if(null!=this._owner.relations.handling||null!=this._owner.group&&this._owner.group._updating)return this._targetX=this._target.x,void(this._targetY=this._target.y);this._owner.relations.handling=t;for(var e=this._owner.x,i=this._owner.y,n=this._target.x-this._targetX,s=this._target.y-this._targetY,r=this._defs.length,a=0;r>a;a++)this.applyOnXYChanged(this._defs[a],n,s);if(this._targetX=this._target.x,this._targetY=this._target.y,(e!=this._owner.x||i!=this._owner.y)&&(e=this._owner.x-e,i=this._owner.y-i,this._owner.updateGearFromRelations(1,e,i),null!=this._owner.parent&&this._owner.parent._transitions.length>0)){r=this._owner.parent._transitions.length;for(var o=0;r>o;o++){var h=this._owner.parent._transitions[o];h.updateFromRelations(this._owner.id,e,i)}}this._owner.relations.handling=null},i.__targetSizeChanged=function(t){if(null!=this._owner.relations.handling)return this._targetWidth=this._target._width,void(this._targetHeight=this._target._height);this._owner.relations.handling=t;for(var e=this._owner.x,i=this._owner.y,n=this._owner._rawWidth,s=this._owner._rawHeight,r=this._defs.length,a=0;r>a;a++)this.applyOnSizeChanged(this._defs[a]);if(this._targetWidth=this._target._width,this._targetHeight=this._target._height,(e!=this._owner.x||i!=this._owner.y)&&(e=this._owner.x-e,i=this._owner.y-i,this._owner.updateGearFromRelations(1,e,i),null!=this._owner.parent&&this._owner.parent._transitions.length>0)){r=this._owner.parent._transitions.length;for(var o=0;r>o;o++){var h=this._owner.parent._transitions[o];h.updateFromRelations(this._owner.id,e,i)}}n==this._owner._rawWidth&&s==this._owner._rawHeight||(n=this._owner._rawWidth-n,s=this._owner._rawHeight-s,this._owner.updateGearFromRelations(2,n,s)),this._owner.relations.handling=null},i.__targetSizeWillChange=function(t){this._owner.relations.sizeDirty=!0},__getset(0,i,"owner",function(){return this._owner}),__getset(0,i,"target",function(){return this._target},function(t){this._target!=t&&(this._target&&this.releaseRefTarget(this._target),this._target=t,this._target&&this.addRefTarget(this._target))}),__getset(0,i,"isEmpty",function(){return 0==this._defs.length}),t.__init$=function(){e=function(){function t(){this.percent=!1,this.type=0,this.axis=0}__class(t,"");
var e=t.prototype;return e.copyFrom=function(t){this.percent=t.percent,this.type=t.type,this.axis=t.axis},t}()},t}(),Relations=function(){function t(t){this._owner=null,this._items=null,this.handling=null,this.sizeDirty=!1,this._owner=t,this._items=[]}__class(t,"fairygui.Relations");var e=t.prototype;return e.add=function(t,e,i){void 0===i&&(i=!1);for(var n=this._items.length,s=0;n>s;s++){var r=this._items[s];if(r.target==t)return void r.add(e,i)}var a=new RelationItem(this._owner);a.target=t,a.add(e,i),this._items.push(a)},e.remove=function(t,e){void 0===e&&(e=0);for(var i=this._items.length,n=0;i>n;){var s=this._items[n];s.target==t?(s.remove(e),s.isEmpty?(s.dispose(),this._items.splice(n,1),i--):n++):n++}},e.contains=function(t){for(var e=this._items.length,i=0;e>i;i++){var n=this._items[i];if(n.target==t)return!0}return!1},e.clearFor=function(t){for(var e=this._items.length,i=0;e>i;){var n=this._items[i];n.target==t?(n.dispose(),this._items.splice(i,1),e--):i++}},e.clearAll=function(){for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];i.dispose()}this._items.length=0},e.copyFrom=function(t){this.clearAll();for(var e=t._items,i=e.length,n=0;i>n;n++){var s=e[n],r=new RelationItem(this._owner);r.copyFrom(s),this._items.push(r)}},e.dispose=function(){this.clearAll()},e.onOwnerSizeChanged=function(t,e,i){if(0!=this._items.length)for(var n=this._items.length,s=0;n>s;s++){var r=this._items[s];r.applyOnSelfResized(t,e,i)}},e.ensureRelationsSizeCorrect=function(){if(0!=this._items.length){this.sizeDirty=!1;for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];i.target.ensureSizeCorrect()}}},e.setup=function(t,e){for(var i,n=t.readByte(),s=0;n>s;s++){var r=t.getInt16();i=-1==r?this._owner.parent:e?this._owner.getChildAt(r):this._owner.parent.getChildAt(r);var a=new RelationItem(this._owner);a.target=i,this._items.push(a);for(var o=t.readByte(),h=0;o>h;h++){var l=t.readByte(),c=t.readBool();a.internalAdd(l,c)}}},__getset(0,e,"empty",function(){return 0==this._items.length}),t}(),RelationType=function(){function t(){}return __class(t,"fairygui.RelationType"),t.Left_Left=0,t.Left_Center=1,t.Left_Right=2,t.Center_Center=3,t.Right_Left=4,t.Right_Center=5,t.Right_Right=6,t.Top_Top=7,t.Top_Middle=8,t.Top_Bottom=9,t.Middle_Middle=10,t.Bottom_Top=11,t.Bottom_Middle=12,t.Bottom_Bottom=13,t.Width=14,t.Height=15,t.LeftExt_Left=16,t.LeftExt_Right=17,t.RightExt_Left=18,t.RightExt_Right=19,t.TopExt_Top=20,t.TopExt_Bottom=21,t.BottomExt_Top=22,t.BottomExt_Bottom=23,t.Size=24,t}(),ScrollBarDisplayType=function(){function t(){}return __class(t,"fairygui.ScrollBarDisplayType"),t.Default=0,t.Visible=1,t.Auto=2,t.Hidden=3,t}(),ScrollPane=function(){function t(t){this._owner=null,this._container=null,this._maskContainer=null,this._alignContainer=null,this._scrollType=0,this._scrollStep=0,this._mouseWheelStep=0,this._decelerationRate=NaN,this._scrollBarMargin=null,this._bouncebackEffect=!1,this._touchEffect=!1,this._scrollBarDisplayAuto=!1,this._vScrollNone=!1,this._hScrollNone=!1,this._needRefresh=!1,this._refreshBarAxis=null,this._displayOnLeft=!1,this._snapToItem=!1,this._displayInDemand=!1,this._mouseWheelEnabled=!1,this._pageMode=!1,this._inertiaDisabled=!1,this._xPos=NaN,this._yPos=NaN,this._viewSize=null,this._contentSize=null,this._overlapSize=null,this._pageSize=null,this._containerPos=null,this._beginTouchPos=null,this._lastTouchPos=null,this._lastTouchGlobalPos=null,this._velocity=null,this._velocityScale=NaN,this._lastMoveTime=NaN,this._isHoldAreaDone=!1,this._aniFlag=0,this._scrollBarVisible=!1,this._loop=0,this._headerLockedSize=0,this._footerLockedSize=0,this._refreshEventDispatching=!1,this._tweening=0,this._tweenTime=null,this._tweenDuration=null,this._tweenStart=null,this._tweenChange=null,this._pageController=null,this._hzScrollBar=null,this._vtScrollBar=null,this._header=null,this._footer=null,this.isDragged=!1,this._owner=t,this._maskContainer=new Sprite,this._owner.displayObject.addChild(this._maskContainer),this._container=this._owner._container,this._container.pos(0,0),this._maskContainer.addChild(this._container),this._scrollBarVisible=!0,this._mouseWheelEnabled=!0,this._xPos=0,this._yPos=0,this._aniFlag=0,this._footerLockedSize=0,this._headerLockedSize=0,this._scrollBarMargin=new Margin,this._viewSize=new Point,this._contentSize=new Point,this._pageSize=new Point(1,1),this._overlapSize=new Point,this._tweenTime=new Point,this._tweenStart=new Point,this._tweenDuration=new Point,this._tweenChange=new Point,this._velocity=new Point,this._containerPos=new Point,this._beginTouchPos=new Point,this._lastTouchPos=new Point,this._lastTouchGlobalPos=new Point,this._scrollStep=UIConfig$1.defaultScrollStep,this._mouseWheelStep=2*this._scrollStep,this._decelerationRate=UIConfig$1.defaultScrollDecelerationRate,this._owner.on("mousedown",this,this.__mouseDown),this._owner.on("mousewheel",this,this.__mouseWheel)}__class(t,"fairygui.ScrollPane");var e=t.prototype;return e.setup=function(t){this._scrollType=t.readByte();var e=t.readByte(),i=t.getInt32();t.readBool()&&(this._scrollBarMargin.top=t.getInt32(),this._scrollBarMargin.bottom=t.getInt32(),this._scrollBarMargin.left=t.getInt32(),this._scrollBarMargin.right=t.getInt32());var n=t.readS(),s=t.readS(),r=t.readS(),a=t.readS();if(this._displayOnLeft=0!=(1&i),this._snapToItem=0!=(2&i),this._displayInDemand=0!=(4&i),this._pageMode=0!=(8&i),16&i?this._touchEffect=!0:32&i?this._touchEffect=!1:this._touchEffect=UIConfig$1.defaultScrollTouchEffect,64&i?this._bouncebackEffect=!0:128&i?this._bouncebackEffect=!1:this._bouncebackEffect=UIConfig$1.defaultScrollBounceEffect,this._inertiaDisabled=0!=(256&i),0==(512&i)&&(this._maskContainer.scrollRect=new Rectangle),0==e&&(e=UIConfig$1.defaultScrollBarDisplay),3!=e){if(2==this._scrollType||1==this._scrollType){var o=n?n:UIConfig$1.verticalScrollBar;if(o){if(this._vtScrollBar=UIPackage.createObjectFromURL(o),!this._vtScrollBar)throw"cannot create scrollbar from "+o;this._vtScrollBar.setScrollPane(this,!0),this._owner.displayObject.addChild(this._vtScrollBar.displayObject)}}if((2==this._scrollType||0==this._scrollType)&&(o=s?s:UIConfig$1.horizontalScrollBar)){if(this._hzScrollBar=UIPackage.createObjectFromURL(o),!this._hzScrollBar)throw"cannot create scrollbar from "+o;this._hzScrollBar.setScrollPane(this,!1),this._owner.displayObject.addChild(this._hzScrollBar.displayObject)}this._scrollBarDisplayAuto=2==e,this._scrollBarDisplayAuto&&(this._scrollBarVisible=!1,this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=!1),this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=!1))}else this._mouseWheelEnabled=!1;if(r&&(this._header=UIPackage.createObjectFromURL(r),null==this._header))throw new Error("FairyGUI: cannot create scrollPane header from "+r);if(a&&(this._footer=UIPackage.createObjectFromURL(a),null==this._footer))throw new Error("FairyGUI: cannot create scrollPane footer from "+a);null==this._header&&null==this._footer||(this._refreshBarAxis=2==this._scrollType||1==this._scrollType?"y":"x"),this.setSize(this.owner.width,this.owner.height)},e.dispose=function(){0!=this._tweening&&Laya.timer.clear(this,this.tweenUpdate),this._pageController=null,null!=this._hzScrollBar&&this._hzScrollBar.dispose(),null!=this._vtScrollBar&&this._vtScrollBar.dispose(),null!=this._header&&this._header.dispose(),null!=this._footer&&this._footer.dispose()},e.setPercX=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),this.setPosX(this._overlapSize.x*ToolSet.clamp01(t),e)},e.setPercY=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),this.setPosY(this._overlapSize.y*ToolSet.clamp01(t),e)},e.setPosX=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),1==this._loop&&(t=this.loopCheckingNewPos(t,"x")),t=ToolSet.clamp(t,0,this._overlapSize.x),t!=this._xPos&&(this._xPos=t,this.posChanged(e))},e.setPosY=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),1==this._loop&&(t=this.loopCheckingNewPos(t,"y")),t=ToolSet.clamp(t,0,this._overlapSize.y),t!=this._yPos&&(this._yPos=t,this.posChanged(e))},e.setCurrentPageX=function(t,e){this._pageMode&&this._overlapSize.x>0&&this.setPosX(t*this._pageSize.x,e)},e.setCurrentPageY=function(t,e){this._pageMode&&this._overlapSize.y>0&&this.setPosY(t*this._pageSize.y,e)},e.scrollTop=function(t){void 0===t&&(t=!1),this.setPercY(0,t)},e.scrollBottom=function(t){void 0===t&&(t=!1),this.setPercY(1,t)},e.scrollUp=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosY(this._yPos-this._pageSize.y*t,e):this.setPosY(this._yPos-this._scrollStep*t,e)},e.scrollDown=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosY(this._yPos+this._pageSize.y*t,e):this.setPosY(this._yPos+this._scrollStep*t,e)},e.scrollLeft=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosX(this._xPos-this._pageSize.x*t,e):this.setPosX(this._xPos-this._scrollStep*t,e)},e.scrollRight=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this._pageMode?this.setPosX(this._xPos+this._pageSize.x*t,e):this.setPosX(this._xPos+this._scrollStep*t,e)},e.scrollToView=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this._owner.ensureBoundsCorrect(),this._needRefresh&&this.refresh();var n;if(t instanceof fairygui.GObject?t.parent!=this._owner?(t.parent.localToGlobalRect(t.x,t.y,t.width,t.height,fairygui.ScrollPane.sHelperRect),n=this._owner.globalToLocalRect(fairygui.ScrollPane.sHelperRect.x,fairygui.ScrollPane.sHelperRect.y,fairygui.ScrollPane.sHelperRect.width,fairygui.ScrollPane.sHelperRect.height,fairygui.ScrollPane.sHelperRect)):(n=fairygui.ScrollPane.sHelperRect,n.setTo(t.x,t.y,t.width,t.height)):n=t,this._overlapSize.y>0){var s=this._yPos+this._viewSize.y;i||n.y<=this._yPos||n.height>=this._viewSize.y?this._pageMode?this.setPosY(Math.floor(n.y/this._pageSize.y)*this._pageSize.y,e):this.setPosY(n.y,e):n.y+n.height>s&&(this._pageMode?this.setPosY(Math.floor(n.y/this._pageSize.y)*this._pageSize.y,e):n.height<=this._viewSize.y/2?this.setPosY(n.y+2*n.height-this._viewSize.y,e):this.setPosY(n.y+n.height-this._viewSize.y,e))}if(this._overlapSize.x>0){var r=this._xPos+this._viewSize.x;i||n.x<=this._xPos||n.width>=this._viewSize.x?this._pageMode?this.setPosX(Math.floor(n.x/this._pageSize.x)*this._pageSize.x,e):this.setPosX(n.x,e):n.x+n.width>r&&(this._pageMode?this.setPosX(Math.floor(n.x/this._pageSize.x)*this._pageSize.x,e):n.width<=this._viewSize.x/2?this.setPosX(n.x+2*n.width-this._viewSize.x,e):this.setPosX(n.x+n.width-this._viewSize.x,e))}!e&&this._needRefresh&&this.refresh()},e.isChildInView=function(t){if(this._overlapSize.y>0){var e=t.y+this._container.y;if(e<-t.height||e>this._viewSize.y)return!1}return!(this._overlapSize.x>0&&(e=t.x+this._container.x,e<-t.width||e>this._viewSize.x))},e.cancelDragging=function(){this._owner.displayObject.stage.off("mousemove",this,this.__mouseMove),this._owner.displayObject.stage.off("mouseup",this,this.__mouseUp),this._owner.displayObject.stage.off("click",this,this.__click),t.draggingPane==this&&(t.draggingPane=null),t._gestureFlag=0,this.isDragged=!1,this._maskContainer.mouseEnabled=!0},e.lockHeader=function(t){this._headerLockedSize!=t&&(this._headerLockedSize=t,!this._refreshEventDispatching&&this._container[this._refreshBarAxis]>=0&&(this._tweenStart.setTo(this._container.x,this._container.y),this._tweenChange.setTo(0,0),this._tweenChange[this._refreshBarAxis]=this._headerLockedSize-this._tweenStart[this._refreshBarAxis],this._tweenDuration.setTo(.3,.3),this._tweenTime.setTo(0,0),this._tweening=2,Laya.timer.frameLoop(1,this,this.tweenUpdate)))},e.lockFooter=function(t){if(this._footerLockedSize!=t&&(this._footerLockedSize=t,!this._refreshEventDispatching&&this._container[this._refreshBarAxis]<=-this._overlapSize[this._refreshBarAxis])){this._tweenStart.setTo(this._container.x,this._container.y),this._tweenChange.setTo(0,0);var e=this._overlapSize[this._refreshBarAxis];0==e?e=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):e+=this._footerLockedSize,this._tweenChange[this._refreshBarAxis]=-e-this._tweenStart[this._refreshBarAxis],this._tweenDuration.setTo(.3,.3),this._tweenTime.setTo(0,0),this._tweening=2,Laya.timer.frameLoop(1,this,this.tweenUpdate)}},e.onOwnerSizeChanged=function(){this.setSize(this._owner.width,this._owner.height),this.posChanged(!1)},e.handleControllerChanged=function(t){this._pageController==t&&(0==this._scrollType?this.setCurrentPageX(t.selectedIndex,!0):this.setCurrentPageY(t.selectedIndex,!0))},e.updatePageController=function(){if(null!=this._pageController&&!this._pageController.changing){var t=0;if(t=0==this._scrollType?this.currentPageX:this.currentPageY,t<this._pageController.pageCount){var e=this._pageController;this._pageController=null,e.selectedIndex=t,this._pageController=e}}},e.adjustMaskContainer=function(){var t=NaN,e=NaN;t=this._displayOnLeft&&null!=this._vtScrollBar?Math.floor(this._owner.margin.left+this._vtScrollBar.width):Math.floor(this._owner.margin.left),e=Math.floor(this._owner.margin.top),this._maskContainer.pos(t,e),0!=this._owner._alignOffset.x||0!=this._owner._alignOffset.y?(null==this._alignContainer&&(this._alignContainer=new Sprite,this._maskContainer.addChild(this._alignContainer),this._alignContainer.addChild(this._container)),this._alignContainer.pos(this._owner._alignOffset.x,this._owner._alignOffset.y)):this._alignContainer&&this._alignContainer.pos(0,0)},e.setSize=function(t,e){this.adjustMaskContainer(),this._hzScrollBar&&(this._hzScrollBar.y=e-this._hzScrollBar.height,this._vtScrollBar&&!this._vScrollNone?(this._hzScrollBar.width=t-this._vtScrollBar.width-this._scrollBarMargin.left-this._scrollBarMargin.right,this._displayOnLeft?this._hzScrollBar.x=this._scrollBarMargin.left+this._vtScrollBar.width:this._hzScrollBar.x=this._scrollBarMargin.left):(this._hzScrollBar.width=t-this._scrollBarMargin.left-this._scrollBarMargin.right,this._hzScrollBar.x=this._scrollBarMargin.left)),this._vtScrollBar&&(this._displayOnLeft||(this._vtScrollBar.x=t-this._vtScrollBar.width),this._hzScrollBar?this._vtScrollBar.height=e-this._hzScrollBar.height-this._scrollBarMargin.top-this._scrollBarMargin.bottom:this._vtScrollBar.height=e-this._scrollBarMargin.top-this._scrollBarMargin.bottom,this._vtScrollBar.y=this._scrollBarMargin.top),this._viewSize.x=t,this._viewSize.y=e,this._hzScrollBar&&!this._hScrollNone&&(this._viewSize.y-=this._hzScrollBar.height),this._vtScrollBar&&!this._vScrollNone&&(this._viewSize.x-=this._vtScrollBar.width),this._viewSize.x-=this._owner.margin.left+this._owner.margin.right,this._viewSize.y-=this._owner.margin.top+this._owner.margin.bottom,this._viewSize.x=Math.max(1,this._viewSize.x),this._viewSize.y=Math.max(1,this._viewSize.y),this._pageSize.x=this._viewSize.x,this._pageSize.y=this._viewSize.y,this.handleSizeChanged()},e.setContentSize=function(t,e){this._contentSize.x==t&&this._contentSize.y==e||(this._contentSize.x=t,this._contentSize.y=e,this.handleSizeChanged())},e.changeContentSizeOnScrolling=function(t,e,i,n){var s=this._xPos==this._overlapSize.x,r=this._yPos==this._overlapSize.y;this._contentSize.x+=t,this._contentSize.y+=e,this.handleSizeChanged(),1==this._tweening?(0!=t&&s&&this._tweenChange.x<0&&(this._xPos=this._overlapSize.x,this._tweenChange.x=-this._xPos-this._tweenStart.x),0!=e&&r&&this._tweenChange.y<0&&(this._yPos=this._overlapSize.y,this._tweenChange.y=-this._yPos-this._tweenStart.y)):2==this._tweening?(0!=i&&(this._container.x-=i,this._tweenStart.x-=i,this._xPos=-this._container.x),0!=n&&(this._container.y-=n,this._tweenStart.y-=n,this._yPos=-this._container.y)):this.isDragged?(0!=i&&(this._container.x-=i,this._containerPos.x-=i,this._xPos=-this._container.x),0!=n&&(this._container.y-=n,this._containerPos.y-=n,this._yPos=-this._container.y)):(0!=t&&s&&(this._xPos=this._overlapSize.x,this._container.x=-this._xPos),0!=e&&r&&(this._yPos=this._overlapSize.y,this._container.y=-this._yPos)),this._pageMode&&this.updatePageController()},e.handleSizeChanged=function(t){void 0===t&&(t=!1),this._displayInDemand&&(this._vtScrollBar&&(this._contentSize.y<=this._viewSize.y?this._vScrollNone||(this._vScrollNone=!0,this._viewSize.x+=this._vtScrollBar.width):this._vScrollNone&&(this._vScrollNone=!1,this._viewSize.x-=this._vtScrollBar.width)),this._hzScrollBar&&(this._contentSize.x<=this._viewSize.x?this._hScrollNone||(this._hScrollNone=!0,this._viewSize.y+=this._hzScrollBar.height):this._hScrollNone&&(this._hScrollNone=!1,this._viewSize.y-=this._hzScrollBar.height))),this._vtScrollBar&&(this._viewSize.y<this._vtScrollBar.minSize?this._vtScrollBar.displayObject.visible=!1:(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone,0==this._contentSize.y?this._vtScrollBar.displayPerc=0:this._vtScrollBar.displayPerc=Math.min(1,this._viewSize.y/this._contentSize.y))),this._hzScrollBar&&(this._viewSize.x<this._hzScrollBar.minSize?this._hzScrollBar.displayObject.visible=!1:(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone,0==this._contentSize.x?this._hzScrollBar.displayPerc=0:this._hzScrollBar.displayPerc=Math.min(1,this._viewSize.x/this._contentSize.x)));var e=this._maskContainer.scrollRect;if(e&&(e.width=this._viewSize.x,e.height=this._viewSize.y,this._maskContainer.scrollRect=e),0==this._scrollType||2==this._scrollType?this._overlapSize.x=Math.ceil(Math.max(0,this._contentSize.x-this._viewSize.x)):this._overlapSize.x=0,1==this._scrollType||2==this._scrollType?this._overlapSize.y=Math.ceil(Math.max(0,this._contentSize.y-this._viewSize.y)):this._overlapSize.y=0,this._xPos=ToolSet.clamp(this._xPos,0,this._overlapSize.x),this._yPos=ToolSet.clamp(this._yPos,0,this._overlapSize.y),null!=this._refreshBarAxis){var i=this._overlapSize[this._refreshBarAxis];0==i?i=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):i+=this._footerLockedSize,"x"==this._refreshBarAxis?this._container.pos(ToolSet.clamp(this._container.x,-i,this._headerLockedSize),ToolSet.clamp(this._container.y,-this._overlapSize.y,0)):this._container.pos(ToolSet.clamp(this._container.x,-this._overlapSize.x,0),ToolSet.clamp(this._container.y,-i,this._headerLockedSize)),null!=this._header&&("x"==this._refreshBarAxis?this._header.height=this._viewSize.y:this._header.width=this._viewSize.x),null!=this._footer&&("y"==this._refreshBarAxis?this._footer.height=this._viewSize.y:this._footer.width=this._viewSize.x)}else this._container.pos(ToolSet.clamp(this._container.x,-this._overlapSize.x,0),ToolSet.clamp(this._container.y,-this._overlapSize.y,0));this.syncScrollBar(!0),this.checkRefreshBar(),this._pageMode&&this.updatePageController()},e.posChanged=function(t){0==this._aniFlag?this._aniFlag=t?1:-1:1!=this._aniFlag||t||(this._aniFlag=-1),this._needRefresh=!0,Laya.timer.callLater(this,this.refresh)},e.refresh=function(){this._needRefresh=!1,Laya.timer.clear(this,this.refresh),(this._pageMode||this._snapToItem)&&(t.sEndPos.setTo(-this._xPos,-this._yPos),this.alignPosition(t.sEndPos,!1),this._xPos=-t.sEndPos.x,this._yPos=-t.sEndPos.y),this.refresh2(),Events.dispatch("fui_scroll",this._owner.displayObject),this._needRefresh&&(this._needRefresh=!1,Laya.timer.clear(this,this.refresh),this.refresh2()),this.syncScrollBar(),this._aniFlag=0},e.refresh2=function(){if(1!=this._aniFlag||this.isDragged)0!=this._tweening&&this.killTween(),this._container.pos(Math.floor(-this._xPos),Math.floor(-this._yPos)),this.loopCheckingCurrent();else{var t=NaN,e=NaN;this._overlapSize.x>0?t=-Math.floor(this._xPos):(0!=this._container.x&&(this._container.x=0),t=0),this._overlapSize.y>0?e=-Math.floor(this._yPos):(0!=this._container.y&&(this._container.y=0),e=0),t!=this._container.x||e!=this._container.y?(this._tweening=1,this._tweenTime.setTo(0,0),this._tweenDuration.setTo(.5,.5),this._tweenStart.setTo(this._container.x,this._container.y),this._tweenChange.setTo(t-this._tweenStart.x,e-this._tweenStart.y),Laya.timer.frameLoop(1,this,this.tweenUpdate)):0!=this._tweening&&this.killTween()}this._pageMode&&this.updatePageController()},e.syncScrollBar=function(t){void 0===t&&(t=!1),null!=this._vtScrollBar&&(this._vtScrollBar.scrollPerc=0==this._overlapSize.y?0:ToolSet.clamp(-this._container.y,0,this._overlapSize.y)/this._overlapSize.y,this._scrollBarDisplayAuto&&this.showScrollBar(!t)),null!=this._hzScrollBar&&(this._hzScrollBar.scrollPerc=0==this._overlapSize.x?0:ToolSet.clamp(-this._container.x,0,this._overlapSize.x)/this._overlapSize.x,this._scrollBarDisplayAuto&&this.showScrollBar(!t)),t&&(this._maskContainer.mouseEnabled=!0)},e.__mouseDown=function(){if(this._touchEffect){0!=this._tweening?(this.killTween(),this.isDragged=!0):this.isDragged=!1;var t=this._owner.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY,fairygui.ScrollPane.sHelperPoint);this._containerPos.setTo(this._container.x,this._container.y),this._beginTouchPos.setTo(t.x,t.y),this._lastTouchPos.setTo(t.x,t.y),this._lastTouchGlobalPos.setTo(Laya.stage.mouseX,Laya.stage.mouseY),this._isHoldAreaDone=!1,this._velocity.setTo(0,0),this._velocityScale=1,this._lastMoveTime=Laya.timer.currTimer/1e3,this._owner.displayObject.stage.on("mousemove",this,this.__mouseMove),this._owner.displayObject.stage.on("mouseup",this,this.__mouseUp),this._owner.displayObject.stage.on("click",this,this.__click)}},e.__mouseMove=function(){if(this._touchEffect&&(null==t.draggingPane||t.draggingPane==this)&&null==GObject.draggingObject){var e=UIConfig$1.touchScrollSensitivity,i=this._owner.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY,fairygui.ScrollPane.sHelperPoint),n=NaN,s=NaN,r=!1,a=!1;if(1==this._scrollType){if(!this._isHoldAreaDone){if(t._gestureFlag|=1,n=Math.abs(this._beginTouchPos.y-i.y),e>n)return;if(0!=(2&t._gestureFlag)&&(s=Math.abs(this._beginTouchPos.x-i.x),s>n))return}r=!0}else if(0==this._scrollType){if(!this._isHoldAreaDone){if(t._gestureFlag|=2,n=Math.abs(this._beginTouchPos.x-i.x),e>n)return;if(0!=(1&t._gestureFlag)&&(s=Math.abs(this._beginTouchPos.y-i.y),s>n))return}a=!0}else{if(t._gestureFlag=3,!this._isHoldAreaDone&&(n=Math.abs(this._beginTouchPos.y-i.y),e>n&&(n=Math.abs(this._beginTouchPos.x-i.x),e>n)))return;r=a=!0}var o=Math.floor(this._containerPos.x+i.x-this._beginTouchPos.x),h=Math.floor(this._containerPos.y+i.y-this._beginTouchPos.y);r&&(h>0?this._bouncebackEffect?null!=this._header&&0!=this._header.maxHeight?this._container.y=Math.floor(Math.min(.5*h,this._header.maxHeight)):this._container.y=Math.floor(Math.min(.5*h,.5*this._viewSize.y)):this._container.y=0:h<-this._overlapSize.y?this._bouncebackEffect?null!=this._footer&&this._footer.maxHeight>0?this._container.y=Math.floor(Math.max(.5*(h+this._overlapSize.y),-this._footer.maxHeight)-this._overlapSize.y):this._container.y=Math.floor(Math.max(.5*(h+this._overlapSize.y),.5*-this._viewSize.y)-this._overlapSize.y):this._container.y=-this._overlapSize.y:this._container.y=h),a&&(o>0?this._bouncebackEffect?null!=this._header&&0!=this._header.maxWidth?this._container.x=Math.floor(Math.min(.5*o,this._header.maxWidth)):this._container.x=Math.floor(Math.min(.5*o,.5*this._viewSize.x)):this._container.x=0:o<0-this._overlapSize.x?this._bouncebackEffect?null!=this._footer&&this._footer.maxWidth>0?this._container.x=Math.floor(Math.max(.5*(o+this._overlapSize.x),-this._footer.maxWidth)-this._overlapSize.x):this._container.x=Math.floor(Math.max(.5*(o+this._overlapSize.x),.5*-this._viewSize.x)-this._overlapSize.x):this._container.x=-this._overlapSize.x:this._container.x=o);var l="slow"==Laya.stage.frameRate?30:60,c=Laya.timer.currTimer/1e3,u=Math.max(c-this._lastMoveTime,1/l),_=i.x-this._lastTouchPos.x,d=i.y-this._lastTouchPos.y;if(a||(_=0),r||(d=0),0!=u){var f=u*l-1;if(f>1){var p=Math.pow(.833,f);this._velocity.x=this._velocity.x*p,this._velocity.y=this._velocity.y*p}this._velocity.x=ToolSet.lerp(this._velocity.x,60*_/l/u,10*u),this._velocity.y=ToolSet.lerp(this._velocity.y,60*d/l/u,10*u)}var g=this._lastTouchGlobalPos.x-Laya.stage.mouseX,m=this._lastTouchGlobalPos.y-Laya.stage.mouseY;0!=_?this._velocityScale=Math.abs(g/_):0!=d&&(this._velocityScale=Math.abs(m/d)),this._lastTouchPos.setTo(i.x,i.y),this._lastTouchGlobalPos.setTo(Laya.stage.mouseX,Laya.stage.mouseY),this._lastMoveTime=c,this._overlapSize.x>0&&(this._xPos=ToolSet.clamp(-this._container.x,0,this._overlapSize.x)),this._overlapSize.y>0&&(this._yPos=ToolSet.clamp(-this._container.y,0,this._overlapSize.y)),0!=this._loop&&(o=this._container.x,h=this._container.y,this.loopCheckingCurrent()&&(this._containerPos.x+=this._container.x-o,this._containerPos.y+=this._container.y-h)),t.draggingPane=this,this._isHoldAreaDone=!0,this.isDragged=!0,this._maskContainer.mouseEnabled=!1,this.syncScrollBar(),this.checkRefreshBar(),this._pageMode&&this.updatePageController(),Events.dispatch("fui_scroll",this._owner.displayObject)}},e.__mouseUp=function(){if(this._owner.displayObject.stage.off("mousemove",this,this.__mouseMove),this._owner.displayObject.stage.off("mouseup",this,this.__mouseUp),this._owner.displayObject.stage.off("click",this,this.__click),t.draggingPane==this&&(t.draggingPane=null),t._gestureFlag=0,!this.isDragged||!this._touchEffect)return this.isDragged=!1,void(this._maskContainer.mouseEnabled=!0);this.isDragged=!1,this._maskContainer.mouseEnabled=!0,this._tweenStart.setTo(this._container.x,this._container.y),t.sEndPos.setTo(this._tweenStart.x,this._tweenStart.y);var e=!1;if(this._container.x>0?(t.sEndPos.x=0,e=!0):this._container.x<-this._overlapSize.x&&(t.sEndPos.x=-this._overlapSize.x,e=!0),this._container.y>0?(t.sEndPos.y=0,e=!0):this._container.y<-this._overlapSize.y&&(t.sEndPos.y=-this._overlapSize.y,e=!0),e){if(this._tweenChange.setTo(t.sEndPos.x-this._tweenStart.x,t.sEndPos.y-this._tweenStart.y),this._tweenChange.x<-UIConfig$1.touchDragSensitivity||this._tweenChange.y<-UIConfig$1.touchDragSensitivity?(this._refreshEventDispatching=!0,Events.dispatch("fui_pull_down_release",this._owner.displayObject),this._refreshEventDispatching=!1):(this._tweenChange.x>UIConfig$1.touchDragSensitivity||this._tweenChange.y>UIConfig$1.touchDragSensitivity)&&(this._refreshEventDispatching=!0,Events.dispatch("fui_pull_up_release",this._owner.displayObject),this._refreshEventDispatching=!1),this._headerLockedSize>0&&0==t.sEndPos[this._refreshBarAxis])t.sEndPos[this._refreshBarAxis]=this._headerLockedSize,this._tweenChange.x=t.sEndPos.x-this._tweenStart.x,this._tweenChange.y=t.sEndPos.y-this._tweenStart.y;else if(this._footerLockedSize>0&&t.sEndPos[this._refreshBarAxis]==-this._overlapSize[this._refreshBarAxis]){var i=this._overlapSize[this._refreshBarAxis];0==i?i=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):i+=this._footerLockedSize,t.sEndPos[this._refreshBarAxis]=-i,this._tweenChange.x=t.sEndPos.x-this._tweenStart.x,this._tweenChange.y=t.sEndPos.y-this._tweenStart.y}this._tweenDuration.setTo(.3,.3)}else{if(this._inertiaDisabled)this._tweenDuration.setTo(.3,.3);else{var n="slow"==Laya.stage.frameRate?30:60,s=(Laya.timer.currTimer/1e3-this._lastMoveTime)*n-1;if(s>1){var r=Math.pow(.833,s);this._velocity.x=this._velocity.x*r,this._velocity.y=this._velocity.y*r}this.updateTargetAndDuration(this._tweenStart,t.sEndPos)}if(t.sOldChange.setTo(t.sEndPos.x-this._tweenStart.x,t.sEndPos.y-this._tweenStart.y),this.loopCheckingTarget(t.sEndPos),(this._pageMode||this._snapToItem)&&this.alignPosition(t.sEndPos,!0),this._tweenChange.x=t.sEndPos.x-this._tweenStart.x,this._tweenChange.y=t.sEndPos.y-this._tweenStart.y,0==this._tweenChange.x&&0==this._tweenChange.y)return void(this._scrollBarDisplayAuto&&this.showScrollBar(!1));(this._pageMode||this._snapToItem)&&(this.fixDuration("x",t.sOldChange.x),this.fixDuration("y",t.sOldChange.y))}this._tweening=2,this._tweenTime.setTo(0,0),Laya.timer.frameLoop(1,this,this.tweenUpdate)},e.__click=function(){this.isDragged=!1},e.__mouseWheel=function(t){if(this._mouseWheelEnabled){var e=(this._owner.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY,fairygui.ScrollPane.sHelperPoint),t.delta);e=e>0?-1:0>e?1:0,this._overlapSize.x>0&&0==this._overlapSize.y?this._pageMode?this.setPosX(this._xPos+this._pageSize.x*e,!1):this.setPosX(this._xPos+this._mouseWheelStep*e,!1):this._pageMode?this.setPosY(this._yPos+this._pageSize.y*e,!1):this.setPosY(this._yPos+this._mouseWheelStep*e,!1)}},e.__rollOver=function(){this.showScrollBar(!0)},e.__rollOut=function(){this.showScrollBar(!1)},e.showScrollBar=function(t){t?(this.__showScrollBar(!0),Laya.timer.clear(this,this.__showScrollBar)):Laya.timer.once(500,this,this.__showScrollBar,[t])},e.__showScrollBar=function(t){this._scrollBarVisible=t&&this._viewSize.x>0&&this._viewSize.y>0,this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone),this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone)},e.getLoopPartSize=function(t,e){return(this._contentSize[e]+("x"==e?this._owner.columnGap:this._owner.lineGap))/t},e.loopCheckingCurrent=function(){var t=!1;return 1==this._loop&&this._overlapSize.x>0?this._xPos<.001?(this._xPos+=this.getLoopPartSize(2,"x"),t=!0):this._xPos>=this._overlapSize.x&&(this._xPos-=this.getLoopPartSize(2,"x"),t=!0):2==this._loop&&this._overlapSize.y>0&&(this._yPos<.001?(this._yPos+=this.getLoopPartSize(2,"y"),t=!0):this._yPos>=this._overlapSize.y&&(this._yPos-=this.getLoopPartSize(2,"y"),t=!0)),t&&this._container.pos(Math.floor(-this._xPos),Math.floor(-this._yPos)),t},e.loopCheckingTarget=function(t){1==this._loop&&this.loopCheckingTarget2(t,"x"),2==this._loop&&this.loopCheckingTarget2(t,"y")},e.loopCheckingTarget2=function(t,e){var i=NaN,n=NaN;t[e]>0?(i=this.getLoopPartSize(2,e),n=this._tweenStart[e]-i,0>=n&&n>=-this._overlapSize[e]&&(t[e]-=i,this._tweenStart[e]=n)):t[e]<-this._overlapSize[e]&&(i=this.getLoopPartSize(2,e),n=this._tweenStart[e]+i,0>=n&&n>=-this._overlapSize[e]&&(t[e]+=i,this._tweenStart[e]=n))},e.loopCheckingNewPos=function(t,e){if(0==this._overlapSize[e])return t;var i="x"==e?this._xPos:this._yPos,n=!1,s=NaN;return.001>t?(t+=this.getLoopPartSize(2,e),t>i&&(s=this.getLoopPartSize(6,e),s=Math.ceil((t-i)/s)*s,i=ToolSet.clamp(i+s,0,this._overlapSize[e]),n=!0)):t>=this._overlapSize[e]&&(t-=this.getLoopPartSize(2,e),i>t&&(s=this.getLoopPartSize(6,e),s=Math.ceil((i-t)/s)*s,i=ToolSet.clamp(i-s,0,this._overlapSize[e]),n=!0)),n&&("x"==e?this._container.x=-Math.floor(i):this._container.y=-Math.floor(i)),t},e.alignPosition=function(e,i){if(this._pageMode)e.x=this.alignByPage(e.x,"x",i),e.y=this.alignByPage(e.y,"y",i);else if(this._snapToItem){var n=this._owner.getSnappingPosition(-e.x,-e.y,t.sHelperPoint);e.x<0&&e.x>-this._overlapSize.x&&(e.x=-n.x),e.y<0&&e.y>-this._overlapSize.y&&(e.y=-n.y)}},e.alignByPage=function(t,e,i){var n=0;if(t>0)n=0;else if(t<-this._overlapSize[e])n=Math.ceil(this._contentSize[e]/this._pageSize[e])-1;else{n=Math.floor(-t/this._pageSize[e]);var s=i?t-this._containerPos[e]:t-this._container[e],r=Math.min(this._pageSize[e],this._contentSize[e]-(n+1)*this._pageSize[e]),a=-t-n*this._pageSize[e];Math.abs(s)>this._pageSize[e]?a>.5*r&&n++:a>r*(0>s?.3:.7)&&n++,t=-n*this._pageSize[e],t<-this._overlapSize[e]&&(t=-this._overlapSize[e])}if(i){var o=this._tweenStart[e],h=0;h=o>0?0:o<-this._overlapSize[e]?Math.ceil(this._contentSize[e]/this._pageSize[e])-1:Math.floor(-o/this._pageSize[e]);var l=Math.floor(-this._containerPos[e]/this._pageSize[e]);Math.abs(n-l)>1&&Math.abs(h-l)<=1&&(n=n>l?l+1:l-1,t=-n*this._pageSize[e])}return t},e.updateTargetAndDuration=function(t,e){e.x=this.updateTargetAndDuration2(t.x,"x"),e.y=this.updateTargetAndDuration2(t.y,"y")},e.updateTargetAndDuration2=function(t,e){var i=this._velocity[e],n=0;if(t>0)t=0;else if(t<-this._overlapSize[e])t=-this._overlapSize[e];else{var s=Math.abs(i)*this._velocityScale;Browser.onMobile&&(s*=1136/Math.max(Laya.stage.width,Laya.stage.height));var r=0;if(this._pageMode||!Browser.onMobile?s>500&&(r=Math.pow((s-500)/500,2)):s>1e3&&(r=Math.pow((s-1e3)/1e3,2)),
0!=r){r>1&&(r=1),s*=r,i*=r,this._velocity[e]=i,n=Math.log(60/s)/Math.log(this._decelerationRate)/60;var a=Math.floor(i*n*.4);t+=a}}return.3>n&&(n=.3),this._tweenDuration[e]=n,t},e.fixDuration=function(t,e){if(!(0==this._tweenChange[t]||Math.abs(this._tweenChange[t])>=Math.abs(e))){var i=Math.abs(this._tweenChange[t]/e)*this._tweenDuration[t];.3>i&&(i=.3),this._tweenDuration[t]=i}},e.killTween=function(){1==this._tweening&&(this._container.pos(this._tweenStart.x+this._tweenChange.x,this._tweenStart.y+this._tweenChange.y),Events.dispatch("fui_scroll",this._owner.displayObject)),this._tweening=0,Laya.timer.clear(this,this.tweenUpdate),Events.dispatch("fui_scroll_end",this._owner.displayObject)},e.checkRefreshBar=function(){if(null!=this._header||null!=this._footer){var e=this._container[this._refreshBarAxis];if(null!=this._header)if(e>0){null==this._header.displayObject.parent&&this._maskContainer.addChildAt(this._header.displayObject,0);var i=t.sHelperPoint;i.setTo(this._header.width,this._header.height),i[this._refreshBarAxis]=e,this._header.setSize(i.x,i.y)}else null!=this._header.displayObject.parent&&this._maskContainer.removeChild(this._header.displayObject);if(null!=this._footer){var n=this._overlapSize[this._refreshBarAxis];-n>e||0==n&&this._footerLockedSize>0?(null==this._footer.displayObject.parent&&this._maskContainer.addChildAt(this._footer.displayObject,0),i=t.sHelperPoint,i.setTo(this._footer.x,this._footer.y),n>0?i[this._refreshBarAxis]=e+this._contentSize[this._refreshBarAxis]:i[this._refreshBarAxis]=Math.max(Math.min(e+this._viewSize[this._refreshBarAxis],this._viewSize[this._refreshBarAxis]-this._footerLockedSize),this._viewSize[this._refreshBarAxis]-this._contentSize[this._refreshBarAxis]),this._footer.setXY(i.x,i.y),i.setTo(this._footer.width,this._footer.height),n>0?i[this._refreshBarAxis]=-n-e:i[this._refreshBarAxis]=this._viewSize[this._refreshBarAxis]-this._footer[this._refreshBarAxis],this._footer.setSize(i.x,i.y)):null!=this._footer.displayObject.parent&&this._maskContainer.removeChild(this._footer.displayObject)}}},e.tweenUpdate=function(){var t=this.runTween("x"),e=this.runTween("y");this._container.pos(t,e),2==this._tweening&&(this._overlapSize.x>0&&(this._xPos=ToolSet.clamp(-t,0,this._overlapSize.x)),this._overlapSize.y>0&&(this._yPos=ToolSet.clamp(-e,0,this._overlapSize.y)),this._pageMode&&this.updatePageController()),0==this._tweenChange.x&&0==this._tweenChange.y?(this._tweening=0,Laya.timer.clear(this,this.tweenUpdate),this.loopCheckingCurrent(),this.syncScrollBar(!0),this.checkRefreshBar(),Events.dispatch("fui_scroll",this._owner.displayObject),Events.dispatch("fui_scroll_end",this._owner.displayObject)):(this.syncScrollBar(!1),this.checkRefreshBar(),Events.dispatch("fui_scroll",this._owner.displayObject))},e.runTween=function(e){var i=NaN;if(0!=this._tweenChange[e]){if(this._tweenTime[e]+=Laya.timer.delta/1e3,this._tweenTime[e]>=this._tweenDuration[e])i=this._tweenStart[e]+this._tweenChange[e],this._tweenChange[e]=0;else{var n=t.easeFunc(this._tweenTime[e],this._tweenDuration[e]);i=this._tweenStart[e]+Math.floor(this._tweenChange[e]*n)}var s=0,r=-this._overlapSize[e];if(this._headerLockedSize>0&&this._refreshBarAxis==e&&(s=this._headerLockedSize),this._footerLockedSize>0&&this._refreshBarAxis==e){var a=this._overlapSize[this._refreshBarAxis];0==a?a=Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):a+=this._footerLockedSize,r=-a}2==this._tweening&&this._bouncebackEffect?i>20+s&&this._tweenChange[e]>0||i>s&&0==this._tweenChange[e]?(this._tweenTime[e]=0,this._tweenDuration[e]=.3,this._tweenChange[e]=-i+s,this._tweenStart[e]=i):(r-20>i&&this._tweenChange[e]<0||r>i&&0==this._tweenChange[e])&&(this._tweenTime[e]=0,this._tweenDuration[e]=.3,this._tweenChange[e]=r-i,this._tweenStart[e]=i):i>s?(i=s,this._tweenChange[e]=0):r>i&&(i=r,this._tweenChange[e]=0)}else i=this._container[e];return i},__getset(0,e,"viewWidth",function(){return this._viewSize.x},function(t){t=t+this._owner.margin.left+this._owner.margin.right,null!=this._vtScrollBar&&(t+=this._vtScrollBar.width),this._owner.width=t}),__getset(0,e,"percY",function(){return 0==this._overlapSize.y?0:this._yPos/this._overlapSize.y},function(t){this.setPercY(t,!1)}),__getset(0,e,"owner",function(){return this._owner}),__getset(0,e,"bouncebackEffect",function(){return this._bouncebackEffect},function(t){this._bouncebackEffect=t}),__getset(0,e,"vtScrollBar",function(){return this._vtScrollBar}),__getset(0,e,"hzScrollBar",function(){return this._hzScrollBar}),__getset(0,e,"header",function(){return this._header}),__getset(0,e,"footer",function(){return this._footer}),__getset(0,e,"isBottomMost",function(){return this._yPos==this._overlapSize.y||0==this._overlapSize.y}),__getset(0,e,"touchEffect",function(){return this._touchEffect},function(t){this._touchEffect=t}),__getset(0,e,"contentWidth",function(){return this._contentSize.x}),__getset(0,e,"scrollStep",function(){return this._scrollStep},function(t){this._scrollStep=t,0==this._scrollStep&&(this._scrollStep=UIConfig$1.defaultScrollStep),this._mouseWheelStep=2*this._scrollStep}),__getset(0,e,"viewHeight",function(){return this._viewSize.y},function(t){t=t+this._owner.margin.top+this._owner.margin.bottom,null!=this._hzScrollBar&&(t+=this._hzScrollBar.height),this._owner.height=t}),__getset(0,e,"posX",function(){return this._xPos},function(t){this.setPosX(t,!1)}),__getset(0,e,"snapToItem",function(){return this._snapToItem},function(t){this._snapToItem=t}),__getset(0,e,"mouseWheelEnabled",function(){return this._mouseWheelEnabled},function(t){this._mouseWheelEnabled=t}),__getset(0,e,"decelerationRate",function(){return this._decelerationRate},function(t){this._decelerationRate=t}),__getset(0,e,"percX",function(){return 0==this._overlapSize.x?0:this._xPos/this._overlapSize.x},function(t){this.setPercX(t,!1)}),__getset(0,e,"posY",function(){return this._yPos},function(t){this.setPosY(t,!1)}),__getset(0,e,"contentHeight",function(){return this._contentSize.y}),__getset(0,e,"currentPageX",function(){if(!this._pageMode)return 0;var t=Math.floor(this._xPos/this._pageSize.x);return this._xPos-t*this._pageSize.x>.5*this._pageSize.x&&t++,t},function(t){this.setCurrentPageX(t,!1)}),__getset(0,e,"currentPageY",function(){if(!this._pageMode)return 0;var t=Math.floor(this._yPos/this._pageSize.y);return this._yPos-t*this._pageSize.y>.5*this._pageSize.y&&t++,t},function(t){this.setCurrentPageY(t,!1)}),__getset(0,e,"isRightMost",function(){return this._xPos==this._overlapSize.x||0==this._overlapSize.x}),__getset(0,e,"pageController",function(){return this._pageController},function(t){this._pageController=t}),__getset(0,e,"scrollingPosX",function(){return ToolSet.clamp(-this._container.x,0,this._overlapSize.x)}),__getset(0,e,"scrollingPosY",function(){return ToolSet.clamp(-this._container.y,0,this._overlapSize.y)}),t.easeFunc=function(t,e){return(t=t/e-1)*t*t+1},t.draggingPane=null,t._gestureFlag=0,t.TWEEN_TIME_GO=.5,t.TWEEN_TIME_DEFAULT=.3,t.PULL_RATIO=.5,__static(t,["sHelperPoint",function(){return this.sHelperPoint=new Point},"sHelperRect",function(){return this.sHelperRect=new Rectangle},"sEndPos",function(){return this.sEndPos=new Point},"sOldChange",function(){return this.sOldChange=new Point}]),t}(),ScrollType=function(){function t(){}return __class(t,"fairygui.ScrollType"),t.Horizontal=0,t.Vertical=1,t.Both=2,t}(),Transition=function(){function t(t){this.name=null,this._owner=null,this._ownerBaseX=NaN,this._ownerBaseY=NaN,this._items=null,this._totalTimes=0,this._totalTasks=0,this._playing=!1,this._paused=!1,this._onComplete=null,this._options=0,this._reversed=!1,this._totalDuration=NaN,this._autoPlay=!1,this._autoPlayTimes=0,this._autoPlayDelay=NaN,this._timeScale=NaN,this._startTime=NaN,this._endTime=NaN,this.OPTION_IGNORE_DISPLAY_CONTROLLER=1,this.OPTION_AUTO_STOP_DISABLED=2,this.OPTION_AUTO_STOP_AT_END=4,this._owner=t,this._items=[],this._totalDuration=0,this._autoPlayTimes=1,this._autoPlayDelay=0,this._timeScale=1,this._startTime=0,this._endTime=0}var e,i,n,s,r,a,o,h,l,c;__class(t,"fairygui.Transition");var u=t.prototype;return u.play=function(t,e,i,n,s){void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=-1),this._play(t,e,i,n,s,!1)},u.playReverse=function(t,e,i,n,s){void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=-1),this._play(t,1,i,n,s,!0)},u.changePlayTimes=function(t){this._totalTimes=t},u.setAutoPlay=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=0),this._autoPlay!=t&&(this._autoPlay=t,this._autoPlayTimes=e,this._autoPlayDelay=i,this._autoPlay?this._owner.onStage&&this.play(null,null,this._autoPlayTimes,this._autoPlayDelay):this._owner.onStage||this.stop(!1,!0))},u._play=function(t,e,i,n,s,r){void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=-1),void 0===r&&(r=!1),this.stop(!0,!0),this._totalTimes=e,this._reversed=r,this._startTime=n,this._endTime=s,this._playing=!0,this._paused=!1,this._onComplete=t;for(var a=this._items.length,o=0;a>o;o++){var h=this._items[o];if(null==h.target?h.targetId?h.target=this._owner.getChildById(h.targetId):h.target=this._owner:h.target!=this._owner&&h.target.parent!=this._owner&&(h.target=null),null!=h.target&&10==h.type){var l=h.target.getTransition(h.value.transName);if(l==this&&(l=null),null!=l)if(0==h.value.playTimes){var c=0;for(c=o-1;c>=0;c--){var u=this._items[c];if(10==u.type&&u.value.trans==l){u.value.stopTime=h.time-u.time;break}}0>c?h.value.stopTime=0:l=null}else h.value.stopTime=-1;h.value.trans=l}}0==i?this.onDelayedPlay():GTween.delayedCall(i).onComplete(this.onDelayedPlay,this)},u.stop=function(t,e){if(void 0===t&&(t=!0),void 0===e&&(e=!1),this._playing){this._playing=!1,this._totalTasks=0,this._totalTimes=0;var i=this._onComplete;this._onComplete=null,GTween.kill(this);var n=this._items.length;if(this._reversed)for(var s=n-1;s>=0;s--){var r=this._items[s];null!=r.target&&this.stopItem(r,t)}else for(s=0;n>s;s++)r=this._items[s],null!=r.target&&this.stopItem(r,t);e&&null!=i&&i.run()}},u.stopItem=function(t,e){if(0!=t.displayLockToken&&(t.target.releaseDisplayLock(t.displayLockToken),t.displayLockToken=0),null!=t.tweener&&(t.tweener.kill(e),t.tweener=null,11!=t.type||e||(t.target._gearLocked=!0,t.target.setXY(t.target.x-t.value.lastOffsetX,t.target.y-t.value.lastOffsetY),t.target._gearLocked=!1)),10==t.type){var i=t.value.trans;null!=i&&i.stop(e,!1)}},u.setPaused=function(t){if(this._playing&&this._paused!=t){this._paused=t;var e=GTween.getTween(this);null!=e&&e.setPaused(t);for(var i=this._items.length,n=0;i>n;n++){var s=this._items[n];null!=s.target&&(10==s.type?null!=s.value.trans&&s.value.trans.setPaused(t):7==s.type&&(t?(s.value.flag=s.target.playing,s.target.playing=!1):s.target.playing=s.value.flag),null!=s.tweener&&s.tweener.setPaused(t))}}},u.dispose=function(){this._playing&&GTween.kill(this);for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];null!=i.tweener&&(i.tweener.kill(),i.tweener=null),i.target=null,i.hook=null,null!=i.tweenConfig&&(i.tweenConfig.endHook=null)}this._items.length=0,this._playing=!1,this._onComplete=null},u.setValue=function(t,e){for(var i=[],n=1,s=arguments.length;s>n;n++)i.push(arguments[n]);for(var r,a=this._items.length,n=0;a>n;n++){var o=this._items[n];if(o.label==t)r=null!=o.tweenConfig?o.tweenConfig.startValue:o.value;else{if(null==o.tweenConfig||o.tweenConfig.endLabel!=t)continue;r=o.tweenConfig.endValue}switch(o.type){case 0:case 1:case 3:case 2:case 13:r.b1=!0,r.b2=!0,r.f1=parseFloat(i[0]),r.f2=parseFloat(i[1]);break;case 4:r.f1=parseFloat(i[0]);break;case 5:r.f1=parseFloat(i[0]);break;case 6:r.f1=parseFloat(i[0]);break;case 7:r.frame=parseInt(i[0]),i.length>1&&(r.playing=i[1]);break;case 8:r.visible=i[0];break;case 9:r.sound=i[0],i.length>1&&(r.volume=parseFloat(i[1]));break;case 10:r.transName=i[0],i.length>1&&(r.playTimes=parseInt(i[1]));break;case 11:r.amplitude=parseFloat(i[0]),i.length>1&&(r.duration=parseFloat(i[1]));break;case 12:r.f1=parseFloat(i[0]),r.f2=parseFloat(i[1]),r.f3=parseFloat(i[2]),r.f4=parseFloat(i[3]);break;case 14:case 15:r.text=i[0]}}},u.setHook=function(t,e){for(var i=this._items.length,n=0;i>n;n++){var s=this._items[n];if(s.label==t){s.hook=e;break}if(null!=s.tweenConfig&&s.tweenConfig.endLabel==t){s.tweenConfig.endHook=e;break}}},u.clearHooks=function(){for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];i.hook=null,null!=i.tweenConfig&&(i.tweenConfig.endHook=null)}},u.setTarget=function(t,e){for(var i=this._items.length,n=0;i>n;n++){var s=this._items[n];s.label==t&&(s.targetId=e.id,s.target=null)}},u.setDuration=function(t,e){for(var i=this._items.length,n=0;i>n;n++){var s=this._items[n];null!=s.tweenConfig&&s.label==t&&(s.tweenConfig.duration=e)}},u.getLabelTime=function(t){for(var e=this._items.length,i=0;e>i;i++){var n=this._items[i];if(n.label==t)return n.time;if(null!=n.tweenConfig&&n.tweenConfig.endLabel==t)return n.time+n.tweenConfig.duration}return Number.NaN},u.updateFromRelations=function(t,e,i){var n=this._items.length;if(0!=n)for(var s=0;n>s;s++){var r=this._items[s];0==r.type&&r.targetId==t&&(null!=r.tweenConfig?(r.tweenConfig.startValue.f1+=e,r.tweenConfig.startValue.f2+=i,r.tweenConfig.endValue.f1+=e,r.tweenConfig.endValue.f2+=i):(r.value.f1+=e,r.value.f2+=i))}},u.onOwnerAddedToStage=function(){this._autoPlay&&!this._playing&&this.play(null,this._autoPlayTimes,this._autoPlayDelay)},u.onOwnerRemovedFromStage=function(){0==(this._options&this.OPTION_AUTO_STOP_DISABLED)&&this.stop(0!=(this._options&this.OPTION_AUTO_STOP_AT_END),!1)},u.onDelayedPlay=function(){if(this.internalPlay(),this._playing=this._totalTasks>0,this._playing){if(0!=(this._options&this.OPTION_IGNORE_DISPLAY_CONTROLLER))for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];null!=i.target&&i.target!=this._owner&&(i.displayLockToken=i.target.addDisplayLock())}}else if(null!=this._onComplete){var n=this._onComplete;this._onComplete=null,n.run()}},u.internalPlay=function(){this._ownerBaseX=this._owner.x,this._ownerBaseY=this._owner.y,this._totalTasks=0;var t,e=this._items.length,i=!1;if(this._reversed)for(n=e-1;n>=0;n--)t=this._items[n],null!=t.target&&this.playItem(t);else for(var n=0;e>n;n++)t=this._items[n],null!=t.target&&(7==t.type&&0!=this._startTime&&t.time<=this._startTime?(i=!0,t.value.flag=!1):this.playItem(t));i&&this.skipAnimations()},u.playItem=function(t){var e=NaN;if(null!=t.tweenConfig){if(e=this._reversed?this._totalDuration-t.time-t.tweenConfig.duration:t.time,-1==this._endTime||e<=this._endTime){var i,n;switch(this._reversed?(i=t.tweenConfig.endValue,n=t.tweenConfig.startValue):(i=t.tweenConfig.startValue,n=t.tweenConfig.endValue),t.value.b1=i.b1||n.b1,t.value.b2=i.b2||n.b2,t.type){case 0:case 1:case 2:case 13:t.tweener=GTween.to2(i.f1,i.f2,n.f1,n.f2,t.tweenConfig.duration);break;case 4:case 5:t.tweener=GTween.to(i.f1,n.f1,t.tweenConfig.duration);break;case 6:t.tweener=GTween.toColor(i.f1,n.f1,t.tweenConfig.duration);break;case 12:t.tweener=GTween.to4(i.f1,i.f2,i.f3,i.f4,n.f1,n.f2,n.f3,n.f4,t.tweenConfig.duration)}t.tweener.setDelay(e).setEase(t.tweenConfig.easeType).setRepeat(t.tweenConfig.repeat,t.tweenConfig.yoyo).setTimeScale(this._timeScale).setTarget(t).onStart(this.onTweenStart,this).onUpdate(this.onTweenUpdate,this).onComplete(this.onTweenComplete,this),this._endTime>=0&&t.tweener.setBreakpoint(this._endTime-e),this._totalTasks++}}else 11==t.type?(e=this._reversed?this._totalDuration-t.time-t.value.duration:t.time,t.value.offsetX=t.value.offsetY=0,t.value.lastOffsetX=t.value.lastOffsetY=0,t.tweener=GTween.shake(0,0,t.value.amplitude,t.value.duration).setDelay(e).setTimeScale(this._timeScale).setTarget(t).onUpdate(this.onTweenUpdate,this).onComplete(this.onTweenComplete,this),this._endTime>=0&&t.tweener.setBreakpoint(this._endTime-t.time),this._totalTasks++):(e=this._reversed?this._totalDuration-t.time:t.time,e<=this._startTime?(this.applyValue(t),this.callHook(t,!1)):(-1==this._endTime||e<=this._endTime)&&(this._totalTasks++,t.tweener=GTween.delayedCall(e).setTimeScale(this._timeScale).setTarget(t).onComplete(this.onDelayedPlayItem,this)));null!=t.tweener&&t.tweener.seek(this._startTime)},u.skipAnimations=function(){for(var t,e,i,n=0,s=NaN,r=NaN,a=this._items.length,o=0;a>o;o++)if(i=this._items[o],!(7!=i.type||i.time>this._startTime||(t=i.value,t.flag))){e=i.target,n=e.frame,s=e.playing?0:-1,r=0;for(var h=o;a>h;h++)i=this._items[h],7!=i.type||i.target!=e||i.time>this._startTime||(t=i.value,t.flag=!0,-1!=t.frame?(n=t.frame,s=t.playing?i.time:-1,r=0):t.playing?0>s&&(s=i.time):(s>=0&&(r+=i.time-s),s=-1),this.callHook(i,!1));s>=0&&(r+=this._startTime-s),e.playing=s>=0,e.frame=n,r>0&&e.advance(1e3*r)}},u.onDelayedPlayItem=function(t){var e=t.target;e.tweener=null,this._totalTasks--,this.applyValue(e),this.callHook(e,!1),this.checkAllComplete()},u.onTweenStart=function(t){var e=t.target;if(0==e.type||1==e.type){var i,n;this._reversed?(i=e.tweenConfig.endValue,n=e.tweenConfig.startValue):(i=e.tweenConfig.startValue,n=e.tweenConfig.endValue),0==e.type?e.target!=this._owner?(i.b1||(i.f1=e.target.x),i.b2||(i.f2=e.target.y)):(i.b1||(i.f1=e.target.x-this._ownerBaseX),i.b2||(i.f2=e.target.y-this._ownerBaseY)):(i.b1||(i.f1=e.target.width),i.b2||(i.f2=e.target.height)),n.b1||(n.f1=i.f1),n.b2||(n.f2=i.f2),t.startValue.x=i.f1,t.startValue.y=i.f2,t.endValue.x=n.f1,t.endValue.y=n.f2}this.callHook(e,!1)},u.onTweenUpdate=function(t){var e=t.target;switch(e.type){case 0:case 1:case 2:case 13:e.value.f1=t.value.x,e.value.f2=t.value.y;break;case 4:case 5:e.value.f1=t.value.x;break;case 6:e.value.f1=t.value.color;break;case 12:e.value.f1=t.value.x,e.value.f2=t.value.y,e.value.f3=t.value.z,e.value.f4=t.value.w;break;case 11:e.value.offsetX=t.deltaValue.x,e.value.offsetY=t.deltaValue.y}this.applyValue(e)},u.onTweenComplete=function(t){var e=t.target;e.tweener=null,this._totalTasks--,t.allCompleted&&this.callHook(e,!0),this.checkAllComplete()},u.onPlayTransCompleted=function(t){this._totalTasks--,this.checkAllComplete()},u.callHook=function(t,e){e?null!=t.tweenConfig&&null!=t.tweenConfig.endHook&&t.tweenConfig.endHook.run():t.time>=this._startTime&&null!=t.hook&&t.hook.run()},u.checkAllComplete=function(){if(this._playing&&0==this._totalTasks)if(this._totalTimes<0)this.internalPlay();else if(this._totalTimes--,this._totalTimes>0)this.internalPlay();else{this._playing=!1;for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];null!=i.target&&0!=i.displayLockToken&&(i.target.releaseDisplayLock(i.displayLockToken),i.displayLockToken=0)}if(null!=this._onComplete){var n=this._onComplete;this._onComplete=null,n.run()}}},u.applyValue=function(t){switch(t.target._gearLocked=!0,t.type){case 0:if(t.target==this._owner){var e=NaN,i=NaN;e=t.value.b1?t.value.f1+this._ownerBaseX:t.target.x,i=t.value.b2?t.value.f2+this._ownerBaseY:t.target.y,t.target.setXY(e,i)}else t.value.b1||(t.value.f1=t.target.x),t.value.b2||(t.value.f2=t.target.y),t.target.setXY(t.value.f1,t.value.f2);break;case 1:t.value.b1||(t.value.f1=t.target.width),t.value.b2||(t.value.f2=t.target.height),t.target.setSize(t.value.f1,t.value.f2);break;case 3:t.target.setPivot(t.value.f1,t.value.f2,t.target.pivotAsAnchor);break;case 4:t.target.alpha=t.value.f1;break;case 5:t.target.rotation=t.value.f1;break;case 2:t.target.setScale(t.value.f1,t.value.f2);break;case 13:t.target.setSkew(t.value.f1,t.value.f2);break;case 6:t.target.color=ToolSet.convertToHtmlColor(t.value.f1,!1);break;case 7:t.value.frame>=0&&(t.target.frame=t.value.frame),t.target.playing=t.value.playing,t.target.timeScale=this._timeScale;break;case 8:t.target.visible=t.value.visible;break;case 10:if(this._playing){var n=t.value.trans;if(null!=n){this._totalTasks++;var s=this._startTime>t.time?this._startTime-t.time:0,r=this._endTime>=0?this._endTime-t.time:-1;t.value.stopTime>=0&&(0>r||r>t.value.stopTime)&&(r=t.value.stopTime),n.timeScale=this._timeScale,n._play(Handler.create(this,this.onPlayTransCompleted,[t]),t.value.playTimes,0,s,r,this._reversed)}}break;case 9:if(this._playing&&t.time>=this._startTime){if(null==t.value.audioClip){var a=UIPackage.getItemByURL(t.value.sound);a?t.value.audioClip=a.file:t.value.audioClip=t.value.sound}t.value.audioClip&&GRoot.inst.playOneShotSound(t.value.audioClip,t.value.volume)}break;case 11:t.target.setXY(t.target.x-t.value.lastOffsetX+t.value.offsetX,t.target.y-t.value.lastOffsetY+t.value.offsetY),t.value.lastOffsetX=t.value.offsetX,t.value.lastOffsetY=t.value.offsetY;break;case 12:var o=t.target.filters,h=new ColorMatrix;h.adjustBrightness(t.value.f1),h.adjustContrast(t.value.f2),h.adjustSaturation(t.value.f3),h.adjustHue(t.value.f4),o=[new ColorFilter(h)],t.target.filters=o;break;case 14:t.target.text=t.value.text;break;case 15:t.target.icon=t.value.text}t.target._gearLocked=!1},u.setup=function(t){this.name=t.readS(),this._options=t.getInt32(),this._autoPlay=t.readBool(),this._autoPlayTimes=t.getInt32(),this._autoPlayDelay=t.getFloat32();for(var e=t.getInt16(),s=0;e>s;s++){var r=t.getInt16(),a=t.pos;t.seek(a,0);var o=new i(t.readByte());this._items[s]=o,o.time=t.getFloat32();var h=t.getInt16();0>h?o.targetId="":o.targetId=this._owner.getChildAt(h).id,o.label=t.readS(),t.readBool()?(t.seek(a,1),o.tweenConfig=new n,o.tweenConfig.duration=t.getFloat32(),o.time+o.tweenConfig.duration>this._totalDuration&&(this._totalDuration=o.time+o.tweenConfig.duration),o.tweenConfig.easeType=t.readByte(),o.tweenConfig.repeat=t.getInt32(),o.tweenConfig.yoyo=t.readBool(),o.tweenConfig.endLabel=t.readS(),t.seek(a,2),this.decodeValue(o,t,o.tweenConfig.startValue),t.seek(a,3),this.decodeValue(o,t,o.tweenConfig.endValue)):(o.time>this._totalDuration&&(this._totalDuration=o.time),t.seek(a,2),this.decodeValue(o,t,o.value)),t.pos=a+r}},u.decodeValue=function(t,e,i){switch(t.type){case 0:case 1:case 3:case 13:i.b1=e.readBool(),i.b2=e.readBool(),i.f1=e.getFloat32(),i.f2=e.getFloat32();break;case 4:case 5:i.f1=e.getFloat32();break;case 2:i.f1=e.getFloat32(),i.f2=e.getFloat32();break;case 6:i.f1=e.readColor();break;case 7:i.playing=e.readBool(),i.frame=e.getInt32();break;case 8:i.visible=e.readBool();break;case 9:i.sound=e.readS(),i.volume=e.getFloat32();break;case 10:i.transName=e.readS(),i.playTimes=e.getInt32();break;case 11:i.amplitude=e.getFloat32(),i.duration=e.getFloat32();break;case 12:i.f1=e.getFloat32(),i.f2=e.getFloat32(),i.f3=e.getFloat32(),i.f4=e.getFloat32();break;case 14:case 15:i.text=e.readS()}},__getset(0,u,"playing",function(){return this._playing}),__getset(0,u,"timeScale",function(){return this._timeScale},function(t){if(this._timeScale!=t&&(this._timeScale=t,this._playing))for(var e=this._items.length,i=0;e>i;i++){var n=this._items[i];null!=n.tweener?n.tweener.setTimeScale(t):10==n.type?null!=n.value.trans&&(n.value.trans.timeScale=t):7==n.type&&null!=n.target&&(n.target.timeScale=t)}}),t.__init$=function(){e=function(){function t(){}return __class(t,""),t.XY=0,t.Size=1,t.Scale=2,t.Pivot=3,t.Alpha=4,t.Rotation=5,t.Color=6,t.Animation=7,t.Visible=8,t.Sound=9,t.Transition=10,t.Shake=11,t.ColorFilter=12,t.Skew=13,t.Text=14,t.Icon=15,t.Unknown=16,t}(),i=function(){function t(t){switch(this.time=NaN,this.targetId=null,this.type=0,this.tweenConfig=null,this.label=null,this.value=null,this.hook=null,this.tweener=null,this.target=null,this.displayLockToken=0,this.type=t,t){case 0:case 1:case 2:case 3:case 13:case 4:case 5:case 6:case 12:this.value=new c;break;case 7:this.value=new r;break;case 11:this.value=new h;break;case 9:this.value=new a;break;case 10:this.value=new o;break;case 8:this.value=new s;break;case 14:case 15:this.value=new l}}return __class(t,""),t}(),n=function(){function t(){this.duration=NaN,this.easeType=0,this.repeat=0,this.yoyo=!1,this.startValue=null,this.endValue=null,this.endLabel=null,this.endHook=null,this.easeType=5,this.startValue=new c,this.endValue=new c}return __class(t,""),t}(),s=function(){function t(){this.visible=!1}return __class(t,""),t}(),r=function(){function t(){this.frame=0,this.playing=!1,this.flag=!1}return __class(t,""),t}(),a=function(){function t(){this.sound=null,this.volume=NaN,this.audioClip=null}return __class(t,""),t}(),o=function(){function t(){this.transName=null,this.playTimes=0,this.trans=null,this.stopTime=NaN}return __class(t,""),t}(),h=function(){function t(){this.amplitude=NaN,this.duration=NaN,this.offsetX=NaN,this.offsetY=NaN,this.lastOffsetX=NaN,this.lastOffsetY=NaN}return __class(t,""),t}(),l=function(){function t(){this.text=null}return __class(t,""),t}(),c=function(){function t(){this.f1=NaN,this.f2=NaN,this.f3=NaN,this.f4=NaN,this.b1=!1,this.b2=!1,this.b1=this.b2=!0}return __class(t,""),t}()},t}(),TranslationHelper=function(){function t(){}return __class(t,"fairygui.TranslationHelper"),t.loadFromXML=function(e){t.strings={};for(var i=Utils$1.parseXMLFromString(e),n=t.findChildNode(i,"resources"),s=n.childNodes,r=s.length,a=0;r>a;a++){var o=s[a];if("string"==o.nodeName){var h=o.getAttribute("name"),l=o.textContent,c=h.indexOf("-");if(-1==c)continue;var u=h.substr(0,c),_=h.substr(c+1),d=t.strings[u];d||(d={},t.strings[u]=d),d[_]=l}}},t.translateComponent=function(e){if(null!=t.strings){var i=t.strings[e.owner.id+e.id];if(null!=i){var n,s,r,a=e.rawData,o=0,h=0,l=0,c=0,u=0,_=0,d=0,f=0;a.seek(0,2);var p=a.getInt16();for(l=0;p>l;l++){_=a.getInt16(),d=a.pos,a.seek(d,0);var g=a.readByte();a.skip(4),n=a.readS(),9==g&&a.seek(d,6)&&(g=a.readByte()),a.seek(d,1),null!=(s=i[n+"-tips"])&&a.writeS(s),a.seek(d,2);var m=a.getInt16();for(c=0;m>c;c++){if(o=a.getInt16(),o+=a.pos,6==a.readByte()){for(a.skip(2),f=a.getInt16(),u=0;f>u;u++)r=a.readS(),null!=r&&(null!=(s=i[n+"-texts_"+u])?a.writeS(s):a.skip(2));a.readBool()&&null!=(s=i[n+"-texts_def"])&&a.writeS(s)}a.pos=o}switch(g){case 6:case 7:case 8:null!=(s=i[n])&&(a.seek(d,6),a.writeS(s)),null!=(s=i[n+"-prompt"])&&(a.seek(d,4),a.writeS(s));break;case 10:for(a.seek(d,8),a.skip(2),h=a.getInt16(),c=0;h>c;c++)o=a.getInt16(),o+=a.pos,a.skip(2),null!=(s=i[n+"-"+c])?a.writeS(s):a.skip(2),null!=(s=i[n+"-"+c+"-0"])&&a.writeS(s),a.pos=o;break;case 11:a.seek(d,6)&&a.readByte()==g&&(null!=(s=i[n])?a.writeS(s):a.skip(2),a.skip(2),a.readBool()&&a.skip(4),a.skip(4),a.readBool()&&null!=(s=i[n+"-prompt"])&&a.writeS(s));break;case 12:a.seek(d,6)&&a.readByte()==g&&(null!=(s=i[n])?a.writeS(s):a.skip(2),null!=(s=i[n+"-0"])&&a.writeS(s));break;case 13:if(a.seek(d,6)&&a.readByte()==g){for(h=a.getInt16(),c=0;h>c;c++)o=a.getInt16(),o+=a.pos,null!=(s=i[n+"-"+c])&&a.writeS(s),a.pos=o;null!=(s=i[n])&&a.writeS(s)}}a.pos=d+_}}}},t.findChildNode=function(t,e){var i=t.childNodes,n=i.length;if(n>0)for(var s=0;n>s;s++){var r=i[s];if(r.nodeName==e)return r}return null},t.strings=null,t}(),EaseManager=function(){function t(){}var e;return __class(t,"fairygui.tween.EaseManager"),t.evaluate=function(i,n,s,r,a){switch(i){case 0:return n/s;case 1:return-Math.cos(n/s*t._PiOver2)+1;case 2:return Math.sin(n/s*t._PiOver2);case 3:return-.5*(Math.cos(Math.PI*n/s)-1);case 4:return(n/=s)*n;case 5:return-(n/=s)*(n-2);case 6:return(n/=.5*s)<1?.5*n*n:-.5*(--n*(n-2)-1);case 7:return(n/=s)*n*n;case 8:return(n=n/s-1)*n*n+1;case 9:return(n/=.5*s)<1?.5*n*n*n:.5*((n-=2)*n*n+2);case 10:return(n/=s)*n*n*n;case 11:return-((n=n/s-1)*n*n*n-1);case 12:return(n/=.5*s)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2);case 13:return(n/=s)*n*n*n*n;case 14:return(n=n/s-1)*n*n*n*n+1;case 15:return(n/=.5*s)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2);case 16:return 0==n?0:Math.pow(2,10*(n/s-1));case 17:return n==s?1:-Math.pow(2,-10*n/s)+1;case 18:return 0==n?0:n==s?1:(n/=.5*s)<1?.5*Math.pow(2,10*(n-1)):.5*(-Math.pow(2,-10*--n)+2);case 19:return-(Math.sqrt(1-(n/=s)*n)-1);case 20:return Math.sqrt(1-(n=n/s-1)*n);case 21:return(n/=.5*s)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1);case 22:var o=NaN;return 0==n?0:1==(n/=s)?1:(0==a&&(a=.3*s),1>r?(r=1,o=a/4):o=a/t._TwoPi*Math.asin(1/r),-(r*Math.pow(2,10*(n-=1))*Math.sin((n*s-o)*t._TwoPi/a)));case 23:var h=NaN;return 0==n?0:1==(n/=s)?1:(0==a&&(a=.3*s),1>r?(r=1,h=a/4):h=a/t._TwoPi*Math.asin(1/r),r*Math.pow(2,-10*n)*Math.sin((n*s-h)*t._TwoPi/a)+1);case 24:var l=NaN;return 0==n?0:2==(n/=.5*s)?1:(0==a&&(a=s*(.3*1.5)),1>r?(r=1,l=a/4):l=a/t._TwoPi*Math.asin(1/r),1>n?-.5*(r*Math.pow(2,10*(n-=1))*Math.sin((n*s-l)*t._TwoPi/a)):r*Math.pow(2,-10*(n-=1))*Math.sin((n*s-l)*t._TwoPi/a)*.5+1);case 25:return(n/=s)*n*((r+1)*n-r);case 26:return(n=n/s-1)*n*((r+1)*n+r)+1;case 27:return(n/=.5*s)<1?.5*(n*n*(((r*=1.525)+1)*n-r)):.5*((n-=2)*n*(((r*=1.525)+1)*n+r)+2);case 28:return e.easeIn(n,s);case 29:return e.easeOut(n,s);case 30:return e.easeInOut(n,s);default:return-(n/=s)*(n-2)}},__static(t,["_PiOver2",function(){return this._PiOver2=.5*Math.PI},"_TwoPi",function(){return this._TwoPi=2*Math.PI}]),t.__init$=function(){e=function(){function t(){}return __class(t,""),t.easeIn=function(e,i){return 1-t.easeOut(i-e,i)},t.easeOut=function(t,e){return(t/=e)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.easeInOut=function(e,i){return.5*i>e?.5*t.easeIn(2*e,i):.5*t.easeOut(2*e-i,i)+.5},t}()},t}(),EaseType=function(){function t(){}return __class(t,"fairygui.tween.EaseType"),t.Linear=0,t.SineIn=1,t.SineOut=2,t.SineInOut=3,t.QuadIn=4,t.QuadOut=5,t.QuadInOut=6,t.CubicIn=7,t.CubicOut=8,t.CubicInOut=9,t.QuartIn=10,t.QuartOut=11,t.QuartInOut=12,t.QuintIn=13,t.QuintOut=14,t.QuintInOut=15,t.ExpoIn=16,t.ExpoOut=17,t.ExpoInOut=18,t.CircIn=19,t.CircOut=20,t.CircInOut=21,t.ElasticIn=22,t.ElasticOut=23,t.ElasticInOut=24,t.BackIn=25,t.BackOut=26,t.BackInOut=27,t.BounceIn=28,t.BounceOut=29,t.BounceInOut=30,t.Custom=31,t}(),GTween=function(){function t(){}return __class(t,"fairygui.tween.GTween"),t.to=function(t,e,i){return TweenManager.createTween()._to(t,e,i)},t.to2=function(t,e,i,n,s){return TweenManager.createTween()._to2(t,e,i,n,s)},t.to3=function(t,e,i,n,s,r,a){return TweenManager.createTween()._to3(t,e,i,n,s,r,a)},t.to4=function(t,e,i,n,s,r,a,o,h){return TweenManager.createTween()._to4(t,e,i,n,s,r,a,o,h)},t.toColor=function(t,e,i){return TweenManager.createTween()._toColor(t,e,i)},t.delayedCall=function(t){return TweenManager.createTween().setDelay(t)},t.shake=function(t,e,i,n){return TweenManager.createTween()._shake(t,e,i,n)},t.isTweening=function(t,e){return TweenManager.isTweening(t,e)},t.kill=function(t,e,i){void 0===e&&(e=!1),TweenManager.killTweens(t,!1,null)},t.getTween=function(t,e){return TweenManager.getTween(t,e)},t.catchCallbackExceptions=!0,t}(),GTweener=function(){function t(){this._target=null,this._propType=null,this._killed=!1,this._paused=!1,this._delay=NaN,this._duration=NaN,this._breakpoint=NaN,this._easeType=0,this._easeOvershootOrAmplitude=NaN,this._easePeriod=NaN,this._repeat=0,this._yoyo=!1,this._timeScale=NaN,this._snapping=!1,this._userData=null,this._onUpdate=null,this._onUpdateCaller=null,this._onStart=null,this._onStartCaller=null,this._onComplete=null,this._onCompleteCaller=null,this._startValue=null,this._endValue=null,this._value=null,this._deltaValue=null,this._valueSize=0,this._started=!1,this._ended=0,this._elapsedTime=NaN,this._normalizedTime=NaN,this._startValue=new TweenValue,this._endValue=new TweenValue,this._value=new TweenValue,this._deltaValue=new TweenValue,this._reset()}__class(t,"fairygui.tween.GTweener");var e=t.prototype;return e.setDelay=function(t){return this._delay=t,this},e.setDuration=function(t){return this._duration=t,this},e.setBreakpoint=function(t){return this._breakpoint=t,this},e.setEase=function(t){return this._easeType=t,this},e.setEasePeriod=function(t){return this._easePeriod=t,this},e.setEaseOvershootOrAmplitude=function(t){return this._easeOvershootOrAmplitude=t,this},e.setRepeat=function(t,e){return void 0===e&&(e=!1),this._repeat=t,this._yoyo=e,this},e.setTimeScale=function(t){return this._timeScale=t,this},e.setSnapping=function(t){return this._snapping=t,this},e.setTarget=function(t,e){return this._target=t,this._propType=e,this},e.setUserData=function(t){return this._userData=t,this},e.onUpdate=function(t,e){
return this._onUpdate=t,this._onUpdateCaller=e,this},e.onStart=function(t,e){return this._onStart=t,this._onStartCaller=e,this},e.onComplete=function(t,e){return this._onComplete=t,this._onCompleteCaller=e,this},e.setPaused=function(t){return this._paused=t,this},e.seek=function(t){if(!this._killed){if(this._elapsedTime=t,this._elapsedTime<this._delay){if(!this._started)return;this._elapsedTime=this._delay}this.update()}},e.kill=function(t){void 0===t&&(t=!1),this._killed||(t&&(0==this._ended&&(this._breakpoint>=0?this._elapsedTime=this._delay+this._breakpoint:this._repeat>=0?this._elapsedTime=this._delay+this._duration*(this._repeat+1):this._elapsedTime=this._delay+2*this._duration,this.update()),this.callCompleteCallback()),this._killed=!0)},e._to=function(t,e,i){return this._valueSize=1,this._startValue.x=t,this._endValue.x=e,this._duration=i,this},e._to2=function(t,e,i,n,s){return this._valueSize=2,this._startValue.x=t,this._endValue.x=i,this._startValue.y=e,this._endValue.y=n,this._duration=s,this},e._to3=function(t,e,i,n,s,r,a){return this._valueSize=3,this._startValue.x=t,this._endValue.x=n,this._startValue.y=e,this._endValue.y=s,this._startValue.z=i,this._endValue.z=r,this._duration=a,this},e._to4=function(t,e,i,n,s,r,a,o,h){return this._valueSize=4,this._startValue.x=t,this._endValue.x=s,this._startValue.y=e,this._endValue.y=r,this._startValue.z=i,this._endValue.z=a,this._startValue.w=n,this._endValue.w=o,this._duration=h,this},e._toColor=function(t,e,i){return this._valueSize=4,this._startValue.color=t,this._endValue.color=e,this._duration=i,this},e._shake=function(t,e,i,n){return this._valueSize=5,this._startValue.x=t,this._startValue.y=e,this._startValue.w=i,this._duration=n,this._easeType=0,this},e._init=function(){this._delay=0,this._duration=0,this._breakpoint=-1,this._easeType=5,this._timeScale=1,this._easePeriod=0,this._easeOvershootOrAmplitude=1.70158,this._snapping=!1,this._repeat=0,this._yoyo=!1,this._valueSize=0,this._started=!1,this._paused=!1,this._killed=!1,this._elapsedTime=0,this._normalizedTime=0,this._ended=0},e._reset=function(){this._target=null,this._userData=null,this._onStart=this._onUpdate=this._onComplete=null,this._onStartCaller=this._onUpdateCaller=this._onCompleteCaller=null},e._update=function(t){if(1!=this._timeScale&&(t*=this._timeScale),0!=t){if(0!=this._ended)return this.callCompleteCallback(),void(this._killed=!0);this._elapsedTime+=t,this.update(),0!=this._ended&&(this._killed||(this.callCompleteCallback(),this._killed=!0))}},e.update=function(){if(this._ended=0,0==this._valueSize)return void(this._elapsedTime>=this._delay+this._duration&&(this._ended=1));if(!this._started){if(this._elapsedTime<this._delay)return;if(this._started=!0,this.callStartCallback(),this._killed)return}var t=!1,e=this._elapsedTime-this._delay;if(this._breakpoint>=0&&e>=this._breakpoint&&(e=this._breakpoint,this._ended=2),0!=this._repeat){var i=Math.floor(e/this._duration);e-=this._duration*i,this._yoyo&&(t=i%2==1),this._repeat>0&&this._repeat-i<0&&(this._yoyo&&(t=this._repeat%2==1),e=this._duration,this._ended=1)}else e>=this._duration&&(e=this._duration,this._ended=1);if(this._normalizedTime=EaseManager.evaluate(this._easeType,t?this._duration-e:e,this._duration,this._easeOvershootOrAmplitude,this._easePeriod),this._value.setZero(),this._deltaValue.setZero(),5==this._valueSize)if(0==this._ended){var n=this._startValue.w*(1-this._normalizedTime),s=(2*Math.random()-1)*n,r=(2*Math.random()-1)*n;s=s>0?Math.ceil(s):Math.floor(s),r=r>0?Math.ceil(r):Math.floor(r),this._deltaValue.x=s,this._deltaValue.y=r,this._value.x=this._startValue.x+s,this._value.y=this._startValue.y+r}else this._value.x=this._startValue.x,this._value.y=this._startValue.y;else for(var a=0;a<this._valueSize;a++){var o=this._startValue.getField(a),h=this._endValue.getField(a),l=o+(h-o)*this._normalizedTime;this._snapping&&(l=Math.round(l)),this._deltaValue.setField(a,l-this._value.getField(a)),this._value.setField(a,l)}if(null!=this._target&&null!=this._propType)if("function"==typeof this._propType)switch(this._valueSize){case 1:this._propType.call(this._target,this._value.x);break;case 2:this._propType.call(this._target,this._value.x,this._value.y);break;case 3:this._propType.call(this._target,this._value.x,this._value.y,this._value.z);break;case 4:this._propType.call(this._target,this._value.x,this._value.y,this._value.z,this._value.w);break;case 5:this._propType.call(this._target,this._value.color);break;case 6:this._propType.call(this._target,this._value.x,this._value.y)}else 5==this._valueSize?this._target[this._propType]=this._value.color:this._target[this._propType]=this._value.x;this.callUpdateCallback()},e.callStartCallback=function(){if(null!=this._onStart)if(GTween.catchCallbackExceptions)try{this._onStart.call(this._onStartCaller,this)}catch(t){console.log("FairyGUI: error in start callback > "+t.message)}else this._onStart.call(this._onStartCaller,this)},e.callUpdateCallback=function(){if(null!=this._onUpdate)if(GTween.catchCallbackExceptions)try{this._onUpdate.call(this._onUpdateCaller,this)}catch(t){console.log("FairyGUI: error in update callback > "+t.message)}else this._onUpdate.call(this._onUpdateCaller,this)},e.callCompleteCallback=function(){if(null!=this._onComplete)if(GTween.catchCallbackExceptions)try{this._onComplete.call(this._onCompleteCaller,this)}catch(t){console.log("FairyGUI: error in complete callback > "+t.message)}else this._onComplete.call(this._onCompleteCaller,this)},__getset(0,e,"target",function(){return this._target}),__getset(0,e,"delay",function(){return this._delay}),__getset(0,e,"duration",function(){return this._duration}),__getset(0,e,"value",function(){return this._value}),__getset(0,e,"userData",function(){return this._userData}),__getset(0,e,"repeat",function(){return this._repeat}),__getset(0,e,"startValue",function(){return this._startValue}),__getset(0,e,"endValue",function(){return this._endValue}),__getset(0,e,"deltaValue",function(){return this._deltaValue}),__getset(0,e,"normalizedTime",function(){return this._normalizedTime}),__getset(0,e,"completed",function(){return 0!=this._ended}),__getset(0,e,"allCompleted",function(){return 1==this._ended}),t}(),TweenManager=function(){function t(){}return __class(t,"fairygui.tween.TweenManager"),t.createTween=function(){t._inited||(Laya.timer.frameLoop(1,null,t.update),t._inited=!0);var e,i=t._tweenerPool.length;return e=i>0?t._tweenerPool.pop():new GTweener,e._init(),t._activeTweens[t._totalActiveTweens++]=e,t._totalActiveTweens==t._activeTweens.length&&(t._activeTweens.length=t._activeTweens.length+Math.ceil(.5*t._activeTweens.length)),e},t.isTweening=function(e,i){if(null==e)return!1;for(var n=null==i,s=0;s<t._totalActiveTweens;s++){var r=t._activeTweens[s];if(null!=r&&r.target==e&&!r._killed&&(n||r._propType==i))return!0}return!1},t.killTweens=function(e,i,n){if(null==e)return!1;for(var s=!1,r=t._totalActiveTweens,a=null==n,o=0;r>o;o++){var h=t._activeTweens[o];null==h||h.target!=e||h._killed||!a&&h._propType!=n||(h.kill(i),s=!0)}return s},t.getTween=function(e,i){if(null==e)return null;for(var n=t._totalActiveTweens,s=null==i,r=0;n>r;r++){var a=t._activeTweens[r];if(null!=a&&a.target==e&&!a._killed&&(s||a._propType==i))return a}return null},t.update=function(){for(var e=Laya.timer.delta/1e3,i=t._totalActiveTweens,n=-1,s=0,r=0;i>r;r++){var a=t._activeTweens[r];null==a?(-1==n&&(n=r),s++):a._killed?(a._reset(),t._tweenerPool.push(a),t._activeTweens[r]=null,-1==n&&(n=r),s++):(a._paused||a._update(e),-1!=n&&(t._activeTweens[n]=a,t._activeTweens[r]=null,n++))}if(n>=0){if(t._totalActiveTweens!=i){var o=i;for(i=t._totalActiveTweens-i,r=0;i>r;r++)t._activeTweens[n++]=t._activeTweens[o++]}t._totalActiveTweens=n}},t._tweenerPool=[],t._totalActiveTweens=0,t._inited=!1,__static(t,["_activeTweens",function(){return this._activeTweens=new Array(30)}]),t}(),TweenValue=function(){function t(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.x=this.y=this.z=this.w=0}__class(t,"fairygui.tween.TweenValue");var e=t.prototype;return e.getField=function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("Index out of bounds: "+t)}},e.setField=function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("Index out of bounds: "+t)}},e.setZero=function(){this.x=this.y=this.z=this.w=0},__getset(0,e,"color",function(){return(this.w<<24)+(this.x<<16)+(this.y<<8)+this.z},function(t){this.x=(16711680&t)>>16,this.y=(65280&t)>>8,this.z=255&t,this.w=(4278190080&t)>>24}),t}(),UIConfig$1=function(){function t(){}return __class(t,"fairygui.UIConfig",null,"UIConfig$1"),t.defaultFont="SimSun",t.windowModalWaiting=null,t.globalModalWaiting=null,t.modalLayerColor="rgba(33,33,33,0.2)",t.buttonSound=null,t.buttonSoundVolumeScale=1,t.horizontalScrollBar=null,t.verticalScrollBar=null,t.defaultScrollStep=25,t.defaultScrollDecelerationRate=.967,t.defaultScrollBarDisplay=1,t.defaultScrollTouchEffect=!0,t.defaultScrollBounceEffect=!0,t.popupMenu=null,t.popupMenu_seperator=null,t.loaderErrorSign=null,t.tooltipsWin=null,t.defaultComboBoxVisibleItemCount=10,t.touchScrollSensitivity=20,t.touchDragSensitivity=10,t.clickDragSensitivity=2,t.bringWindowToFrontOnClick=!0,t.frameTimeForAsyncUIConstruction=2,t.textureLinearSampling=!0,t.packageFileExtension="fui",t}(),UIObjectFactory=function(){function t(){}return __class(t,"fairygui.UIObjectFactory"),t.setPackageItemExtension=function(e,i){if(null==e)throw new Error("Invaild url: "+e);var n=UIPackage.getItemByURL(e);null!=n&&(n.extensionType=i),t.packageItemExtensions[e]=i},t.setComponentItemClass=function(e,i){t.componentItemClass[e]=i},t.setLoaderExtension=function(t){fairygui.UIObjectFactory.loaderType=t},t.resolvePackageItemExtension=function(e){e.extensionType=t.packageItemExtensions["ui://"+e.owner.id+e.id],e.extensionType||(e.extensionType=t.packageItemExtensions["ui://"+e.owner.name+"/"+e.name])},t.newObject=function(e){return null!=e.extensionType?new e.extensionType:t.newObject2(e.objectType)},t.newObject2=function(e){var i=t.componentItemClass[e];if(i)return new i;switch(e){case 0:return new GImage;case 1:return new GMovieClip;case 9:return new GComponent;case 6:return new GBasicTextField;case 7:return new GRichTextField;case 8:return new GTextInput;case 5:return new GGroup;case 10:return new GList;case 3:return new GGraph;case 4:return null!=fairygui.UIObjectFactory.loaderType?new fairygui.UIObjectFactory.loaderType:new GLoader;case 12:return new GButton;case 11:return new GLabel;case 14:return new GProgressBar;case 15:return new GSlider;case 16:return new GScrollBar;case 13:return new GComboBox;default:return null}},t.packageItemExtensions={},t.loaderType=null,t.componentItemClass={},t}(),UIPackage=function(){function t(){this._id=null,this._name=null,this._items=null,this._itemsById=null,this._itemsByName=null,this._customId=null,this._sprites=null,this._items=[],this._itemsById={},this._itemsByName={},this._sprites={}}var e;__class(t,"fairygui.UIPackage");var i=t.prototype;return i.loadPackage=function(t,i){if(1179080009!=t.getUint32())throw new Error("FairyGUI: old package format found in '"+i+"'");t.version=t.getInt32();var n=t.readBool();if(this._id=t.readUTFString(),this._name=t.readUTFString(),t.skip(20),n){var s=new Uint8Array(t.buffer,t.pos,t.length-t.pos),r=new Zlib.RawInflate(s);s=r.decompress(),t=new ByteBuffer(s)}var a=t.pos,o=0,h=0,l=0;t.seek(a,4),o=t.getInt32();var c=__newvec(o);for(h=0;o>h;h++)c[h]=t.readUTFString();t.stringTable=c,t.seek(a,1);var u;for(i+="_",o=t.getUint16(),h=0;o>h;h++){switch(l=t.getInt32(),l+=t.pos,u=new PackageItem,u.owner=this,u.type=t.readByte(),u.id=t.readS(),u.name=t.readS(),t.readS(),u.file=t.readS(),t.readBool(),u.width=t.getInt32(),u.height=t.getInt32(),u.type){case 0:u.objectType=0;var _=t.readByte();1==_?(u.scale9Grid=new laya.maths.Rectangle,u.scale9Grid.x=t.getInt32(),u.scale9Grid.y=t.getInt32(),u.scale9Grid.width=t.getInt32(),u.scale9Grid.height=t.getInt32(),u.tileGridIndice=t.getInt32()):2==_&&(u.scaleByTile=!0),u.smoothing=t.readBool();break;case 1:u.smoothing=t.readBool(),u.objectType=1,u.rawData=t.readBuffer();break;case 5:u.rawData=t.readBuffer();break;case 3:var d=t.readByte();d>0?u.objectType=d:u.objectType=9,u.rawData=t.readBuffer(),UIObjectFactory.resolvePackageItemExtension(u);break;case 4:case 2:case 7:u.file=i+u.file}this._items.push(u),this._itemsById[u.id]=u,null!=u.name&&(this._itemsByName[u.name]=u),t.pos=l}for(t.seek(a,2),o=t.getUint16(),h=0;o>h;h++){l=t.getUint16(),l+=t.pos;var f=t.readS();u=this._itemsById[t.readS()];var p=new e;p.atlas=u,p.rect.x=t.getInt32(),p.rect.y=t.getInt32(),p.rect.width=t.getInt32(),p.rect.height=t.getInt32(),p.rotated=t.readBool(),this._sprites[f]=p,t.pos=l}if(t.seek(a,3))for(o=t.getUint16(),h=0;o>h;h++)l=t.getInt32(),l+=t.pos,u=this._itemsById[t.readS()],u&&0==u.type&&(u.pixelHitTestData=new PixelHitTestData,u.pixelHitTestData.load(t)),t.pos=l},i.loadAllAssets=function(){for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];this.getItemAsset(i)}},i.unloadAssets1=function(){for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];4==i.type&&null!=i.texture}},i.dispose=function(){for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];4==i.type?null!=i.texture&&(i.texture.destroy(!0),i.texture=null):2==i.type&&SoundManager.destroySound(i.file)}},i.createObject=function(t,e){var i=this._itemsByName[t];return i?this.internalCreateObject(i,e):null},i.internalCreateObject=function(t,e){var i;return i=3==t.type&&null!=e?new e:UIObjectFactory.newObject(t),null==i?null:(fairygui.UIPackage._constructing++,i.packageItem=t,i.constructFromResource(),fairygui.UIPackage._constructing--,i)},i.getItemById=function(t){return this._itemsById[t]},i.getItemByName=function(t){return this._itemsByName[t]},i.getItemAssetByName=function(t){var e=this._itemsByName[t];if(null==e)throw"Resource not found -"+t;return this.getItemAsset(e)},i.getItemAsset=function(t){switch(t.type){case 0:if(!t.decoded){t.decoded=!0;var e=this._sprites[t.id];if(null!=e){var i=this.getItemAsset(e.atlas);t.texture=Texture.create(i,e.rect.x,e.rect.y,e.rect.width,e.rect.height)}else t.texture=null}return t.texture;case 4:return t.decoded||(t.decoded=!0,t.texture=AssetProxy.inst.getRes(t.file),UIConfig$1.textureLinearSampling||(t.texture.isLinearSampling=!1)),t.texture;case 5:return t.decoded||(t.decoded=!0,this.loadFont(t)),t.bitmapFont;case 1:return t.decoded||(t.decoded=!0,this.loadMovieClip(t)),t.frames;case 3:return t.rawData;case 7:return t.file?AssetProxy.inst.getRes(t.file):null;default:return null}},i.loadMovieClip=function(t){var e=t.rawData;e.seek(0,0),t.interval=e.getInt32(),t.swing=e.readBool(),t.repeatDelay=e.getInt32(),e.seek(0,1);var i=e.getInt16();t.frames=__newvec(i);for(var n,s,r,a=NaN,o=NaN,h=0;i>h;h++){var l=e.getInt16();if(l+=e.pos,s=new Frame,a=e.getInt32(),o=e.getInt32(),e.getInt32(),e.getInt32(),s.addDelay=e.getInt32(),n=e.readS(),null!=n&&null!=(r=this._sprites[n])){var c=this.getItemAsset(r.atlas);s.texture=Texture.create(c,r.rect.x,r.rect.y,r.rect.width,r.rect.height,a,o,t.width,t.height)}t.frames[h]=s,e.pos=l}},i.loadFont=function(t){var e=new BitmapFont$1;t.bitmapFont=e;var i=t.rawData;i.seek(0,0),e.ttf=i.readBool(),i.readBool(),e.resizable=i.readBool(),i.readBool(),e.size=i.getInt32();var n=i.getInt32(),s=i.getInt32(),r=null,a=this._sprites[t.id];null!=a&&(r=this.getItemAsset(a.atlas)),i.seek(0,1);for(var o=null,h=i.getInt32(),l=0;h>l;l++){var c=i.getInt16();c+=i.pos,o=new BMGlyph;var u=i.readChar();e.glyphs[u]=o;var _=i.readS(),d=i.getInt32(),f=i.getInt32();if(o.offsetX=i.getInt32(),o.offsetY=i.getInt32(),o.width=i.getInt32(),o.height=i.getInt32(),o.advance=i.getInt32(),o.channel=i.readByte(),1==o.channel?o.channel=3:2==o.channel?o.channel=2:3==o.channel&&(o.channel=1),e.ttf)o.texture=Texture.create(r,d+a.rect.x,f+a.rect.y,o.width,o.height);else{var p=this._itemsById[_];p&&(this.getItemAsset(p),o.width=p.width,o.height=p.height,o.texture=p.texture)}e.ttf?o.lineHeight=s:(0==o.advance&&(0==n?o.advance=o.offsetX+o.width:o.advance=n),o.lineHeight=o.offsetY<0?o.height:o.offsetY+o.height,o.lineHeight<e.size&&(o.lineHeight=e.size)),i.pos=c}},__getset(0,i,"id",function(){return this._id}),__getset(0,i,"name",function(){return this._name}),__getset(0,i,"customId",function(){return this._customId},function(t){null!=this._customId&&delete fairygui.UIPackage._packageInstById[this._customId],this._customId=t,null!=this._customId&&(fairygui.UIPackage._packageInstById[this._customId]=this)}),t.getById=function(t){return fairygui.UIPackage._packageInstById[t]},t.getByName=function(t){return fairygui.UIPackage._packageInstByName[t]},t.addPackage=function(e,i){if(!i&&(i=AssetProxy.inst.getRes(e+"."+UIConfig$1.packageFileExtension),!i||0==i.length))throw new Error("package resource not ready: "+e);var n=new ByteBuffer(i),s=new t;return s.loadPackage(n,e),fairygui.UIPackage._packageInstById[s.id]=s,fairygui.UIPackage._packageInstByName[s.name]=s,s.customId=e,s},t.removePackage=function(t){var e=fairygui.UIPackage._packageInstById[t];if(e||(e=fairygui.UIPackage._packageInstByName[t]),!e)throw new Error("unknown package: "+t);e.dispose(),delete fairygui.UIPackage._packageInstById[e.id],null!=e._customId&&delete fairygui.UIPackage._packageInstById[e._customId],delete fairygui.UIPackage._packageInstByName[e.name]},t.createObject=function(t,e,i){var n=fairygui.UIPackage.getByName(t);return n?n.createObject(e,i):null},t.createObjectFromURL=function(t,e){var i=fairygui.UIPackage.getItemByURL(t);return i?i.owner.internalCreateObject(i,e):null},t.getItemURL=function(t,e){var i=fairygui.UIPackage.getByName(t);if(!i)return null;var n=i._itemsByName[e];return n?"ui://"+i.id+n.id:null},t.getItemByURL=function(e){var i=e.indexOf("//");if(-1==i)return null;var n=e.indexOf("/",i+2);if(-1==n){if(e.length>13){var s=e.substr(5,8),r=t.getById(s);if(null!=r){var a=e.substr(13);return r.getItemById(a)}}}else{var o=e.substr(i+2,n-i-2);if(r=t.getByName(o),null!=r){var h=e.substr(n+1);return r.getItemByName(h)}}return null},t.getItemAssetByURL=function(e){var i=t.getItemByURL(e);return null==i?null:i.owner.getItemAsset(i)},t.normalizeURL=function(e){if(null==e)return null;var i=e.indexOf("//");if(-1==i)return null;var n=e.indexOf("/",i+2);if(-1==n)return e;var s=e.substr(i+2,n-i-2),r=e.substr(n+1);return t.getItemURL(s,r)},t.setStringsSource=function(t){TranslationHelper.loadFromXML(t)},t._constructing=0,t._packageInstById={},t._packageInstByName={},t.__init$=function(){e=function(){function t(){this.atlas=null,this.rect=null,this.rotated=!1,this.rect=new Rectangle}return __class(t,""),t}()},t}(),PixelHitTestData=function(){function t(){this.pixelWidth=0,this.scale=NaN,this.pixels=null}__class(t,"fairygui.utils.PixelHitTestData");var e=t.prototype;return e.load=function(t){t.getInt32(),this.pixelWidth=t.getInt32(),this.scale=1/t.readByte();var e=t.getInt32();this.pixels=__newvec(e);for(var i=0;e>i;i++){var n=t.readByte();0>n&&(n+=256),this.pixels[i]=n}},t}(),ToolSet=function(){function t(){}return __class(t,"fairygui.utils.ToolSet"),t.getFileName=function(t){var e=t.lastIndexOf("/");return-1!=e&&(t=t.substr(e+1)),e=t.lastIndexOf("\\"),-1!=e&&(t=t.substr(e+1)),e=t.lastIndexOf("."),-1!=e?t.substring(0,e):t},t.startsWith=function(t,e,i){return void 0===i&&(i=!1),t?t.length<e.length?!1:(t=t.substring(0,e.length),i?t.toLowerCase()==e.toLowerCase():t==e):!1},t.endsWith=function(t,e,i){return void 0===i&&(i=!1),t?t.length<e.length?!1:(t=t.substring(t.length-e.length),i?t.toLowerCase()==e.toLowerCase():t==e):!1},t.trim=function(t){return fairygui.utils.ToolSet.trimLeft(fairygui.utils.ToolSet.trimRight(t))},t.trimLeft=function(t){for(var e="",i=0;i<t.length&&(e=t.charAt(i)," "==e||"\n"==e||"\r"==e);i++);return t.substr(i)},t.trimRight=function(t){for(var e="",i=t.length-1;i>=0&&(e=t.charAt(i)," "==e||"\n"==e||"\r"==e);i--);return t.substring(0,i+1)},t.convertToHtmlColor=function(t,e){void 0===e&&(e=!1);var i;i=e?(t>>24&255).toString(16):"";var n=(t>>16&255).toString(16),s=(t>>8&255).toString(16),r=(255&t).toString(16);return 1==i.length&&(i="0"+i),1==n.length&&(n="0"+n),1==s.length&&(s="0"+s),1==r.length&&(r="0"+r),"#"+i+n+s+r},t.convertFromHtmlColor=function(t,e){return void 0===e&&(e=!1),t.length<1?0:("#"==t.charAt(0)&&(t=t.substr(1)),8==t.length?(parseInt(t.substr(0,2),16)<<24)+parseInt(t.substr(2),16):e?4278190080+parseInt(t,16):parseInt(t,16))},t.displayObjectToGObject=function(t){for(;null!=t&&!(t instanceof laya.display.Stage);){if(t.$owner)return t.$owner;t=t.parent}return null},t.encodeHTML=function(t){return t?t.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;").replace("'","&apos;"):""},t.parseUBB=function(t){return fairygui.utils.ToolSet.defaultUBBParser.parse(t)},t.removeUBB=function(t){return fairygui.utils.ToolSet.defaultUBBParser.parse(t,!0)},t.clamp=function(t,e,i){return e>t?t=e:t>i&&(t=i),t},t.clamp01=function(t){return t>1?t=1:0>t&&(t=0),t},t.lerp=function(t,e,i){return t+i*(e-t)},__static(t,["defaultUBBParser",function(){return this.defaultUBBParser=new UBBParser}]),t}(),UBBParser=function(){function t(){this._text=null,this._readPos=0,this._handlers=null,this.smallFontSize=12,this.normalFontSize=14,this.largeFontSize=16,this.defaultImgWidth=0,this.defaultImgHeight=0,this._handlers={},this._handlers.url=this.onTag_URL,this._handlers.img=this.onTag_IMG,this._handlers.b=this.onTag_Simple,this._handlers.i=this.onTag_Simple,this._handlers.u=this.onTag_Simple,this._handlers.sup=this.onTag_Simple,this._handlers.sub=this.onTag_Simple,this._handlers.color=this.onTag_COLOR,this._handlers.font=this.onTag_FONT,this._handlers.size=this.onTag_SIZE}__class(t,"fairygui.utils.UBBParser");var e=t.prototype;return e.onTag_URL=function(t,e,i){if(e)return"</a>";if(null!=i)return'<a href="'+i+'" target="_blank">';var n=this.getTagText();return'<a href="'+n+'" target="_blank">'},e.onTag_IMG=function(t,e,i){if(e)return null;var n=this.getTagText(!0);return n?this.defaultImgWidth?'<img src="'+n+'" width="'+this.defaultImgWidth+'" height="'+this.defaultImgHeight+'"/>':'<img src="'+n+'"/>':null},e.onTag_Simple=function(t,e,i){return e?"</"+t+">":"<"+t+">"},e.onTag_COLOR=function(t,e,i){return e?"</font>":'<font color="'+i+'">'},e.onTag_FONT=function(t,e,i){return e?"</font>":'<font face="'+i+'">'},e.onTag_SIZE=function(t,e,i){return e?"</font>":("normal"==i?i=""+this.normalFontSize:"small"==i?i=""+this.smallFontSize:"large"==i?i=""+this.largeFontSize:i.length&&"+"==i.charAt(0)?i=""+(this.smallFontSize+parseInt(i.substr(1))):i.length&&"-"==i.charAt(0)&&(i=""+(this.smallFontSize-parseInt(i.substr(1)))),'<font size="'+i+'">')},e.getTagText=function(t){void 0===t&&(t=!1);for(var e=this._readPos,i=0,n="";-1!=(i=this._text.indexOf("[",e));){if(92!=this._text.charCodeAt(i-1)){n+=this._text.substring(e,i);break}n+=this._text.substring(e,i-1),n+="[",e=i+1}return-1==i?null:(t&&(this._readPos=i),n)},e.parse=function(t,e){void 0===e&&(e=!1),this._text=t;for(var i,n,s,r,a=0,o=0,h=0,l=!1,c="";-1!=(o=this._text.indexOf("[",a));)if(o>0&&92==this._text.charCodeAt(o-1))c+=this._text.substring(a,o-1),c+="[",a=o+1;else{if(c+=this._text.substring(a,o),a=o,o=this._text.indexOf("]",a),-1==o)break;l="/"==this._text.charAt(a+1),i=this._text.substring(l?a+2:a+1,o),this._readPos=o+1,n=null,s=null,h=i.indexOf("="),-1!=h&&(n=i.substring(h+1),i=i.substring(0,h)),i=i.toLowerCase(),r=this._handlers[i],null!=r?e||(s=r.call(this,i,l,n),null!=s&&(c+=s)):c+=this._text.substring(a,this._readPos),a=this._readPos}return a<this._text.length&&(c+=this._text.substr(a)),this._text=null,c},__static(t,["inst",function(){return this.inst=new t}]),t}(),ColorMatrix=function(t){function e(){e.__super.call(this),this.reset()}__class(e,"fairygui.utils.ColorMatrix",Array);var i=e.prototype;return i.reset=function(){for(var t=0;t<e.LENGTH;t++)this[t]=e.IDENTITY_MATRIX[t]},i.invert=function(){this.multiplyMatrix([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0])},i.adjustColor=function(t,e,i,n){this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},i.adjustBrightness=function(t){t=255*this.cleanValue(t,1),this.multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0])},i.adjustContrast=function(t){t=this.cleanValue(t,1);var e=t+1,i=128*(1-e);this.multiplyMatrix([e,0,0,0,i,0,e,0,0,i,0,0,e,0,i,0,0,0,1,0])},i.adjustSaturation=function(t){t=this.cleanValue(t,1),t+=1;var e=1-t,i=.299*e,n=.587*e,s=.114*e;this.multiplyMatrix([i+t,n,s,0,0,i,n+t,s,0,0,i,n,s+t,0,0,0,0,0,1,0])},i.adjustHue=function(t){t=this.cleanValue(t,1),t*=Math.PI;var e=Math.cos(t),i=Math.sin(t);this.multiplyMatrix([.299+e*(1-.299)+i*-.299,.587+e*-.587+i*-.587,.114+e*-.114+.886*i,0,0,.299+e*-.299+.143*i,.587+e*(1-.587)+.14*i,.114+e*-.114+i*-.283,0,0,.299+e*-.299+i*-(1-.299),.587+e*-.587+.587*i,.114+.886*e+.114*i,0,0,0,0,0,1,0])},i.concat=function(t){t.length==e.LENGTH&&this.multiplyMatrix(t)},i.clone=function(){var t=new e;return t.copyMatrix(this),t},i.copyMatrix=function(t){for(var i=e.LENGTH,n=0;i>n;n++)this[n]=t[n]},i.multiplyMatrix=function(t){for(var e=[],i=0,n=0;4>n;++n){for(var s=0;5>s;++s)e[i+s]=t[i]*this[s]+t[i+1]*this[s+5]+t[i+2]*this[s+10]+t[i+3]*this[s+15]+(4==s?t[i+4]:0);i+=5}this.copyMatrix(e)},i.cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},e.create=function(t,i,n,s){var r=new e;return r.adjustColor(t,i,n,s),r},e.LUMA_R=.299,e.LUMA_G=.587,e.LUMA_B=.114,__static(e,["IDENTITY_MATRIX",function(){return this.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]},"LENGTH",function(){return this.LENGTH=e.IDENTITY_MATRIX.length}]),e}(Array),GComponent=function(t){function e(){this._sortingChildCount=0,this._opaque=!1,this._applyingController=null,this._mask=null,this._margin=null,this._trackBounds=!1,this._boundsChanged=!1,this._childrenRenderOrder=0,this._apexIndex=0,this._buildingDisplayList=!1,this._children=null,this._controllers=null,this._transitions=null,this._container=null,this._scrollPane=null,this._alignOffset=null,e.__super.call(this),this._children=[],this._controllers=[],this._transitions=[],this._margin=new Margin,this._alignOffset=new Point,this._opaque=!1}__class(e,"fairygui.GComponent",t);var i=e.prototype;return i.createDisplayObject=function(){t.prototype.createDisplayObject.call(this),this._displayObject.mouseEnabled=!0,this._displayObject.mouseThrough=!0,this._container=this._displayObject},i.dispose=function(){var e=0,i=0;for(i=this._transitions.length,e=0;i>e;++e){var n=this._transitions[e];n.dispose()}for(i=this._controllers.length,e=0;i>e;++e){var s=this._controllers[e];s.dispose()}for(null!=this.scrollPane&&this.scrollPane.dispose(),i=this._children.length,e=i-1;e>=0;--e){var r=this._children[e];r.parent=null,r.dispose()}this._boundsChanged=!1,this._mask=null,t.prototype.dispose.call(this)},i.addChild=function(t){return this.addChildAt(t,this._children.length),t},i.addChildAt=function(t,e){if(void 0===e&&(e=0),!t)throw"child is null";var i=this._children.length;if(e>=0&&i>=e){if(t.parent==this)this.setChildIndex(t,e);else{t.removeFromParent(),t.parent=this;var n=this._children.length;0!=t.sortingOrder?(this._sortingChildCount++,e=this.getInsertPosForSortingChild(t)):this._sortingChildCount>0&&e>n-this._sortingChildCount&&(e=n-this._sortingChildCount),e==n?this._children.push(t):this._children.splice(e,0,t),this.childStateChanged(t),this.setBoundsChangedFlag()}return t}return null},i.getInsertPosForSortingChild=function(t){var e=this._children.length,i=0;for(i=0;e>i;i++){var n=this._children[i];if(n!=t&&t.sortingOrder<n.sortingOrder)break}return i},i.removeChild=function(t,e){void 0===e&&(e=!1);var i=this._children.indexOf(t);return-1!=i&&this.removeChildAt(i,e),t},i.removeChildAt=function(t,e){if(void 0===e&&(e=!1),t>=0&&t<this.numChildren){var i=this._children[t];return i.parent=null,0!=i.sortingOrder&&this._sortingChildCount--,this._children.splice(t,1),i.group=null,i.inContainer&&(this._container.removeChild(i.displayObject),2==this._childrenRenderOrder&&Laya.timer.callLater(this,this.buildNativeDisplayList)),e&&i.dispose(),this.setBoundsChangedFlag(),i}return null},i.removeChildren=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=!1),(0>e||e>=this.numChildren)&&(e=this.numChildren-1);for(var n=t;e>=n;++n)this.removeChildAt(t,i)},i.getChildAt=function(t){return void 0===t&&(t=0),t>=0&&t<this.numChildren?this._children[t]:null},i.getChild=function(t){for(var e=this._children.length,i=0;e>i;++i)if(this._children[i].name==t)return this._children[i];return null},i.getVisibleChild=function(t){for(var e=this._children.length,i=0;e>i;++i){var n=this._children[i];if(n.internalVisible&&n.internalVisible2&&n.name==t)return n}return null},i.getChildInGroup=function(t,e){for(var i=this._children.length,n=0;i>n;++n){var s=this._children[n];if(s.group==e&&s.name==t)return s}return null},i.getChildById=function(t){for(var e=this._children.length,i=0;e>i;++i)if(this._children[i]._id==t)return this._children[i];return null},i.getChildIndex=function(t){return this._children.indexOf(t)},i.setChildIndex=function(t,e){void 0===e&&(e=0);var i=this._children.indexOf(t);if(-1==i)throw"Not a child of this container";if(0==t.sortingOrder){var n=this._children.length;this._sortingChildCount>0&&e>n-this._sortingChildCount-1&&(e=n-this._sortingChildCount-1),this._setChildIndex(t,i,e)}},i.setChildIndexBefore=function(t,e){var i=this._children.indexOf(t);if(-1==i)throw"Not a child of this container";if(0!=t.sortingOrder)return i;var n=this._children.length;return this._sortingChildCount>0&&e>n-this._sortingChildCount-1&&(e=n-this._sortingChildCount-1),e>i?this._setChildIndex(t,i,e-1):this._setChildIndex(t,i,e)},i._setChildIndex=function(t,e,i){var n=this._children.length;if(i>n&&(i=n),e==i)return e;if(this._children.splice(e,1),this._children.splice(i,0,t),t.inContainer){var s,r=0,a=0;if(0==this._childrenRenderOrder){for(a=0;i>a;a++)s=this._children[a],s.inContainer&&r++;r==this._container.numChildren&&r--,this._container.setChildIndex(t.displayObject,r)}else if(1==this._childrenRenderOrder){for(a=n-1;a>i;a--)s=this._children[a],s.inContainer&&r++;r==this._container.numChildren&&r--,this._container.setChildIndex(t.displayObject,r)}else Laya.timer.callLater(this,this.buildNativeDisplayList);this.setBoundsChangedFlag()}return i},i.swapChildren=function(t,e){var i=this._children.indexOf(t),n=this._children.indexOf(e);if(-1==i||-1==n)throw"Not a child of this container";this.swapChildrenAt(i,n)},i.swapChildrenAt=function(t,e){void 0===e&&(e=0);var i=this._children[t],n=this._children[e];this.setChildIndex(i,e),this.setChildIndex(n,t)},i.isAncestorOf=function(t){if(null==t)return!1;for(var e=t.parent;e;){if(e==this)return!0;e=e.parent}return!1},i.addController=function(t){this._controllers.push(t),t.parent=this,this.applyController(t)},i.getControllerAt=function(t){return this._controllers[t]},i.getController=function(t){for(var e=this._controllers.length,i=0;e>i;++i){var n=this._controllers[i];if(n.name==t)return n}return null},i.removeController=function(t){var e=this._controllers.indexOf(t);if(-1==e)throw new Error("controller not exists");t.parent=null,this._controllers.splice(e,1);for(var i=this._children.length,n=0;i>n;n++){var s=this._children[n];s.handleControllerChanged(t)}},i.childStateChanged=function(t){if(!this._buildingDisplayList){var e=this._children.length;if(t instanceof fairygui.GGroup)for(var i=0;e>i;i++){var n=this._children[i];n.group==t&&this.childStateChanged(n)}else if(t.displayObject)if(t.internalVisible&&t.displayObject!=this._displayObject.mask){if(!t.displayObject.parent){var s=0;if(0==this._childrenRenderOrder){for(i=0;e>i&&(n=this._children[i],n!=t);i++)null!=n.displayObject&&null!=n.displayObject.parent&&s++;this._container.addChildAt(t.displayObject,s)}else if(1==this._childrenRenderOrder){for(i=e-1;i>=0&&(n=this._children[i],n!=t);i--)null!=n.displayObject&&null!=n.displayObject.parent&&s++;
this._container.addChildAt(t.displayObject,s)}else this._container.addChild(t.displayObject),Laya.timer.callLater(this,this.buildNativeDisplayList)}}else t.displayObject.parent&&(this._container.removeChild(t.displayObject),2==this._childrenRenderOrder&&Laya.timer.callLater(this,this.buildNativeDisplayList))}},i.buildNativeDisplayList=function(){var t=this._children.length;if(0!=t){var e,i=0;switch(this._childrenRenderOrder){case 0:for(i=0;t>i;i++)e=this._children[i],e&&null!=e.displayObject&&e.internalVisible&&this._container.addChild(e.displayObject);break;case 1:for(i=t-1;i>=0;i--)e=this._children[i],e&&null!=e.displayObject&&e.internalVisible&&this._container.addChild(e.displayObject);break;case 2:for(i=0;i<this._apexIndex;i++)e=this._children[i],e&&null!=e.displayObject&&e.internalVisible&&this._container.addChild(e.displayObject);for(i=t-1;i>=this._apexIndex;i--)e=this._children[i],e&&null!=e.displayObject&&e.internalVisible&&this._container.addChild(e.displayObject)}}},i.applyController=function(t){this._applyingController=t;for(var e,i=this._children.length,n=0;i>n;n++)e=this._children[n],e.handleControllerChanged(t);this._applyingController=null,t.runActions()},i.applyAllControllers=function(){for(var t=this._controllers.length,e=0;t>e;++e)this.applyController(this._controllers[e])},i.adjustRadioGroupDepth=function(t,e){var i,n=this._children.length,s=NaN,r=-1,a=-1;for(s=0;n>s;s++)i=this._children[s],i==t?r=s:i instanceof fairygui.GButton&&i.relatedController==e&&s>a&&(a=s);a>r&&(null!=this._applyingController&&this._children[a].handleControllerChanged(this._applyingController),this.swapChildrenAt(r,a))},i.getTransitionAt=function(t){return this._transitions[t]},i.getTransition=function(t){for(var e=this._transitions.length,i=0;e>i;++i){var n=this._transitions[i];if(n.name==t)return n}return null},i.isChildInView=function(t){return null!=this._displayObject.scrollRect?t.x+t.width>=0&&t.x<=this.width&&t.y+t.height>=0&&t.y<=this.height:null!=this._scrollPane?this._scrollPane.isChildInView(t):!0},i.getFirstChildInView=function(){for(var t=this._children.length,e=0;t>e;++e){var i=this._children[e];if(this.isChildInView(i))return e}return-1},i.setMask=function(t,e){return this._mask&&this._mask!=t&&"destination-out"==this._mask.blendMode&&(this._mask.blendMode=null),this._mask=t,this._mask?(this._mask.hitArea&&(this._displayObject.hitArea=new ChildHitArea(this._mask,e),this._displayObject.mouseThrough=!1,this._displayObject.hitTestPrior=!0),void(e?(this._displayObject.mask=null,this._displayObject.cacheAs="bitmap",this._mask.blendMode="destination-out"):this._displayObject.mask=this._mask)):(this._displayObject.mask=null,void(this._displayObject.hitArea instanceof fairygui.utils.ChildHitArea&&(this._displayObject.hitArea=null)))},i.updateHitArea=function(){if(this._displayObject.hitArea instanceof fairygui.utils.PixelHitTest){var t=this._displayObject.hitArea;0!=this.sourceWidth&&(t.scaleX=this.width/this.sourceWidth),0!=this.sourceHeight&&(t.scaleY=this.height/this.sourceHeight)}else this._displayObject.hitArea instanceof laya.maths.Rectangle&&this._displayObject.hitArea.setTo(0,0,this.width,this.height)},i.updateMask=function(){var t=this._displayObject.scrollRect;null==t&&(t=new Rectangle),t.x=this._margin.left,t.y=this._margin.top,t.width=this.width-this._margin.right,t.height=this.height-this._margin.bottom,this._displayObject.scrollRect=t},i.setupScroll=function(t){this._displayObject==this._container&&(this._container=new Sprite,this._displayObject.addChild(this._container)),this._scrollPane=new ScrollPane(this),this._scrollPane.setup(t)},i.setupOverflow=function(t){1==t?(this._displayObject==this._container&&(this._container=new Sprite,this._displayObject.addChild(this._container)),this.updateMask(),this._container.pos(this._margin.left,this._margin.top)):0==this._margin.left&&0==this._margin.top||(this._displayObject==this._container&&(this._container=new Sprite,this._displayObject.addChild(this._container)),this._container.pos(this._margin.left,this._margin.top))},i.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),this._scrollPane?this._scrollPane.onOwnerSizeChanged():null!=this._displayObject.scrollRect&&this.updateMask(),null!=this._displayObject.hitArea&&this.updateHitArea()},i.handleGrayedChanged=function(){var t=this.getController("grayed");if(null!=t)return void(t.selectedIndex=this.grayed?1:0);for(var e=this.grayed,i=this._children.length,n=0;i>n;++n)this._children[n].grayed=e},i.handleControllerChanged=function(e){t.prototype.handleControllerChanged.call(this,e),null!=this._scrollPane&&this._scrollPane.handleControllerChanged(e)},i.setBoundsChangedFlag=function(){(this._scrollPane||this._trackBounds)&&(this._boundsChanged||(this._boundsChanged=!0,Laya.timer.callLater(this,this.__render)))},i.__render=function(){if(this._boundsChanged){var t,e=0,i=this._children.length;for(e=0;i>e;e++)t=this._children[e],t.ensureSizeCorrect();this.updateBounds()}},i.ensureBoundsCorrect=function(){var t,e=0,i=this._children.length;for(e=0;i>e;e++)t=this._children[e],t.ensureSizeCorrect();this._boundsChanged&&this.updateBounds()},i.updateBounds=function(){var t=0,e=0,i=0,n=0,s=this._children.length;if(s>0){t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY;var r=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=0,h=0;for(h=0;s>h;h++){var l=this._children[h];o=l.x,t>o&&(t=o),o=l.y,e>o&&(e=o),o=l.x+l.actualWidth,o>r&&(r=o),o=l.y+l.actualHeight,o>a&&(a=o)}i=r-t,n=a-e}this.setBounds(t,e,i,n)},i.setBounds=function(t,e,i,n){this._boundsChanged=!1,this._scrollPane&&this._scrollPane.setContentSize(Math.round(t+i),Math.round(e+n))},i.getSnappingPosition=function(t,e,i){i||(i=new Point);var n=this._children.length;if(0==n)return i.x=0,i.y=0,i;this.ensureBoundsCorrect();var s=null,r=null,a=0;if(0!=e){for(;n>a;a++)if(s=this._children[a],e<s.y){if(0==a){e=0;break}r=this._children[a-1],e=e<r.y+r.actualHeight/2?r.y:s.y;break}a==n&&(e=s.y)}if(0!=t){for(a>0&&a--;n>a;a++)if(s=this._children[a],t<s.x){if(0==a){t=0;break}r=this._children[a-1],t=t<r.x+r.actualWidth/2?r.x:s.x;break}a==n&&(t=s.x)}return i.x=t,i.y=e,i},i.childSortingOrderChanged=function(t,e,i){if(void 0===i&&(i=0),0==i)this._sortingChildCount--,this.setChildIndex(t,this._children.length);else{0==e&&this._sortingChildCount++;var n=this._children.indexOf(t),s=this.getInsertPosForSortingChild(t);s>n?this._setChildIndex(t,n,s-1):this._setChildIndex(t,n,s)}},i.constructFromResource=function(){this.constructFromResource2(null,0)},i.constructFromResource2=function(t,e){this.packageItem.decoded||(this.packageItem.decoded=!0,TranslationHelper.translateComponent(this.packageItem));var i=0,n=0,s=0,r=0,a=NaN,o=NaN,h=0,l=0,c=this.packageItem.rawData;c.seek(0,0),this._underConstruct=!0,this.sourceWidth=c.getInt32(),this.sourceHeight=c.getInt32(),this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this.setSize(this.sourceWidth,this.sourceHeight),c.readBool()&&(this.minWidth=c.getInt32(),this.maxWidth=c.getInt32(),this.minHeight=c.getInt32(),this.maxHeight=c.getInt32()),c.readBool()&&(a=c.getFloat32(),o=c.getFloat32(),this.internalSetPivot(a,o,c.readBool())),c.readBool()&&(this._margin.top=c.getInt32(),this._margin.bottom=c.getInt32(),this._margin.left=c.getInt32(),this._margin.right=c.getInt32());var u=c.readByte();if(2==u){var _=c.pos;c.seek(0,7),this.setupScroll(c),c.pos=_}else this.setupOverflow(u);c.readBool()&&c.skip(8),this._buildingDisplayList=!0,c.seek(0,1);var d=c.getInt16();for(i=0;d>i;i++){r=c.getInt16(),r+=c.pos;var f=new Controller;this._controllers.push(f),f.parent=this,f.setup(c),c.pos=r}c.seek(0,2);var p,g=c.getInt16();for(i=0;g>i;i++){if(n=c.getInt16(),s=c.pos,null!=t)p=t[e+i];else{c.seek(s,0);var m=c.readByte(),v=c.readS(),y=c.readS(),w=null;if(null!=v){var b;b=null!=y?UIPackage.getById(y):this.packageItem.owner,w=null!=b?b.getItemById(v):null}null!=w?(p=UIObjectFactory.newObject(w),p.packageItem=w,p.constructFromResource()):p=UIObjectFactory.newObject2(m)}p._underConstruct=!0,p.setup_beforeAdd(c,s),p.parent=this,this._children.push(p),c.pos=s+n}for(c.seek(0,3),this.relations.setup(c,!0),c.seek(0,2),c.skip(2),i=0;g>i;i++)r=c.getInt16(),r+=c.pos,c.seek(c.pos,3),this._children[i].relations.setup(c,!1),c.pos=r;for(c.seek(0,2),c.skip(2),i=0;g>i;i++)r=c.getInt16(),r+=c.pos,p=this._children[i],p.setup_afterAdd(c,c.pos),p._underConstruct=!1,c.pos=r;c.seek(0,4),c.skip(2),this.opaque=c.readBool();var S=c.getInt16();-1!=S&&this.setMask(this.getChildAt(S).displayObject,c.readBool());var x=c.readS();null!=x&&(w=this.packageItem.owner.getItemById(x),null!=w&&null!=w.pixelHitTestData&&(h=c.getInt32(),l=c.getInt32(),this._displayObject.hitArea=new PixelHitTest(w.pixelHitTestData,h,l),this._displayObject.mouseThrough=!1,this._displayObject.hitTestPrior=!0)),c.seek(0,5);var C=c.getInt16();for(i=0;C>i;i++){r=c.getInt16(),r+=c.pos;var T=new Transition(this);T.setup(c),this._transitions.push(T),c.pos=r}this._transitions.length>0&&(this.displayObject.on("display",this,this.___added),this.displayObject.on("undisplay",this,this.___removed)),this.applyAllControllers(),this._buildingDisplayList=!1,this._underConstruct=!1,this.buildNativeDisplayList(),this.setBoundsChangedFlag(),9!=this.packageItem.objectType&&this.constructExtension(c),this.constructFromXML(null)},i.constructExtension=function(t){},i.constructFromXML=function(t){},i.setup_afterAdd=function(e,i){t.prototype.setup_afterAdd.call(this,e,i),e.seek(i,4);var n=e.getInt16();-1!=n&&null!=this._scrollPane&&(this._scrollPane.pageController=this._parent.getControllerAt(n));for(var s=e.getInt16(),r=0;s>r;r++){var a=this.getController(e.readS()),o=e.readS();a&&(a.selectedPageId=o)}},i.___added=function(){for(var t=this._transitions.length,e=0;t>e;++e)this._transitions[e].onOwnerAddedToStage()},i.___removed=function(){for(var t=this._transitions.length,e=0;t>e;++e)this._transitions[e].onOwnerRemovedFromStage()},__getset(0,i,"numChildren",function(){return this._children.length}),__getset(0,i,"displayListContainer",function(){return this._container}),__getset(0,i,"childrenRenderOrder",function(){return this._childrenRenderOrder},function(t){this._childrenRenderOrder!=t&&(this._childrenRenderOrder=t,this.buildNativeDisplayList())}),__getset(0,i,"opaque",function(){return this._opaque},function(t){this._opaque!=t&&(this._opaque=t,this._opaque?(null==this._displayObject.hitArea&&(this._displayObject.hitArea=new Rectangle),this._displayObject.hitArea instanceof laya.maths.Rectangle&&this._displayObject.hitArea.setTo(0,0,this.width,this.height),this._displayObject.mouseThrough=!1):(this._displayObject.hitArea instanceof laya.maths.Rectangle&&(this._displayObject.hitArea=null),this._displayObject.mouseThrough=!0))}),__getset(0,i,"controllers",function(){return this._controllers}),__getset(0,i,"scrollPane",function(){return this._scrollPane}),__getset(0,i,"margin",function(){return this._margin},function(t){this._margin.copy(t),null!=this._displayObject.scrollRect&&this._container.pos(this._margin.left+this._alignOffset.x,this._margin.top+this._alignOffset.y),this.handleSizeChanged()}),__getset(0,i,"apexIndex",function(){return this._apexIndex},function(t){this._apexIndex!=t&&(this._apexIndex=t,2==this._childrenRenderOrder&&this.buildNativeDisplayList())}),__getset(0,i,"mask",function(){return this._mask},function(t){this.setMask(t,!1)}),__getset(0,i,"viewHeight",function(){return null!=this._scrollPane?this._scrollPane.viewHeight:this.height-this._margin.top-this._margin.bottom},function(t){null!=this._scrollPane?this._scrollPane.viewHeight=t:this.height=t+this._margin.top+this._margin.bottom}),__getset(0,i,"baseUserData",function(){var t=this.packageItem.rawData;return t.seek(0,4),t.readS()}),__getset(0,i,"viewWidth",function(){return null!=this._scrollPane?this._scrollPane.viewWidth:this.width-this._margin.left-this._margin.right},function(t){null!=this._scrollPane?this._scrollPane.viewWidth=t:this.width=t+this._margin.left+this._margin.right}),e}(GObject),GMovieClip=function(t){function e(){this._movieClip=null,e.__super.call(this)}__class(e,"fairygui.GMovieClip",t);var i=e.prototype;return Laya.imps(i,{"fairygui.gears.IAnimationGear":!0,"fairygui.gears.IColorGear":!0}),i.createDisplayObject=function(){this._displayObject=this._movieClip=new MovieClip$1,this._movieClip.mouseEnabled=!1,this._displayObject.$owner=this},i.rewind=function(){this._movieClip.rewind()},i.syncStatus=function(t){this._movieClip.syncStatus(t._movieClip)},i.advance=function(t){this._movieClip.advance(t)},i.setPlaySettings=function(t,e,i,n,s){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=0),void 0===n&&(n=-1),this._movieClip.setPlaySettings(t,e,i,n,s)},i.constructFromResource=function(){this.sourceWidth=this.packageItem.width,this.sourceHeight=this.packageItem.height,this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this.setSize(this.sourceWidth,this.sourceHeight),this.packageItem.load(),this._movieClip.interval=this.packageItem.interval,this._movieClip.swing=this.packageItem.swing,this._movieClip.repeatDelay=this.packageItem.repeatDelay,this._movieClip.frames=this.packageItem.frames},i.setup_beforeAdd=function(e,i){t.prototype.setup_beforeAdd.call(this,e,i),e.seek(i,5),e.readBool()&&(this.color=e.readColorS()),e.readByte(),this._movieClip.frame=e.getInt32(),this._movieClip.playing=e.readBool()},__getset(0,i,"color",function(){return this._movieClip.color},function(t){this._movieClip.color!=t&&(this._movieClip.color=t,this.updateGear(4))}),__getset(0,i,"playing",function(){return this._movieClip.playing},function(t){this._movieClip.playing!=t&&(this._movieClip.playing=t,this.updateGear(5))}),__getset(0,i,"timeScale",function(){return this._movieClip.timeScale},function(t){this._movieClip.timeScale=t}),__getset(0,i,"frame",function(){return this._movieClip.frame},function(t){this._movieClip.frame!=t&&(this._movieClip.frame=t,this.updateGear(5))}),e}(GObject),GLoader=function(t){function e(){this._url=null,this._align=null,this._valign=null,this._autoSize=!1,this._fill=0,this._shrinkOnly=!1,this._showErrorSign=!1,this._contentItem=null,this._contentSourceWidth=0,this._contentSourceHeight=0,this._contentWidth=0,this._contentHeight=0,this._content=null,this._errorSign=null,this._content2=null,this._updatingLayout=!1,e.__super.call(this),this._url="",this._fill=0,this._align="left",this._valign="top",this._showErrorSign=!0}__class(e,"fairygui.GLoader",t);var i=e.prototype;return Laya.imps(i,{"fairygui.gears.IAnimationGear":!0,"fairygui.gears.IColorGear":!0}),i.createDisplayObject=function(){t.prototype.createDisplayObject.call(this),this._content=new MovieClip$1,this._displayObject.addChild(this._content),this._displayObject.mouseEnabled=!0},i.dispose=function(){null==this._contentItem&&null!=this._content.texture&&this.freeExternal(this._content.texture),null!=this._content2&&this._content2.dispose(),t.prototype.dispose.call(this)},i.advance=function(t){this._content.advance(t)},i.loadContent=function(){this.clearContent(),this._url&&(ToolSet.startsWith(this._url,"ui://")?this.loadFromPackage(this._url):this.loadExternal())},i.loadFromPackage=function(t){if(this._contentItem=UIPackage.getItemByURL(t),null!=this._contentItem)if(this._contentItem.load(),this._autoSize&&this.setSize(this._contentItem.width,this._contentItem.height),0==this._contentItem.type)null==this._contentItem.texture?this.setErrorState():(this._content.texture=this._contentItem.texture,this._content.scale9Grid=this._contentItem.scale9Grid,this._content.scaleByTile=this._contentItem.scaleByTile,this._content.tileGridIndice=this._contentItem.tileGridIndice,this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this.updateLayout());else if(1==this._contentItem.type)this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this._content.interval=this._contentItem.interval,this._content.swing=this._contentItem.swing,this._content.repeatDelay=this._contentItem.repeatDelay,this._content.frames=this._contentItem.frames,this.updateLayout();else if(3==this._contentItem.type){var e=UIPackage.createObjectFromURL(t);e?e instanceof fairygui.GComponent?(this._content2=e.asCom,this._displayObject.addChild(this._content2.displayObject),this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this.updateLayout()):(e.dispose(),this.setErrorState()):this.setErrorState()}else this.setErrorState();else this.setErrorState()},i.loadExternal=function(){AssetProxy.inst.load(this._url,Handler.create(this,this.__getResCompleted),null,"image")},i.freeExternal=function(t){},i.onExternalLoadSuccess=function(t){this._content.texture=t,this._content.scale9Grid=null,this._content.scaleByTile=!1,this._contentSourceWidth=t.width,this._contentSourceHeight=t.height,this.updateLayout()},i.onExternalLoadFailed=function(){this.setErrorState()},i.__getResCompleted=function(t){null!=t?this.onExternalLoadSuccess(t):this.onExternalLoadFailed()},i.setErrorState=function(){this._showErrorSign&&(null==this._errorSign&&null!=UIConfig$1.loaderErrorSign&&(this._errorSign=fairygui.GLoader._errorSignPool.getObject(UIConfig$1.loaderErrorSign)),null!=this._errorSign&&(this._errorSign.setSize(this.width,this.height),this._displayObject.addChild(this._errorSign.displayObject)))},i.clearErrorState=function(){null!=this._errorSign&&(this._displayObject.removeChild(this._errorSign.displayObject),fairygui.GLoader._errorSignPool.returnObject(this._errorSign),this._errorSign=null)},i.updateLayout=function(){if(null==this._content2&&null==this._content.texture&&null==this._content.frames)return void(this._autoSize&&(this._updatingLayout=!0,this.setSize(50,30),this._updatingLayout=!1));if(this._contentWidth=this._contentSourceWidth,this._contentHeight=this._contentSourceHeight,this._autoSize&&(this._updatingLayout=!0,0==this._contentWidth&&(this._contentWidth=50),0==this._contentHeight&&(this._contentHeight=30),this.setSize(this._contentWidth,this._contentHeight),this._updatingLayout=!1,this._contentWidth==this._width&&this._contentHeight==this._height))return void(null!=this._content2?(this._content2.setXY(0,0),this._content2.setScale(1,1)):this._content.pos(0,0));var t=1,e=1;0!=this._fill&&(t=this.width/this._contentSourceWidth,e=this.height/this._contentSourceHeight,1==t&&1==e||(2==this._fill?t=e:3==this._fill?e=t:1==this._fill?t>e?t=e:e=t:5==this._fill&&(t>e?e=t:t=e),this._shrinkOnly&&(t>1&&(t=1),e>1&&(e=1)),this._contentWidth=this._contentSourceWidth*t,this._contentHeight=this._contentSourceHeight*e)),null!=this._content2?this._content2.setScale(t,e):this._content.size(this._contentWidth,this._contentHeight);var i=NaN,n=NaN;i="center"==this._align?Math.floor((this.width-this._contentWidth)/2):"right"==this._align?this.width-this._contentWidth:0,n="middle"==this._valign?Math.floor((this.height-this._contentHeight)/2):"bottom"==this._valign?this.height-this._contentHeight:0,null!=this._content2?this._content2.setXY(i,n):this._content.pos(i,n)},i.clearContent=function(){this.clearErrorState(),null==this._contentItem&&null!=this._content.texture&&this.freeExternal(this._content.texture),this._content.texture=null,this._content.frames=null,null!=this._content2&&(this._content2.dispose(),this._content2=null),this._contentItem=null},i.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),this._updatingLayout||this.updateLayout()},i.setup_beforeAdd=function(e,i){t.prototype.setup_beforeAdd.call(this,e,i),e.seek(i,5);var n=0;this._url=e.readS(),n=e.readByte(),this._align=0==n?"left":1==n?"center":"right",n=e.readByte(),this._valign=0==n?"top":1==n?"middle":"bottom",this._fill=e.readByte(),this._shrinkOnly=e.readBool(),this._autoSize=e.readBool(),this._showErrorSign=e.readBool(),this._content.playing=e.readBool(),this._content.frame=e.getInt32(),e.readBool()&&(this.color=e.readColorS());var s=e.readByte();0!=s&&e.skip(6),this._url&&this.loadContent()},__getset(0,i,"frame",function(){return this._content.frame},function(t){this._content.frame!=t&&(this._content.frame=t,this.updateGear(5))}),__getset(0,i,"url",function(){return this._url},function(t){this._url!=t&&(this._url=t,this.loadContent(),this.updateGear(7))}),__getset(0,i,"align",function(){return this._align},function(t){this._align!=t&&(this._align=t,this.updateLayout())}),__getset(0,i,"fill",function(){return this._fill},function(t){this._fill!=t&&(this._fill=t,this.updateLayout())}),__getset(0,i,"verticalAlign",function(){return this._valign},function(t){this._valign!=t&&(this._valign=t,this.updateLayout())}),__getset(0,i,"icon",function(){return this._url},function(t){this.url=t}),__getset(0,i,"content",function(){return this._content}),__getset(0,i,"shrinkOnly",function(){return this._shrinkOnly},function(t){this._shrinkOnly!=t&&(this._shrinkOnly=t,this.updateLayout())}),__getset(0,i,"showErrorSign",function(){return this._showErrorSign},function(t){this._showErrorSign=t}),__getset(0,i,"autoSize",function(){return this._autoSize},function(t){this._autoSize!=t&&(this._autoSize=t,this.updateLayout())}),__getset(0,i,"playing",function(){return this._content.playing},function(t){this._content.playing!=t&&(this._content.playing=t,this.updateGear(5))}),__getset(0,i,"timeScale",function(){return this._content.timeScale},function(t){this._content.timeScale=t}),__getset(0,i,"color",function(){return this._content.color},function(t){this._content.color!=t&&(this._content.color=t,this.updateGear(4))}),__getset(0,i,"component",function(){return this._content2}),__static(e,["_errorSignPool",function(){return this._errorSignPool=new GObjectPool}]),e}(GObject),GTextField=function(t){function e(){this._gearColor=null,this._templateVars=null,this._text=null,e.__super.call(this),this._gearColor=new GearColor(this)}__class(e,"fairygui.GTextField",t);var i=e.prototype;return Laya.imps(i,{"fairygui.gears.IColorGear":!0}),i.parseTemplate=function(t){for(var e,i,n=0,s=0,r=0,a="";-1!=(s=t.indexOf("{",n));)if(s>0&&92==t.charCodeAt(s-1))a+=t.substring(n,s-1),a+="{",n=s+1;else{if(a+=t.substring(n,s),n=s,s=t.indexOf("}",n),-1==s)break;s!=n+1?(e=t.substring(n+1,s),r=e.indexOf("="),-1!=r?(i=this._templateVars[e.substring(0,r)],a+=null==i?e.substring(r+1):i):(i=this._templateVars[e],null!=i&&(a+=i)),n=s+1):(a+=t.substr(n,2),n=s+1)}return n<t.length&&(a+=t.substr(n)),a},i.setVar=function(t,e){return this._templateVars||(this._templateVars={}),this._templateVars[t]=e,this},i.flushVars=function(){this.text=this._text},i.handleControllerChanged=function(e){t.prototype.handleControllerChanged.call(this,e),this._gearColor.controller==e&&this._gearColor.apply()},i.setup_beforeAdd=function(e,i){t.prototype.setup_beforeAdd.call(this,e,i),e.seek(i,5);var n=0;this.font=e.readS(),this.fontSize=e.getInt16(),this.color=e.readColorS(),n=e.readByte(),this.align=0==n?"left":1==n?"center":"right",n=e.readByte(),this.valign=0==n?"top":1==n?"middle":"bottom",this.leading=e.getInt16(),this.letterSpacing=e.getInt16(),this.ubbEnabled=e.readBool(),this.autoSize=e.readByte(),this.underline=e.readBool(),this.italic=e.readBool(),this.bold=e.readBool(),this.singleLine=e.readBool(),e.readBool()&&(this.strokeColor=e.readColorS(),this.stroke=e.getFloat32()+1),e.readBool()&&e.skip(12),e.readBool()&&(this._templateVars={})},i.setup_afterAdd=function(e,i){t.prototype.setup_afterAdd.call(this,e,i),e.seek(i,6);var n=e.readS();null!=n&&(this.text=n)},__getset(0,i,"color",function(){return null},function(t){}),__getset(0,i,"font",function(){return null},function(t){}),__getset(0,i,"templateVars",function(){return this._templateVars},function(t){null==this._templateVars&&null==t||(this._templateVars=t,this.flushVars())}),__getset(0,i,"leading",function(){return 0},function(t){}),__getset(0,i,"fontSize",function(){return 0},function(t){}),__getset(0,i,"bold",function(){return!1},function(t){}),__getset(0,i,"letterSpacing",function(){return 0},function(t){}),__getset(0,i,"align",function(){return null},function(t){}),__getset(0,i,"valign",function(){return null},function(t){}),__getset(0,i,"italic",function(){return!1},function(t){}),__getset(0,i,"underline",function(){return!1},function(t){}),__getset(0,i,"singleLine",function(){return!1},function(t){}),__getset(0,i,"stroke",function(){return 0},function(t){}),__getset(0,i,"strokeColor",function(){return null},function(t){}),__getset(0,i,"ubbEnabled",function(){return!1},function(t){}),__getset(0,i,"autoSize",function(){return 0},function(t){}),__getset(0,i,"textWidth",function(){return 0}),e}(GObject),DataEvent=function(t){function e(t,i,n,s){this.objData=null,void 0===n&&(n=!1),void 0===s&&(s=!1),e.__super.call(this),this.objData=i}__class(e,"com.emugif.core.events.DataEvent",t);var i=e.prototype;return __getset(0,i,"data",function(){return this.objData},function(t){this.objData=t}),e}(Event),GameEvent=function(t){function e(){this.isTimeout=!1,e.__super.call(this)}return __class(e,"com.emugif.camera.service.game.GameEvent",t),e.CONNECT="connect",e.DISCONNECT="disconnect",e.SHOWDISABLED="showdisabled",e.UPDATECACHE="updatecache",e.ERROR="error",e.GETBONUS="getbonus",e}(Event),GameControl=function(t){function e(t){this.connection=null,this.strURL=null,this.objVideo=null,this.intMsgId=0,this.ARR_NO_STATUS=["appointment_r"],this.needDown=!1,this.needExit=!1,this.appointmentCount=0,this.giveGold=0,this.isGame=0,this.isOrder=0,this.isResult=!1,this.memberId=0,this.member_count=0,this.players=null,this.seats=null,this.remainSecond=0,this.remainGold=0,this.protection_seconds=0,this.room_status=0,this.vmc_no="",this.type=0,this.dollLogId=0,this.position=0,this.getPoints=0,this.lastOptTime=0,this.onVisibilityChangeCallback=null,this.onAppHiddenCallback=null,this.onAppShowCallback=null,e.__super.call(this),this.strURL=t,this.reset(),this.connection=new Socket,this.objVideo=new GameVideo}__class(e,"com.emugif.camera.service.game.GameControl",t);var i=e.prototype;return i.enter=function(t){if(Laya.timer.clear(this,this.ping),t){this.vmc_no=t.machineSn,this.type=t.type,this.objVideo.show(this.vmc_no),this.objVideo.rotate(4==this.type),this.connection.on("open",this,this.onConnected),this.connection.on("close",this,this.onConnectError),this.connection.on("message",this,this.onMessage),this.connection.connectByUrl(this.strURL),Laya.stage.on("resize",this,this.onStageResize);var e=this;this.onVisibilityChangeCallback||(this.onVisibilityChangeCallback=function(){e.onVisibilityChange(Browser.document.hidden)}),this.onAppHiddenCallback||(this.onAppHiddenCallback=function(){e.onVisibilityChange(!0)}),this.onAppShowCallback||(this.onAppShowCallback=function(){e.onVisibilityChange(!1)}),Browser.onGameWebView?(Browser.document.addEventListener("appDidEnterBackground",this.onAppHiddenCallback),Browser.document.addEventListener("appWillEnterForeground",this.onAppShowCallback)):Browser.document.addEventListener("visibilitychange",this.onVisibilityChangeCallback),App.events.add("appDidEnterBackground",this,this.onAppHiddenCallback),App.events.add("appWillEnterForeground",this,this.onAppShowCallback)}},i.leave=function(){this.objVideo.close(),Laya.timer.clear(this,this.ping),this.reset(),this.connection.offAll(),this.connection.cleanSocket(),Laya.stage.off("resize",this,this.onStageResize),Browser.onGameWebView?(Browser.document.removeEventListener("appDidEnterBackground",this.onAppHiddenCallback),Browser.document.removeEventListener("appWillEnterForeground",this.onAppShowCallback)):Browser.document.removeEventListener("visibilitychange",this.onVisibilityChangeCallback),App.events.remove("appDidEnterBackground",this,this.onAppHiddenCallback),App.events.remove("appWillEnterForeground",this,this.onAppShowCallback)},i.ping=function(){this.call("hb")},i.start=function(){this.lastOptTime=(new Date).getTime(),this.call("start")},i.appointment=function(){this.call("appointment")},i.cancelAppointment=function(){this.call("c_appointment")},i.pushCoin=function(t){var e={};e.coin=t,this.call("push_coin",e),SoundManager.playSound("game/libs/sound/voice_back.mp3");for(var i=1;t>i;i++)Laya.timer.once(300*i,SoundManager,SoundManager.playSound,["game/libs/sound/voice_back.mp3"],!1)},i.pushCoinStop=function(t){void 0===t&&(t=!1),this.needExit=t,App.dialog.showModalWait("正在下机"),this.call("push_coin_stop"),Laya.timer.once(4e3,this,this.onPushCoinStoped,[!0])},i.onPushCoinStoped=function(t){void 0===t&&(t=!1),t&&App.dialog.tip("操作超时"),Laya.timer.clear(this,this.onPushCoinStoped),App.dialog.closeModalWait(),this.needExit&&(this.needExit=!1,this.event("arcade_down_r"))},i.wiper=function(){this.call("wiper_start")},i.operate=function(t){var e={};e.position=t,this.call("operate",e)},i.settlement=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i={};i.position=this.position,i.member_id=this.memberId,this.needDown=t,this.needExit=e,this.isResult?(App.dialog.showModalWait("正在结算"),this.call("settlement",i)):this.needDown&&(this.needDown=!1,App.dialog.showModalWait("正在下机"),this.arcadeDown(this.needExit))},i.arcadeCoin=function(t){void 0===t&&(t=1);var e={};e.position=this.position,e.multiple=t,this.call("arcade_coin",e)},i.arcadeMove=function(t){var e={};e.position=this.position,e.direction=t,this.call("single_move",e)},i.arcadeMoveStart=function(t){var e={};e.position=this.position,e.direction=t,this.call("arcade_move",e)},i.arcadeMoveStop=function(t){var e={};e.position=this.position,e.direction=t,this.call("arcade_stop",e)},i.fireDouble=function(){var t={};t.position=this.position,this.call("fire_double",t)},i.fire=function(){var t={};t.position=this.position,this.call("fire_single",t)},i.fireStart=function(){var t={};t.position=this.position,this.call("fire",t)},i.fireStop=function(){var t={};t.position=this.position,this.call("fire_stop",t)},i.arcadeDown=function(t){void 0===t&&(t=!1);var e={};e.position=this.position,e.member_id=this.memberId,e.is_leave=t?1:0,this.call("arcade_down",e)},i.dollMove=function(t){var e={};e.direction=t,this.call("move_direction",e)},i.grab=function(){this.call("grab")},i.reset=function(){this.intMsgId=0,this.vmc_no="",this.type=0,this.isGame=0,this.isOrder=0,this.position=-1,this.memberId=-1,this.member_count=0,this.getPoints=0,this.players=[],this.seats=[]},i.call=function(t,e){if(Laya.timer.clear(this,this.ping),!this.vmc_no)return void App.dialog.tip("不在游戏房间中");if(!this.connection.connected)return App.dialog.tip("连接已断开"),void this.connection.connectByUrl(this.strURL);this.intMsgId++,e=e||{},e.cmd=t,e.token=App.config.token,e.vmc_no=this.vmc_no,e.type=this.type,console.log(this.intMsgId,t,e);var i=JSON.stringify(e);this.connection.send(i),this.connection.flush(),Laya.timer.once(3e4,this,this.ping)},i.onConnected=function(t){Laya.timer.clear(this,this.ping),console.log("connected"),this.event("connect"),this.vmc_no&&this.type&&this.call("conn")},i.onConnectError=function(t){Laya.timer.clear(this,this.ping),console.log("disconnected"),this.event("disconnect"),this.vmc_no&&this.type&&this.connection.connectByUrl(this.strURL)},i.onMessage=function(t){try{t=JSON.parse(t),console.log(t)}catch(e){console.log(e.message,t)}t&&(void 0==t.status||200==t.status||this.ARR_NO_STATUS.indexOf(t.cmd)>-1?this.parseCommand(t.cmd,t):t.msg&&(App.dialog.tip(t.msg,0,1500,!0),101==t.status&&"operate_r"==t.cmd&&App.game.arcadeDown()))},i.parseCommand=function(t,e){if("conn_r"==t){if(App.player.update(),this.appointmentCount=e.appointmentCount,this.giveGold=e.giveGold,this.isGame=e.isGame,this.memberId=e.memberId,this.member_count=e.member_count,this.players=e.players,this.remainSecond=e.remainSecond,this.room_status=e.room_status,this.lastOptTime=(new Date).getTime(),this.isResult=!1,e.seats){this.seats=e.seats,this.position=-1;for(var i=0;i<this.seats.length;i++)if(this.seats[i].memberId==this.memberId){this.position=this.seats[i].position;break}}}else if("start_r"==t)App.player.update(),this.isGame=1,this.isOrder=0,this.memberId=e.memberId,this.member_count=e.member_count,this.remainGold=e.remainGold,this.lastOptTime=(new Date).getTime();else if("grab_r"==t)this.isOrder=0,
this.member_count=e.member_count,this.protection_seconds=e.protection_seconds,1==this.type&&e.player_id==this.memberId?(this.isGame=0,this.event("getbonus",e)):3==this.type&&(this.event("getbonus",this.getPoints),this.getPoints=0);else if("other_grab"==t)this.member_count=e.member_count;else if("into_room"==t)this.member_count=e.member_count,this.players=e.players;else if("leave_room"==t)this.member_count=e.member_count,this.players=e.players;else if("status"==t){if(this.room_status=e.gameStatus,this.member_count=e.member_count,4==this.type&&e.player_id==this.memberId?1==e.isDown?this.isGame=0:this.isGame=1:3==this.type?(e.player_id==this.memberId?this.isGame=1:this.isGame=0,this.onPushCoinStoped()):1==this.type&&e.player_id==this.memberId&&(1==e.isDown?this.isGame=0:this.isGame=1),e.seats)for(this.seats=e.seats,this.position=-1,i=0;i<this.seats.length;i++)this.seats[i].memberId==this.memberId&&(this.position=this.seats[i].position);if(1==e.isDown)for(i=0;i<this.seats.length;i++)this.seats[i].memberId==e.player_id&&(this.seats.splice(i,1),i--)}else if("appointment_change"==t)this.appointmentCount=e.appointmentCount;else if("appointment_r"==t)e.status>0&&1==e.type?this.isOrder=1:2==e.type&&(this.isOrder=0);else if("appointment_play"==t)this.isOrder=0;else if("push_coin_r"==t)this.memberId=e.memberId,this.lastOptTime=(new Date).getTime(),App.player.update();else if("push_coin_result_r"==t)App.player.memberId==e.memberId&&(this.getPoints=e.points,this.lastOptTime=(new Date).getTime(),SoundManager.playSound("game/libs/sound/select.mp3"),App.player.update());else if("operate_r"==t)this.dollLogId=e.dollLogId,this.member_count=e.member_count,this.memberId=e.member_id,this.position=e.position,this.isResult=!0;else if("arcade_coin_r"==t)this.memberId=e.memberId,App.player.update(),this.isResult=!0;else if("arcade_down_r"==t){for(this.memberId==e.memberId&&(this.position=-1),i=0;i<this.seats.length;i++)this.seats[i].memberId==e.memberId&&(this.seats.splice(i,1),i--);this.needExit?(this.needExit=!1,this.isGame=0,this.event(t)):App.dialog.closeModalWait()}else"settlement_result_r"==t?(this.memberId=e.memberId,App.player.update(),this.isResult=!1,this.needDown?(this.needDown=!1,App.dialog.alert("结算结果："+(e.points||0),Handler.create(this,this.arcadeDown,[this.needExit]))):(App.dialog.closeModalWait(),App.dialog.alert("结算结果："+(e.points||0)))):"hb_r"==t?this.member_count=e.member_count:console.log("未知指令",t);this.event("updatecache",e)},i.onStageResize=function(t){console.log(t),this.objVideo&&this.objVideo.rotate(4==this.type)},i.onVisibilityChange=function(t){t?(console.log(this,"Page is hidden"),this.objVideo&&this.objVideo.pause()):(console.log(this,"Page is visible"),this.objVideo&&this.objVideo.play())},__getset(0,i,"muted",function(){return this.objVideo.muted},function(t){this.objVideo.muted=t}),e}(EventDispatcher),RestConnection=function(t){function e(t){this.errorHandler=null,this.strPortal=null,this.MESSAGE_ID=0,this.CONTENT_TYPE_FORM="application/x-www-form-urlencoded; charset=UTF-8",this.CONTENT_TYPE_MULTI="multipart/form-data; charset=UTF-8",this.AES_KEY="WWJ_2023_$#@!123",this.AES_IV="ABCDEFGHIJKLMNOP",e.__super.call(this),void 0===t&&(t=""),this.strPortal=t,this.AES_KEY=this.AES_KEY+App.config.channelKey,this.AES_KEY=Browser.window.CryptoJS.MD5(this.AES_KEY).toString(),this.AES_KEY=this.AES_KEY.substr(this.AES_KEY.length/2-8,16).toLowerCase(),console.log(this.AES_KEY,this.AES_IV,Browser.window.CryptoJS.AES)}__class(e,"com.emugif.camera.service.portal.RestConnection",t);var i=e.prototype;return i.load=function(t,e,i,n,s,r){void 0===s&&(s="GET"),void 0===r&&(r=!0);var a="",o=this.CONTENT_TYPE_FORM;if(e)for(var h in e)a+=h+"="+e[h]+"&";if(App.config.token&&(a+="accessToken="+App.config.token+"&"),"GET"==s)t+=-1==this.strPortal.indexOf("?")&&-1==t.indexOf("?")?"?":"&",t+=a,t+="&r="+Math.random();else if("FILE"==s){a=new FormData;for(h in e)a.append(h,e[h]);s="POST",o=this.CONTENT_TYPE_MULTI}var l=["Accept","application/json","Content-Type",o,"appVersion",App.config.appVersion,"channelKey",App.config.channelKey];App.config.encryptType>0&&l.push("responseEncrypt","on"),App.config.encryptType>1&&(l.push("requestUrlEncrypt","on"),t="/"+this.encode(t.substr(1))),App.config.token&&l.push("accessToken",App.config.token);var c=new HttpRequest;c.once("complete",this,this.onJSONComplete,[i,n]),c.once("error",this,this.onJSONError,[n]),c.send(this.strPortal+t,a,s,"json",l),r&&App.dialog.showModalWait("请求数据")},i.onJSONComplete=function(t,e,i){if(App.dialog.closeModalWait(),i)if(500==i.status||500==i.code)this.onJSONError(e,i);else if(0==i.errCode){if(t){if(App.config.encryptType>0&&i.data)try{i.data=JSON.parse(this.decode(i.data))}catch(n){this.onJSONError(e,n.message)}t.runWith([i.data])}}else this.onJSONError(e,i);else this.onJSONError(e,i)},i.onJSONError=function(t,e){if(App.dialog.closeModalWait(),t)t&&t.runWith([e]);else if(console.log("Load Failed: "+e),e){if(401==e.errCode)return App.config.setCache("token",""),App.config.token="",App.dialog.showPanel(MobileLoginView),void App.dialog.tip(e.errMsg||"登录已过期",100,1500,!0);var i=e.errMsg||e.message||e.msg||"数据加载失败";if("string"==typeof i)App.dialog.alert(i,Handler.create(this,this.onBtnQuit));else{var n="";for(var s in i)n+=JSON.stringify(i[s]);App.dialog.alert(n,Handler.create(this,this.onBtnQuit))}}else App.dialog.alert("数据加载失败",Handler.create(this,this.onBtnQuit))},i.onBtnQuit=function(){},i.encode=function(t){var e=Browser.window.CryptoJS.AES.encrypt(t,Browser.window.CryptoJS.enc.Utf8.parse(this.AES_KEY),{iv:Browser.window.CryptoJS.enc.Utf8.parse(this.AES_IV),mode:Browser.window.CryptoJS.mode.CBC,padding:Browser.window.CryptoJS.pad.Pkcs7});return e.toString()},i.decode=function(t){var e=Browser.window.CryptoJS.AES.decrypt(t,Browser.window.CryptoJS.enc.Utf8.parse(this.AES_KEY),{iv:Browser.window.CryptoJS.enc.Utf8.parse(this.AES_IV),mode:Browser.window.CryptoJS.mode.CBC,padding:Browser.window.CryptoJS.pad.Pkcs7});return e.toString(Browser.window.CryptoJS.enc.Utf8)},__getset(1,e,"instance",function(){return e._instance||(e._instance=new e),e._instance},laya.events.EventDispatcher._$SET_instance),e._instance=null,e}(EventDispatcher),Node=function(t){function e(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this.destroyed=!1,e.__super.call(this),this._childs=e.ARRAY_EMPTY,this._$P=e.PROP_EMPTY,this.timer=Laya.timer,this.conchModel=Render.isConchNode?this.createConchModel():null}__class(e,"laya.display.Node",t);var i=e.prototype;return i._setBit=function(t,e){if(1==t){var i=this._getBit(t);i!=e&&this._updateDisplayedInstage()}e?this._bits|=t:this._bits&=~t},i._getBit=function(t){return 0!=(this._bits&t)},i._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},i._setUpNoticeType=function(t){var e=this;for(e._setBit(t,!0),e=e.parent;e;){if(e._getBit(t))return;e._setBit(t,!0),e=e.parent}},i.on=function(t,e,i,n){return"display"!==t&&"undisplay"!==t||this._getBit(1)||this._setUpNoticeType(1),this._createListener(t,e,i,n,!1)},i.once=function(t,e,i,n){return"display"!==t&&"undisplay"!==t||this._getBit(1)||this._setUpNoticeType(1),this._createListener(t,e,i,n,!0)},i.createConchModel=function(){return null},i.destroy=function(t){void 0===t&&(t=!0),this.destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(t?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},i.destroyChildren=function(){if(this._childs)for(var t=this._childs.length-1;t>-1;t--)this._childs[t].destroy(!0)},i.addChild=function(t){if(!t||this.destroyed||t===this)return t;if(t.zOrder&&this._set$P("hasZorder",!0),t._parent===this){var i=this.getChildIndex(t);i!==this._childs.length-1&&(this._childs.splice(i,1),this._childs.push(t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,this._childs.length-1)),this._childChanged())}else t.parent&&t.parent.removeChild(t),this._childs===e.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(t),this.conchModel&&this.conchModel.addChildAt(t.conchModel,this._childs.length-1),t.parent=this,this._childChanged();return t},i.addChildren=function(t){for(var e=arguments,i=0,n=e.length;n>i;)this.addChild(e[i++])},i.addChildAt=function(t,i){if(!t||this.destroyed||t===this)return t;if(t.zOrder&&this._set$P("hasZorder",!0),i>=0&&i<=this._childs.length){if(t._parent===this){var n=this.getChildIndex(t);this._childs.splice(n,1),this._childs.splice(i,0,t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,i)),this._childChanged()}else t.parent&&t.parent.removeChild(t),this._childs===e.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(i,0,t),this.conchModel&&this.conchModel.addChildAt(t.conchModel,i),t.parent=this;return t}throw new Error("appendChildAt:The index is out of bounds")},i.getChildIndex=function(t){return this._childs.indexOf(t)},i.getChildByName=function(t){var e=this._childs;if(e)for(var i=0,n=e.length;n>i;i++){var s=e[i];if(s.name===t)return s}return null},i._get$P=function(t){return this._$P[t]},i._set$P=function(t,i){return this.destroyed||(this._$P===e.PROP_EMPTY&&(this._$P={}),this._$P[t]=i),i},i.getChildAt=function(t){return this._childs[t]},i.setChildIndex=function(t,e){var i=this._childs;if(0>e||e>=i.length)throw new Error("setChildIndex:The index is out of bounds.");var n=this.getChildIndex(t);if(0>n)throw new Error("setChildIndex:node is must child of this object.");return i.splice(n,1),i.splice(e,0,t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,e)),this._childChanged(),t},i._childChanged=function(t){},i.removeChild=function(t){if(!this._childs)return t;var e=this._childs.indexOf(t);return this.removeChildAt(e)},i.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},i.removeChildByName=function(t){var e=this.getChildByName(t);return e&&this.removeChild(e),e},i.removeChildAt=function(t){var e=this.getChildAt(t);return e&&(this._childs.splice(t,1),this.conchModel&&this.conchModel.removeChild(e.conchModel),e.parent=null),e},i.removeChildren=function(t,i){if(void 0===t&&(t=0),void 0===i&&(i=2147483647),this._childs&&this._childs.length>0){var n=this._childs;if(0===t&&i>=a){var s=n;this._childs=e.ARRAY_EMPTY}else s=n.splice(t,i-t);for(var r=0,a=s.length;a>r;r++)s[r].parent=null,this.conchModel&&this.conchModel.removeChild(s[r].conchModel)}return this},i.replaceChild=function(t,e){var i=this._childs.indexOf(e);return i>-1?(this._childs.splice(i,1,t),this.conchModel&&(this.conchModel.removeChild(e.conchModel),this.conchModel.addChildAt(t.conchModel,i)),e.parent=null,t.parent=this,t):null},i._updateDisplayedInstage=function(){var t;t=this;var e=Laya.stage;for(this._displayedInStage=!1;t;){if(t._getBit(1)){this._displayedInStage=t._displayedInStage;break}if(t==e||t._displayedInStage){this._displayedInStage=!0;break}t=t.parent}},i._setDisplay=function(t){this._displayedInStage!==t&&(this._displayedInStage=t,t?this.event("display"):this.event("undisplay"))},i._displayChild=function(t,e){var i=t._childs;if(i)for(var n=0,s=i.length;s>n;n++){var r=i[n];r._getBit(1)&&(r._childs.length>0?this._displayChild(r,e):r._setDisplay(e))}t._setDisplay(e)},i.contains=function(t){if(t===this)return!0;for(;t;){if(t.parent===this)return!0;t=t.parent}return!1},i.timerLoop=function(t,e,i,n,s,r){void 0===s&&(s=!0),void 0===r&&(r=!1),this.timer.loop(t,e,i,n,s,r)},i.timerOnce=function(t,e,i,n,s){void 0===s&&(s=!0),this.timer._create(!1,!1,t,e,i,n,s)},i.frameLoop=function(t,e,i,n,s){void 0===s&&(s=!0),this.timer._create(!0,!0,t,e,i,n,s)},i.frameOnce=function(t,e,i,n,s){void 0===s&&(s=!0),this.timer._create(!0,!1,t,e,i,n,s)},i.clearTimer=function(t,e){this.timer.clear(t,e)},__getset(0,i,"numChildren",function(){return this._childs.length}),__getset(0,i,"parent",function(){return this._parent},function(t){this._parent!==t&&(t?(this._parent=t,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),t.displayedInStage&&this._displayChild(this,!0)),t._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=t))}),__getset(0,i,"displayedInStage",function(){return this._getBit(1)?this._displayedInStage:(this._setUpNoticeType(1),this._displayedInStage)}),e.ARRAY_EMPTY=[],e.PROP_EMPTY={},e.NOTICE_DISPLAY=1,e.MOUSEENABLE=2,e}(EventDispatcher),Resource=function(t){function e(){e.__super.call(this),this._$1__id=++e._uniqueIDCounter,this.__loaded=!0,this._disposed=!1,e._loadedResources.push(this),e._isLoadedResourcesSorted=!1,this._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,ResourceManager.currentResourceManager&&ResourceManager.currentResourceManager.addResource(this)}__class(e,"laya.resource.Resource",t);var i=e.prototype;return Laya.imps(i,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),i._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},i.recreateResource=function(){this.startCreate(),this.completeCreate()},i.detoryResource=function(){},i.activeResource=function(t){void 0===t&&(t=!1),this._lastUseFrameCount=Stat.loopCount,(this._released||t)&&this.recreateResource()},i.releaseResource=function(t){return void 0===t&&(t=!1),!t&&this.lock?!1:!this._released||t?(this.detoryResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0):!1},i.setUniqueName=function(t){for(var i=!0,n=0;n<e._loadedResources.length;n++)if(e._loadedResources[n]._name===t&&e._loadedResources[n]!==this)return void(i=!1);i?this.name!=t&&(this.name=t,e._isLoadedResourcesSorted=!1):this.setUniqueName(t.concat("-copy"))},i.onAsynLoaded=function(t,e,i){throw new Error("Resource: must override this function!")},i.dispose=function(){if(null!==this._resourceManager)throw new Error("附属于resourceManager的资源不能独立释放！");this._disposed=!0,this.lock=!1,this.releaseResource();var t=e._loadedResources.indexOf(this);-1!==t&&(e._loadedResources.splice(t,1),e._isLoadedResourcesSorted=!1),Loader.clearRes(this.url)},i.startCreate=function(){this.event("recovering",this)},i.completeCreate=function(){this._released=!1,this.event("recovered",this)},__getset(0,i,"memorySize",function(){return this._memorySize},function(t){var e=t-this._memorySize;this._memorySize=t,this.resourceManager&&this.resourceManager.addSize(e)}),__getset(0,i,"_loaded",null,function(t){this.__loaded=t}),__getset(0,i,"loaded",function(){return this.__loaded}),__getset(0,i,"id",function(){return this._$1__id}),__getset(0,i,"name",function(){return this._name},function(t){!t&&""===t||this.name===t||(this._name=t,e._isLoadedResourcesSorted=!1)}),__getset(0,i,"disposed",function(){return this._disposed}),__getset(0,i,"released",function(){return this._released}),__getset(0,i,"resourceManager",function(){return this._resourceManager}),__getset(0,i,"lastUseFrameCount",function(){return this._lastUseFrameCount}),__getset(0,i,"url",function(){return this._url},function(t){this._url=t}),__getset(1,e,"sortedLoadedResourcesByName",function(){return e._isLoadedResourcesSorted||(e._isLoadedResourcesSorted=!0,e._loadedResources.sort(e.compareResourcesByName)),e._loadedResources},laya.events.EventDispatcher._$SET_sortedLoadedResourcesByName),e.getLoadedResourceByIndex=function(t){return e._loadedResources[t]},e.getLoadedResourcesCount=function(){return e._loadedResources.length},e.compareResourcesByName=function(t,e){if(t===e)return 0;var i=t.name,n=e.name;if(null===i)return null===n?0:-1;if(null==n)return 1;var s=i.localeCompare(n);return 0!=s?s:(e.setUniqueName(n),n=e.name,i.localeCompare(n))},e._uniqueIDCounter=0,e._loadedResources=[],e._isLoadedResourcesSorted=!1,e}(EventDispatcher),AudioSound=function(t){function e(){this.url=null,this.audio=null,this.loaded=!1,e.__super.call(this)}__class(e,"laya.media.h5audio.AudioSound",t);var i=e.prototype;return i.dispose=function(){var t=e._audioCache[this.url];Pool.clearBySign("audio:"+this.url),t&&(Render.isConchApp||(t.src=""),delete e._audioCache[this.url])},i.load=function(t){function i(){s(),a.loaded=!0,a.event("complete")}function n(){r.load=null,s(),a.event("error")}function s(){r.removeEventListener("canplaythrough",i),r.removeEventListener("error",n)}t=URL.formatURL(t),this.url=t;var r;if(t==SoundManager._tMusic?(e._initMusicAudio(),r=e._musicAudio,r.src!=t&&(e._audioCache[r.src]=null,r=null)):r=e._audioCache[t],r&&r.readyState>=2)return void this.event("complete");r||(t==SoundManager._tMusic?(e._initMusicAudio(),r=e._musicAudio):r=Browser.createElement("audio"),e._audioCache[t]=r,r.src=t),r.addEventListener("canplaythrough",i),r.addEventListener("error",n);var a=this;this.audio=r,r.load?r.load():n()},i.play=function(t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),!this.url)return null;var n;if(n=this.url==SoundManager._tMusic?e._musicAudio:e._audioCache[this.url],!n)return null;var s;s=Pool.getItem("audio:"+this.url),Render.isConchApp?s||(s=Browser.createElement("audio"),s.src=this.url):this.url==SoundManager._tMusic?(e._initMusicAudio(),s=e._musicAudio,s.src=this.url):s=s?s:n.cloneNode(!0);var r=new AudioSoundChannel(s);return r.url=this.url,r.loops=i,r.startTime=t,r.play(),SoundManager.addChannel(r),r},__getset(0,i,"duration",function(){var t;return t=e._audioCache[this.url],t?t.duration:0}),e._initMusicAudio=function(){e._musicAudio||(e._musicAudio||(e._musicAudio=Browser.createElement("audio")),Render.isConchApp||Browser.document.addEventListener("mousedown",e._makeMusicOK))},e._makeMusicOK=function(){Browser.document.removeEventListener("mousedown",e._makeMusicOK),e._musicAudio.src?e._musicAudio.play():(e._musicAudio.src="",e._musicAudio.load())},e._audioCache={},e._musicAudio=null,e}(EventDispatcher),SoundChannel=function(t){function e(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.completeHandler=null,e.__super.call(this)}__class(e,"laya.media.SoundChannel",t);var i=e.prototype;return i.play=function(){},i.stop=function(){},i.pause=function(){},i.resume=function(){},i.__runComplete=function(t){t&&t.run()},__getset(0,i,"volume",function(){return 1},function(t){}),__getset(0,i,"position",function(){return 0}),__getset(0,i,"duration",function(){return 0}),e}(EventDispatcher),Sound=function(t){function e(){e.__super.call(this)}__class(e,"laya.media.Sound",t);var i=e.prototype;return i.load=function(t){},i.play=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),null},i.dispose=function(){},__getset(0,i,"duration",function(){return 0}),e}(EventDispatcher),WebAudioSound=function(t){function e(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,e.__super.call(this)}__class(e,"laya.media.webaudio.WebAudioSound",t);var i=e.prototype;return i.load=function(t){var i=this;if(t=URL.formatURL(t),this.url=t,this.audioBuffer=e._dataCache[t],this.audioBuffer)return void this._loaded(this.audioBuffer);if(e.e.on("loaded:"+t,this,this._loaded),e.e.on("err:"+t,this,this._err),!e.__loadingSound[t]){e.__loadingSound[t]=!0;var n=new Browser.window.XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){return i._disposed?void i._removeLoadEvents():(i.data=n.response,e.buffs.push({buffer:i.data,url:i.url}),void e.decode())},n.onerror=function(t){i._err()},n.send()}},i._err=function(){if(this._removeLoadEvents(),e.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var t,i=0,n=0;t=this.__toPlays,n=t.length;var s;for(i=0;n>i;i++)s=t[i],s[2]&&!s[2].isStopped&&s[2].event("error");this.__toPlays.length=0}},i._loaded=function(t){this._removeLoadEvents(),this._disposed||(this.audioBuffer=t,e._dataCache[this.url]=this.audioBuffer,this.loaded=!0,this.event("complete"))},i._removeLoadEvents=function(){e.e.off("loaded:"+this.url,this,this._loaded),e.e.off("err:"+this.url,this,this._err)},i.__playAfterLoaded=function(){if(this.__toPlays){var t,e=0,i=0;t=this.__toPlays,i=t.length;var n;for(e=0;i>e;e++)n=t[e],n[2]&&!n[2].isStopped&&this.play(n[0],n[1],n[2]);this.__toPlays.length=0}},i.play=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),i=i?i:new WebAudioSoundChannel,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([t,e,i]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),i.url=this.url,i.loops=e,i.audioBuffer=this.audioBuffer,i.startTime=t,i.play(),SoundManager.addChannel(i),i},i.dispose=function(){this._disposed=!0,delete e._dataCache[this.url],delete e.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},__getset(0,i,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),e.decode=function(){e.buffs.length<=0||e.isDecoding||(e.isDecoding=!0,e.tInfo=e.buffs.shift(),e.ctx.decodeAudioData(e.tInfo.buffer,e._done,e._fail))},e._done=function(t){e.e.event("loaded:"+e.tInfo.url,t),e.isDecoding=!1,e.decode()},e._fail=function(){e.e.event("err:"+e.tInfo.url,null),e.isDecoding=!1,e.decode()},e._playEmptySound=function(){if(null!=e.ctx){var t=e.ctx.createBufferSource();t.buffer=e._miniBuffer,t.connect(e.ctx.destination),t.start(0,0,0)}},e._unlock=function(){e._unlocked||(e._playEmptySound(),"running"==e.ctx.state&&(Browser.document.removeEventListener("mousedown",e._unlock,!0),Browser.document.removeEventListener("touchend",e._unlock,!0),Browser.document.removeEventListener("touchstart",e._unlock,!0),e._unlocked=!0))},e.initWebAudio=function(){"running"!=e.ctx.state&&(e._unlock(),Browser.document.addEventListener("mousedown",e._unlock,!0),Browser.document.addEventListener("touchend",e._unlock,!0),Browser.document.addEventListener("touchstart",e._unlock,!0))},e._dataCache={},e.buffs=[],e.isDecoding=!1,e._unlocked=!1,e.tInfo=null,e.__loadingSound={},__static(e,["window",function(){return this.window=Browser.window},"webAudioEnabled",function(){return this.webAudioEnabled=e.window.AudioContext||e.window.webkitAudioContext||e.window.mozAudioContext},"ctx",function(){return this.ctx=e.webAudioEnabled?new(e.window.AudioContext||e.window.webkitAudioContext||e.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=e.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new EventDispatcher}]),e}(EventDispatcher),HttpRequest=function(t){function e(){this._responseType=null,this._data=null,e.__super.call(this),this._http=new Browser.window.XMLHttpRequest}__class(e,"laya.net.HttpRequest",t);var i=e.prototype;return i.send=function(t,e,i,n,s){void 0===i&&(i="get"),void 0===n&&(n="text"),this._responseType=n,this._data=null;var r=this,a=this._http;if(a.open(i,t,!0),s)for(var o=0;o<s.length;o++)a.setRequestHeader(s[o++],s[o]);else Render.isConchApp||(e&&"string"!=typeof e?a.setRequestHeader("Content-Type","application/json"):a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));a.responseType="arraybuffer"!==n?"text":"arraybuffer",a.onerror=function(t){r._onError(t)},a.onabort=function(t){r._onAbort(t)},a.onprogress=function(t){r._onProgress(t)},a.onload=function(t){r._onLoad(t)},a.send(e)},i._onProgress=function(t){t&&t.lengthComputable&&this.event("progress",t.loaded/t.total)},i._onAbort=function(t){this.error("Request was aborted by user")},i._onError=function(t){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},i._onLoad=function(t){var e=this._http,i=void 0!==e.status?e.status:200;200===i||204===i||0===i?this.complete():this.error("["+e.status+"]"+e.statusText+":"+e.responseURL)},i.error=function(t){this.clear(),this.event("error",t)},i.complete=function(){this.clear();var t=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=Utils$1.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(e){t=!1,this.error(e.message)}t&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},i.clear=function(){var t=this._http;t.onerror=t.onabort=t.onprogress=t.onload=null},__getset(0,i,"url",function(){return this._http.responseURL}),__getset(0,i,"http",function(){return this._http}),__getset(0,i,"data",function(){return this._data}),e}(EventDispatcher),Loader=function(t){function e(){this._data=null,this._url=null,this._type=null,this._cache=!1,this._http=null,e.__super.call(this)}__class(e,"laya.net.Loader",t);var i=e.prototype;return i.load=function(t,i,n,s,r,a){if(void 0===n&&(n=!0),void 0===r&&(r=!1),void 0===a&&(a="get"),this._url=t,0===t.indexOf("data:image")?i="image":t=URL.formatURL(t),this._type=i||(i=this.getTypeFromUrl(t)),this._cache=n,this._data=null,!r&&e.loadedMap[t])return this._data=e.loadedMap[t],this.event("progress",1),void this.event("complete",this._data);if(s&&e.setGroup(t,s),null!=e.parserMap[i])return void(e.parserMap[i]instanceof laya.utils.Handler?e.parserMap[i].runWith(this):e.parserMap[i].call(null,this));if("image"===i||"htmlimage"===i||"nativeimage"===i)return this._loadImage(t);if("sound"===i)return this._loadSound(t);if("atlas"==i&&e.preLoadedAtlasConfigMap[t])return this.onLoaded(e.preLoadedAtlasConfigMap[t]),void delete e.preLoadedAtlasConfigMap[t];this._http||(this._http=new HttpRequest,this._http.on("progress",this,this.onProgress),this._http.on("error",this,this.onError),this._http.on("complete",this,this.onLoaded));var o;switch(i){case"atlas":o="json";break;case"font":o="xml";break;default:o=i}this._http.send(t,"get"==a?null:"rs=1",a,o)},i.getTypeFromUrl=function(t){var i=Utils$1.getFileExtension(t);return i?e.typeMap[i]:(console.warn("Not recognize the resources suffix",t),"text")},i._loadImage=function(t){function i(){n.onload=null,n.onerror=null,delete e.imgCache[t]}t=URL.formatURL(t);var n,s=this,r=function(){i(),s.onLoaded(n)},a=function(){i(),s.event("error","Load image failed")};"nativeimage"===this._type?(n=new Browser.window.Image,n.crossOrigin="",n.onload=r,n.onerror=a,n.src=t,e.imgCache[t]=n):new HTMLImage.create(t,{onload:r,onerror:a,onCreate:function(i){n=i,e.imgCache[t]=i}})},i._loadSound=function(t){function e(){n(),r.onLoaded(s)}function i(){n(),s.dispose(),r.event("error","Load sound failed")}function n(){s.offAll()}var s=new SoundManager._soundClass,r=this;s.on("complete",this,e),s.on("error",this,i),s.load(t)},i.onProgress=function(t){"atlas"===this._type?this.event("progress",.3*t):this.event("progress",t)},i.onError=function(t){this.clearHttp(),this.event("error",t)},i.onLoaded=function(t){this.clearHttp();var i=this._type;if("image"===i){var n=new Texture(t);n.url=this._url,this.complete(n)}else if("sound"===i||"htmlimage"===i||"nativeimage"===i)this.complete(t);else if("atlas"===i){if(!t.src&&!t._setContext){if(!this._data){if(this._data=t,t.meta&&t.meta.image)for(var s=t.meta.image.split(","),r=this._url.indexOf("/")>=0?"/":"\\",a=this._url.lastIndexOf(r),o=a>=0?this._url.substr(0,a+1):"",h=0,l=s.length;l>h;h++)s[h]=o+s[h];else s=[this._url.replace(".json",".png")];s.reverse(),t.toLoads=s,t.pics=[]}return this.event("progress",.3+1/s.length*.6),this._loadImage(s.pop())}if(this._data.pics.push(t),this._data.toLoads.length>0)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var c=this._data.frames,u=this._url.split("?")[0],_=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:u.substring(0,u.lastIndexOf("."))+"/",d=this._data.pics,f=URL.formatURL(this._url),p=e.atlasMap[f]||(e.atlasMap[f]=[]);p.dir=_;for(var g in c){var m=c[g],v=d[m.frame.idx?m.frame.idx:0],y=URL.formatURL(_+g);e.cacheRes(y,Texture.create(v,m.frame.x,m.frame.y,m.frame.w,m.frame.h,m.spriteSourceSize.x,m.spriteSourceSize.y,m.sourceSize.w,m.sourceSize.h)),e.loadedMap[y].url=y,p.push(y)}delete this._data.pics,this.complete(this._data)}else if("font"==i){if(!t.src)return this._data=t,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var w=new BitmapFont;w.parseFont(this._data,t);var b=this._url.split(".fnt")[0].split("/"),S=b[b.length-1];Text.registerBitmapFont(S,w),this._data=w,this.complete(this._data)}else this.complete(t)},i.complete=function(t){this._data=t,e._loaders.push(this),e._isWorking||e.checkNext()},i.endLoad=function(t){t&&(this._data=t),this._cache&&e.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},i.clearHttp=function(){Browser.onIOS&&this._http&&(console.log("clearHttp"),this._http.off("progress",this,this.onProgress),this._http.off("error",this,this.onError),this._http.off("complete",this,this.onLoaded),this._http=null)},__getset(0,i,"url",function(){return this._url}),__getset(0,i,"data",function(){return this._data}),__getset(0,i,"cache",function(){return this._cache}),__getset(0,i,"type",function(){return this._type}),e.checkNext=function(){e._isWorking=!0;for(var t=Browser.now(),i=t;e._startIndex<e._loaders.length;)if(i=Browser.now(),e._loaders[e._startIndex].endLoad(),e._startIndex++,Browser.now()-t>e.maxTimeOut)return console.warn("loader callback cost a long time:"+(Browser.now()-t)+" url="+e._loaders[e._startIndex-1].url),void Laya.timer.frameOnce(1,null,e.checkNext);e._loaders.length=0,e._startIndex=0,e._isWorking=!1},e.clearRes=function(t,i){void 0===i&&(i=!1),t=URL.formatURL(t);var n=e.getAtlas(t);if(n){for(var s=0,r=n.length;r>s;s++){var a=n[s],o=e.getRes(a);o&&o.destroy(i),delete e.loadedMap[a]}n.length=0,delete e.atlasMap[t],delete e.loadedMap[t]}else{var h=e.loadedMap[t];h&&(h instanceof laya.resource.Texture&&h.bitmap&&h.destroy(i),delete e.loadedMap[t])}},e.setAtlasConfigs=function(t,i){e.preLoadedAtlasConfigMap[URL.formatURL(t)]=i},e.getRes=function(t){return e.loadedMap[URL.formatURL(t)]},e.getAtlas=function(t){return e.atlasMap[URL.formatURL(t)]},e.cacheRes=function(t,i){t=URL.formatURL(t),null!=e.loadedMap[t]?console.warn("Resources already exist,is repeated loading:",t):e.loadedMap[t]=i},e.setGroup=function(t,i){e.groupMap[i]||(e.groupMap[i]=[]),e.groupMap[i].push(t)},e.clearResByGroup=function(t){if(e.groupMap[t]){var i=e.groupMap[t],n=0,s=i.length;for(n=0;s>n;n++)e.clearRes(i[n]);i.length=0}},e.TEXT="text",e.JSON="json",e.XML="xml",e.BUFFER="arraybuffer",e.IMAGE="image",e.SOUND="sound",e.ATLAS="atlas",e.FONT="font",e.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font"},e.parserMap={},e.groupMap={},e.maxTimeOut=100,e.loadedMap={},e.preLoadedAtlasConfigMap={},e.atlasMap={},e._loaders=[],e._isWorking=!1,e._startIndex=0,e.imgCache={},e}(EventDispatcher),LoaderManager=function(t){function e(){this.retryNum=1,this.retryDelay=0,this.maxLoader=5,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},e.__super.call(this);for(var t=0;t<this._maxPriority;t++)this._resInfos[t]=[]}var i;__class(e,"laya.net.LoaderManager",t);var n=e.prototype;return n.create=function(t,e,i,n,s,r,a){function o(t,i){u++,t.progress=1,u===c&&e&&e.run()}function h(t,e){t.progress=e;for(var i=0,n=0;c>n;n++){var s=l[n];i+=s.progress}var r=i/c;_.runWith(r)}if(void 0===r&&(r=1),void 0===a&&(a=!0),t instanceof Array){var l=t,c=l.length,u=0;if(i)var _=Handler.create(i.caller,i.method,i.args,!1);for(var d=0;c>d;d++){var f=l[d];"string"==typeof f&&(f=l[d]={url:f}),f.progress=0;var p=i?Handler.create(null,h,[f],!1):null,g=i||e?Handler.create(null,o,[f]):null;this._create(f.url,g,p,f.clas||n,f.params||s,f.priority||r,a)}return!0}return this._create(t,e,i,n,s,r,a)},n._create=function(t,i,n,s,r,a,o){function h(e){l&&l.onAsynLoaded.call(l,t,e,r),i&&i.run(),Laya.loader.event(t)}void 0===a&&(a=1),void 0===o&&(o=!0),t=URL.formatURL(t);var l=this.getRes(t);if(l)!l.hasOwnProperty("loaded")||l.loaded?(n&&n.runWith(1),i&&i.run()):i&&Laya.loader._createListener(t,i.caller,i.method,i.args,!0,!1);else{var c=Utils$1.getFileExtension(t),u=e.createMap[c];s||(s=u[0]);var _=u[1];"atlas"==c?this.load(t,i,n,_,a,o):(s===Texture&&(_="htmlimage"),
l=s?new s:null,l.hasOwnProperty("_loaded")&&(l._loaded=!1),this.load(t,Handler.create(null,h),n,_,a,!1,null,!0),o&&(this.cacheRes(t,l),l.url=t))}return l},n.load=function(t,n,s,r,a,o,h,l,c){if(void 0===a&&(a=1),void 0===o&&(o=!0),void 0===l&&(l=!1),void 0===c&&(c="get"),t instanceof Array)return this._loadAssets(t,n,s,r,a,o,h);var u=Loader.getRes(t);if(null!=u)s&&s.runWith(1),n&&n.runWith(u),this._loaderCount||this.event("complete");else{var _=e._resMap[t];_?(n&&_._createListener("complete",n.caller,n.method,n.args,!1,!1),s&&_._createListener("progress",s.caller,s.method,s.args,!1,!1)):(_=this._infoPool.length?this._infoPool.pop():new i,_.url=t,_.type=r,_.cache=o,_.group=h,_.ignoreCache=l,_.method=c,n&&_.on("complete",n.caller,n.method,n.args),s&&_.on("progress",s.caller,s.method,s.args),e._resMap[t]=_,a=a<this._maxPriority?a:this._maxPriority-1,this._resInfos[a].push(_),this._next())}return this},n._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var t=0;t<this._maxPriority;t++){var e=this._resInfos[t];if(e.length>0){var i=e.shift();if(i)return this._doLoad(i)}}this._loaderCount||this.event("complete")}},n._doLoad=function(t){function e(e){i.offAll(),i._data=null,n._loaders.push(i),n._endLoad(t,e instanceof Array?[e]:e),n._loaderCount--,n._next()}this._loaderCount++;var i=this._loaders.length?this._loaders.pop():new Loader;i.on("complete",null,e),i.on("progress",null,function(e){t.event("progress",e)}),i.on("error",null,function(t){e(null)});var n=this;i.load(t.url,t.type,t.cache,t.group,t.ignoreCache,t.method)},n._endLoad=function(t,i){var n=t.url;if(null==i){var s=this._failRes[n]||0;if(s<this.retryNum)return console.warn("[warn]Retry to load:",n),this._failRes[n]=s+1,void Laya.timer.once(this.retryDelay,this,this._addReTry,[t],!1);console.warn("[error]Failed to load:",n),this.event("error",n)}this._failRes[n]&&(this._failRes[n]=0),delete e._resMap[n],t.event("complete",i),t.offAll(),this._infoPool.push(t)},n._addReTry=function(t){this._resInfos[this._maxPriority-1].push(t),this._next()},n.clearRes=function(t,e){void 0===e&&(e=!1),Loader.clearRes(t,e)},n.getRes=function(t){return Loader.getRes(t)},n.cacheRes=function(t,e){Loader.cacheRes(t,e)},n.setGroup=function(t,e){Loader.setGroup(t,e)},n.clearResByGroup=function(t){Loader.clearResByGroup(t)},n.clearUnLoaded=function(){for(var t=0;t<this._maxPriority;t++){for(var i=this._resInfos[t],n=i.length-1;n>-1;n--){var s=i[n];s&&(s.offAll(),this._infoPool.push(s))}i.length=0}this._loaderCount=0,e._resMap={}},n.cancelLoadByUrls=function(t){if(t)for(var e=0,i=t.length;i>e;e++)this.cancelLoadByUrl(t[e])},n.cancelLoadByUrl=function(t){for(var i=0;i<this._maxPriority;i++)for(var n=this._resInfos[i],s=n.length-1;s>-1;s--){var r=n[s];r&&r.url===t&&(n[s]=null,r.offAll(),this._infoPool.push(r))}e._resMap[t]&&delete e._resMap[t]},n._loadAssets=function(t,e,i,n,s,r,a){function o(t,i){c++,t.progress=1,i||(d=!1),c===l&&e&&e.runWith(d)}function h(t,e){if(null!=i){t.progress=e;for(var n=0,s=0;s<_.length;s++){var r=_[s];n+=r.size*r.progress}var a=n/u;i.runWith(a)}}void 0===s&&(s=1),void 0===r&&(r=!0);for(var l=t.length,c=0,u=0,_=[],d=!0,f=0;l>f;f++){var p=t[f];"string"==typeof p&&(p={url:p,type:n,size:1,priority:s}),p.size||(p.size=1),p.progress=0,u+=p.size,_.push(p);var g=i?Handler.create(null,h,[p],!1):null,m=e||i?Handler.create(null,o,[p]):null;this.load(p.url,m,g,p.type,p.priority||1,r,p.group||a)}return this},e.cacheRes=function(t,e){Loader.cacheRes(t,e)},e._resMap={},__static(e,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),e.__init$=function(){i=function(t){function e(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.method=null,e.__super.call(this)}return __class(e,"",t),e}(EventDispatcher)},e}(EventDispatcher),Socket=function(t){function e(t,i,n){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===i&&(i=0),e.__super.call(this),this._byteClass=n?n:Byte,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,t&&i>0&&65535>i&&this.connect(t,i)}__class(e,"laya.net.Socket",t);var i=e.prototype;return i.connect=function(t,e){var i="ws://"+t+":"+e;this.connectByUrl(i)},i.connectByUrl=function(t){var e=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new Browser.window.WebSocket(t,this.protocols):this._socket=new Browser.window.WebSocket(t),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(t){e._onOpen(t)},this._socket.onmessage=function(t){e._onMessage(t)},this._socket.onclose=function(t){e._onClose(t)},this._socket.onerror=function(t){e._onError(t)}},i.cleanSocket=function(){try{this._socket.close()}catch(t){}this._connected=!1,this._socket&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null)},i.close=function(){if(null!=this._socket)try{this._socket.close()}catch(t){}},i._onOpen=function(t){this._connected=!0,this.event("open",t)},i._onMessage=function(t){if(t&&t.data){var e=t.data;if(this.disableInput&&e)return void this.event("message",e);this._input.length>0&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var i=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,e&&("string"==typeof e?this._input.writeUTFBytes(e):this._input.writeArrayBuffer(e),this._addInputPosition=this._input.pos,this._input.pos=i),this.event("message",e)}},i._onClose=function(t){this._connected=!1,this.event("close",t)},i._onError=function(t){this.event("error",t)},i.send=function(t){this._socket.send(t)},i.flush=function(){if(this._output&&this._output.length>0){var t;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(e){t=e}this._output.endian=this.endian,this._output.clear(),t&&this.event("error",t)}},__getset(0,i,"input",function(){return this._input}),__getset(0,i,"output",function(){return this._output}),__getset(0,i,"connected",function(){return this._connected}),__getset(0,i,"endian",function(){return this._endian},function(t){this._endian=t,null!=this._input&&(this._input.endian=t),null!=this._output&&(this._output.endian=t)}),e.LITTLE_ENDIAN="littleEndian",e.BIG_ENDIAN="bigEndian",e}(EventDispatcher),Texture=function(t){function e(t,i){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,e.__super.call(this),t&&t.useNum++,this.setTo(t,i)}__class(e,"laya.resource.Texture",t);var i=e.prototype;return i.setTo=function(t,i){if(this.bitmap=t,this.uv=i||e.DEF_UV,t){this._w=t.width,this._h=t.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=this._w>0;var n=this;if(this._loaded)RunDriver.addToAtlas&&RunDriver.addToAtlas(n);else{var s=t;s instanceof laya.resource.HTMLImage&&s.image&&s.image.addEventListener("load",function(t){RunDriver.addToAtlas&&RunDriver.addToAtlas(n)},!1)}}},i.active=function(){this.bitmap&&this.bitmap.activeResource()},i.destroy=function(t){if(void 0===t&&(t=!1),this.bitmap&&this.bitmap.useNum>0){var e=this.bitmap;t?(this.bitmap=null,e.dispose(),e.useNum=0):(e.useNum--,0==e.useNum&&(this.bitmap=null,e.dispose())),this.url&&this===Laya.loader.getRes(this.url)&&Laya.loader.clearRes(this.url,t),this._loaded=!1}},i.load=function(t){var e=this;this._loaded=!1,t=URL.customFormat(t);var i=this.bitmap||(this.bitmap=HTMLImage.create(t));i&&i.useNum++;var n=this;i.onload=function(){i.onload=null,n._loaded=!0,e.sourceWidth=e._w=i.width,e.sourceHeight=e._h=i.height,n.event("loaded",this),RunDriver.addToAtlas&&RunDriver.addToAtlas(n)}},i.addTextureToAtlas=function(t){RunDriver.addTextureToAtlas(this)},i.getPixels=function(t,e,i,n){if(Render.isWebGL)return RunDriver.getTexturePixels(this,t,e,i,n);Browser.canvas.size(i,n),Browser.canvas.clear(),Browser.context.drawTexture(this,-t,-e,this.width,this.height,0,0);var s=Browser.context.getImageData(0,0,i,n);return s.data},i.onAsynLoaded=function(t,e){e&&e.useNum++,this.setTo(e,this.uv)},__getset(0,i,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),__getset(0,i,"loaded",function(){return this._loaded}),__getset(0,i,"released",function(){return this.bitmap?this.bitmap.released:!0}),__getset(0,i,"width",function(){return this._w?this._w:this.uv&&this.uv!==e.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(t){this._w=t,this.sourceWidth||(this.sourceWidth=t)}),__getset(0,i,"repeat",function(){return Render.isWebGL&&this.bitmap?this.bitmap.repeat:!0},function(t){t&&Render.isWebGL&&this.bitmap&&(this.bitmap.repeat=t,t&&(this.bitmap.enableMerageInAtlas=!1))}),__getset(0,i,"height",function(){return this._h?this._h:this.uv&&this.uv!==e.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(t){this._h=t,this.sourceHeight||(this.sourceHeight=t)}),__getset(0,i,"isLinearSampling",function(){return Render.isWebGL?9728!=this.bitmap.minFifter:!0},function(t){!t&&Render.isWebGL&&(t||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),e.moveUV=function(t,e,i){for(var n=0;8>n;n+=2)i[n]+=t,i[n+1]+=e;return i},e.create=function(t,i,n,s,r,a,o,h,l){void 0===a&&(a=0),void 0===o&&(o=0),void 0===h&&(h=0),void 0===l&&(l=0);var c=t instanceof laya.resource.Texture,u=c?t.uv:e.DEF_UV,_=c?t.bitmap:t,d=new e(_,null);_.width&&i+s>_.width&&(s=_.width-i),_.height&&n+r>_.height&&(r=_.height-n),d.width=s,d.height=r,d.offsetX=a,d.offsetY=o,d.sourceWidth=h||s,d.sourceHeight=l||r;var f=1/_.width,p=1/_.height;i*=f,n*=p,s*=f,r*=p;var g=d.uv[0],m=d.uv[1],v=d.uv[4],y=d.uv[5],w=v-g,b=y-m,S=e.moveUV(u[0],u[1],[i,n,i+s,n,i+s,n+r,i,n+r]);return d.uv=[g+S[0]*w,m+S[1]*b,v-(1-S[2])*w,m+S[3]*b,v-(1-S[4])*w,y-(1-S[5])*b,g+S[6]*w,y-(1-S[7])*b],d},e.createFromTexture=function(t,i,n,s,r){var a=Rectangle.TEMP.setTo(i-t.offsetX,n-t.offsetY,s,r),o=a.intersection(e._rect1.setTo(0,0,t.width,t.height),e._rect2);if(!o)return null;var h=e.create(t,o.x,o.y,o.width,o.height,o.x-a.x,o.y-a.y,s,r);return h.bitmap.useNum--,h},e.DEF_UV=[0,0,1,0,1,1,0,1],e.INV_UV=[0,1,1,1,1,0,0,0],e._rect1=new Rectangle,e._rect2=new Rectangle,e}(EventDispatcher),CSSStyle=function(t){function e(t){this._bgground=null,this._border=null,this._rect=null,this.lineHeight=0,e.__super.call(this),this._padding=e._PADDING,this._spacing=e._SPACING,this._aligns=e._ALIGNS,this._font=Font.EMPTY,this._ower=t}__class(e,"laya.display.css.CSSStyle",t);var i=e.prototype;return i.destroy=function(){this._ower=null,this._font=null,this._rect=null},i.inherit=function(t){this._font=t._font,this._spacing=t._spacing===e._SPACING?e._SPACING:t._spacing.slice(),this.lineHeight=t.lineHeight},i._widthAuto=function(){return 0!==(262144&this._type)},i.widthed=function(t){return 0!=(8&this._type)},i._calculation=function(t,e){function i(t,e,i){return t*i[0]+e*i[1]+i[2]}function n(t){var e=r.width,n=s.width;a.width&&(s.width=i(e,n,a.width)),a.height&&(s.height=i(e,n,a.height)),a.left&&(s.x=i(e,n,a.left)),a.top&&(s.y=i(e,n,a.top))}if(e.indexOf("%")<0)return!1;var s=this._ower,r=s.parent,a=this._rect;null===a&&(r._getCSSStyle()._type|=524288,r.on("resize",this,n),this._rect=a={input:{}});var o=e.split(" ");return o[0]=parseFloat(o[0])/100,1==o.length?o[1]=o[2]=0:(o[1]=parseFloat(o[1])/100,o[2]=parseFloat(o[2])),a[t]=o,a.input[t]=e,n(t),!0},i.heighted=function(t){return 0!=(8192&this._type)},i.size=function(t,e){var i=this._ower,n=!1;-1!==t&&t!=this._ower.width&&(this._type|=8,this._ower.width=t,n=!0),-1!==e&&e!=this._ower.height&&(this._type|=8192,this._ower.height=e,n=!0),n&&(i._layoutLater(),524288&this._type&&i.event("resize",this))},i._getAlign=function(){return this._aligns[0]},i._getValign=function(){return this._aligns[1]},i._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},i._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new Font(this._font))},i.render=function(t,e,i,n){var s=t.width,r=t.height;i-=t.pivotX,n-=t.pivotY,this._bgground&&null!=this._bgground.color&&e.ctx.fillRect(i,n,s,r,this._bgground.color),this._border&&this._border.color&&e.drawRect(i,n,s,r,this._border.color.strColor,this._border.size)},i.getCSSStyle=function(){return this},i.cssText=function(t){this.attrs(e.parseOneCSS(t,";"))},i.attrs=function(t){if(t)for(var e=0,i=t.length;i>e;e++){var n=t[e];this[n[0]]=n[1]}},i.setTransform=function(t){"none"===t?this._tf=Style._TF_EMPTY:this.attrs(e.parseOneCSS(t,","))},i.translate=function(t,e){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.translateX=t,this._tf.translateY=e},i.scale=function(t,e){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleX=t,this._tf.scaleY=e},i._enableLayout=function(){return 0===(2&this._type)&&0===(4&this._type)},__getset(0,i,"block",t.prototype._$get_block,function(t){t?this._type|=1:this._type&=-2}),__getset(0,i,"valign",function(){return e._valigndef[this._aligns[1]]},function(t){this._aligns===e._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=e._valigndef[t]}),__getset(0,i,"height",null,function(t){if(this._type|=8192,"string"==typeof t){if(this._calculation("height",t))return;t=parseInt(t)}this.size(-1,t)}),__getset(0,i,"width",null,function(t){if(this._type|=8,"string"==typeof t){var e=t.indexOf("auto");if(e>=0&&(this._type|=262144,t=t.substr(0,e)),this._calculation("width",t))return;t=parseInt(t)}this.size(t,-1)}),__getset(0,i,"fontWeight",function(){return this._font.weight},function(t){this._createFont().weight=t}),__getset(0,i,"left",null,function(t){var e=this._ower;if("string"==typeof t){if("center"===t?t="50% -50% 0":"right"===t&&(t="100% -100% 0"),this._calculation("left",t))return;t=parseInt(t)}e.x=t}),__getset(0,i,"_translate",null,function(t){this.translate(t[0],t[1])}),__getset(0,i,"absolute",function(){return 0!==(4&this._type)}),__getset(0,i,"top",null,function(t){var e=this._ower;if("string"==typeof t){if("middle"===t?t="50% -50% 0":"bottom"===t&&(t="100% -100% 0"),this._calculation("top",t))return;t=parseInt(t)}e.y=t}),__getset(0,i,"align",function(){return e._aligndef[this._aligns[0]]},function(t){this._aligns===e._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=e._aligndef[t]}),__getset(0,i,"bold",function(){return this._font.bold},function(t){this._createFont().bold=t}),__getset(0,i,"padding",function(){return this._padding},function(t){this._padding=t}),__getset(0,i,"leading",function(){return this._spacing[1]},function(t){"string"==typeof t&&(t=parseInt(t+"")),this._spacing===e._SPACING&&(this._spacing=[0,0]),this._spacing[1]=t}),__getset(0,i,"lineElement",function(){return 0!=(65536&this._type)},function(t){t?this._type|=65536:this._type&=-65537}),__getset(0,i,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(t){this.lineElement=!1,"right"===t?this._type|=32768:this._type&=-32769}),__getset(0,i,"textDecoration",function(){return this._font.decoration},function(t){this._createFont().decoration=t}),__getset(0,i,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(t){"nowrap"===t&&(this._type|=131072),"none"===t&&(this._type&=-131073)}),__getset(0,i,"background",null,function(t){return t?(this._bgground||(this._bgground={}),this._bgground.color=t,this._ower.conchModel&&this._ower.conchModel.bgColor(t),this._type|=16384,void(this._ower._renderType|=256)):void(this._bgground=null)}),__getset(0,i,"wordWrap",function(){return 0===(131072&this._type)},function(t){t?this._type&=-131073:this._type|=131072}),__getset(0,i,"color",function(){return this._font.color},function(t){this._createFont().color=t}),__getset(0,i,"password",function(){return this._font.password},function(t){this._createFont().password=t}),__getset(0,i,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(t){"none"===t?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=t),this._ower.conchModel&&this._ower.conchModel.bgColor(t),this._ower._renderType|=256}),__getset(0,i,"font",function(){return this._font.toString()},function(t){this._createFont().set(t)}),__getset(0,i,"weight",null,function(t){this._createFont().weight=t}),__getset(0,i,"letterSpacing",function(){return this._spacing[0]},function(t){"string"==typeof t&&(t=parseInt(t+"")),this._spacing===e._SPACING&&(this._spacing=[0,0]),this._spacing[0]=t}),__getset(0,i,"fontSize",function(){return this._font.size},function(t){this._createFont().size=t}),__getset(0,i,"italic",function(){return this._font.italic},function(t){this._createFont().italic=t}),__getset(0,i,"fontFamily",function(){return this._font.family},function(t){this._createFont().family=t}),__getset(0,i,"stroke",function(){return this._font.stroke[0]},function(t){this._createFont().stroke===Font._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=t}),__getset(0,i,"strokeColor",function(){return this._font.stroke[1]},function(t){this._createFont().stroke===Font._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=t}),__getset(0,i,"border",function(){return this._border?this._border.value:""},function(t){if("none"==t)return void(this._border=null);this._border||(this._border={}),this._border.value=t;var e=t.split(" ");if(this._border.color=Color.create(e[e.length-1]),1==e.length)return this._border.size=1,void(this._border.type="solid");var i=0;e[0].indexOf("px")>0?(this._border.size=parseInt(e[0]),i++):this._border.size=1,this._border.type=e[i],this._ower._renderType|=256}),__getset(0,i,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(t){return t?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==t?null:Color.create(t),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),void(this._ower._renderType|=256)):void(this._border=null)}),__getset(0,i,"position",function(){return 4&this._type?"absolute":""},function(t){"absolute"==t?this._type|=4:this._type&=-5}),__getset(0,i,"display",null,function(t){switch(t){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),__getset(0,i,"paddingLeft",function(){return this.padding[3]}),__getset(0,i,"paddingTop",function(){return this.padding[0]}),__getset(0,i,"_scale",null,function(t){this._ower.scale(t[0],t[1])}),__getset(0,i,"_rotate",null,function(t){this._ower.rotation=t}),e.parseOneCSS=function(t,i){for(var n,s=[],r=t.split(i),a=0,o=r.length;o>a;a++){var h=r[a],l=h.indexOf(":"),c=h.substr(0,l).replace(/^\s+|\s+$/g,"");if(0!=c.length){var u=h.substr(l+1).replace(/^\s+|\s+$/g,""),_=[c,u];switch(c){case"italic":case"bold":_[1]="true"==u;break;case"line-height":_[0]="lineHeight",_[1]=parseInt(u);break;case"font-size":_[0]="fontSize",_[1]=parseInt(u);break;case"padding":n=u.split(" "),n.length>1||(n[1]=n[2]=n[3]=n[0]),_[1]=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])];break;case"rotate":_[0]="_rotate",_[1]=parseFloat(u);break;case"scale":n=u.split(" "),_[0]="_scale",_[1]=[parseFloat(n[0]),parseFloat(n[1])];break;case"translate":n=u.split(" "),_[0]="_translate",_[1]=[parseInt(n[0]),parseInt(n[1])];break;default:(_[0]=e._CSSTOVALUE[c])||(_[0]=c)}s.push(_)}}return s},e.parseCSS=function(t,i){for(var n;null!=(n=e._parseCSSRegExp.exec(t));)e.styleSheets[n[1]]=e.parseOneCSS(n[2],";")},e.EMPTY=new e(null),e._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor","float":"cssFloat"},e._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),e._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},e._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},e.styleSheets={},e.ALIGN_CENTER=1,e.ALIGN_RIGHT=2,e.VALIGN_MIDDLE=1,e.VALIGN_BOTTOM=2,e._CSS_BLOCK=1,e._DISPLAY_NONE=2,e._ABSOLUTE=4,e._WIDTH_SET=8,e._PADDING=[0,0,0,0],e._RECT=[-1,-1,-1,-1],e._SPACING=[0,0],e._ALIGNS=[0,0,0],e.ADDLAYOUTED=512,e._NEWFONT=4096,e._HEIGHT_SET=8192,e._BACKGROUND_SET=16384,e._FLOAT_RIGHT=32768,e._LINE_ELEMENT=65536,e._NOWARP=131072,e._WIDTHAUTO=262144,e._LISTERRESZIE=524288,e}(Style),ColorFilter=function(t){function e(t){e.__super.call(this),t||(t=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var i=0,n=0,s=0;20>s;s++)s%5!=4?this._mat[i++]=t[s]:this._alpha[n++]=t[s];this._action=RunDriver.createFilterAction(32),this._action.data=this}__class(e,"laya.filters.ColorFilter",t);var i=e.prototype;return Laya.imps(i,{"laya.filters.IFilter":!0}),i.callNative=function(t){t._$P.cf=this;t.conchModel&&t.conchModel.setFilterMatrix&&t.conchModel.setFilterMatrix(this._mat,this._alpha)},__getset(0,i,"type",function(){return 32}),__getset(0,i,"action",function(){return this._action}),e}(Filter),ColorFilterActionGL=function(t){function e(){this.data=null,e.__super.call(this)}__class(e,"laya.filters.webgl.ColorFilterActionGL",t);var i=e.prototype;return Laya.imps(i,{"laya.filters.IFilterActionGL":!0}),i.setValue=function(t){t.colorMat=this.data._mat,t.colorAlpha=this.data._alpha},i.apply3d=function(t,e,i,n,s){var r=t.getValue("bounds"),a=Value2D.create(1,0);a.setFilters([this.data]);var o=Matrix.TEMP;o.identity(),i.ctx.drawTarget(t,0,0,r.width,r.height,o,"src",a)},e}(FilterActionGL),GGraph=function(t){function e(){this._type=0,this._lineSize=NaN,this._lineColor=null,this._fillColor=null,this._cornerRadius=null,this._hitArea=null,e.__super.call(this),this._type=0,this._lineSize=1,this._lineColor="#000000",this._fillColor="#FFFFFF",this._cornerRadius=null}__class(e,"fairygui.GGraph",t);var i=e.prototype;return Laya.imps(i,{"fairygui.gears.IColorGear":!0}),i.drawRect=function(t,e,i,n){this._type=1,this._lineSize=t,this._lineColor=e,this._fillColor=i,this._cornerRadius=n,this.drawCommon()},i.drawEllipse=function(t,e,i){this._type=2,this._lineSize=t,this._lineColor=e,this._fillColor=i,this.drawCommon()},i.drawCommon=function(){this._displayObject.mouseEnabled=this.touchable;var t=this._displayObject.graphics;t.clear();var e=this.width,i=this.height;if(0!=e&&0!=i){var n=this._fillColor,s=this._lineColor;if(Render.isWebGL&&ToolSet.startsWith(n,"rgba")){var r=n.substring(5,n.lastIndexOf(")")).split(","),a=parseFloat(r[3]);0==a?n=null:(n=Utils$1.toHexColor((parseInt(r[0])<<16)+(parseInt(r[1])<<8)+parseInt(r[2])),this.alpha=a)}if(1==this._type)if(null!=this._cornerRadius){var o=[["moveTo",this._cornerRadius[0],0],["lineTo",e-this._cornerRadius[1],0],["arcTo",e,0,e,this._cornerRadius[1],this._cornerRadius[1]],["lineTo",e,i-this._cornerRadius[3]],["arcTo",e,i,e-this._cornerRadius[3],i,this._cornerRadius[3]],["lineTo",this._cornerRadius[2],i],["arcTo",0,i,0,i-this._cornerRadius[2],this._cornerRadius[2]],["lineTo",0,this._cornerRadius[0]],["arcTo",0,0,this._cornerRadius[0],0,this._cornerRadius[0]],["closePath"]];t.drawPath(0,0,o,{fillStyle:n},this._lineSize>0?{strokeStyle:s,lineWidth:this._lineSize}:null)}else t.drawRect(0,0,e,i,n,this._lineSize>0?s:null,this._lineSize);else t.drawCircle(e/2,i/2,e/2,n,this._lineSize>0?s:null,this._lineSize);this._displayObject.repaint()}},i.replaceMe=function(t){if(!this._parent)throw"parent not set";t.name=this.name,t.alpha=this.alpha,t.rotation=this.rotation,t.visible=this.visible,t.touchable=this.touchable,t.grayed=this.grayed,t.setXY(this.x,this.y),t.setSize(this.width,this.height);var e=this._parent.getChildIndex(this);this._parent.addChildAt(t,e),t.relations.copyFrom(this.relations),this._parent.removeChild(this,!0)},i.addBeforeMe=function(t){if(null==this._parent)throw"parent not set";var e=this._parent.getChildIndex(this);this._parent.addChildAt(t,e)},i.addAfterMe=function(t){if(null==this._parent)throw"parent not set";var e=this._parent.getChildIndex(this);e++,this._parent.addChildAt(t,e)},i.setNativeObject=function(t){this._type=0,this._displayObject.mouseEnabled=this.touchable,this._displayObject.graphics.clear(),this._displayObject.addChild(t)},i.createDisplayObject=function(){t.prototype.createDisplayObject.call(this),this._displayObject.mouseEnabled=!1,this._hitArea=new HitArea,this._hitArea.hit=this._displayObject.graphics,this._displayObject.hitArea=this._hitArea},i.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),0!=this._type&&this.drawCommon()},i.setup_beforeAdd=function(e,i){if(t.prototype.setup_beforeAdd.call(this,e,i),e.seek(i,5),this._type=e.readByte(),0!=this._type){if(this._lineSize=e.getInt32(),this._lineColor=e.readColorS(!0),this._fillColor=e.readColorS(!0),e.readBool()){this._cornerRadius=[];for(var n=0;4>n;n++)this._cornerRadius[n]=e.getFloat32()}this.drawCommon()}},__getset(0,i,"color",function(){return this._fillColor},function(t){this._fillColor=t,0!=this._type&&this.drawCommon()}),e}(GObject),GGroup=function(t){function e(){this._layout=0,this._lineGap=0,this._columnGap=0,this._percentReady=!1,this._boundsChanged=!1,this._updating=0,e.__super.call(this)}__class(e,"fairygui.GGroup",t);var i=e.prototype;return i.setBoundsChangedFlag=function(t){void 0===t&&(t=!1),0==this._updating&&null!=this.parent&&(t&&(this._percentReady=!1),this._boundsChanged||(this._boundsChanged=!0,0!=this._layout&&Laya.timer.callLater(this,this.ensureBoundsCorrect)))},i.ensureBoundsCorrect=function(){this._boundsChanged&&this.updateBounds()},i.updateBounds=function(){if(Laya.timer.clear(this,this.ensureBoundsCorrect),this._boundsChanged=!1,null!=this.parent){this.handleLayout();var t,e=this._parent.numChildren,i=0,n=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=0,h=!0;for(i=0;e>i;i++)t=this._parent.getChildAt(i),t.group==this&&(o=t.x,n>o&&(n=o),o=t.y,s>o&&(s=o),o=t.x+t.width,o>r&&(r=o),o=t.y+t.height,o>a&&(a=o),h=!1);h?(this._updating=2,this.setSize(0,0)):(this._updating=1,this.setXY(n,s),this._updating=2,this.setSize(r-n,a-s)),this._updating=0}},i.handleLayout=function(){this._updating|=1;var t,e=0,i=0;if(1==this._layout){var n=NaN;for(i=this.parent.numChildren,e=0;i>e;e++)t=this.parent.getChildAt(e),t.group==this&&(isNaN(n)?n=Math.floor(t.x):t.x=n,0!=t.width&&(n+=Math.floor(t.width+this._columnGap)));this._percentReady||this.updatePercent()}else if(2==this._layout){var s=NaN;for(i=this.parent.numChildren,e=0;i>e;e++)t=this.parent.getChildAt(e),t.group==this&&(isNaN(s)?s=Math.floor(t.y):t.y=s,0!=t.height&&(s+=Math.floor(t.height+this._lineGap)));this._percentReady||this.updatePercent()}this._updating&=2},i.updatePercent=function(){this._percentReady=!0;var t,e=this.parent.numChildren,i=0,n=0;if(1==this._layout){for(i=0;e>i;i++)t=this.parent.getChildAt(i),t.group==this&&(n+=t.width);for(i=0;e>i;i++)t=this.parent.getChildAt(i),t.group==this&&(n>0?t._sizePercentInGroup=t.width/n:t._sizePercentInGroup=0)}else{for(i=0;e>i;i++)t=this.parent.getChildAt(i),t.group==this&&(n+=t.height);for(i=0;e>i;i++)t=this.parent.getChildAt(i),t.group==this&&(n>0?t._sizePercentInGroup=t.height/n:t._sizePercentInGroup=0)}},i.moveChildren=function(t,e){if(0==(1&this._updating)&&null!=this.parent){this._updating|=1;var i,n=this.parent.numChildren,s=0;for(s=0;n>s;s++)i=this.parent.getChildAt(s),i.group==this&&i.setXY(i.x+t,i.y+e);this._updating&=2}},i.resizeChildren=function(t,e){if(0!=this._layout&&0==(2&this._updating)&&null!=this.parent){this._updating|=2,this._percentReady||this.updatePercent();var i,n=this.parent.numChildren,s=0,r=0,a=-1,o=0,h=0,l=0,c=!1;for(s=0;n>s;s++)i=this.parent.getChildAt(s),i.group==this&&(a=s,o++);if(1==this._layout){l=h=this.width-(o-1)*this._columnGap;var u=NaN,_=NaN;for(s=0;n>s;s++)if(i=this.parent.getChildAt(s),i.group==this)if(isNaN(u)?u=Math.floor(i.x):i.x=u,_=a==s?l:Math.round(i._sizePercentInGroup*h),i.setSize(_,i._rawHeight+e,!0),l-=i.width,a==s){if(l>=1)for(r=0;s>=r;r++)i=this.parent.getChildAt(r),i.group==this&&(c?i.x+=l:(_=i.width+l,(0==i.maxWidth||_<i.maxWidth)&&(0==i.minWidth||_>i.minWidth)&&(i.setSize(_,i.height,!0),c=!0)))}else u+=i.width+this._columnGap}else if(2==this._layout){l=h=this.height-(o-1)*this._lineGap;var d=NaN,f=NaN;for(s=0;n>s;s++)if(i=this.parent.getChildAt(s),i.group==this)if(isNaN(d)?d=Math.floor(i.y):i.y=d,f=a==s?l:Math.round(i._sizePercentInGroup*h),i.setSize(i._rawWidth+t,f,!0),l-=i.height,a==s){if(l>=1)for(r=0;s>=r;r++)i=this.parent.getChildAt(r),i.group==this&&(c?i.y+=l:(f=i.height+l,(0==i.maxHeight||f<i.maxHeight)&&(0==i.minHeight||f>i.minHeight)&&(i.setSize(i.width,f,!0),c=!0)))}else d+=i.height+this._lineGap}this._updating&=1}},i.handleAlphaChanged=function(){if(!this._underConstruct)for(var t=this._parent.numChildren,e=0;t>e;e++){var i=this._parent.getChildAt(e);i.group==this&&(i.alpha=this.alpha)}},i.handleVisibleChanged=function(){if(this._parent)for(var t=this._parent.numChildren,e=0;t>e;e++){var i=this._parent.getChildAt(e);i.group==this&&i.handleVisibleChanged()}},i.setup_beforeAdd=function(e,i){t.prototype.setup_beforeAdd.call(this,e,i),e.seek(i,5),this._layout=e.readByte(),this._lineGap=e.getInt32(),this._columnGap=e.getInt32()},i.setup_afterAdd=function(e,i){t.prototype.setup_afterAdd.call(this,e,i),this.visible||this.handleVisibleChanged()},__getset(0,i,"layout",function(){return this._layout},function(t){this._layout!=t&&(this._layout=t,this.setBoundsChangedFlag(!0))}),__getset(0,i,"columnGap",function(){return this._columnGap},function(t){this._columnGap!=t&&(this._columnGap=t,this.setBoundsChangedFlag())}),__getset(0,i,"lineGap",function(){return this._lineGap},function(t){this._lineGap!=t&&(this._lineGap=t,this.setBoundsChangedFlag())}),e}(GObject),GImage=function(t){function e(){this.image=null,this._flip=0,e.__super.call(this)}__class(e,"fairygui.GImage",t);var i=e.prototype;return Laya.imps(i,{"fairygui.gears.IColorGear":!0}),i.createDisplayObject=function(){this._displayObject=this.image=new Image$1,this.image.mouseEnabled=!1,this._displayObject.$owner=this},i.constructFromResource=function(){this.packageItem.load(),this.sourceWidth=this.packageItem.width,this.sourceHeight=this.packageItem.height,this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this.image.scale9Grid=this.packageItem.scale9Grid,this.image.scaleByTile=this.packageItem.scaleByTile,this.image.tileGridIndice=this.packageItem.tileGridIndice,this.image.texture=this.packageItem.texture,this.setSize(this.sourceWidth,this.sourceHeight)},i.handleXYChanged=function(){t.prototype.handleXYChanged.call(this),0!=this._flip&&(-1==this.scaleX&&(this.image.x+=this.width),-1==this.scaleY&&(this.image.y+=this.height))},i.setup_beforeAdd=function(e,i){t.prototype.setup_beforeAdd.call(this,e,i),e.seek(i,5),e.readBool()&&(this.color=e.readColorS()),this.flip=e.readByte(),this.image.fillMethod=e.readByte(),0!=this.image.fillMethod&&(this.image.fillOrigin=e.readByte(),this.image.fillClockwise=e.readBool(),this.image.fillAmount=e.getFloat32())},__getset(0,i,"color",function(){return this.image.color},function(t){this.image.color!=t&&(this.image.color=t,this.updateGear(4))}),__getset(0,i,"fillClockwise",function(){return this.image.fillClockwise},function(t){this.image.fillClockwise=t}),__getset(0,i,"flip",function(){return this._flip},function(t){if(this._flip!=t){this._flip=t;var e=1,i=1;1!=this._flip&&3!=this._flip||(e=-1),2!=this._flip&&3!=this._flip||(i=-1),this.setScale(e,i),this.handleXYChanged()}}),__getset(0,i,"fillMethod",function(){
return this.image.fillMethod},function(t){this.image.fillMethod=t}),__getset(0,i,"fillOrigin",function(){return this.image.fillOrigin},function(t){this.image.fillOrigin=t}),__getset(0,i,"fillAmount",function(){return this.image.fillAmount},function(t){this.image.fillAmount=t}),e}(GObject),Controller=function(t){function e(){this._selectedIndex=0,this._previousIndex=0,this._pageIds=null,this._pageNames=null,this._actions=null,this.name=null,this.parent=null,this.autoRadioGroupDepth=!1,this.changing=!1,e.__super.call(this),this._pageIds=[],this._pageNames=[],this._selectedIndex=-1,this._previousIndex=-1}__class(e,"fairygui.Controller",t);var i=e.prototype;return i.dispose=function(){this.offAll()},i.setSelectedIndex=function(t){if(void 0===t&&(t=0),this._selectedIndex!=t){if(t>this._pageIds.length-1)throw"index out of bounds: "+t;this.changing=!0,this._previousIndex=this._selectedIndex,this._selectedIndex=t,this.parent.applyController(this),this.changing=!1}},i.setSelectedPage=function(t){var e=this._pageNames.indexOf(t);-1==e&&(e=0),this.setSelectedIndex(e)},i.getPageName=function(t){return void 0===t&&(t=0),this._pageNames[t]},i.addPage=function(t){void 0===t&&(t=""),this.addPageAt(t,this._pageIds.length)},i.addPageAt=function(t,e){void 0===e&&(e=0);var i=""+fairygui.Controller._nextPageId++;e==this._pageIds.length?(this._pageIds.push(i),this._pageNames.push(t)):(this._pageIds.splice(e,0,i),this._pageNames.splice(e,0,t))},i.removePage=function(t){var e=this._pageNames.indexOf(t);-1!=e&&(this._pageIds.splice(e,1),this._pageNames.splice(e,1),this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this.parent.applyController(this))},i.removePageAt=function(t){void 0===t&&(t=0),this._pageIds.splice(t,1),this._pageNames.splice(t,1),this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this.parent.applyController(this)},i.clearPages=function(){this._pageIds.length=0,this._pageNames.length=0,-1!=this._selectedIndex?this.selectedIndex=-1:this.parent.applyController(this)},i.hasPage=function(t){return-1!=this._pageNames.indexOf(t)},i.getPageIndexById=function(t){return this._pageIds.indexOf(t)},i.getPageIdByName=function(t){var e=this._pageNames.indexOf(t);return-1!=e?this._pageIds[e]:null},i.getPageNameById=function(t){var e=this._pageIds.indexOf(t);return-1!=e?this._pageNames[e]:null},i.getPageId=function(t){return void 0===t&&(t=0),this._pageIds[t]},i.runActions=function(){if(this._actions)for(var t=this._actions.length,e=0;t>e;e++)this._actions[e].run(this,this.previousPageId,this.selectedPageId)},i.setup=function(t){var e=t.pos;t.seek(e,0),this.name=t.readS(),this.autoRadioGroupDepth=t.readBool(),t.seek(e,1);var i=0,n=0,s=t.getInt16();for(i=0;s>i;i++)this._pageIds.push(t.readS()),this._pageNames.push(t.readS());if(t.seek(e,2),s=t.getInt16(),s>0)for(null==this._actions&&(this._actions=[]),i=0;s>i;i++){n=t.getInt16(),n+=t.pos;var r=ControllerAction.createAction(t.readByte());r.setup(t),this._actions.push(r),t.pos=n}null!=this.parent&&this._pageIds.length>0?this._selectedIndex=0:this._selectedIndex=-1},__getset(0,i,"selectedIndex",function(){return this._selectedIndex},function(t){if(this._selectedIndex!=t){if(t>this._pageIds.length-1)throw"index out of bounds: "+t;this.changing=!0,this._previousIndex=this._selectedIndex,this._selectedIndex=t,this.parent.applyController(this),this.event("fui_state_changed"),this.changing=!1}}),__getset(0,i,"selectedPage",function(){return-1==this._selectedIndex?null:this._pageNames[this._selectedIndex]},function(t){var e=this._pageNames.indexOf(t);-1==e&&(e=0),this.selectedIndex=e}),__getset(0,i,"previsousIndex",function(){return this._previousIndex}),__getset(0,i,"previousPage",function(){return-1==this._previousIndex?null:this._pageNames[this._previousIndex]}),__getset(0,i,"pageCount",function(){return this._pageIds.length}),__getset(0,i,"selectedPageId",function(){return-1==this._selectedIndex?null:this._pageIds[this._selectedIndex]},function(t){var e=this._pageIds.indexOf(t);this.selectedIndex=e}),__getset(0,i,"previousPageId",function(){return-1==this._previousIndex?null:this._pageIds[this._previousIndex]}),__getset(0,i,"oppositePageId",null,function(t){var e=this._pageIds.indexOf(t);e>0?this.selectedIndex=0:this._pageIds.length>1&&(this.selectedIndex=1)}),e._nextPageId=0,e}(EventDispatcher),GraphicsGL=function(t){function e(){e.__super.call(this)}__class(e,"laya.webgl.display.GraphicsGL",t);var i=e.prototype;return i.setShader=function(t){this._saveToCmd(Render.context._setShader,[t])},i.setIBVB=function(t,e,i,n,s,r){this._saveToCmd(Render.context._setIBVB,[t,e,i,n,s,r])},i.drawParticle=function(t,e,i){var n=RunDriver.createParticleTemplate2D(i);n.x=t,n.y=e,this._saveToCmd(Render.context._drawParticle,[n])},e}(Graphics),Value2D=function(t){function e(t,i){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,e.__super.call(this),this.defines=new ShaderDefines2D,this.position=e._POSITION,this.mainID=t,this.subID=i,this.textureHost=null,this.texture=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=t|i,this._inClassCache=e._cache[this._cacheID],t>0&&!this._inClassCache&&(this._inClassCache=e._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}__class(e,"laya.webgl.shader.d2.value.Value2D",t);var i=e.prototype;return i.setValue=function(t){},i.refresh=function(){var t=this.size;return t[0]=RenderState2D.width,t[1]=RenderState2D.height,this.alpha=this.ALPHA*RenderState2D.worldAlpha,this.mmat=RenderState2D.worldMatrix4,this},i._ShaderWithCompile=function(){return Shader.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,Shader2X.create)},i._withWorldShaderDefines=function(){var t=RenderState2D.worldShaderDefines,e=Shader.sharders[this.mainID|this.defines._value|t.getValue()];if(!e){var i,n,s={};i=this.defines.toNameDic();for(n in i)s[n]="";i=t.toNameDic();for(n in i)s[n]="";e=Shader.withCompile2D(0,this.mainID,s,this.mainID|this.defines._value|t.getValue(),Shader2X.create)}var r=RenderState2D.worldFilters;if(!r)return e;for(var a,o=r.length,h=0;o>h;h++)(a=r[h])&&a.action.setValue(this);return e},i.upload=function(){var t=RenderState2D;this.alpha=this.ALPHA*t.worldAlpha,RenderState2D.worldMatrix4!==RenderState2D.TEMPMAT4_ARRAY&&this.defines.add(128),WebGL.frameShaderHighPrecision&&this.defines.add(1024);var e,i=t.worldShaderDefines?this._withWorldShaderDefines():Shader.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=t.width,this.size[1]=t.height,this.mmat=t.worldMatrix4,BaseShader.activeShader!==i?(i._shaderValueWidth!==t.width||i._shaderValueHeight!==t.height?(i._shaderValueWidth=t.width,i._shaderValueHeight=t.height):e=i._params2dQuick2||i._make2dQuick2(),i.upload(this,e)):(i._shaderValueWidth!==t.width||i._shaderValueHeight!==t.height?(i._shaderValueWidth=t.width,i._shaderValueHeight=t.height):e=i._params2dQuick1||i._make2dQuick1(),i.upload(this,e))},i.setFilters=function(t){if(this.filters=t,t)for(var e,i=t.length,n=0;i>n;n++)e=t[n],e&&(this.defines.add(e.type),e.action.setValue(this))},i.clear=function(){this.defines.setValue(this.subID)},i.release=function(){this._inClassCache[this._inClassCache._length++]=this,this.fillStyle=null,this.strokeStyle=null,this.clear()},e._initone=function(t,i){e._typeClass[t]=i,e._cache[t]=[],e._cache[t]._length=0},e.__init__=function(){e._POSITION=[2,5126,!1,4*CONST3D2D.BYTES_PE,0],e._TEXCOORD=[2,5126,!1,4*CONST3D2D.BYTES_PE,2*CONST3D2D.BYTES_PE],e._initone(2,Color2dSV),e._initone(4,PrimitiveSV),e._initone(256,FillTextureSV$1),e._initone(512,SkinSV),e._initone(1,TextureSV),e._initone(65,TextSV),e._initone(9,TextureSV)},e.create=function(t,i){var n=e._cache[t|i];return n._length?n[--n._length]:new e._typeClass[t|i](i)},e._POSITION=null,e._TEXCOORD=null,e._cache=[],e._typeClass=[],e.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e}(ShaderValue),WebGLContext2D=function(t){function e(t){this._x=0,this._y=0,this._id=++e._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=[],this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,e.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=e.MAXCLIPRECT,this._shader2D=new Shader2D,this.mOutPoint,this._canvas=t,this._curMat=Matrix.create(),Render.isFlash?(this._ib=IndexBuffer2D.create(35044),GlUtils.fillIBQuadrangle(this._ib,16)):this._ib=IndexBuffer2D.QuadrangleIB,this._vb=VertexBuffer2D.create(-1),this._other=i.DEFAULT,this._save=[SaveMark.Create(this)],this._save.length=10,this.clear()}var i;__class(e,"laya.webgl.canvas.WebGLContext2D",t);var n=e.prototype;return n.setIsMainContext=function(){this._isMain=!0},n.clearBG=function(t,e,i,n){var s=WebGL.mainContext;s.clearColor(t,e,i,n),s.clear(16384)},n._getSubmits=function(){return this._submits},n.destroy=function(){this.sprite=null,this._curMat&&this._curMat.destroy(),this._targets&&this._targets.destroy(),this._targets=null;for(var t=0,e=this._submits._length;e>t;t++)this._submits[t].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._vb&&(this._vb.releaseResource(),this._vb.dispose(),this._vb.destory(),this._vb=null),this._canvas=null,this._ib&&this._ib!=IndexBuffer2D.QuadrangleIB&&this._ib.releaseResource()},n.clear=function(){this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=i.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=e.MAXCLIPRECT,this._curSubmit=Submit.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=DrawStyle.DEFAULT;for(var t=0,n=this._submits._length;n>t;t++)this._submits[t].releaseRender();this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},n.size=function(t,e){if(this._width!=t||this._height!=e)if(0==t||0==e){0!=this._vb._byteLength&&(this._width=t,this._height=e,this._vb.clear(),this._vb.upload());for(var i=0,n=this._submits._length;n>i;i++)this._submits[i].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=t,this._height=e,this._targets&&this._targets.size(t,e),this._canvas.memorySize-=this._canvas.memorySize},n._getTransformMatrix=function(){return this._curMat},n.translate=function(t,e){0===t&&0===e||(SaveTranslate.save(this),this._curMat.bTransform&&(SaveTransform.save(this),this._curMat.transformPointN(Point.TEMP.setTo(t,e)),t=Point.TEMP.x,e=Point.TEMP.y),this._x+=t,this._y+=e)},n.save=function(){this._save[this._save._length++]=SaveMark.Create(this)},n.restore=function(){var t=this._save._length;if(!(1>t))for(var e=t-1;e>=0;e--){var i=this._save[e];if(i.restore(this),i.isSaveMark())return void(this._save._length=e)}},n._fillText=function(t,e,i,n,s,r,a,o,h){var l=this._shader2D,c=this._curSubmit.shaderValue,u=s?FontInContext.create(s):this._other.font;if(AtlasResourceManager.enabled)l.ALPHA!==c.ALPHA&&(l.glTexture=null),DrawText.drawText(this,t,e,this._curMat,u,h||this._other.textAlign,r,a,o,i,n);else{var _=(this._shader2D.defines.getValue(),r?Color.create(r)._color:l.colorAdd);l.ALPHA===c.ALPHA&&_===l.colorAdd&&c.colorAdd===l.colorAdd||(l.glTexture=null,l.colorAdd=_),DrawText.drawText(this,t,e,this._curMat,u,h||this._other.textAlign,r,a,o,i,n)}},n.fillWords=function(t,e,i,n,s){this._fillText(null,t,e,i,n,s,null,-1,null)},n.fillText=function(t,e,i,n,s,r){this._fillText(t,null,e,i,n,s,null,-1,r)},n.strokeText=function(t,e,i,n,s,r,a){this._fillText(t,null,e,i,n,null,s,r||1,a)},n.fillBorderText=function(t,e,i,n,s,r,a,o){this._fillBorderText(t,null,e,i,n,s,r,a,o)},n._fillBorderText=function(t,i,n,s,r,a,o,h,l){if(!AtlasResourceManager.enabled)return this._fillText(t,i,n,s,r,null,o,h||1,l),void this._fillText(t,i,n,s,r,a,null,-1,l);var c=this._shader2D,u=this._curSubmit.shaderValue;c.ALPHA!==u.ALPHA&&(c.glTexture=null);var _=r?(e._fontTemp.setFont(r),e._fontTemp):this._other.font;DrawText.drawText(this,t,i,this._curMat,_,l||this._other.textAlign,a,o,h||1,n,s)},n.fillBorderWords=function(t,e,i,n,s,r,a){this._fillBorderText(null,t,e,i,n,s,r,a,null)},n.fillRect=function(t,e,i,n,s){var r=this._vb;if(GlUtils.fillRectImgVb(r,this._clipRect,t,e,i,n,Texture.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var a=this._shader2D.fillStyle;s&&(this._shader2D.fillStyle=DrawStyle.create(s));var o=this._shader2D,h=this._curSubmit.shaderValue;if(o.fillStyle!==h.fillStyle||o.ALPHA!==h.ALPHA){o.glTexture=null;var l=this._curSubmit=Submit.create(this,this._ib,r,(r._byteLength-64)/32*3,Value2D.create(2,0));l.shaderValue.color=o.fillStyle._color._color,l.shaderValue.ALPHA=o.ALPHA,this._submits[this._submits._length++]=l}this._curSubmit._numEle+=6,this._shader2D.fillStyle=a}},n.fillTexture=function(t,e,i,n,s,r,a,o){if(!(t.loaded&&t.bitmap&&t.source))return void(this.sprite&&Laya.timer.callLater(this,this._repaintSprite));var h=this._vb,l=t.bitmap.width,c=t.bitmap.height,u=t.uv,_=a.x%t.width,d=a.y%t.height;if(l!=o.w||c!=o.h){if(!o.w&&!o.h)switch(o.oy=o.ox=0,r){case"repeat":o.width=n,o.height=s;break;case"repeat-x":o.width=n,0>d?t.height+d>s?o.height=s:o.height=t.height+d:(o.oy=d,t.height+d>s?o.height=s-d:o.height=t.height);break;case"repeat-y":0>_?t.width+_>n?o.width=n:o.width=t.width+_:(o.ox=_,t.width+_>n?o.width=n-_:o.width=t.width),o.height=s;break;default:o.width=n,o.height=s}o.w=l,o.h=c,o.uv=[0,0,o.width/l,0,o.width/l,o.height/c,0,o.height/c]}if(e+=o.ox,i+=o.oy,_-=o.ox,d-=o.oy,GlUtils.fillRectImgVb(h,this._clipRect,e,i,o.width,o.height,o.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var f=SubmitTexture.create(this,this._ib,h,(h._byteLength-64)/32*3,Value2D.create(256,0));this._submits[this._submits._length++]=f;var p=f.shaderValue;p.textureHost=t;var g=u[0]*l,m=u[1]*c,v=(u[2]-u[0])*l,y=(u[5]-u[3])*c,w=-_/l,b=-d/c;p.u_TexRange[0]=g/l,p.u_TexRange[1]=v/l,p.u_TexRange[2]=m/c,p.u_TexRange[3]=y/c,p.u_offset[0]=w,p.u_offset[1]=b,AtlasResourceManager.enabled&&!this._isMain&&f.addTexture(t,(h._byteLength>>2)-16),this._curSubmit=f,f._renderType=10017,f._numEle+=6}},n.setShader=function(t){SaveBase.save(this,524288,this._shader2D,!0),this._shader2D.shader=t},n.setFilters=function(t){SaveBase.save(this,1048576,this._shader2D,!0),this._shader2D.filters=t,this._curSubmit=Submit.RENDERBASE,this._renderKey=0,this._drawCount++},n.drawTexture=function(t,e,i,n,s,r,a){this._drawTextureM(t,e,i,n,s,r,a,null,1)},n.addTextureVb=function(t,e,i){var n=this._curSubmit._vb||this._vb,s=n._byteLength>>2;n.byteLength=s+16<<2;for(var r=n.getFloat32Array(),a=0;16>a;a+=4)r[s++]=t[a]+e,r[s++]=t[a+1]+i,r[s++]=t[a+2],r[s++]=t[a+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),n._upload=!0},n.willDrawTexture=function(t,e){if(!(t.loaded&&t.bitmap&&t.source))return this.sprite&&Laya.timer.callLater(this,this._repaintSprite),0;var i=t.bitmap,n=i.id+this._shader2D.ALPHA*e+10016;if(n==this._renderKey)return n;var s=this._shader2D,r=s.ALPHA,a=this._curSubmit.shaderValue;s.ALPHA*=e,this._renderKey=n,this._drawCount++,s.glTexture=i;var o=this._vb,h=null,l=o._byteLength/32*3;return h=SubmitTexture.create(this,this._ib,o,l,Value2D.create(1,0)),this._submits[this._submits._length++]=h,h.shaderValue.textureHost=t,h._renderType=10016,h._preIsSameTextureShader=10016===this._curSubmit._renderType&&s.ALPHA===a.ALPHA,this._curSubmit=h,s.ALPHA=r,n},n.drawTextures=function(t,i,n,s){if(!(t.loaded&&t.bitmap&&t.source))return void(this.sprite&&Laya.timer.callLater(this,this._repaintSprite));var r=this._clipRect;if(this._clipRect=e.MAXCLIPRECT,!this._drawTextureM(t,i[0],i[1],t.width,t.height,n,s,null,1))return void alert("drawTextures err");if(this._clipRect=r,Stat.drawCall++,!(i.length<4)){for(var a=this._curSubmit._vb||this._vb,o=this._curMat.a,h=this._curMat.d,l=2,c=i.length;c>l;l+=2)GlUtils.copyPreImgVb(a,(i[l]-i[l-2])*o,(i[l+1]-i[l-1])*h),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}},n._drawTextureM=function(t,e,i,n,s,r,a,o,h){if(!t.loaded||!t.source)return this.sprite&&Laya.timer.callLater(this,this._repaintSprite),!1;var l=this._curSubmit._vb||this._vb,c=t.bitmap;e+=r,i+=a,this._drawCount++;var u=c.id+this._shader2D.ALPHA*h+10016;if(u!=this._renderKey){this._renderKey=u;var _=this._curSubmit.shaderValue,d=this._shader2D,f=d.ALPHA;d.ALPHA*=h,d.glTexture=c;var p=this._vb,g=null,m=p._byteLength/32*3;g=SubmitTexture.create(this,this._ib,p,m,Value2D.create(1,0)),this._submits[this._submits._length++]=g,g.shaderValue.textureHost=t,g._renderType=10016,g._preIsSameTextureShader=10016===this._curSubmit._renderType&&d.ALPHA===_.ALPHA,this._curSubmit=g,l=this._curSubmit._vb||this._vb,d.ALPHA=f}return GlUtils.fillRectImgVb(l,this._clipRect,e,i,n||t.width,s||t.height,t.uv,o||this._curMat,this._x,this._y,0,0)?(AtlasResourceManager.enabled&&!this._isMain&&this._curSubmit.addTexture(t,(l._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0):!1},n._repaintSprite=function(){this.sprite.repaint()},n._drawText=function(t,e,i,n,s,r,a,o,h,l){var c=t.bitmap;this._drawCount++;var u=c.id+this._shader2D.ALPHA+10016;if(u!=this._renderKey){this._renderKey=u;var _=this._curSubmit.shaderValue,d=this._shader2D;d.glTexture=c;var f=this._vb,p=null,g=f._byteLength/32*3;p=AtlasResourceManager.enabled?SubmitTexture.create(this,this._ib,f,g,Value2D.create(1,0)):SubmitTexture.create(this,this._ib,f,g,TextSV.create()),p._preIsSameTextureShader=10016===this._curSubmit._renderType&&d.ALPHA===_.ALPHA,this._submits[this._submits._length++]=p,p.shaderValue.textureHost=t,p._renderType=10016,this._curSubmit=p}t.active();var m=this._curSubmit._vb||this._vb;GlUtils.fillRectImgVb(m,this._clipRect,e+a,i+o,n||t.width,s||t.height,t.uv,r||this._curMat,this._x,this._y,h,l,!0)&&(AtlasResourceManager.enabled&&!this._isMain&&this._curSubmit.addTexture(t,(m._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},n.drawTextureWithTransform=function(t,i,n,s,r,a,o,h,l){if(!a)return void this._drawTextureM(t,i,n,s,r,o,h,null,l);var c=this._curMat,u=this._x,_=this._y;(0!==o||0!==h)&&(this._x=o*c.a+h*c.c,this._y=h*c.d+o*c.b),a&&c.bTransform?(Matrix.mul(a,c,e._tmpMatrix),a=e._tmpMatrix,a._checkTransform()):(this._x+=c.tx,this._y+=c.ty),this._drawTextureM(t,i,n,s,r,0,0,a,l),this._x=u,this._y=_},n.fillQuadrangle=function(t,e,i,n,s){var r=this._curSubmit,a=this._vb,o=this._shader2D,h=r.shaderValue;if(this._renderKey=0,t.bitmap){var l=t.bitmap;o.glTexture==l&&o.ALPHA===h.ALPHA||(o.glTexture=l,r=this._curSubmit=Submit.create(this,this._ib,a,a._byteLength/32*3,Value2D.create(1,0)),r.shaderValue.glTexture=l,this._submits[this._submits._length++]=r),GlUtils.fillQuadrangleImgVb(a,e,i,n,t.uv,s||this._curMat,this._x,this._y)}else r.shaderValue.fillStyle&&r.shaderValue.fillStyle.equal(t)&&o.ALPHA===h.ALPHA||(o.glTexture=null,r=this._curSubmit=Submit.create(this,this._ib,a,a._byteLength/32*3,Value2D.create(2,0)),r.shaderValue.defines.add(2),r.shaderValue.fillStyle=DrawStyle.create(t),this._submits[this._submits._length++]=r),GlUtils.fillQuadrangleImgVb(a,e,i,n,Texture.DEF_UV,s||this._curMat,this._x,this._y);r._numEle+=6},n.drawTexture2=function(t,i,n,s,r,a,o,h){if(0!=a){var l=this._curMat;if(this._x=t*l.a+i*l.c,this._y=i*l.d+t*l.b,r&&(l.bTransform||r.bTransform?(Matrix.mul(r,l,e._tmpMatrix),r=e._tmpMatrix):(this._x+=r.tx+l.tx,this._y+=r.ty+l.ty,r=Matrix.EMPTY)),1!==a||o){var c=this._shader2D.ALPHA,u=this._nBlendType;this._shader2D.ALPHA=a,o&&(this._nBlendType=BlendMode.TOINT(o)),this._drawTextureM(h[0],h[1]-n,h[2]-s,h[3],h[4],0,0,r,1),this._shader2D.ALPHA=c,this._nBlendType=u}else this._drawTextureM(h[0],h[1]-n,h[2]-s,h[3],h[4],0,0,r,1);this._x=this._y=0}},n.drawCanvas=function(t,e,i,n,s){var r=t.context;if(this._renderKey=0,r._targets)this._submits[this._submits._length++]=SubmitCanvas.create(r,0,null),this._curSubmit=Submit.RENDERBASE,r._targets.drawTo(this,e,i,n,s);else{var a=this._submits[this._submits._length++]=SubmitCanvas.create(r,this._shader2D.ALPHA,this._shader2D.filters),o=n/t.width,h=s/t.height,l=a._matrix;this._curMat.copyTo(l),1!=o&&1!=h&&l.scale(o,h);var c=l.tx,u=l.ty;l.tx=l.ty=0,l.transformPoint(Point.TEMP.setTo(e,i)),l.translate(Point.TEMP.x+c,Point.TEMP.y+u),this._curSubmit=Submit.RENDERBASE}Config.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=r._targets?"yellow":"green",this.strokeRect(e-1,i-1,n+2,s+2,1),this.strokeRect(e,i,n,s,1),this.restore())},n.drawTarget=function(t,e,i,n,s,r,a,o,h,l){void 0===l&&(l=-1);var c=this._vb;if(GlUtils.fillRectImgVb(c,this._clipRect,e,i,n,s,h||Texture.DEF_UV,r||this._curMat,this._x,this._y,0,0)){this._renderKey=0;var u=this._shader2D;u.glTexture=null;var _=(this._curSubmit.shaderValue,this._curSubmit=SubmitTarget.create(this,this._ib,c,(c._byteLength-64)/32*3,o,a));-1==l?_.blendType=this._nBlendType:_.blendType=l,_.scope=t,this._submits[this._submits._length++]=_,this._curSubmit._numEle+=6}},n.transform=function(t,e,i,n,s,r){SaveTransform.save(this),Matrix.mul(Matrix.TEMP.setTo(t,e,i,n,s,r),this._curMat,this._curMat),this._curMat._checkTransform()},n.setTransformByMatrix=function(t){t.copyTo(this._curMat)},n.transformByMatrix=function(t){SaveTransform.save(this),Matrix.mul(t,this._curMat,this._curMat),this._curMat._checkTransform()},n.rotate=function(t){SaveTransform.save(this),this._curMat.rotateEx(t)},n.scale=function(t,e){SaveTransform.save(this),this._curMat.scaleEx(t,e)},n.clipRect=function(t,e,i,n){i*=this._curMat.a,n*=this._curMat.d;var s=Point.TEMP;this._curMat.transformPoint(s.setTo(t,e)),this._renderKey=0;var r=this._curSubmit=SubmitScissor.create(this);this._submits[this._submits._length++]=r,r.submitIndex=this._submits._length,r.submitLength=9999999,SaveClipRect.save(this,r);var a=this._clipRect,o=a.x,h=a.y,l=s.x+i,c=s.y+n;o<s.x&&(a.x=s.x),h<s.y&&(a.y=s.y),a.width=Math.min(l,o+a.width)-a.x,a.height=Math.min(c,h+a.height)-a.y,this._shader2D.glTexture=null,r.clipRect.copyFrom(a),this._curSubmit=Submit.RENDERBASE},n.setIBVB=function(t,e,i,n,s,r,a,o,h,l,c){if(void 0===h&&(h=0),void 0===l&&(l=0),void 0===c&&(c=0),null===i){if(Render.isFlash){var u=n;u._selfIB||(u._selfIB=IndexBuffer2D.create(35044)),u._selfIB.clear(),i=u._selfIB}else i=this._ib;GlUtils.expandIBQuadrangle(i,n.byteLength/(4*n.vertexStride*4))}if(!o||!a)throw Error("setIBVB must input:shader shaderValues");var _=SubmitOtherIBVB.create(this,n,i,s,a,o,h,l,c);r||(r=Matrix.EMPTY),r.translate(t,e),Matrix.mul(r,this._curMat,_._mat),r.translate(-t,-e),this._submits[this._submits._length++]=_,this._curSubmit=Submit.RENDERBASE,this._renderKey=0},n.addRenderObject=function(t){this._submits[this._submits._length++]=t},n.fillTrangles=function(t,e,i,n,s){var r=this._curSubmit,a=this._vb,o=this._shader2D,h=r.shaderValue,l=n.length>>4,c=t.bitmap;this._renderKey=0,o.glTexture==c&&o.ALPHA===h.ALPHA||(r=this._curSubmit=Submit.create(this,this._ib,a,a._byteLength/32*3,Value2D.create(1,0)),r.shaderValue.textureHost=t,this._submits[this._submits._length++]=r),GlUtils.fillTranglesVB(a,e,i,n,s||this._curMat,this._x,this._y),r._numEle+=6*l},n.submitElement=function(t,e){var i=this._submits;for(0>e&&(e=i._length);e>t;)t+=i[t].renderSubmit()},n.finish=function(){WebGL.mainContext.finish()},n.flush=function(){var t=Math.max(this._vb.byteLength/64,this._maxNumEle/6)+8;if(t>this._ib.bufferLength/12&&GlUtils.expandIBQuadrangle(this._ib,t),!this._isMain&&AtlasResourceManager.enabled&&AtlasResourceManager._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=AtlasResourceManager._atlasRestore;for(var e=this._submits,i=0,n=e._length;n>i;i++){var s=e[i];10016===s.getRenderType()&&s.checkTexture()}}return this.submitElement(0,this._submits._length),this._path&&this._path.reset(),SkinMeshBuffer.instance&&SkinMeshBuffer.getInstance().reset(),this._curSubmit=Submit.RENDERBASE,this._renderKey=0,this._submits._length},n.setPathId=function(t){if(this.mId=t,-1!=this.mId){this.mHaveKey=!1;var e=VectorGraphManager.getInstance();e.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,e.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},n.movePath=function(t,e){var i=t,n=e;t=this._curMat.a*i+this._curMat.c*n+this._curMat.tx,e=this._curMat.b*i+this._curMat.d*n+this._curMat.ty,this.mX+=t,this.mY+=e},n.beginPath=function(){var t=this._getPath();t.tempArray.length=0,t.closePath=!1,this.mX=0,this.mY=0},n.closePath=function(){this._path.closePath=!0},n.fill=function(t){void 0===t&&(t=!1);var e=this._getPath();this.drawPoly(0,0,e.tempArray,this.fillStyle._color.numColor,0,0,t)},n.stroke=function(){var t=this._getPath();if(this.lineWidth>0){if(-1==this.mId)t.drawLine(0,0,t.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var e=VectorGraphManager.getInstance().shapeLineDic[this.mId];e.rebuild(t.tempArray),t.setGeomtry(e)}else VectorGraphManager.getInstance().addLine(this.mId,t.drawLine(0,0,t.tempArray,this.lineWidth,this.strokeStyle._color.numColor));t.update();var i=[this.mX,this.mY],n=Submit.createShape(this,t.ib,t.vb,t.count,t.offset,Value2D.create(4,0));n.shaderValue.ALPHA=this._shader2D.ALPHA,n.shaderValue.u_pos=i,n.shaderValue.u_mmat2=RenderState2D.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=n}},n.line=function(t,e,i,n,s,r){var a=this._curSubmit,o=this._vb;if(GlUtils.fillLineVb(o,this._clipRect,t,e,i,n,s,r)){this._renderKey=0;var h=this._shader2D,l=a.shaderValue;h.strokeStyle===l.strokeStyle&&h.ALPHA===l.ALPHA||(h.glTexture=null,a=this._curSubmit=Submit.create(this,this._ib,o,(o._byteLength-64)/32*3,Value2D.create(2,0)),a.shaderValue.strokeStyle=h.strokeStyle,a.shaderValue.mainID=2,a.shaderValue.ALPHA=h.ALPHA,this._submits[this._submits._length++]=a),a._numEle+=6}},n.moveTo=function(t,e,i){void 0===i&&(i=!0);var n=this._getPath();if(i){var s=t,r=e;t=this._curMat.a*s+this._curMat.c*r,e=this._curMat.b*s+this._curMat.d*r}n.addPoint(t,e)},n.lineTo=function(t,e,i){void 0===i&&(i=!0);var n=this._getPath();if(i){var s=t,r=e;t=this._curMat.a*s+this._curMat.c*r,e=this._curMat.b*s+this._curMat.d*r}n.addPoint(t,e)},n.drawCurves=function(t,e,i){this.setPathId(-1),this.beginPath(),this.strokeStyle=i[3],this.lineWidth=i[4];var n=i[2];t+=i[0],e+=i[1],this.movePath(t,e),this.moveTo(n[0],n[1]);for(var s=2,r=n.length;r>s;)this.quadraticCurveTo(n[s++],n[s++],n[s++],n[s++]);this.stroke()},n.arcTo=function(t,e,i,n,s){if(-1==this.mId||!this.mHaveKey){var r=this._getPath(),a=r.getEndPointX(),o=r.getEndPointY(),h=NaN,l=NaN,c=NaN,u=NaN,_=NaN,d=NaN,f=NaN,p=NaN,g=NaN,m=NaN,v=!1,y=t,w=e;t=this._curMat.a*y+this._curMat.c*w,e=this._curMat.b*y+this._curMat.d*w,y=i,w=n,i=this._curMat.a*y+this._curMat.c*w,n=this._curMat.b*y+this._curMat.d*w,s=this._curMat.a*s+this._curMat.c*s,h=a-t,l=o-e,c=i-t,u=n-e,Point.TEMP.setTo(h,l),Point.TEMP.normalize(),h=Point.TEMP.x,l=Point.TEMP.y,Point.TEMP.setTo(c,u),Point.TEMP.normalize(),c=Point.TEMP.x,u=Point.TEMP.y,_=Math.acos(h*c+l*u);var b=Math.tan(_/2);if(d=s/b,d>1e4)return void this.lineTo(t,e);0>=h*u-c*l?(f=t+h*d+l*s,p=e+l*d-h*s,g=Math.atan2(h,-l),m=Math.atan2(-c,u),v=!1):(f=t+h*d-l*s,p=e+l*d+h*s,g=Math.atan2(-h,l),m=Math.atan2(c,-u),v=!0),this.arc(f,p,s,g,m,v,!1)}},n.arc=function(t,e,i,n,s,r,a){if(void 0===r&&(r=!1),void 0===a&&(a=!0),-1!=this.mId){var o=VectorGraphManager.getInstance().shapeDic[this.mId];if(o&&this.mHaveKey&&!o.needUpdate(this._curMat))return;t=0,e=0}var h=0,l=0,c=0,u=0,_=0,d=0,f=0,p=0,g=0,m=0,v=0;if(l=s-n,r)if(Math.abs(l)>=2*Math.PI)l=2*-Math.PI;else for(;l>0;)l-=2*Math.PI;else if(Math.abs(l)>=2*Math.PI)l=2*Math.PI;else for(;0>l;)l+=2*Math.PI;m=101>i?Math.max(10,l*i/5):201>i?Math.max(10,l*i/20):Math.max(10,l*i/40),c=l/m/2,u=Math.abs(4/3*(1-Math.cos(c))/Math.sin(c)),r&&(u=-u),v=0;var y=this._getPath(),w=NaN,b=NaN;for(g=0;m>=g;g++)h=n+l*(g/m),_=Math.cos(h),d=Math.sin(h),f=t+_*i,p=e+d*i,a&&(w=f,b=p,f=this._curMat.a*w+this._curMat.c*b,p=this._curMat.b*w+this._curMat.d*b),f==this._path.getEndPointX()&&p==this._path.getEndPointY()||y.addPoint(f,p);_=Math.cos(s),d=Math.sin(s),f=t+_*i,p=e+d*i,a&&(w=f,b=p,f=this._curMat.a*w+this._curMat.c*b,p=this._curMat.b*w+this._curMat.d*b),f==this._path.getEndPointX()&&p==this._path.getEndPointY()||y.addPoint(f,p)},n.quadraticCurveTo=function(t,e,i,n){var s=Bezier.I,r=i,a=n;i=this._curMat.a*r+this._curMat.c*a,n=this._curMat.b*r+this._curMat.d*a,r=t,a=e,t=this._curMat.a*r+this._curMat.c*a,e=this._curMat.b*r+this._curMat.d*a;for(var o=s.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),t,e,i,n],30,2),h=0,l=o.length/2;l>h;h++)this.lineTo(o[2*h],o[2*h+1],!1);this.lineTo(i,n,!1)},n.rect=function(t,e,i,n){this._other=this._other.make(),this._other.path||(this._other.path=new Path),this._other.path.rect(t,e,i,n)},n.strokeRect=function(t,e,i,n,s){var r=.5*s;this.line(t-r,e,t+i+r,e,s,this._curMat),this.line(t+i,e,t+i,e+n,s,this._curMat),this.line(t,e,t,e+n,s,this._curMat),this.line(t-r,e+n,t+i+r,e+n,s,this._curMat)},n.clip=function(){},n.drawPoly=function(t,e,i,n,s,r,a){void 0===a&&(a=!1),this._renderKey=0,this._shader2D.glTexture=null;var o=this._getPath();if(-1==this.mId)o.polygon(t,e,i,n,s?s:1,r);else if(this.mHaveKey){var h=VectorGraphManager.getInstance().shapeDic[this.mId];h.setMatrix(this._curMat),h.rebuild(o.tempArray),o.setGeomtry(h)}else{var l=o.polygon(t,e,i,n,s?s:1,r);VectorGraphManager.getInstance().addShape(this.mId,l),l.setMatrix(this._curMat)}o.update();var c,u=[this.mX,this.mY];if(!a){var _=SubmitStencil.create(4);this.addRenderObject(_),c=Submit.createShape(this,o.ib,o.vb,o.count,o.offset,Value2D.create(4,0)),c.shaderValue.ALPHA=this._shader2D.ALPHA,c.shaderValue.u_pos=u,c.shaderValue.u_mmat2=RenderState2D.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=c,_=SubmitStencil.create(5),this.addRenderObject(_)}if(c=Submit.createShape(this,o.ib,o.vb,o.count,o.offset,Value2D.create(4,0)),c.shaderValue.ALPHA=this._shader2D.ALPHA,c.shaderValue.u_pos=u,c.shaderValue.u_mmat2=RenderState2D.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=c,a||(_=SubmitStencil.create(3),this.addRenderObject(_)),s>0){if(this.mHaveLineKey){var d=VectorGraphManager.getInstance().shapeLineDic[this.mId];d.rebuild(o.tempArray),o.setGeomtry(d)}else VectorGraphManager.getInstance().addShape(this.mId,o.drawLine(t,e,i,s,r));o.update(),c=Submit.createShape(this,o.ib,o.vb,o.count,o.offset,Value2D.create(4,0)),c.shaderValue.ALPHA=this._shader2D.ALPHA,c.shaderValue.u_mmat2=RenderState2D.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=c}},n.drawParticle=function(t,e,i){i.x=t,i.y=e,this._submits[this._submits._length++]=i},n._getPath=function(){return this._path||(this._path=new Path)},__getset(0,n,"globalCompositeOperation",function(){return BlendMode.NAMES[this._nBlendType]},function(t){var e=BlendMode.TOINT[t];null==e||this._nBlendType===e||(SaveBase.save(this,65536,this,!0),this._curSubmit=Submit.RENDERBASE,this._renderKey=0,this._nBlendType=e)}),__getset(0,n,"strokeStyle",function(){return this._shader2D.strokeStyle},function(t){this._shader2D.strokeStyle.equal(t)||(SaveBase.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=DrawStyle.create(t))}),__getset(0,n,"globalAlpha",function(){return this._shader2D.ALPHA},function(t){t=Math.floor(1e3*t)/1e3,t!=this._shader2D.ALPHA&&(SaveBase.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=t)}),__getset(0,n,"asBitmap",null,function(t){if(t){if(this._targets||(this._targets=new RenderTargetMAX),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height);
}else this._targets=null}),__getset(0,n,"fillStyle",function(){return this._shader2D.fillStyle},function(t){this._shader2D.fillStyle.equal(t)||(SaveBase.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=DrawStyle.create(t))}),__getset(0,n,"textAlign",function(){return this._other.textAlign},function(t){this._other.textAlign===t||(this._other=this._other.make(),SaveBase.save(this,32768,this._other,!1),this._other.textAlign=t)}),__getset(0,n,"lineWidth",function(){return this._other.lineWidth},function(t){this._other.lineWidth===t||(this._other=this._other.make(),SaveBase.save(this,256,this._other,!1),this._other.lineWidth=t)}),__getset(0,n,"textBaseline",function(){return this._other.textBaseline},function(t){this._other.textBaseline===t||(this._other=this._other.make(),SaveBase.save(this,16384,this._other,!1),this._other.textBaseline=t)}),__getset(0,n,"font",null,function(t){t!=this._other.font.toString()&&(this._other=this._other.make(),SaveBase.save(this,8,this._other,!1),this._other.font===FontInContext.EMPTY?this._other.font=new FontInContext(t):this._other.font.setFont(t))}),e.__init__=function(){i.DEFAULT=new i},e._SUBMITVBSIZE=32e3,e._MAXSIZE=99999999,e._RECTVBSIZE=16,e.MAXCLIPRECT=new Rectangle(0,0,99999999,99999999),e._COUNT=0,e._tmpMatrix=new Matrix,__static(e,["_fontTemp",function(){return this._fontTemp=new FontInContext},"_drawStyleTemp",function(){return this._drawStyleTemp=new DrawStyle(null)}]),e.__init$=function(){i=function(){function t(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=FontInContext.EMPTY}__class(t,"");var e=t.prototype;return e.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=FontInContext.EMPTY},e.make=function(){return this===t.DEFAULT?new t:this},t.DEFAULT=null,t}()},e}(Context),Atlaser=function(t){function e(t,i,n,s,r){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,e.__super.call(this,t,i,r),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey=[],this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new AtlasWebGLCanvas,this._atlasCanvas.width=n,this._atlasCanvas.height=s,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}__class(e,"laya.webgl.atlas.Atlaser",t);var i=e.prototype;return i.computeUVinAtlasTexture=function(t,e,i,n){var s=AtlasResourceManager.atlasTextureWidth,r=AtlasResourceManager.atlasTextureHeight,a=i/s,o=n/r,h=(i+t.bitmap.width)/s,l=(n+t.bitmap.height)/r,c=t.bitmap.width/s,u=t.bitmap.height/r;t.uv=[a+e[0]*c,o+e[1]*u,h-(1-e[2])*c,o+e[3]*u,h-(1-e[4])*c,l-(1-e[5])*u,a+e[6]*c,l-(1-e[7])*u]},i.addToAtlasTexture=function(t,e,i){t instanceof laya.webgl.resource.WebGLImage&&(this._InAtlasWebGLImagesKey.push(t),this._InAtlasWebGLImagesOffsetValue.push([e,i])),this._atlasCanvas.texSubImage2D(e,i,t.atlasSource),t.clearAtlasSource()},i.addToAtlas=function(t,e,i){var n=t.uv.slice(),s=t.bitmap;this._inAtlasTextureKey.push(t),this._inAtlasTextureOriUVValue.push(n),this._inAtlasTextureBitmapValue.push(s),this.computeUVinAtlasTexture(t,n,e,i),t.bitmap=this._atlasCanvas},i.clear=function(){for(var t=0,e=this._inAtlasTextureKey.length;e>t;t++)this._inAtlasTextureKey[t].bitmap=this._inAtlasTextureBitmapValue[t],this._inAtlasTextureKey[t].uv=this._inAtlasTextureOriUVValue[t],this._inAtlasTextureKey[t].bitmap.lock=!1,this._inAtlasTextureKey[t].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey.length=0,this._InAtlasWebGLImagesOffsetValue.length=0},i.dispose=function(){this.clear(),this._atlasCanvas.dispose()},__getset(0,i,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),__getset(0,i,"texture",function(){return this._atlasCanvas}),__getset(0,i,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),e}(AtlasGrid),RenderSprite3D=function(t){function e(t,i){e.__super.call(this,t,i)}__class(e,"laya.webgl.utils.RenderSprite3D",t);var i=e.prototype;return i.onCreate=function(t){switch(t){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},i._mask=function(t,i,n,s){var r,a,o=this._next,h=t.mask;if(h){i.ctx.save();var l=i.ctx.globalCompositeOperation,c=new Rectangle;if(c.copyFrom(h.getBounds()),c.width=Math.round(c.width),c.height=Math.round(c.height),c.x=Math.round(c.x),c.y=Math.round(c.y),c.width>0&&c.height>0){var u=SubmitCMDScope.create();u.addValue("bounds",c),r=SubmitCMD.create([u,i],laya.webgl.utils.RenderSprite3D.tmpTarget),i.addRenderObject(r),h.render(i,-c.x,-c.y),r=SubmitCMD.create([u],laya.webgl.utils.RenderSprite3D.endTmpTarget),i.addRenderObject(r),i.ctx.save(),i.clipRect(n+c.x,s+c.y,c.width,c.height),o._fun.call(o,t,i,n,s),i.ctx.restore(),a=SubmitStencil.create(6),l=i.ctx.globalCompositeOperation,a.blendMode="mask",i.addRenderObject(a),Matrix.TEMP.identity();var _=Value2D.create(1,0),d=Texture.INV_UV,f=c.width,p=c.height,g=32;(c.width<g||c.height<g)&&(d=e.tempUV,d[0]=0,d[1]=0,d[2]=c.width>=32?1:c.width/g,d[3]=0,d[4]=c.width>=32?1:c.width/g,d[5]=c.height>=32?1:c.height/g,d[6]=0,d[7]=c.height>=32?1:c.height/g,c.width=c.width>=32?c.width:g,c.height=c.height>=32?c.height:g,d[1]*=-1,d[3]*=-1,d[5]*=-1,d[7]*=-1,d[1]+=1,d[3]+=1,d[5]+=1,d[7]+=1),i.ctx.drawTarget(u,n+c.x,s+c.y,f,p,Matrix.TEMP,"tmpTarget",_,d,6),r=SubmitCMD.create([u],laya.webgl.utils.RenderSprite3D.recycleTarget),i.addRenderObject(r),a=SubmitStencil.create(6),a.blendMode=l,i.addRenderObject(a)}i.ctx.restore()}else o._fun.call(o,t,i,n,s)},i._blend=function(t,e,i,n){var s=t._style,r=this._next;s.blendMode?(e.ctx.save(),e.ctx.globalCompositeOperation=s.blendMode,r._fun.call(r,t,e,i,n),e.ctx.restore()):r._fun.call(r,t,e,i,n)},i._transform=function(t,e,i,n){"use strict";var s=t.transform,r=this._next;if(s&&r!=RenderSprite.NORENDER){var a=e.ctx;t._style;s.tx=i,s.ty=n;var o=a._getTransformMatrix(),h=o.clone();Matrix.mul(s,o,o),o._checkTransform(),s.tx=s.ty=0,r._fun.call(r,t,e,0,0),h.copyTo(o),h.destroy()}else r._fun.call(r,t,e,i,n)},e.tmpTarget=function(t,e){var i=t.getValue("bounds"),n=RenderTarget2D.create(i.width,i.height);n.start(),n.clear(0,0,0,0),t.addValue("tmpTarget",n)},e.endTmpTarget=function(t){var e=t.getValue("tmpTarget");e.end()},e.recycleTarget=function(t){var e=t.getValue("tmpTarget");e.recycle(),t.recycle()},__static(e,["tempUV",function(){return this.tempUV=new Array(8)}]),e}(RenderSprite),ShaderDefines2D=function(t){function e(){e.__super.call(this,e.__name2int,e.__int2name,e.__int2nameMap)}return __class(e,"laya.webgl.shader.d2.ShaderDefines2D",t),e.__init__=function(){e.reg("TEXTURE2D",1),e.reg("COLOR2D",2),e.reg("PRIMITIVE",4),e.reg("GLOW_FILTER",8),e.reg("BLUR_FILTER",16),e.reg("COLOR_FILTER",32),e.reg("COLOR_ADD",64),e.reg("WORLDMAT",128),e.reg("FILLTEXTURE",256),e.reg("FSHIGHPRECISION",1024)},e.reg=function(t,i){ShaderDefines._reg(t,i,e.__name2int,e.__int2name)},e.toText=function(t,e,i){return ShaderDefines._toText(t,e,i)},e.toInt=function(t){return ShaderDefines._toInt(t,e.__name2int)},e.TEXTURE2D=1,e.COLOR2D=2,e.PRIMITIVE=4,e.FILTERGLOW=8,e.FILTERBLUR=16,e.FILTERCOLOR=32,e.COLORADD=64,e.WORLDMAT=128,e.FILLTEXTURE=256,e.SKINMESH=512,e.SHADERDEFINE_FSHIGHPRECISION=1024,e.__name2int={},e.__int2name=[],e.__int2nameMap=[],e}(ShaderDefines),Line=function(t){function e(t,i,n,s,r){this._points=[],this.rebuild(n),e.__super.call(this,t,i,0,0,0,r,s,r,0)}__class(e,"laya.webgl.shapes.Line",t);var i=e.prototype;return i.rebuild=function(t){var e=t.length,i=this._points.length;e!=i&&(this.mUint16Array=new Uint16Array(6*(e/2-1)),this.mFloat32Array=new Float32Array(5*e)),this._points.length=0;for(var n=NaN,s=NaN,r=-1,a=-1,o=t.length/2,h=0;o>h;h++)n=t[2*h],s=t[2*h+1],(Math.abs(r-n)>.01||Math.abs(a-s)>.01)&&this._points.push(n,s),r=n,a=s},i.getData=function(t,e,i){var n=[],s=[];this.borderWidth>0&&this.createLine2(this._points,n,this.borderWidth,i,s,this._points.length/2),this.mUint16Array.set(n,0),this.mFloat32Array.set(s,0),t.append(this.mUint16Array),e.append(this.mFloat32Array)},e}(BasePoly),LoopLine=function(t){function e(t,i,n,s,r){this._points=[];for(var a=NaN,o=NaN,h=-1,l=-1,c=n.length/2-1,u=0;c>u;u++)a=n[2*u],o=n[2*u+1],(Math.abs(h-a)>.01||Math.abs(l-o)>.01)&&this._points.push(a,o),h=a,l=o;a=n[2*c],o=n[2*c+1],h=this._points[0],l=this._points[1],(Math.abs(h-a)>.01||Math.abs(l-o)>.01)&&this._points.push(a,o),e.__super.call(this,t,i,0,0,this._points.length/2,0,s,r)}__class(e,"laya.webgl.shapes.LoopLine",t);var i=e.prototype;return i.getData=function(t,e,i){if(this.borderWidth>0){for(var n=this.color,s=(n>>16&255)/255,r=(n>>8&255)/255,a=(255&n)/255,o=[],h=0,l=0,c=[],u=Math.floor(this._points.length/2),_=0;u>_;_++)h=this._points[2*_],l=this._points[2*_+1],o.push(this.x+h,this.y+l,s,r,a);this.createLoopLine(o,c,this.borderWidth,i+o.length/5),t.append(new Uint16Array(c)),e.append(new Float32Array(o))}},i.createLoopLine=function(t,e,i,n,s,r){var a=(t.length/5,t.concat()),o=s?s:t,h=this.borderColor,l=(h>>16&255)/255,c=(h>>8&255)/255,u=(255&h)/255,_=[a[0],a[1]],d=[a[a.length-5],a[a.length-4]],f=d[0]+.5*(_[0]-d[0]),p=d[1]+.5*(_[1]-d[1]);a.unshift(f,p,0,0,0),a.push(f,p,0,0,0);var g,m,v,y,w,b,S,x,C,T,I,L,A,P,M,R,E,B,k,O,D,F=a.length/5,U=n,G=i/2;v=a[0],y=a[1],w=a[5],b=a[6],C=-(y-b),T=v-w,D=Math.sqrt(C*C+T*T),C=C/D*G,T=T/D*G,o.push(v-C,y-T,l,c,u,v+C,y+T,l,c,u);for(var N=1;F-1>N;N++)v=a[5*(N-1)],y=a[5*(N-1)+1],w=a[5*N],b=a[5*N+1],S=a[5*(N+1)],x=a[5*(N+1)+1],C=-(y-b),T=v-w,D=Math.sqrt(C*C+T*T),C=C/D*G,T=T/D*G,I=-(b-x),L=w-S,D=Math.sqrt(I*I+L*L),I=I/D*G,L=L/D*G,A=-T+y-(-T+b),P=-C+w-(-C+v),M=(-C+v)*(-T+b)-(-C+w)*(-T+y),R=-L+x-(-L+b),E=-I+w-(-I+S),B=(-I+S)*(-L+b)-(-I+w)*(-L+x),k=A*E-R*P,Math.abs(k)<.1?(k+=10.1,o.push(w-C,b-T,l,c,u,w+C,b+T,l,c,u)):(g=(P*B-E*M)/k,m=(R*M-A*B)/k,O=(g-w)*(g-w)+(m-b)+(m-b),o.push(g,m,l,c,u,w-(g-w),b-(m-b),l,c,u));r&&(e=r);var H=this.edges+1;for(N=1;H>N;N++)e.push(U+2*(N-1),U+2*(N-1)+1,U+2*N+1,U+2*N+1,U+2*N,U+2*(N-1));return e.push(U+2*(N-1),U+2*(N-1)+1,U+1,U+1,U,U+2*(N-1)),o},e}(BasePoly),Polygon=function(t){function e(t,i,n,s,r,a){this._points=null,this._start=-1,this._repaint=!1,this._mat=Matrix.create(),this._points=n.slice(0,n.length),e.__super.call(this,t,i,0,0,this._points.length/2,s,r,a)}__class(e,"laya.webgl.shapes.Polygon",t);var i=e.prototype;return i.rebuild=function(t){this._repaint||(this._points.length=0,this._points=this._points.concat(t))},i.setMatrix=function(t){t.copyTo(this._mat)},i.needUpdate=function(t){return this._repaint=this._mat.a==t.a&&this._mat.b==t.b&&this._mat.c==t.c&&this._mat.d==t.d&&this._mat.tx==t.tx&&this._mat.ty==t.ty,!this._repaint},i.getData=function(t,e,i){var n,s=0,r=this._points,a=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=i){for(this._start=i,n=[],a=Math.floor(r.length/2),s=2;a>s;s++)n.push(i,i+s-1,i+s);this.mUint16Array=new Uint16Array(n)}}else{this._start=i,n=[];var o=[],h=this.color,l=(h>>16&255)/255,c=(h>>8&255)/255,u=(255&h)/255;for(a=Math.floor(r.length/2),s=0;a>s;s++)o.push(this.x+r[2*s],this.y+r[2*s+1],l,c,u);for(s=2;a>s;s++)n.push(i,i+s-1,i+s);this.mUint16Array=new Uint16Array(n),this.mFloat32Array=new Float32Array(o)}t.append(this.mUint16Array),e.append(this.mFloat32Array)},e}(BasePoly),SubmitCanvas=function(t){function e(){this._matrix=new Matrix,this._matrix4=CONST3D2D.defaultMatrix4.concat(),e.__super.call(this,1e4),this.shaderValue=new Value2D(0,0)}__class(e,"laya.webgl.submit.SubmitCanvas",t);var i=e.prototype;return i.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var t=RenderState2D.worldAlpha,e=RenderState2D.worldMatrix4,i=RenderState2D.worldMatrix,n=RenderState2D.worldFilters,s=RenderState2D.worldShaderDefines,r=this.shaderValue,a=this._matrix,o=this._matrix4,h=Matrix.TEMP;return Matrix.mul(a,i,h),o[0]=h.a,o[1]=h.b,o[4]=h.c,o[5]=h.d,o[12]=h.tx,o[13]=h.ty,RenderState2D.worldMatrix=h.clone(),RenderState2D.worldMatrix4=o,RenderState2D.worldAlpha=RenderState2D.worldAlpha*r.alpha,r.filters&&r.filters.length&&(RenderState2D.worldFilters=r.filters,RenderState2D.worldShaderDefines=r.defines),this._ctx_src.flush(),RenderState2D.worldAlpha=t,RenderState2D.worldMatrix4=e,RenderState2D.worldMatrix.destroy(),RenderState2D.worldMatrix=i,RenderState2D.worldFilters=n,RenderState2D.worldShaderDefines=s,1},i.releaseRender=function(){var t=e._cache;this._ctx_src=null,t[t._length++]=this},i.getRenderType=function(){return 10003},e.create=function(t,i,n){var s=e._cache._length?e._cache[--e._cache._length]:new e;s._ctx_src=t;var r=s.shaderValue;return r.alpha=i,r.defines.setValue(0),n&&n.length&&r.setFilters(n),s},e._cache=(e._cache=[],e._cache._length=0,e._cache),e}(Submit),SubmitTexture=function(t){function e(t){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===t&&(t=1e4),e.__super.call(this,t)}__class(e,"laya.webgl.submit.SubmitTexture",t);var i=e.prototype;return i.releaseRender=function(){var t=e._cache;t[t._length++]=this,this.shaderValue.release(),this._preIsSameTextureShader=!1,this._vb=null,this._texs.length=0,this._vbPos.length=0,this._isSameTexture=!0},i.addTexture=function(t,e){this._texsID[this._texs.length]=t._uvID,this._texs.push(t),this._vbPos.push(e)},i.checkTexture=function(){if(this._texs.length<1)return void(this._isSameTexture=!0);var t=this.shaderValue.textureHost,e=t.bitmap;if(null!==e)for(var i=this._vb.getFloat32Array(),n=0,s=this._texs.length;s>n;n++){var r=this._texs[n];r.active();var a=r.uv;if(this._texsID[n]!==r._uvID){this._texsID[n]=r._uvID;var o=this._vbPos[n];i[o+2]=a[0],i[o+3]=a[1],i[o+6]=a[2],i[o+7]=a[3],i[o+10]=a[4],i[o+11]=a[5],i[o+14]=a[6],i[o+15]=a[7],this._vb.setNeedUpload()}r.bitmap!==e&&(this._isSameTexture=!1)}},i.renderSubmit=function(){if(0===this._numEle)return e._shaderSet=!1,1;var t=this.shaderValue.textureHost;if(t){var i=t.source;if(!t.bitmap||!i)return e._shaderSet=!1,1;this.shaderValue.texture=i}this._vb.bind_upload(this._ib);var n=WebGL.mainContext;if(BlendMode.activeBlendFunction!==this._blendFn&&(n.enable(3042),this._blendFn(n),BlendMode.activeBlendFunction=this._blendFn),Stat.drawCall++,Stat.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&BaseShader.activeShader&&e._shaderSet?BaseShader.activeShader.uploadTexture2D(this.shaderValue.texture):this.shaderValue.upload(),e._shaderSet=!0,this._texs.length>1&&!this._isSameTexture)for(var s=t.bitmap,r=0,a=BaseShader.activeShader,o=0,h=this._texs.length;h>o;o++){var l=this._texs[o];l.bitmap===s&&o+1!==h||(a.uploadTexture2D(l.source),n.drawElements(4,6*(o-r+1),5123,this._startIdx+6*r*CONST3D2D.BYTES_PIDX),s=l.bitmap,r=o)}else n.drawElements(4,this._numEle,5123,this._startIdx);return 1},e.create=function(t,i,n,s,r){var a=e._cache._length?e._cache[--e._cache._length]:new e;null==n&&(n=a._selfVb||(a._selfVb=VertexBuffer2D.create(-1)),n.clear(),s=0),a._ib=i,a._vb=n,a._startIdx=s*CONST3D2D.BYTES_PIDX,a._numEle=0;var o=t._nBlendType;a._blendFn=t._targets?BlendMode.targetFns[o]:BlendMode.fns[o],a.shaderValue=r,a.shaderValue.setValue(t._shader2D);var h=t._shader2D.filters;return h&&a.shaderValue.setFilters(h),a},e._cache=(e._cache=[],e._cache._length=0,e._cache),e._shaderSet=!0,e}(Submit),ByteBuffer=function(t){function e(t,i,n){this.stringTable=null,this.version=0,void 0===i&&(i=0),void 0===n&&(n=-1),-1==n&&(n=t.byteLength-i),0==i&&n==t.byteLength?e.__super.call(this,t):(this._u8d_=new Uint8Array(t,i,n),this._d_=new DataView(this._u8d_.buffer,i,n),this._length=n),this.endian="bigEndian"}__class(e,"fairygui.utils.ByteBuffer",t);var i=e.prototype;return i.skip=function(t){this.pos+=t},i.readBool=function(){return 1==this.getUint8()},i.readS=function(){var t=this.getUint16();return 65534==t?null:65533==t?"":this.stringTable[t]},i.writeS=function(t){var e=this.getUint16();65534!=e&&65533!=e&&(this.stringTable[e]=t)},i.readColor=function(t){void 0===t&&(t=!1);var e=this.getUint8(),i=this.getUint8(),n=this.getUint8(),s=this.getUint8();return(t?s<<24:0)+(e<<16)+(i<<8)+n},i.readColorS=function(t){void 0===t&&(t=!1);var e=this.getUint8(),i=this.getUint8(),n=this.getUint8(),s=this.getUint8();if(t&&255!=s)return"rgba("+e+","+i+","+n+","+s/255+")";var r=e.toString(16),a=i.toString(16),o=n.toString(16);return 1==r.length&&(r="0"+r),1==a.length&&(a="0"+a),1==o.length&&(o="0"+o),"#"+r+a+o},i.readChar=function(){var t=this.getUint16();return String.fromCharCode(t)},i.readBuffer=function(){var t=this.getUint32(),i=new e(this.buffer,this._pos_,t);return i.stringTable=this.stringTable,i.version=this.version,i},i.seek=function(t,e){var i=this._pos_;this.pos=t;var n=this.getUint8();if(n>e){var s=1==this.getUint8(),r=0;return s?(this.pos+=2*e,r=this.getUint16()):(this.pos+=4*e,r=this.getUint32()),r>0?(this.pos=t+r,!0):(this.pos=i,!1)}return this.pos=i,!1},e}(Byte),ChildHitArea=function(t){function e(t,i){this._child=null,this._reversed=!1,e.__super.call(this),this._child=t,this._reversed=i,this._reversed?this.unHit=t.hitArea.hit:this.hit=t.hitArea.hit}__class(e,"fairygui.utils.ChildHitArea",t);var i=e.prototype;return i.isHit=function(t,e){var i;return i=Point.TEMP,i.setTo(0,0),i=this._child.toParentPoint(i),this._reversed?!HitArea.isHitGraphic(t-i.x,e-i.y,this.unHit):HitArea.isHitGraphic(t-i.x,e-i.y,this.hit)},e}(HitArea),PixelHitTest=function(t){function e(t,i,n){this._data=null,this.offsetX=0,this.offsetY=0,this.scaleX=NaN,this.scaleY=NaN,e.__super.call(this),void 0===i&&(i=0),void 0===n&&(n=0),this._data=t,this.offsetX=i,this.offsetY=n,this.scaleX=1,this.scaleY=1}__class(e,"fairygui.utils.PixelHitTest",t);var i=e.prototype;return i.isHit=function(t,e){if(t=Math.floor((t/this.scaleX-this.offsetX)*this._data.scale),e=Math.floor((e/this.scaleY-this.offsetY)*this._data.scale),0>t||0>e||t>=this._data.pixelWidth)return!1;var i=e*this._data.pixelWidth+t,n=Math.floor(i/8),s=i%8;return n>=0&&n<this._data.pixels.length?1==(this._data.pixels[n]>>s&1):!1},e}(HitArea),ChangePageAction=function(t){function e(){this.objectId=null,this.controllerName=null,this.targetPage=null,e.__super.call(this)}__class(e,"fairygui.action.ChangePageAction",t);var i=e.prototype;return i.enter=function(t){if(this.controllerName){var e;if(e=this.objectId?t.parent.getChildById(this.objectId):t.parent){var i=e.getController(this.controllerName);i&&i!=t&&!i.changing&&(i.selectedPageId=this.targetPage)}}},i.setup=function(e){t.prototype.setup.call(this,e),this.objectId=e.readS(),this.controllerName=e.readS(),this.targetPage=e.readS()},e}(ControllerAction),PlayTransitionAction=function(t){function e(){this.transitionName=null,this.playTimes=1,this.delay=0,this.stopOnExit=!1,this._currentTransition=null,e.__super.call(this)}__class(e,"fairygui.action.PlayTransitionAction",t);var i=e.prototype;return i.enter=function(t){var e=t.parent.getTransition(this.transitionName);e&&(this._currentTransition&&this._currentTransition.playing?e.changePlayTimes(this.playTimes):e.play(null,this.playTimes,this.delay),this._currentTransition=e)},i.leave=function(t){this.stopOnExit&&this._currentTransition&&(this._currentTransition.stop(),this._currentTransition=null)},i.setup=function(e){t.prototype.setup.call(this,e),this.transitionName=e.readS(),this.playTimes=e.getInt32(),this.delay=e.getFloat32(),this.stopOnExit=e.readBool()},e}(ControllerAction),GearAnimation=function(t){function e(t){this._storage=null,this._default=null,e.__super.call(this,t)}var i;__class(e,"fairygui.gears.GearAnimation",t);var n=e.prototype;return n.init=function(){this._default=new i(this._owner.playing,this._owner.frame),this._storage={}},n.addStatus=function(t,e){var n;null==t?n=this._default:(n=new i,this._storage[t]=n),n.playing=e.readBool(),n.frame=e.getInt32()},n.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];t||(t=this._default),this._owner.frame=t.frame,this._owner.playing=t.playing,this._owner._gearLocked=!1},n.updateState=function(){var t=this._owner,e=this._storage[this._controller.selectedPageId];e||(e=new i,this._storage[this._controller.selectedPageId]=e),e.frame=t.frame,e.playing=t.playing},e.__init$=function(){i=function(){function t(t,e){this.playing=!1,this.frame=NaN,void 0===t&&(t=!0),void 0===e&&(e=0),this.playing=t,this.frame=e}return __class(t,""),t}()},e}(GearBase),GearColor=function(t){function e(t){this._storage=null,this._default=null,e.__super.call(this,t)}var i;__class(e,"fairygui.gears.GearColor",t);var n=e.prototype;return n.init=function(){void 0!=this._owner.strokeColor?this._default=new i(this._owner.color,this._owner.strokeColor):this._default=new i(this._owner.color,null),this._storage={}},n.addStatus=function(t,e){var n;null==t?n=this._default:(n=new i,this._storage[t]=n),n.color=e.readColorS(),n.strokeColor=e.readColorS()},n.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];t||(t=this._default),this._owner.color=t.color,void 0!=this._owner.strokeColor&&null!=t.strokeColor&&(this._owner.strokeColor=t.strokeColor),this._owner._gearLocked=!1},n.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new i(null,null),this._storage[this._controller.selectedPageId]=t),t.color=this._owner.color,void 0!=this._owner.strokeColor&&(t.strokeColor=this._owner.strokeColor)},e.__init$=function(){i=function(){function t(t,e){this.color=null,this.strokeColor=null,this.color=t,this.strokeColor=e}return __class(t,""),t}()},e}(GearBase),GearDisplay=function(t){function e(t){this.pages=null,this._visible=0,this._displayLockToken=0,e.__super.call(this,t),this._displayLockToken=1}__class(e,"fairygui.gears.GearDisplay",t);var i=e.prototype;return i.init=function(){this.pages=null},i.addLock=function(){return this._visible++,this._displayLockToken},i.releaseLock=function(t){t==this._displayLockToken&&this._visible--},i.apply=function(){this._displayLockToken++,this._displayLockToken<=0&&(this._displayLockToken=1),null==this.pages||0==this.pages.length||-1!=this.pages.indexOf(this._controller.selectedPageId)?this._visible=1:this._visible=0},__getset(0,i,"connected",function(){return null==this._controller||this._visible>0}),e}(GearBase),GearIcon=function(t){function e(t){this._storage=null,this._default=null,e.__super.call(this,t)}__class(e,"fairygui.gears.GearIcon",t);var i=e.prototype;return i.init=function(){this._default=this._owner.icon,this._storage={}},i.addStatus=function(t,e){null==t?this._default=e.readS():this._storage[t]=e.readS()},i.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];void 0!==t?this._owner.icon=t:this._owner.icon=this._default,this._owner._gearLocked=!1},i.updateState=function(){this._storage[this._controller.selectedPageId]=this._owner.icon},e}(GearBase),GearLook=function(t){function e(t){this._storage=null,this._default=null,e.__super.call(this,t)}var i;__class(e,"fairygui.gears.GearLook",t);var n=e.prototype;return n.init=function(){this._default=new i(this._owner.alpha,this._owner.rotation,this._owner.grayed,this._owner.touchable),this._storage={}},n.addStatus=function(t,e){var n;null==t?n=this._default:(n=new i,this._storage[t]=n),n.alpha=e.getFloat32(),n.rotation=e.getFloat32(),n.grayed=e.readBool(),n.touchable=e.readBool()},n.apply=function(){var t=this._storage[this._controller.selectedPageId];if(t||(t=this._default),null==this._tweenConfig||!this._tweenConfig.tween||UIPackage._constructing||GearBase.disableAllTweenEffect)this._owner._gearLocked=!0,this._owner.grayed=t.grayed,this._owner.alpha=t.alpha,this._owner.rotation=t.rotation,this._owner.touchable=t.touchable,this._owner._gearLocked=!1;else{if(this._owner._gearLocked=!0,this._owner.grayed=t.grayed,this._owner.touchable=t.touchable,this._owner._gearLocked=!1,null!=this._tweenConfig._tweener){if(this._tweenConfig._tweener.endValue.x==t.alpha&&this._tweenConfig._tweener.endValue.y==t.rotation)return;this._tweenConfig._tweener.kill(!0),this._tweenConfig._tweener=null}var e=t.alpha!=this._owner.alpha,i=t.rotation!=this._owner.rotation;(e||i)&&(this._owner.checkGearController(0,this._controller)&&(this._tweenConfig._displayLockToken=this._owner.addDisplayLock()),this._tweenConfig._tweener=GTween.to2(this._owner.alpha,this._owner.rotation,t.alpha,t.rotation,this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setUserData((e?1:0)+(i?2:0)).setTarget(this).onUpdate(this.__tweenUpdate,this).onComplete(this.__tweenComplete,this))}},n.__tweenUpdate=function(t){var e=t.userData;this._owner._gearLocked=!0,0!=(1&e)&&(this._owner.alpha=t.value.x),0!=(2&e)&&(this._owner.rotation=t.value.y),this._owner._gearLocked=!1},n.__tweenComplete=function(){0!=this._tweenConfig._displayLockToken&&(this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken),this._tweenConfig._displayLockToken=0),this._tweenConfig._tweener=null},n.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new i,this._storage[this._controller.selectedPageId]=t),t.alpha=this._owner.alpha,t.rotation=this._owner.rotation,t.grayed=this._owner.grayed,t.touchable=this._owner.touchable},e.__init$=function(){i=function(){function t(t,e,i,n){this.alpha=NaN,this.rotation=NaN,this.grayed=!1,this.touchable=!1,void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!1),void 0===n&&(n=!0),this.alpha=t,this.rotation=e,this.grayed=i,this.touchable=n}return __class(t,""),t}()},e}(GearBase),GearSize=function(t){function e(t){this._storage=null,this._default=null,e.__super.call(this,t)}var i;__class(e,"fairygui.gears.GearSize",t);var n=e.prototype;return n.init=function(){this._default=new i(this._owner.width,this._owner.height,this._owner.scaleX,this._owner.scaleY),this._storage={}},n.addStatus=function(t,e){var n;null==t?n=this._default:(n=new i,this._storage[t]=n),n.width=e.getInt32(),n.height=e.getInt32(),n.scaleX=e.getFloat32(),n.scaleY=e.getFloat32()},n.apply=function(){var t=this._storage[this._controller.selectedPageId];if(t||(t=this._default),null==this._tweenConfig||!this._tweenConfig.tween||UIPackage._constructing||GearBase.disableAllTweenEffect)this._owner._gearLocked=!0,this._owner.setSize(t.width,t.height,this._owner.checkGearController(1,this._controller)),this._owner.setScale(t.scaleX,t.scaleY),this._owner._gearLocked=!1;else{if(null!=this._tweenConfig._tweener){if(this._tweenConfig._tweener.endValue.x==t.width&&this._tweenConfig._tweener.endValue.y==t.height&&this._tweenConfig._tweener.endValue.z==t.scaleX&&this._tweenConfig._tweener.endValue.w==t.scaleY)return;this._tweenConfig._tweener.kill(!0),this._tweenConfig._tweener=null}var e=t.width!=this._owner.width||t.height!=this._owner.height,i=t.scaleX!=this._owner.scaleX||t.scaleY!=this._owner.scaleY;(e||i)&&(this._owner.checkGearController(0,this._controller)&&(this._tweenConfig._displayLockToken=this._owner.addDisplayLock()),this._tweenConfig._tweener=GTween.to4(this._owner.width,this._owner.height,this._owner.scaleX,this._owner.scaleY,t.width,t.height,t.scaleX,t.scaleY,this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setUserData((e?1:0)+(i?2:0)).setTarget(this).onUpdate(this.__tweenUpdate,this).onComplete(this.__tweenComplete,this))}},n.__tweenUpdate=function(t){var e=t.userData;this._owner._gearLocked=!0,0!=(1&e)&&this._owner.setSize(t.value.x,t.value.y,this._owner.checkGearController(1,this._controller)),0!=(2&e)&&this._owner.setScale(t.value.z,t.value.w),this._owner._gearLocked=!1},n.__tweenComplete=function(){0!=this._tweenConfig._displayLockToken&&(this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken),this._tweenConfig._displayLockToken=0),this._tweenConfig._tweener=null},n.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new i,this._storage[this._controller.selectedPageId]=t),t.width=this._owner.width,t.height=this._owner.height,t.scaleX=this._owner.scaleX,t.scaleY=this._owner.scaleY},n.updateFromRelations=function(t,e){if(null!=this._controller&&null!=this._storage){for(var i in this._storage){var n=this._storage[i];n.width+=t,n.height+=e}this._default.width+=t,this._default.height+=e,this.updateState()}},e.__init$=function(){i=function(){function t(t,e,i,n){this.width=NaN,this.height=NaN,this.scaleX=NaN,this.scaleY=NaN,void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.width=t,this.height=e,this.scaleX=i,this.scaleY=n}return __class(t,""),t}()},e}(GearBase),GearText=function(t){function e(t){this._storage=null,this._default=null,e.__super.call(this,t)}__class(e,"fairygui.gears.GearText",t);var i=e.prototype;return i.init=function(){this._default=this._owner.text,this._storage={}},i.addStatus=function(t,e){null==t?this._default=e.readS():this._storage[t]=e.readS()},i.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];void 0!==t?this._owner.text=t:this._owner.text=this._default,this._owner._gearLocked=!1},i.updateState=function(){this._storage[this._controller.selectedPageId]=this._owner.text},e}(GearBase),GearXY=function(t){function e(t){this._storage=null,this._default=null,e.__super.call(this,t)}__class(e,"fairygui.gears.GearXY",t);var i=e.prototype;return i.init=function(){this._default=new Point(this._owner.x,this._owner.y),this._storage={}},i.addStatus=function(t,e){var i;null==t?i=this._default:(i=new Point,this._storage[t]=i),i.x=e.getInt32(),i.y=e.getInt32()},i.apply=function(){var t=this._storage[this._controller.selectedPageId];if(t||(t=this._default),null==this._tweenConfig||!this._tweenConfig.tween||UIPackage._constructing||GearBase.disableAllTweenEffect)this._owner._gearLocked=!0,this._owner.setXY(t.x,t.y),this._owner._gearLocked=!1;else{if(null!=this._tweenConfig._tweener){if(this._tweenConfig._tweener.endValue.x==t.x&&this._tweenConfig._tweener.endValue.y==t.y)return;this._tweenConfig._tweener.kill(!0),this._tweenConfig._tweener=null}this._owner.x==t.x&&this._owner.y==t.y||(this._owner.checkGearController(0,this._controller)&&(this._tweenConfig._displayLockToken=this._owner.addDisplayLock()),this._tweenConfig._tweener=GTween.to2(this._owner.x,this._owner.y,t.x,t.y,this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setTarget(this).onUpdate(this.__tweenUpdate,this).onComplete(this.__tweenComplete,this))}},i.__tweenUpdate=function(t){this._owner._gearLocked=!0,this._owner.setXY(t.value.x,t.value.y),this._owner._gearLocked=!1},i.__tweenComplete=function(){0!=this._tweenConfig._displayLockToken&&(this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken),this._tweenConfig._displayLockToken=0),this._tweenConfig._tweener=null},i.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new Point,this._storage[this._controller.selectedPageId]=t),t.x=this._owner.x,t.y=this._owner.y},i.updateFromRelations=function(t,e){if(null!=this._controller&&null!=this._storage){for(var i in this._storage){var n=this._storage[i];n.x+=t,n.y+=e}this._default.x+=t,this._default.y+=e,this.updateState()}},e}(GearBase),Window$2=function(t){function e(){this._contentPane=null,this._modalWaitPane=null,this._closeButton=null,this._dragArea=null,this._contentArea=null,this._frame=null,this._modal=!1,this._uiSources=null,this._inited=!1,this._loading=!1,this._requestingCmd=0,this.bringToFontOnClick=!1,e.__super.call(this),this.focusable=!0,this._uiSources=[],this.bringToFontOnClick=UIConfig$1.bringWindowToFrontOnClick,this.displayObject.on("display",this,this.__onShown),this.displayObject.on("undisplay",this,this.__onHidden),this.displayObject.on("mousedown",this,this.__mouseDown)}__class(e,"fairygui.Window",t,"Window$2");var i=e.prototype;return i.addUISource=function(t){this._uiSources.push(t)},i.show=function(){GRoot.inst.showWindow(this)},i.showOn=function(t){
t.showWindow(this)},i.hide=function(){this.isShowing&&this.doHideAnimation()},i.hideImmediately=function(){var t=this.parent instanceof fairygui.GRoot?this.parent:null;t||(t=GRoot.inst),t.hideWindowImmediately(this)},i.centerOn=function(t,e){void 0===e&&(e=!1),this.setXY(Math.round((t.width-this.width)/2),Math.round((t.height-this.height)/2)),e&&(this.addRelation(t,3),this.addRelation(t,10))},i.toggleStatus=function(){this.isTop?this.hide():this.show()},i.bringToFront=function(){this.root.bringToFront(this)},i.showModalWait=function(t){void 0===t&&(t=0),0!=t&&(this._requestingCmd=t),UIConfig$1.windowModalWaiting&&(this._modalWaitPane||(this._modalWaitPane=UIPackage.createObjectFromURL(UIConfig$1.windowModalWaiting)),this.layoutModalWaitPane(),this.addChild(this._modalWaitPane))},i.layoutModalWaitPane=function(){if(null!=this._contentArea){var t=this._frame.localToGlobal();t=this.globalToLocal(t.x,t.y,t),this._modalWaitPane.setXY(t.x+this._contentArea.x,t.y+this._contentArea.y),this._modalWaitPane.setSize(this._contentArea.width,this._contentArea.height)}else this._modalWaitPane.setSize(this.width,this.height)},i.closeModalWait=function(t){return void 0===t&&(t=0),0!=t&&this._requestingCmd!=t?!1:(this._requestingCmd=0,this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane),!0)},i.init=function(){if(!this._inited&&!this._loading)if(this._uiSources.length>0){this._loading=!1;for(var t=this._uiSources.length,e=0;t>e;e++){var i=this._uiSources[e];i.loaded||(i.load(this.__uiLoadComplete,this),this._loading=!0)}this._loading||this._init()}else this._init()},i.onInit=function(){},i.onShown=function(){},i.onHide=function(){},i.doShowAnimation=function(){this.onShown()},i.doHideAnimation=function(){this.hideImmediately()},i.__uiLoadComplete=function(){for(var t=this._uiSources.length,e=0;t>e;e++){var i=this._uiSources[e];if(!i.loaded)return}this._loading=!1,this._init()},i._init=function(){this._inited=!0,this.onInit(),this.isShowing&&this.doShowAnimation()},i.dispose=function(){null!=this.parent&&this.hideImmediately(),t.prototype.dispose.call(this)},i.closeEventHandler=function(){this.hide()},i.__onShown=function(){this._inited?this.doShowAnimation():this.init()},i.__onHidden=function(){this.closeModalWait(),this.onHide()},i.__mouseDown=function(){this.isShowing&&this.bringToFontOnClick&&this.bringToFront()},i.__dragStart=function(t){GObject.cast(t.currentTarget).stopDrag(),this.startDrag()},__getset(0,i,"contentPane",function(){return this._contentPane},function(t){this._contentPane!=t&&(null!=this._contentPane&&this.removeChild(this._contentPane),this._contentPane=t,null!=this._contentPane&&(this.addChild(this._contentPane),this.setSize(this._contentPane.width,this._contentPane.height),this._contentPane.addRelation(this,24),this._frame=this._contentPane.getChild("frame"),null!=this._frame&&(this.closeButton=this._frame.getChild("closeButton"),this.dragArea=this._frame.getChild("dragArea"),this.contentArea=this._frame.getChild("contentArea"))))}),__getset(0,i,"isShowing",function(){return null!=this.parent}),__getset(0,i,"isTop",function(){return null!=this.parent&&this.parent.getChildIndex(this)==this.parent.numChildren-1}),__getset(0,i,"modal",function(){return this._modal},function(t){this._modal=t}),__getset(0,i,"dragArea",function(){return this._dragArea},function(t){this._dragArea!=t&&(null!=this._dragArea&&(this._dragArea.draggable=!1,this._dragArea.off("fui_drag_start",this,this.__dragStart)),this._dragArea=t,null!=this._dragArea&&(this._dragArea instanceof fairygui.GGraph&&this._dragArea.asGraph.drawRect(0,null,null),this._dragArea.draggable=!0,this._dragArea.on("fui_drag_start",this,this.__dragStart)))}),__getset(0,i,"frame",function(){return this._frame}),__getset(0,i,"closeButton",function(){return this._closeButton},function(t){null!=this._closeButton&&this._closeButton.offClick(this,this.closeEventHandler),this._closeButton=t,null!=this._closeButton&&this._closeButton.onClick(this,this.closeEventHandler)}),__getset(0,i,"contentArea",function(){return this._contentArea},function(t){this._contentArea=t}),__getset(0,i,"modalWaiting",function(){return this._modalWaitPane&&null!=this._modalWaitPane.parent}),e}(GComponent),GLabel=function(t){function e(){this._titleObject=null,this._iconObject=null,e.__super.call(this)}__class(e,"fairygui.GLabel",t);var i=e.prototype;return Laya.imps(i,{"fairygui.gears.IColorGear":!0}),i.getTextField=function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject:this._titleObject instanceof fairygui.GLabel?this._titleObject.getTextField():this._titleObject instanceof fairygui.GButton?this._titleObject.getTextField():null},i.constructExtension=function(t){this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon")},i.setup_afterAdd=function(e,i){if(t.prototype.setup_afterAdd.call(this,e,i),e.seek(i,6)&&e.readByte()==this.packageItem.objectType){var n;n=e.readS(),null!=n&&(this.title=n),n=e.readS(),null!=n&&(this.icon=n),e.readBool()&&(this.titleColor=e.readColorS());var s=e.getInt32();if(0!=s&&(this.titleFontSize=s),e.readBool()){var r=this.getTextField();null!=r?(n=e.readS(),null!=n&&(r.promptText=n),n=e.readS(),null!=n&&(r.restrict=n),s=e.getInt32(),0!=s&&(r.maxLength=s),s=e.getInt32(),0!=s&&(4==s?r.keyboardType="number":3==s&&(r.keyboardType="url")),e.readBool()&&(r.password=!0)):e.skip(13)}}},__getset(0,i,"color",function(){return this.titleColor},function(t){this.titleColor=t}),__getset(0,i,"icon",function(){return null!=this._iconObject?this._iconObject.icon:null},function(t){null!=this._iconObject&&(this._iconObject.icon=t),this.updateGear(7)}),__getset(0,i,"editable",function(){return this._titleObject&&this._titleObject instanceof fairygui.GTextInput?this._titleObject.asTextInput.editable:!1},function(t){this._titleObject&&(this._titleObject.asTextInput.editable=t)}),__getset(0,i,"title",function(){return this._titleObject?this._titleObject.text:null},function(t){this._titleObject&&(this._titleObject.text=t),this.updateGear(6)}),__getset(0,i,"text",function(){return this.title},function(t){this.title=t}),__getset(0,i,"titleColor",function(){var t=this.getTextField();return null!=t?t.color:"#000000"},function(t){var e=this.getTextField();null!=e&&(e.color=t),this.updateGear(4)}),__getset(0,i,"titleFontSize",function(){var t=this.getTextField();return null!=t?t.fontSize:0},function(t){var e=this.getTextField();null!=e&&(e.fontSize=t)}),e}(GComponent),GRoot=function(t){function e(){this._modalLayer=null,this._popupStack=null,this._justClosedPopups=null,this._modalWaitPane=null,this._focusedObject=null,this._tooltipWin=null,this._defaultTooltipWin=null,this._checkPopups=!1,e.__super.call(this),null==fairygui.GRoot._inst&&(fairygui.GRoot._inst=this),this.opaque=!1,this._popupStack=[],this._justClosedPopups=[],this.displayObject.once("display",this,this.__addedToStage)}__class(e,"fairygui.GRoot",t);var i=e.prototype;return i.showWindow=function(t){t.modal?this.addChild(t):this.addChildAt(t,0),t.requestFocus(),t.x>this.width?t.x=this.width-t.width:t.x+t.width<0&&(t.x=0),t.y>this.height?t.y=this.height-t.height:t.y+t.height<0&&(t.y=0),this.adjustModalLayer()},i.hideWindow=function(t){t.hide()},i.hideWindowImmediately=function(t){t.parent==this&&this.removeChild(t),this.adjustModalLayer()},i.bringToFront=function(t){var e=this.numChildren,i=NaN;for(i=null==this._modalLayer.parent||t.modal?e-1:this.getChildIndex(this._modalLayer)-1;i>=0;i--){var n=this.getChildAt(i);if(n==t)return;if(n instanceof fairygui.Window)break}i>=0&&this.setChildIndex(t,i)},i.showModalWait=function(t){if(null!=UIConfig$1.globalModalWaiting){if(null==this._modalWaitPane&&(this._modalWaitPane=UIPackage.createObjectFromURL(UIConfig$1.globalModalWaiting)),null==this._modalWaitPane)return;this._modalWaitPane.setSize(this.width,this.height),this._modalWaitPane.addRelation(this,24),this.addChild(this._modalWaitPane),this._modalWaitPane.text=t}},i.closeModalWait=function(){null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane)},i.closeAllExceptModals=function(){for(var t=this._children.slice(),e=t.length,i=0;e>i;i++){var n=t[i];n instanceof fairygui.Window&&!n.modal&&n.hide()}},i.closeAllWindows=function(){for(var t=this._children.slice(),e=t.length,i=0;e>i;i++){var n=t[i];n instanceof fairygui.Window&&n.hide()}},i.getTopWindow=function(){for(var t=this.numChildren,e=t-1;e>=0;e--){var i=this.getChildAt(e);if(i instanceof fairygui.Window)return i}return null},i.showPopup=function(t,e,i){if(this._popupStack.length>0){var n=this._popupStack.indexOf(t);if(-1!=n)for(var s=this._popupStack.length-1;s>=n;s--)this.removeChild(this._popupStack.pop())}if(this._popupStack.push(t),null!=e)for(var r=e;null!=r;){if(r.parent==this){t.sortingOrder<r.sortingOrder&&(t.sortingOrder=r.sortingOrder);break}r=r.parent}this.addChild(t),this.adjustModalLayer();var a,o=0,h=0;e?(a=e.localToGlobal(),o=e.width,h=e.height):a=this.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY);var l=NaN,c=NaN;l=a.x,l+t.width>this.width&&(l=l+o-t.width),c=a.y+h,(null==i&&c+t.height>this.height||0==i)&&(c=a.y-t.height-1,0>c&&(c=0,l+=o/2)),t.x=l,t.y=c},i.togglePopup=function(t,e,i){-1==this._justClosedPopups.indexOf(t)&&this.showPopup(t,e,i)},i.hidePopup=function(t){if(null!=t){var e=this._popupStack.indexOf(t);if(-1!=e)for(var i=this._popupStack.length-1;i>=e;i--)this.closePopup(this._popupStack.pop())}else{var n=this._popupStack.length;for(i=n-1;i>=0;i--)this.closePopup(this._popupStack[i]);this._popupStack.length=0}},i.closePopup=function(t){null!=t.parent&&(t instanceof fairygui.Window?t.hide():this.removeChild(t))},i.showTooltips=function(t){if(null==this._defaultTooltipWin){var e=UIConfig$1.tooltipsWin;if(!e)return void Log.print("UIConfig.tooltipsWin not defined");this._defaultTooltipWin=UIPackage.createObjectFromURL(e)}this._defaultTooltipWin.text=t,this.showTooltipsWin(this._defaultTooltipWin)},i.showTooltipsWin=function(t,e){this.hideTooltips(),this._tooltipWin=t;var i=0,n=0;null==e?(i=Laya.stage.mouseX+10,n=Laya.stage.mouseY+20):(i=e.x,n=e.y);var s=this.globalToLocal(i,n);i=s.x,n=s.y,i+this._tooltipWin.width>this.width&&(i=i-this._tooltipWin.width-1,0>i&&(i=10)),n+this._tooltipWin.height>this.height&&(n=n-this._tooltipWin.height-1,i-this._tooltipWin.width-1>0&&(i=i-this._tooltipWin.width-1),0>n&&(n=10)),this._tooltipWin.x=i,this._tooltipWin.y=n,this.addChild(this._tooltipWin)},i.hideTooltips=function(){null!=this._tooltipWin&&(this._tooltipWin.parent&&this.removeChild(this._tooltipWin),this._tooltipWin=null)},i.getObjectUnderPoint=function(t,e){return null},i.setFocus=function(t){this._focusedObject!=t&&(this._focusedObject=t,this.displayObject.event("fui_focus_changed"))},i.playOneShotSound=function(t,e){void 0===e&&(e=1),ToolSet.startsWith(t,"ui://")||SoundManager.playSound(t)},i.adjustModalLayer=function(){var t=this.numChildren;null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.setChildIndex(this._modalWaitPane,t-1);for(var e=t-1;e>=0;e--){var i=this.getChildAt(e);if(i instanceof fairygui.Window&&i.modal)return void(null==this._modalLayer.parent?this.addChildAt(this._modalLayer,e):this.setChildIndexBefore(this._modalLayer,e))}null!=this._modalLayer.parent&&this.removeChild(this._modalLayer)},i.__addedToStage=function(){Laya.stage.on("mousedown",this,this.__stageMouseDown),Laya.stage.on("mouseup",this,this.__stageMouseUp),this._modalLayer=new GGraph,this._modalLayer.setSize(this.width,this.height),this._modalLayer.drawRect(0,null,UIConfig$1.modalLayerColor),this._modalLayer.addRelation(this,24),this.displayObject.stage.on("resize",this,this.__winResize),this.__winResize()},i.checkPopups=function(t){if(!this._checkPopups&&(this._checkPopups=!0,this._justClosedPopups.length=0,this._popupStack.length>0)){for(var e=t;e!=this.displayObject.stage&&null!=e;){if(e.$owner){var i=this._popupStack.indexOf(e.$owner);if(-1!=i){for(var n=this._popupStack.length-1;n>i;n--){var s=this._popupStack.pop();this.closePopup(s),this._justClosedPopups.push(s)}return}}e=e.parent}var r=this._popupStack.length;for(n=r-1;n>=0;n--)s=this._popupStack[n],this.closePopup(s),this._justClosedPopups.push(s);this._popupStack.length=0}},i.__stageMouseDown=function(t){for(var e=t.target;e!=this.displayObject.stage&&null!=e;){if(e.$owner){var i=e.$owner;if(i.touchable&&i.focusable){this.setFocus(i);break}}e=e.parent}null!=this._tooltipWin&&this.hideTooltips(),this.checkPopups(t.target)},i.__stageMouseUp=function(){this._checkPopups=!1},i.__winResize=function(){this.setSize(Laya.stage.width,Laya.stage.height)},__getset(0,i,"focus",function(){return this._focusedObject&&!this._focusedObject.onStage&&(this._focusedObject=null),this._focusedObject},function(t){if(t&&(!t.focusable||!t.onStage))throw"invalid focus target";this.setFocus(t)}),__getset(0,i,"hasAnyPopup",function(){return 0!=this._popupStack.length}),__getset(0,i,"modalLayer",function(){return this._modalLayer}),__getset(0,i,"hasModalWindow",function(){return null!=this._modalLayer.parent}),__getset(0,i,"modalWaiting",function(){return this._modalWaitPane&&this._modalWaitPane.inContainer}),__getset(0,i,"volumeScale",function(){return SoundManager.soundVolume},function(t){SoundManager.soundVolume=t}),__getset(1,e,"inst",function(){return null==fairygui.GRoot._inst&&new e,fairygui.GRoot._inst},fairygui.GComponent._$SET_inst),e._inst=null,e}(GComponent),GButton=function(t){function e(){this._titleObject=null,this._iconObject=null,this._relatedController=null,this._mode=0,this._selected=!1,this._title=null,this._selectedTitle=null,this._icon=null,this._selectedIcon=null,this._sound=null,this._soundVolumeScale=0,this._pageOption=null,this._buttonController=null,this._changeStateOnClick=!1,this._linkedPopup=null,this._downEffect=0,this._downEffectValue=0,this._downScaled=!1,this._down=!1,this._over=!1,e.__super.call(this),this._mode=0,this._title="",this._icon="",this._sound=UIConfig$1.buttonSound,this._soundVolumeScale=UIConfig$1.buttonSoundVolumeScale,this._pageOption=new PageOption,this._changeStateOnClick=!0,this._downEffectValue=.8}__class(e,"fairygui.GButton",t);var i=e.prototype;return i.getTextField=function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject:this._titleObject instanceof fairygui.GLabel?this._titleObject.getTextField():this._titleObject instanceof fairygui.GButton?this._titleObject.getTextField():null},i.fireClick=function(t){void 0===t&&(t=!0),t&&0==this._mode&&(this.setState("over"),Laya.timer.once(100,this,this.setState,["down"],!1),Laya.timer.once(200,this,this.setState,["up"],!1)),this.__click(Events.createEvent("click",this.displayObject))},i.setState=function(t){if(this._buttonController&&(this._buttonController.selectedPage=t),1==this._downEffect){var e=this.numChildren;if("down"==t||"selectedOver"==t||"selectedDisabled"==t)for(var i=255*this._downEffectValue,n=Utils$1.toHexColor((i<<16)+(i<<8)+i),s=0;e>s;s++){var r=this.getChildAt(s);(r instanceof fairygui.GImage||r instanceof fairygui.GLoader||r instanceof fairygui.GMovieClip)&&(r.color=n)}else for(s=0;e>s;s++)r=this.getChildAt(s),(r instanceof fairygui.GImage||r instanceof fairygui.GLoader||r instanceof fairygui.GMovieClip)&&(r.color="#FFFFFF")}else 2==this._downEffect&&("down"==t||"selectedOver"==t||"selectedDisabled"==t?this._downScaled||(this.setScale(this.scaleX*this._downEffectValue,this.scaleY*this._downEffectValue),this._downScaled=!0):this._downScaled&&(this.setScale(this.scaleX/this._downEffectValue,this.scaleY/this._downEffectValue),this._downScaled=!1))},i.handleControllerChanged=function(e){t.prototype.handleControllerChanged.call(this,e),this._relatedController==e&&(this.selected=this._pageOption.id==e.selectedPageId)},i.handleGrayedChanged=function(){this._buttonController&&this._buttonController.hasPage("disabled")?this.grayed?this._selected&&this._buttonController.hasPage("selectedDisabled")?this.setState("selectedDisabled"):this.setState("disabled"):this._selected?this.setState("down"):this.setState("up"):t.prototype.handleGrayedChanged.call(this)},i.constructExtension=function(t){t.seek(0,6),this._mode=t.readByte();var e=t.readS();e&&(this._sound=e),this._soundVolumeScale=t.getFloat32(),this._downEffect=t.readByte(),this._downEffectValue=t.getFloat32(),2==this._downEffect&&this.setPivot(.5,.5,this.pivotAsAnchor),this._buttonController=this.getController("button"),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon"),null!=this._titleObject&&(this._title=this._titleObject.text),null!=this._iconObject&&(this._icon=this._iconObject.icon),0==this._mode&&this.setState("up"),this.on("mouseover",this,this.__rollover),this.on("mouseout",this,this.__rollout),this.on("mousedown",this,this.__mousedown),this.on("click",this,this.__click)},i.setup_afterAdd=function(e,i){if(t.prototype.setup_afterAdd.call(this,e,i),e.seek(i,6)&&e.readByte()==this.packageItem.objectType){var n,s=0;n=e.readS(),null!=n&&(this.title=n),n=e.readS(),null!=n&&(this.selectedTitle=n),n=e.readS(),null!=n&&(this.icon=n),n=e.readS(),null!=n&&(this.selectedIcon=n),e.readBool()&&(this.titleColor=e.readColorS()),s=e.getInt32(),0!=s&&(this.titleFontSize=s),s=e.getInt16(),s>=0&&(this._relatedController=this.parent.getControllerAt(s)),this.pageOption.id=e.readS(),n=e.readS(),null!=n&&(this._sound=n),e.readBool()&&(this._soundVolumeScale=e.getFloat32()),this.selected=e.readBool()}},i.__rollover=function(){this._buttonController&&this._buttonController.hasPage("over")&&(this._over=!0,this._down||this.grayed&&this._buttonController.hasPage("disabled")||this.setState(this._selected?"selectedOver":"over"))},i.__rollout=function(){this._buttonController&&this._buttonController.hasPage("over")&&(this._over=!1,this._down||this.grayed&&this._buttonController.hasPage("disabled")||this.setState(this._selected?"down":"up"))},i.__mousedown=function(t){this._down=!0,GRoot.inst.checkPopups(t.target),Laya.stage.on("mouseup",this,this.__mouseup),0==this._mode&&(this.grayed&&this._buttonController&&this._buttonController.hasPage("disabled")?this.setState("selectedDisabled"):this.setState("down")),null!=this._linkedPopup&&(this._linkedPopup instanceof fairygui.Window?this._linkedPopup.toggleStatus():this.root.togglePopup(this._linkedPopup,this))},i.__mouseup=function(){if(this._down){if(Laya.stage.off("mouseup",this,this.__mouseup),this._down=!1,null==this._displayObject)return;0==this._mode&&(this.grayed&&this._buttonController&&this._buttonController.hasPage("disabled")?this.setState("disabled"):this._over?this.setState("over"):this.setState("up"))}},i.__click=function(t){if(this._sound){var e=UIPackage.getItemByURL(this._sound);e?GRoot.inst.playOneShotSound(e.file):GRoot.inst.playOneShotSound(this._sound)}1==this._mode?this._changeStateOnClick&&(this.selected=!this._selected,Events.dispatch("fui_state_changed",this.displayObject,t)):2==this._mode?this._changeStateOnClick&&!this._selected&&(this.selected=!0,Events.dispatch("fui_state_changed",this.displayObject,t)):this._relatedController&&(this._relatedController.selectedPageId=this._pageOption.id)},__getset(0,i,"relatedController",function(){return this._relatedController},function(t){t!=this._relatedController&&(this._relatedController=t,this._pageOption.controller=t,this._pageOption.clear())}),__getset(0,i,"icon",function(){return this._icon},function(t){this._icon=t,t=this._selected&&this._selectedIcon?this._selectedIcon:this._icon,null!=this._iconObject&&(this._iconObject.icon=t),this.updateGear(7)}),__getset(0,i,"titleFontSize",function(){var t=this.getTextField();return null!=t?t.fontSize:0},function(t){var e=this.getTextField();null!=e&&(e.fontSize=t)}),__getset(0,i,"selectedIcon",function(){return this._selectedIcon},function(t){this._selectedIcon=t,t=this._selected&&this._selectedIcon?this._selectedIcon:this._icon,null!=this._iconObject&&(this._iconObject.icon=t)}),__getset(0,i,"title",function(){return this._title},function(t){this._title=t,this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title),this.updateGear(6)}),__getset(0,i,"text",function(){return this.title},function(t){this.title=t}),__getset(0,i,"selectedTitle",function(){return this._selectedTitle},function(t){this._selectedTitle=t,this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title)}),__getset(0,i,"soundVolumeScale",function(){return this._soundVolumeScale},function(t){this._soundVolumeScale=t}),__getset(0,i,"sound",function(){return this._sound},function(t){this._sound=t}),__getset(0,i,"titleColor",function(){var t=this.getTextField();return null!=t?t.color:"#000000"},function(t){var e=this.getTextField();null!=e&&(e.color=t),this.updateGear(4)}),__getset(0,i,"selected",function(){return this._selected},function(t){if(0!=this._mode&&this._selected!=t){if(this._selected=t,this.grayed&&this._buttonController&&this._buttonController.hasPage("disabled")?this._selected?this.setState("selectedDisabled"):this.setState("disabled"):this._selected?this.setState(this._over?"selectedOver":"down"):this.setState(this._over?"over":"up"),this._selectedTitle&&this._titleObject&&(this._titleObject.text=this._selected?this._selectedTitle:this._title),this._selectedIcon){var e=this._selected?this._selectedIcon:this._icon;null!=this._iconObject&&(this._iconObject.icon=e)}this._relatedController&&this._parent&&!this._parent._buildingDisplayList&&(this._selected?(this._relatedController.selectedPageId=this._pageOption.id,this._relatedController.autoRadioGroupDepth&&this._parent.adjustRadioGroupDepth(this,this._relatedController)):1==this._mode&&this._relatedController.selectedPageId==this._pageOption.id&&(this._relatedController.oppositePageId=this._pageOption.id))}}),__getset(0,i,"mode",function(){return this._mode},function(t){this._mode!=t&&(0==t&&(this.selected=!1),this._mode=t)}),__getset(0,i,"pageOption",function(){return this._pageOption}),__getset(0,i,"changeStateOnClick",function(){return this._changeStateOnClick},function(t){this._changeStateOnClick=t}),__getset(0,i,"linkedPopup",function(){return this._linkedPopup},function(t){this._linkedPopup=t}),e.UP="up",e.DOWN="down",e.OVER="over",e.SELECTED_OVER="selectedOver",e.DISABLED="disabled",e.SELECTED_DISABLED="selectedDisabled",e}(GComponent),GComboBox=function(t){function e(){this.dropdown=null,this._titleObject=null,this._iconObject=null,this._list=null,this._items=null,this._icons=null,this._values=null,this._popupDirection=0,this._visibleItemCount=0,this._itemsUpdated=!1,this._selectedIndex=0,this._buttonController=null,this._selectionController=null,this._down=!1,this._over=!1,e.__super.call(this),this._visibleItemCount=UIConfig$1.defaultComboBoxVisibleItemCount,this._itemsUpdated=!0,this._selectedIndex=-1,this._items=[],this._values=[]}__class(e,"fairygui.GComboBox",t);var i=e.prototype;return i.getTextField=function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject:this._titleObject instanceof fairygui.GLabel?this._titleObject.getTextField():this._titleObject instanceof fairygui.GButton?this._titleObject.getTextField():null},i.setState=function(t){this._buttonController&&(this._buttonController.selectedPage=t)},i.handleControllerChanged=function(e){t.prototype.handleControllerChanged.call(this,e),this._selectionController==e&&(this.selectedIndex=e.selectedIndex)},i.updateSelectionController=function(){if(null!=this._selectionController&&!this._selectionController.changing&&this._selectedIndex<this._selectionController.pageCount){var t=this._selectionController;this._selectionController=null,t.selectedIndex=this._selectedIndex,this._selectionController=t}},i.dispose=function(){this.dropdown&&(this.dropdown.dispose(),this.dropdown=null),this._selectionController=null,t.prototype.dispose.call(this)},i.constructExtension=function(t){var e;if(this._buttonController=this.getController("button"),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon"),e=t.readS()){if(this.dropdown=UIPackage.createObjectFromURL(e),!this.dropdown)return void Log.print("下拉框必须为元件");if(this.dropdown.name="this._dropdownObject",this._list=this.dropdown.getChild("list").asList,null==this._list)return void Log.print(this.resourceURL+": 下拉框的弹出元件里必须包含名为list的列表");this._list.on("fui_click_item",this,this.__clickItem),this._list.addRelation(this.dropdown,14),this._list.removeRelation(this.dropdown,15),this.dropdown.addRelation(this._list,15),this.dropdown.removeRelation(this._list,14),this.dropdown.displayObject.on("undisplay",this,this.__popupWinClosed)}this.on("mouseover",this,this.__rollover),this.on("mouseout",this,this.__rollout),this.on("mousedown",this,this.__mousedown)},i.setup_afterAdd=function(e,i){if(t.prototype.setup_afterAdd.call(this,e,i),e.seek(i,6)&&e.readByte()==this.packageItem.objectType){var n,s=0,r=0,a=0,o=e.getInt16();for(s=0;o>s;s++)a=e.getInt16(),a+=e.pos,this._items[s]=e.readS(),this._values[s]=e.readS(),n=e.readS(),null!=n&&(null==this._icons&&(this._icons=[]),this._icons[s]=n),e.pos=a;n=e.readS(),null!=n?(this.text=n,this._selectedIndex=this._items.indexOf(n)):this._items.length>0?(this._selectedIndex=0,this.text=this._items[0]):this._selectedIndex=-1,n=e.readS(),null!=n&&(this.icon=n),e.readBool()&&(this.titleColor=e.readColorS()),r=e.getInt32(),r>0&&(this._visibleItemCount=r),this._popupDirection=e.readByte(),r=e.getInt16(),r>=0&&(this._selectionController=this.parent.getControllerAt(r))}},i.showDropdown=function(){if(this._itemsUpdated){this._itemsUpdated=!1,this._list.removeChildrenToPool();for(var t=this._items.length,e=0;t>e;e++){var i=this._list.addItemFromPool();i.name=e<this._values.length?this._values[e]:"",i.text=this._items[e],i.icon=null!=this._icons&&e<this._icons.length?this._icons[e]:null}this._list.resizeToFit(this._visibleItemCount)}this._list.selectedIndex=-1,this.dropdown.width=this.width;var n=null;2==this._popupDirection?n=!0:1==this._popupDirection&&(n=!1),this.root.togglePopup(this.dropdown,this,n),this.dropdown.parent&&this.setState("down")},i.__popupWinClosed=function(){this._over?this.setState("over"):this.setState("up")},i.__clickItem=function(t,e){Laya.timer.callLater(this,this.__clickItem2,[this._list.getChildIndex(t),e])},i.__clickItem2=function(t,e){this.dropdown.parent instanceof fairygui.GRoot&&this.dropdown.parent.hidePopup(),this._selectedIndex=-1,this.selectedIndex=t,Events.dispatch("fui_state_changed",this.displayObject,e)},i.__rollover=function(){this._over=!0,this._down||this.dropdown&&this.dropdown.parent||this.setState("over")},i.__rollout=function(){this._over=!1,this._down||this.dropdown&&this.dropdown.parent||this.setState("up")},i.__mousedown=function(t){t.target instanceof laya.display.Input||(this._down=!0,GRoot.inst.checkPopups(t.target),Laya.stage.on("mouseup",this,this.__mouseup),this.dropdown&&this.showDropdown())},i.__mouseup=function(){this._down&&(this._down=!1,Laya.stage.off("mouseup",this,this.__mouseup),this.dropdown&&!this.dropdown.parent&&(this._over?this.setState("over"):this.setState("up")))},__getset(0,i,"text",function(){return this._titleObject?this._titleObject.text:null},function(t){this._titleObject&&(this._titleObject.text=t),this.updateGear(6)}),__getset(0,i,"titleColor",function(){var t=this.getTextField();return null!=t?t.color:"#000000"},function(t){var e=this.getTextField();null!=e&&(e.color=t),this.updateGear(4)}),__getset(0,i,"titleFontSize",function(){var t=this.getTextField();return null!=t?t.fontSize:0},function(t){var e=this.getTextField();null!=e&&(e.fontSize=t)}),__getset(0,i,"icon",function(){return this._iconObject?this._iconObject.icon:null},function(t){this._iconObject&&(this._iconObject.icon=t),this.updateGear(7)}),__getset(0,i,"icons",function(){return this._icons},function(t){this._icons=t,null!=this._icons&&-1!=this._selectedIndex&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])}),__getset(0,i,"selectionController",function(){return this._selectionController},function(t){this._selectionController=t}),__getset(0,i,"visibleItemCount",function(){return this._visibleItemCount},function(t){this._visibleItemCount=t}),__getset(0,i,"popupDirection",function(){return this._popupDirection},function(t){this._popupDirection=t}),__getset(0,i,"items",function(){return this._items},function(t){t?this._items=t.concat():this._items.length=0,this._items.length>0?(this._selectedIndex>=this._items.length?this._selectedIndex=this._items.length-1:-1==this._selectedIndex&&(this._selectedIndex=0),this.text=this._items[this._selectedIndex],null!=this._icons&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])):(this.text="",null!=this._icons&&(this.icon=null),this._selectedIndex=-1),this._itemsUpdated=!0}),__getset(0,i,"values",function(){return this._values},function(t){t?this._values=t.concat():this._values.length=0}),__getset(0,i,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this._selectedIndex>=0&&this._selectedIndex<this._items.length?(this.text=this._items[this._selectedIndex],null!=this._icons&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])):(this.text="",null!=this._icons&&(this.icon=null)),this.updateSelectionController())}),__getset(0,i,"value",function(){return this._values[this._selectedIndex]},function(t){this.selectedIndex=this._values.indexOf(t)}),e}(GComponent),UIComponent=function(t){function e(){this.transShow=null,this.transHide=null,e.__super.call(this)}__class(e,"com.emugif.core.ui.core.UIComponent",t);var i=e.prototype;return i.onRemove=function(t){},i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.transShow=this.getTransition("show"),this.transHide=this.getTransition("hide"),this.getController("_coinType")&&(this.getController("_coinType").selectedIndex=App.config.coinType),this.getController("_scoreType")&&(this.getController("_scoreType").selectedIndex=App.config.scoreType),this.displayObject.on("undisplay",this,this.onRemove)},i.onHideComplete=function(){this.visible=!1},e}(GComponent),GList=function(t){function e(){this.itemRenderer=null,this.itemProvider=null,this.scrollItemToViewOnClick=!1,this.foldInvisibleItems=!1,this._layout=0,this._lineCount=0,this._columnCount=0,this._lineGap=0,this._columnGap=0,this._defaultItem=null,this._autoResizeItem=!1,this._selectionMode=0,this._align=null,this._verticalAlign=null,this._selectionController=null,this._lastSelectedIndex=0,this._pool=null,this._virtual=!1,this._loop=!1,this._numItems=0,this._realNumItems=0,this._firstIndex=0,this._curLineItemCount=0,this._curLineItemCount2=0,this._itemSize=null,this._virtualListChanged=0,this._virtualItems=null,this._eventLocked=!1,this.itemInfoVer=0,e.__super.call(this),this._trackBounds=!0,this._pool=new GObjectPool,this._layout=0,this._autoResizeItem=!0,this._lastSelectedIndex=-1,this._selectionMode=0,this.opaque=!0,this.scrollItemToViewOnClick=!0,this._align="left",this._verticalAlign="top",this._container=new Sprite,this._displayObject.addChild(this._container)}var i;__class(e,"fairygui.GList",t);var n=e.prototype;return n.dispose=function(){this._pool.clear(),t.prototype.dispose.call(this)},n.getFromPool=function(t){t||(t=this._defaultItem);var e=this._pool.getObject(t);return null!=e&&(e.visible=!0),e},n.returnToPool=function(t){t.displayObject.cacheAsBitmap=!1,this._pool.returnObject(t)},n.addChildAt=function(e,i){if(void 0===i&&(i=0),t.prototype.addChildAt.call(this,e,i),e instanceof fairygui.GButton){var n=e;n.selected=!1,n.changeStateOnClick=!1}return e.on("click",this,this.__clickItem),e},n.addItem=function(t){return t||(t=this._defaultItem),this.addChild(UIPackage.createObjectFromURL(t))},n.addItemFromPool=function(t){return this.addChild(this.getFromPool(t))},n.removeChildAt=function(e,i){void 0===i&&(i=!1);var n=t.prototype.removeChildAt.call(this,e);return i?n.dispose():n.off("click",this,this.__clickItem),
n},n.removeChildToPoolAt=function(e){void 0===e&&(e=0);var i=t.prototype.removeChildAt.call(this,e);this.returnToPool(i)},n.removeChildToPool=function(t){this.removeChild(t),this.returnToPool(t)},n.removeChildrenToPool=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),(0>e||e>=this._children.length)&&(e=this._children.length-1);for(var i=t;e>=i;++i)this.removeChildToPoolAt(t)},n.getSelection=function(){var t=[],e=0;if(this._virtual)for(e=0;e<this._realNumItems;e++){var i=this._virtualItems[e];if(i.obj instanceof fairygui.GButton&&i.obj.selected||null==i.obj&&i.selected){var n=e;if(this._loop&&(n=e%this._numItems,-1!=t.indexOf(n)))continue;t.push(n)}}else{var s=this._children.length;for(e=0;s>e;e++){var r=this._children[e].asButton;null!=r&&r.selected&&t.push(e)}}return t},n.addSelection=function(t,e){if(void 0===e&&(e=!1),3!=this._selectionMode){this.checkVirtualList(),0==this._selectionMode&&this.clearSelection(),e&&this.scrollToView(t),this._lastSelectedIndex=t;var i=null;if(this._virtual){var n=this._virtualItems[t];null!=n.obj&&(i=n.obj.asButton),n.selected=!0}else i=this.getChildAt(t).asButton;null==i||i.selected||(i.selected=!0,this.updateSelectionController(t))}},n.removeSelection=function(t){if(3!=this._selectionMode){var e=null;if(this._virtual){var i=this._virtualItems[t];null!=i.obj&&(e=i.obj.asButton),i.selected=!1}else e=this.getChildAt(t).asButton;null!=e&&(e.selected=!1)}},n.clearSelection=function(){var t=0;if(this._virtual)for(t=0;t<this._realNumItems;t++){var e=this._virtualItems[t];e.obj instanceof fairygui.GButton&&(e.obj.selected=!1),e.selected=!1}else{var i=this._children.length;for(t=0;i>t;t++){var n=this._children[t].asButton;null!=n&&(n.selected=!1)}}},n.clearSelectionExcept=function(t){var e=0;if(this._virtual)for(e=0;e<this._realNumItems;e++){var i=this._virtualItems[e];i.obj!=t&&(i.obj instanceof fairygui.GButton&&(i.obj.selected=!1),i.selected=!1)}else{var n=this._children.length;for(e=0;n>e;e++){var s=this._children[e].asButton;null!=s&&s!=t&&(s.selected=!1)}}},n.selectAll=function(){this.checkVirtualList();var t=-1,e=0;if(this._virtual)for(e=0;e<this._realNumItems;e++){var i=this._virtualItems[e];i.obj instanceof fairygui.GButton&&!i.obj.selected&&(i.obj.selected=!0,t=e),i.selected=!0}else{var n=this._children.length;for(e=0;n>e;e++){var s=this._children[e].asButton;null==s||s.selected||(s.selected=!0,t=e)}}-1!=t&&this.updateSelectionController(t)},n.selectNone=function(){this.clearSelection()},n.selectReverse=function(){this.checkVirtualList();var t=-1,e=0;if(this._virtual)for(e=0;e<this._realNumItems;e++){var i=this._virtualItems[e];i.obj instanceof fairygui.GButton&&(i.obj.selected=!i.obj.selected,i.obj.selected&&(t=e)),i.selected=!i.selected}else{var n=this._children.length;for(e=0;n>e;e++){var s=this._children[e].asButton;null!=s&&(s.selected=!s.selected,s.selected&&(t=e))}}-1!=t&&this.updateSelectionController(t)},n.handleArrowKey=function(t){void 0===t&&(t=0);var e=this.selectedIndex;if(-1!=e)switch(t){case 1:if(0==this._layout||3==this._layout)e--,e>=0&&(this.clearSelection(),this.addSelection(e,!0));else if(2==this._layout||4==this._layout){for(var i=this._children[e],n=0,s=e-1;s>=0;s--){var r=this._children[s];if(r.y!=i.y){i=r;break}n++}for(;s>=0;s--)if(r=this._children[s],r.y!=i.y){this.clearSelection(),this.addSelection(s+n+1,!0);break}}break;case 3:if(1==this._layout||2==this._layout||4==this._layout)e++,e<this._children.length&&(this.clearSelection(),this.addSelection(e,!0));else if(3==this._layout){i=this._children[e],n=0;var a=this._children.length;for(s=e+1;a>s;s++){if(r=this._children[s],r.x!=i.x){i=r;break}n++}for(;a>s;s++)if(r=this._children[s],r.x!=i.x){this.clearSelection(),this.addSelection(s-n-1,!0);break}}break;case 5:if(0==this._layout||3==this._layout)e++,e<this._children.length&&(this.clearSelection(),this.addSelection(e,!0));else if(2==this._layout||4==this._layout){for(i=this._children[e],n=0,a=this._children.length,s=e+1;a>s;s++){if(r=this._children[s],r.y!=i.y){i=r;break}n++}for(;a>s;s++)if(r=this._children[s],r.y!=i.y){this.clearSelection(),this.addSelection(s-n-1,!0);break}}break;case 7:if(1==this._layout||2==this._layout||4==this._layout)e--,e>=0&&(this.clearSelection(),this.addSelection(e,!0));else if(3==this._layout){for(i=this._children[e],n=0,s=e-1;s>=0;s--){if(r=this._children[s],r.x!=i.x){i=r;break}n++}for(;s>=0;s--)if(r=this._children[s],r.x!=i.x){this.clearSelection(),this.addSelection(s+n+1,!0);break}}}},n.__clickItem=function(t){if(null==this._scrollPane||!this._scrollPane.isDragged){var e=GObject.cast(t.currentTarget);this.setSelectionOnEvent(e,t),this._scrollPane&&this.scrollItemToViewOnClick&&this._scrollPane.scrollToView(e,!0),this.displayObject.event("fui_click_item",[e,Events.createEvent("fui_click_item",this.displayObject,t)])}},n.setSelectionOnEvent=function(t,e){if(t instanceof fairygui.GButton&&3!=this._selectionMode){var i=!1,n=t,s=this.childIndexToItemIndex(this.getChildIndex(t));if(0==this._selectionMode)n.selected||(this.clearSelectionExcept(n),n.selected=!0);else if(e.shiftKey){if(!n.selected)if(-1!=this._lastSelectedIndex){var r=Math.min(this._lastSelectedIndex,s),a=Math.max(this._lastSelectedIndex,s);a=Math.min(a,this.numItems-1);var o=0;if(this._virtual)for(o=r;a>=o;o++){var h=this._virtualItems[o];h.obj instanceof fairygui.GButton&&(h.obj.selected=!0),h.selected=!0}else for(o=r;a>=o;o++){var l=this.getChildAt(o).asButton;null!=l&&(l.selected=!0)}i=!0}else n.selected=!0}else e.ctrlKey||2==this._selectionMode?n.selected=!n.selected:n.selected?this.clearSelectionExcept(n):(this.clearSelectionExcept(n),n.selected=!0);i||(this._lastSelectedIndex=s),n.selected&&this.updateSelectionController(s)}},n.resizeToFit=function(t,e){void 0===t&&(t=1e6),void 0===e&&(e=0),this.ensureBoundsCorrect();var i=this.numItems;if(t>i&&(t=i),this._virtual){var n=Math.ceil(t/this._curLineItemCount);0==this._layout||2==this._layout?this.viewHeight=n*this._itemSize.y+Math.max(0,n-1)*this._lineGap:this.viewWidth=n*this._itemSize.x+Math.max(0,n-1)*this._columnGap}else if(0==t)0==this._layout||2==this._layout?this.viewHeight=e:this.viewWidth=e;else{for(var s=t-1,r=null;s>=0&&(r=this.getChildAt(s),this.foldInvisibleItems&&!r.visible);)s--;if(0>s)0==this._layout||2==this._layout?this.viewHeight=e:this.viewWidth=e;else{var a=0;0==this._layout||2==this._layout?(a=r.y+r.height,e>a&&(a=e),this.viewHeight=a):(a=r.x+r.width,e>a&&(a=e),this.viewWidth=a)}}},n.getMaxItemWidth=function(){for(var t=this._children.length,e=0,i=0;t>i;i++){var n=this.getChildAt(i);n.width>e&&(e=n.width)}return e},n.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0)},n.handleControllerChanged=function(e){t.prototype.handleControllerChanged.call(this,e),this._selectionController==e&&(this.selectedIndex=e.selectedIndex)},n.updateSelectionController=function(t){if(null!=this._selectionController&&!this._selectionController.changing&&t<this._selectionController.pageCount){var e=this._selectionController;this._selectionController=null,e.selectedIndex=t,this._selectionController=e}},n.getSnappingPosition=function(e,i,n){if(this._virtual){n||(n=new Point);var s=NaN,r=0;return 0==this._layout||2==this._layout?(s=i,fairygui.GList.pos_param=i,r=this.getIndexOnPos1(!1),i=fairygui.GList.pos_param,r<this._virtualItems.length&&s-i>this._virtualItems[r].height/2&&r<this._realNumItems&&(i+=this._virtualItems[r].height+this._lineGap)):1==this._layout||3==this._layout?(s=e,fairygui.GList.pos_param=e,r=this.getIndexOnPos2(!1),e=fairygui.GList.pos_param,r<this._virtualItems.length&&s-e>this._virtualItems[r].width/2&&r<this._realNumItems&&(e+=this._virtualItems[r].width+this._columnGap)):(s=e,fairygui.GList.pos_param=e,r=this.getIndexOnPos3(!1),e=fairygui.GList.pos_param,r<this._virtualItems.length&&s-e>this._virtualItems[r].width/2&&r<this._realNumItems&&(e+=this._virtualItems[r].width+this._columnGap)),n.x=e,n.y=i,n}return t.prototype.getSnappingPosition.call(this,e,i,n)},n.scrollToView=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),this._virtual){if(0==this._numItems)return;if(this.checkVirtualList(),t>=this._virtualItems.length)throw new Error("Invalid child index: "+t+">"+this._virtualItems.length);this._loop&&(t=Math.floor(this._firstIndex/this._numItems)*this._numItems+t);var n,s=this._virtualItems[t],r=0,a=0;if(0==this._layout||2==this._layout){for(a=this._curLineItemCount-1;t>a;a+=this._curLineItemCount)r+=this._virtualItems[a].height+this._lineGap;n=new Rectangle(0,r,this._itemSize.x,s.height)}else if(1==this._layout||3==this._layout){for(a=this._curLineItemCount-1;t>a;a+=this._curLineItemCount)r+=this._virtualItems[a].width+this._columnGap;n=new Rectangle(r,0,s.width,this._itemSize.y)}else{var o=t/(this._curLineItemCount*this._curLineItemCount2);n=new Rectangle(o*this.viewWidth+t%this._curLineItemCount*(s.width+this._columnGap),t/this._curLineItemCount%this._curLineItemCount2*(s.height+this._lineGap),s.width,s.height)}i=!0,null!=this._scrollPane&&this._scrollPane.scrollToView(n,e,i)}else{var h=this.getChildAt(t);null!=this._scrollPane?this._scrollPane.scrollToView(h,e,i):null!=this.parent&&null!=this.parent.scrollPane&&this.parent.scrollPane.scrollToView(h,e,i)}},n.getFirstChildInView=function(){return this.childIndexToItemIndex(t.prototype.getFirstChildInView.call(this))},n.childIndexToItemIndex=function(t){if(!this._virtual)return t;if(4==this._layout){for(var e=this._firstIndex;e<this._realNumItems;e++)if(null!=this._virtualItems[e].obj&&(t--,0>t))return e;return t}return t+=this._firstIndex,this._loop&&this._numItems>0&&(t%=this._numItems),t},n.itemIndexToChildIndex=function(t){if(!this._virtual)return t;if(4==this._layout)return this.getChildIndex(this._virtualItems[t].obj);if(this._loop&&this._numItems>0){var e=this._firstIndex%this._numItems;t>=e?t-=e:t=this._numItems-e+t}else t-=this._firstIndex;return t},n.setVirtual=function(){this._setVirtual(!1)},n.setVirtualAndLoop=function(){this._setVirtual(!0)},n._setVirtual=function(t){if(!this._virtual){if(null==this._scrollPane)throw new Error("Virtual list must be scrollable!");if(t){if(2==this._layout||3==this._layout)throw new Error("Loop list is not supported for FlowHorizontal or FlowVertical layout!");this._scrollPane.bouncebackEffect=!1}if(this._virtual=!0,this._loop=t,this._virtualItems=[],this.removeChildrenToPool(),null==this._itemSize){this._itemSize=new Point;var e=this.getFromPool(null);if(null==e)throw new Error("Virtual List must have a default list item resource.");this._itemSize.x=e.width,this._itemSize.y=e.height,this.returnToPool(e)}0==this._layout||2==this._layout?(this._scrollPane.scrollStep=this._itemSize.y,this._loop&&(this._scrollPane._loop=2)):(this._scrollPane.scrollStep=this._itemSize.x,this._loop&&(this._scrollPane._loop=1)),this.on("fui_scroll",this,this.__scrolled),this.setVirtualListChangedFlag(!0)}},n.refreshVirtualList=function(){this.setVirtualListChangedFlag(!1)},n.checkVirtualList=function(){0!=this._virtualListChanged&&(this._refreshVirtualList(),Laya.timer.clear(this,this._refreshVirtualList))},n.setVirtualListChangedFlag=function(t){void 0===t&&(t=!1),t?this._virtualListChanged=2:0==this._virtualListChanged&&(this._virtualListChanged=1),Laya.timer.callLater(this,this._refreshVirtualList)},n._refreshVirtualList=function(){var t=2==this._virtualListChanged;this._virtualListChanged=0,this._eventLocked=!0,t&&(0==this._layout||1==this._layout?this._curLineItemCount=1:2==this._layout?this._columnCount>0?this._curLineItemCount=this._columnCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/(this._itemSize.x+this._columnGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)):3==this._layout?this._lineCount>0?this._curLineItemCount=this._lineCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewHeight+this._lineGap)/(this._itemSize.y+this._lineGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)):(this._columnCount>0?this._curLineItemCount=this._columnCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/(this._itemSize.x+this._columnGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)),this._lineCount>0?this._curLineItemCount2=this._lineCount:(this._curLineItemCount2=Math.floor((this._scrollPane.viewHeight+this._lineGap)/(this._itemSize.y+this._lineGap)),this._curLineItemCount2<=0&&(this._curLineItemCount2=1))));var e=0,i=0;if(this._realNumItems>0){var n=0,s=Math.ceil(this._realNumItems/this._curLineItemCount)*this._curLineItemCount,r=Math.min(this._curLineItemCount,this._realNumItems);if(0==this._layout||2==this._layout){for(n=0;s>n;n+=this._curLineItemCount)e+=this._virtualItems[n].height+this._lineGap;if(e>0&&(e-=this._lineGap),this._autoResizeItem)i=this._scrollPane.viewWidth;else{for(n=0;r>n;n++)i+=this._virtualItems[n].width+this._columnGap;i>0&&(i-=this._columnGap)}}else if(1==this._layout||3==this._layout){for(n=0;s>n;n+=this._curLineItemCount)i+=this._virtualItems[n].width+this._columnGap;if(i>0&&(i-=this._columnGap),this._autoResizeItem)e=this._scrollPane.viewHeight;else{for(n=0;r>n;n++)e+=this._virtualItems[n].height+this._lineGap;e>0&&(e-=this._lineGap)}}else{var a=Math.ceil(s/(this._curLineItemCount*this._curLineItemCount2));i=a*this.viewWidth,e=this.viewHeight}}this.handleAlign(i,e),this._scrollPane.setContentSize(i,e),this._eventLocked=!1,this.handleScroll(!0)},n.__scrolled=function(t){this.handleScroll(!1)},n.getIndexOnPos1=function(t){if(this._realNumItems<this._curLineItemCount)return e.pos_param=0,0;var i=0,n=NaN,s=NaN;if(this.numChildren>0&&!t){if(n=this.getChildAt(0).y,n>e.pos_param){for(i=this._firstIndex-this._curLineItemCount;i>=0;i-=this._curLineItemCount)if(n-=this._virtualItems[i].height+this._lineGap,n<=e.pos_param)return e.pos_param=n,i;return e.pos_param=0,0}for(i=this._firstIndex;i<this._realNumItems;i+=this._curLineItemCount){if(s=n+this._virtualItems[i].height+this._lineGap,s>e.pos_param)return e.pos_param=n,i;n=s}return e.pos_param=n,this._realNumItems-this._curLineItemCount}for(n=0,i=0;i<this._realNumItems;i+=this._curLineItemCount){if(s=n+this._virtualItems[i].height+this._lineGap,s>e.pos_param)return e.pos_param=n,i;n=s}return e.pos_param=n,this._realNumItems-this._curLineItemCount},n.getIndexOnPos2=function(t){if(this._realNumItems<this._curLineItemCount)return e.pos_param=0,0;var i=0,n=NaN,s=NaN;if(this.numChildren>0&&!t){if(n=this.getChildAt(0).x,n>e.pos_param){for(i=this._firstIndex-this._curLineItemCount;i>=0;i-=this._curLineItemCount)if(n-=this._virtualItems[i].width+this._columnGap,n<=e.pos_param)return e.pos_param=n,i;return e.pos_param=0,0}for(i=this._firstIndex;i<this._realNumItems;i+=this._curLineItemCount){if(s=n+this._virtualItems[i].width+this._columnGap,s>e.pos_param)return e.pos_param=n,i;n=s}return e.pos_param=n,this._realNumItems-this._curLineItemCount}for(n=0,i=0;i<this._realNumItems;i+=this._curLineItemCount){if(s=n+this._virtualItems[i].width+this._columnGap,s>e.pos_param)return e.pos_param=n,i;n=s}return e.pos_param=n,this._realNumItems-this._curLineItemCount},n.getIndexOnPos3=function(t){if(this._realNumItems<this._curLineItemCount)return e.pos_param=0,0;var i=this.viewWidth,n=Math.floor(e.pos_param/i),s=n*(this._curLineItemCount*this._curLineItemCount2),r=n*i,a=0,o=NaN;for(a=0;a<this._curLineItemCount;a++){if(o=r+this._virtualItems[s+a].width+this._columnGap,o>e.pos_param)return e.pos_param=r,s+a;r=o}return e.pos_param=r,s+this._curLineItemCount-1},n.handleScroll=function(t){if(!this._eventLocked){if(0==this._layout||2==this._layout){for(var e=0;this.handleScroll1(t);)if(e++,t=!1,e>20){console.log("FairyGUI: list will never be filled as the item renderer function always returns a different size.");break}this.handleArchOrder1()}else if(1==this._layout||3==this._layout){for(e=0;this.handleScroll2(t);)if(e++,t=!1,e>20){console.log("FairyGUI: list will never be filled as the item renderer function always returns a different size.");break}this.handleArchOrder2()}else this.handleScroll3(t);this._boundsChanged=!1}},n.handleScroll1=function(t){var e=this._scrollPane.scrollingPosY,i=e+this._scrollPane.viewHeight,n=i==this._scrollPane.contentHeight;fairygui.GList.pos_param=e;var s=this.getIndexOnPos1(t);if(e=fairygui.GList.pos_param,s==this._firstIndex&&!t)return!1;var r=this._firstIndex;this._firstIndex=s;var a,o,h=s,l=r>s,c=this.numChildren,u=r+c-1,_=l?u:r,d=0,f=e,p=!1,g=0,m=0,v=this.defaultItem,y=0,w=0,b=(this._scrollPane.viewWidth-this._columnGap*(this._curLineItemCount-1))/this._curLineItemCount;for(this.itemInfoVer++;h<this._realNumItems&&(n||i>f);){if(a=this._virtualItems[h],(null==a.obj||t)&&(null!=this.itemProvider&&(v=this.itemProvider.runWith(h%this._numItems),null==v&&(v=this._defaultItem),v=UIPackage.normalizeURL(v)),null!=a.obj&&a.obj.resourceURL!=v&&(a.obj instanceof fairygui.GButton&&(a.selected=a.obj.selected),this.removeChildToPool(a.obj),a.obj=null)),null==a.obj){if(l){for(w=_;w>=r;w--)if(o=this._virtualItems[w],null!=o.obj&&o.updateFlag!=this.itemInfoVer&&o.obj.resourceURL==v){o.obj instanceof fairygui.GButton&&(o.selected=o.obj.selected),a.obj=o.obj,o.obj=null,w==_&&_--;break}}else for(w=_;u>=w;w++)if(o=this._virtualItems[w],null!=o.obj&&o.updateFlag!=this.itemInfoVer&&o.obj.resourceURL==v){o.obj instanceof fairygui.GButton&&(o.selected=o.obj.selected),a.obj=o.obj,o.obj=null,w==_&&_++;break}null!=a.obj?this.setChildIndex(a.obj,l?h-s:this.numChildren):(a.obj=this._pool.getObject(v),l?this.addChildAt(a.obj,h-s):this.addChild(a.obj)),a.obj instanceof fairygui.GButton&&(a.obj.selected=a.selected),p=!0}else p=t;p&&(this._autoResizeItem&&(0==this._layout||this._columnCount>0)&&a.obj.setSize(b,a.obj.height,!0),this.itemRenderer.runWith([h%this._numItems,a.obj]),h%this._curLineItemCount==0&&(g+=Math.ceil(a.obj.height)-a.height,h==s&&r>s&&(m=Math.ceil(a.obj.height)-a.height)),a.width=Math.ceil(a.obj.width),a.height=Math.ceil(a.obj.height)),a.updateFlag=this.itemInfoVer,a.obj.setXY(d,f),h==s&&(i+=a.height),d+=a.width+this._columnGap,h%this._curLineItemCount==this._curLineItemCount-1&&(d=0,f+=a.height+this._lineGap),h++}for(y=0;c>y;y++)a=this._virtualItems[r+y],a.updateFlag!=this.itemInfoVer&&null!=a.obj&&(a.obj instanceof fairygui.GButton&&(a.selected=a.obj.selected),this.removeChildToPool(a.obj),a.obj=null);for(c=this._children.length,y=0;c>y;y++){var S=this._virtualItems[s+y].obj;this._children[y]!=S&&this.setChildIndex(S,y)}return 0==g&&0==m||this._scrollPane.changeContentSizeOnScrolling(0,g,0,m),h>0&&this.numChildren>0&&this._container.y<0&&this.getChildAt(0).y>-this._container.y},n.handleScroll2=function(t){var e=this._scrollPane.scrollingPosX,i=e+this._scrollPane.viewWidth,n=e==this._scrollPane.contentWidth;fairygui.GList.pos_param=e;var s=this.getIndexOnPos2(t);if(e=fairygui.GList.pos_param,s==this._firstIndex&&!t)return!1;var r=this._firstIndex;this._firstIndex=s;var a,o,h=s,l=r>s,c=this.numChildren,u=r+c-1,_=l?u:r,d=e,f=0,p=!1,g=0,m=0,v=this.defaultItem,y=0,w=0,b=(this._scrollPane.viewHeight-this._lineGap*(this._curLineItemCount-1))/this._curLineItemCount;for(this.itemInfoVer++;h<this._realNumItems&&(n||i>d);){if(a=this._virtualItems[h],(null==a.obj||t)&&(null!=this.itemProvider&&(v=this.itemProvider.runWith(h%this._numItems),null==v&&(v=this._defaultItem),v=UIPackage.normalizeURL(v)),null!=a.obj&&a.obj.resourceURL!=v&&(a.obj instanceof fairygui.GButton&&(a.selected=a.obj.selected),this.removeChildToPool(a.obj),a.obj=null)),null==a.obj){if(l){for(w=_;w>=r;w--)if(o=this._virtualItems[w],null!=o.obj&&o.updateFlag!=this.itemInfoVer&&o.obj.resourceURL==v){o.obj instanceof fairygui.GButton&&(o.selected=o.obj.selected),a.obj=o.obj,o.obj=null,w==_&&_--;break}}else for(w=_;u>=w;w++)if(o=this._virtualItems[w],null!=o.obj&&o.updateFlag!=this.itemInfoVer&&o.obj.resourceURL==v){o.obj instanceof fairygui.GButton&&(o.selected=o.obj.selected),a.obj=o.obj,o.obj=null,w==_&&_++;break}null!=a.obj?this.setChildIndex(a.obj,l?h-s:this.numChildren):(a.obj=this._pool.getObject(v),l?this.addChildAt(a.obj,h-s):this.addChild(a.obj)),a.obj instanceof fairygui.GButton&&(a.obj.selected=a.selected),p=!0}else p=t;p&&(this._autoResizeItem&&(1==this._layout||this._lineCount>0)&&a.obj.setSize(a.obj.width,b,!0),this.itemRenderer.runWith([h%this._numItems,a.obj]),h%this._curLineItemCount==0&&(g+=Math.ceil(a.obj.width)-a.width,h==s&&r>s&&(m=Math.ceil(a.obj.width)-a.width)),a.width=Math.ceil(a.obj.width),a.height=Math.ceil(a.obj.height)),a.updateFlag=this.itemInfoVer,a.obj.setXY(d,f),h==s&&(i+=a.width),f+=a.height+this._lineGap,h%this._curLineItemCount==this._curLineItemCount-1&&(f=0,d+=a.width+this._columnGap),h++}for(y=0;c>y;y++)a=this._virtualItems[r+y],a.updateFlag!=this.itemInfoVer&&null!=a.obj&&(a.obj instanceof fairygui.GButton&&(a.selected=a.obj.selected),this.removeChildToPool(a.obj),a.obj=null);for(c=this._children.length,y=0;c>y;y++){var S=this._virtualItems[s+y].obj;this._children[y]!=S&&this.setChildIndex(S,y)}return 0==g&&0==m||this._scrollPane.changeContentSizeOnScrolling(g,0,m,0),h>0&&this.numChildren>0&&this._container.x<0&&this.getChildAt(0).x>-this._container.x},n.handleScroll3=function(t){var e=this._scrollPane.scrollingPosX;fairygui.GList.pos_param=e;var i=this.getIndexOnPos3(t);if(e=fairygui.GList.pos_param,i!=this._firstIndex||t){var n=this._firstIndex;this._firstIndex=i;var s,r,a=n,o=this._virtualItems.length,h=this._curLineItemCount*this._curLineItemCount2,l=i%this._curLineItemCount,c=this.viewWidth,u=Math.floor(i/h),_=u*h,d=_+2*h,f=!1,p=0,g=0,m=this._defaultItem,v=(this._scrollPane.viewWidth-this._columnGap*(this._curLineItemCount-1))/this._curLineItemCount,y=(this._scrollPane.viewHeight-this._lineGap*(this._curLineItemCount2-1))/this._curLineItemCount2;for(this.itemInfoVer++,p=_;d>p;p++)if(!(p>=this._realNumItems)){if(g=p%this._curLineItemCount,h>p-_){if(l>g)continue}else if(g>l)continue;s=this._virtualItems[p],s.updateFlag=this.itemInfoVer}var w=null,b=0;for(p=_;d>p;p++)if(!(p>=this._realNumItems)&&(s=this._virtualItems[p],s.updateFlag==this.itemInfoVer)){if(null==s.obj){for(;o>a;){if(r=this._virtualItems[a],null!=r.obj&&r.updateFlag!=this.itemInfoVer){r.obj instanceof fairygui.GButton&&(r.selected=r.obj.selected),s.obj=r.obj,r.obj=null;break}a++}-1==b&&(b=this.getChildIndex(w)+1),null==s.obj?(null!=this.itemProvider&&(m=this.itemProvider.runWith(p%this._numItems),null==m&&(m=this._defaultItem),m=UIPackage.normalizeURL(m)),s.obj=this._pool.getObject(m),this.addChildAt(s.obj,b)):b=this.setChildIndexBefore(s.obj,b),b++,s.obj instanceof fairygui.GButton&&(s.obj.selected=s.selected),f=!0}else f=t,b=-1,w=s.obj;f&&(this._autoResizeItem&&(this._curLineItemCount==this._columnCount&&this._curLineItemCount2==this._lineCount?s.obj.setSize(v,y,!0):this._curLineItemCount==this._columnCount?s.obj.setSize(v,s.obj.height,!0):this._curLineItemCount2==this._lineCount&&s.obj.setSize(s.obj.width,y,!0)),this.itemRenderer.runWith([p%this._numItems,s.obj]),s.width=Math.ceil(s.obj.width),s.height=Math.ceil(s.obj.height))}var S=_/h*c,x=S,C=0,T=0;for(p=_;d>p;p++)p>=this._realNumItems||(s=this._virtualItems[p],s.updateFlag==this.itemInfoVer&&s.obj.setXY(x,C),s.height>T&&(T=s.height),p%this._curLineItemCount==this._curLineItemCount-1?(x=S,C+=T+this._lineGap,T=0,p==_+h-1&&(S+=c,x=S,C=0)):x+=s.width+this._columnGap);for(p=a;o>p;p++)s=this._virtualItems[p],s.updateFlag!=this.itemInfoVer&&null!=s.obj&&(s.obj instanceof fairygui.GButton&&(s.selected=s.obj.selected),this.removeChildToPool(s.obj),s.obj=null)}},n.handleArchOrder1=function(){if(2==this.childrenRenderOrder){for(var t=this._scrollPane.posY+this.viewHeight/2,e=Number.POSITIVE_INFINITY,i=0,n=0,s=this.numChildren,r=0;s>r;r++){var a=this.getChildAt(r);this.foldInvisibleItems&&!a.visible||(i=Math.abs(t-a.y-a.height/2),e>i&&(e=i,n=r))}this.apexIndex=n}},n.handleArchOrder2=function(){if(2==this.childrenRenderOrder){for(var t=this._scrollPane.posX+this.viewWidth/2,e=Number.POSITIVE_INFINITY,i=0,n=0,s=this.numChildren,r=0;s>r;r++){var a=this.getChildAt(r);this.foldInvisibleItems&&!a.visible||(i=Math.abs(t-a.x-a.width/2),e>i&&(e=i,n=r))}this.apexIndex=n}},n.handleAlign=function(t,e){var i=0,n=0;e<this.viewHeight&&("middle"==this._verticalAlign?n=Math.floor((this.viewHeight-e)/2):"bottom"==this._verticalAlign&&(n=this.viewHeight-e)),t<this.viewWidth&&("center"==this._align?i=Math.floor((this.viewWidth-t)/2):"right"==this._align&&(i=this.viewWidth-t)),i==this._alignOffset.x&&n==this._alignOffset.y||(this._alignOffset.setTo(i,n),null!=this._scrollPane?this._scrollPane.adjustMaskContainer():this._container.pos(this._margin.left+this._alignOffset.x,this._margin.top+this._alignOffset.y))},n.updateBounds=function(){if(!this._virtual){var t,e=0,i=0,n=0,s=0,r=0,a=0,o=0,h=0,l=0,c=0,u=this._children.length,_=this.viewWidth,d=this.viewHeight,f=0,p=0,g=NaN;if(0==this._layout){for(e=0;u>e;e++)t=this.getChildAt(e),this.foldInvisibleItems&&!t.visible||(0!=n&&(n+=this._lineGap),t.y=n,this._autoResizeItem&&t.setSize(_,t.height,!0),n+=Math.ceil(t.height),t.width>s&&(s=t.width));a=Math.ceil(s),o=n}else if(1==this._layout){for(e=0;u>e;e++)t=this.getChildAt(e),this.foldInvisibleItems&&!t.visible||(0!=i&&(i+=this._columnGap),t.x=i,this._autoResizeItem&&t.setSize(t.width,d,!0),i+=Math.ceil(t.width),t.height>r&&(r=t.height));a=i,o=Math.ceil(r)}else if(2==this._layout)if(this._autoResizeItem&&this._columnCount>0){for(e=0;u>e;e++)if(t=this.getChildAt(e),(!this.foldInvisibleItems||t.visible)&&(f+=t.sourceWidth,h++,h==this._columnCount||e==u-1)){for(g=(_-f-(h-1)*this._columnGap)/f,i=0,h=p;e>=h;h++)t=this.getChildAt(h),this.foldInvisibleItems&&!t.visible||(t.setXY(i,n),e>h?(t.setSize(t.sourceWidth+Math.round(t.sourceWidth*g),t.height,!0),i+=Math.ceil(t.width)+this._columnGap):t.setSize(_-i,t.height,!0),t.height>r&&(r=t.height));n+=Math.ceil(r)+this._lineGap,r=0,h=0,p=e+1,f=0}o=n+Math.ceil(r),a=_}else{for(e=0;u>e;e++)t=this.getChildAt(e),this.foldInvisibleItems&&!t.visible||(0!=i&&(i+=this._columnGap),(0!=this._columnCount&&h>=this._columnCount||0==this._columnCount&&i+t.width>_&&0!=r)&&(i=0,n+=Math.ceil(r)+this._lineGap,r=0,h=0),t.setXY(i,n),i+=Math.ceil(t.width),i>s&&(s=i),t.height>r&&(r=t.height),h++);o=n+Math.ceil(r),a=Math.ceil(s)}else if(3==this._layout)if(this._autoResizeItem&&this._lineCount>0){for(e=0;u>e;e++)if(t=this.getChildAt(e),(!this.foldInvisibleItems||t.visible)&&(f+=t.sourceHeight,h++,h==this._lineCount||e==u-1)){for(g=(d-f-(h-1)*this._lineGap)/f,n=0,h=p;e>=h;h++)t=this.getChildAt(h),this.foldInvisibleItems&&!t.visible||(t.setXY(i,n),e>h?(t.setSize(t.width,t.sourceHeight+Math.round(t.sourceHeight*g),!0),n+=Math.ceil(t.height)+this._lineGap):t.setSize(t.width,d-n,!0),t.width>s&&(s=t.width));i+=Math.ceil(s)+this._columnGap,s=0,h=0,p=e+1,f=0}a=i+Math.ceil(s),o=d}else{for(e=0;u>e;e++)t=this.getChildAt(e),this.foldInvisibleItems&&!t.visible||(0!=n&&(n+=this._lineGap),(0!=this._lineCount&&h>=this._lineCount||0==this._lineCount&&n+t.height>d&&0!=s)&&(n=0,i+=Math.ceil(s)+this._columnGap,s=0,h=0),t.setXY(i,n),n+=Math.ceil(t.height),n>r&&(r=n),t.width>s&&(s=t.width),h++);a=i+Math.ceil(s),o=Math.ceil(r)}else{var m=0;if(this._autoResizeItem&&this._lineCount>0&&(m=Math.floor((d-(this._lineCount-1)*this._lineGap)/this._lineCount)),this._autoResizeItem&&this._columnCount>0){for(e=0;u>e;e++)if(t=this.getChildAt(e),(!this.foldInvisibleItems||t.visible)&&(0==h&&(0!=this._lineCount&&c>=this._lineCount||0==this._lineCount&&n+t.height>d)&&(l++,n=0,c=0),f+=t.sourceWidth,h++,h==this._columnCount||e==u-1)){for(g=(_-f-(h-1)*this._columnGap)/f,i=0,h=p;e>=h;h++)t=this.getChildAt(h),this.foldInvisibleItems&&!t.visible||(t.setXY(l*_+i,n),e>h?(t.setSize(t.sourceWidth+Math.round(t.sourceWidth*g),this._lineCount>0?m:t.height,!0),i+=Math.ceil(t.width)+this._columnGap):t.setSize(_-i,this._lineCount>0?m:t.height,!0),t.height>r&&(r=t.height));n+=Math.ceil(r)+this._lineGap,r=0,h=0,p=e+1,f=0,c++}}else for(e=0;u>e;e++)t=this.getChildAt(e),this.foldInvisibleItems&&!t.visible||(0!=i&&(i+=this._columnGap),this._autoResizeItem&&this._lineCount>0&&t.setSize(t.width,m,!0),(0!=this._columnCount&&h>=this._columnCount||0==this._columnCount&&i+t.width>_&&0!=r)&&(i=0,n+=Math.ceil(r)+this._lineGap,r=0,h=0,c++,(0!=this._lineCount&&c>=this._lineCount||0==this._lineCount&&n+t.height>d&&0!=s)&&(l++,n=0,c=0)),t.setXY(l*_+i,n),i+=Math.ceil(t.width),i>s&&(s=i),t.height>r&&(r=t.height),h++);o=l>0?d:n+Math.ceil(r),a=(l+1)*_}this.handleAlign(a,o),this.setBounds(0,0,a,o)}},n.setup_beforeAdd=function(t,e){fairygui.GObject.prototype.setup_beforeAdd.call(this,t,e),t.seek(e,5);var i,n=0,s=0,r=0,a=0,o=0;this._layout=t.readByte(),this._selectionMode=t.readByte(),a=t.readByte(),this._align=0==a?"left":1==a?"center":"right",a=t.readByte(),this._verticalAlign=0==a?"top":1==a?"middle":"bottom",this._lineGap=t.getInt16(),this._columnGap=t.getInt16(),this._lineCount=t.getInt16(),this._columnCount=t.getInt16(),this._autoResizeItem=t.readBool(),this._childrenRenderOrder=t.readByte(),this._apexIndex=t.getInt16(),t.readBool()&&(this._margin.top=t.getInt32(),this._margin.bottom=t.getInt32(),this._margin.left=t.getInt32(),this._margin.right=t.getInt32());var h=t.readByte();if(2==h){var l=t.pos;t.seek(e,7),this.setupScroll(t),t.pos=l}else this.setupOverflow(h);t.readBool()&&t.skip(8),t.seek(e,8),this._defaultItem=t.readS();var c=t.getInt16();for(n=0;c>n;n++)if(o=t.getInt16(),o+=t.pos,i=t.readS(),null!=i||(i=this.defaultItem)){var u=this.getFromPool(i);if(null!=u&&(this.addChild(u),i=t.readS(),null!=i&&(u.text=i),i=t.readS(),null!=i&&u instanceof fairygui.GButton&&(u.selectedTitle=i),i=t.readS(),null!=i&&(u.icon=i),i=t.readS(),null!=i&&u instanceof fairygui.GButton&&(u.selectedIcon=i),i=t.readS(),null!=i&&(u.name=i),u instanceof fairygui.GComponent))for(r=t.getInt16(),s=0;r>s;s++){var _=u.getController(t.readS());i=t.readS(),null!=_&&(_.selectedPageId=i)}t.pos=o}else t.pos=o},n.setup_afterAdd=function(e,i){t.prototype.setup_afterAdd.call(this,e,i),e.seek(i,6);var n=e.getInt16();-1!=n&&(this._selectionController=this.parent.getControllerAt(n))},__getset(0,n,"layout",function(){return this._layout},function(t){this._layout!=t&&(this._layout=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))}),__getset(0,n,"align",function(){return this._align},function(t){this._align!=t&&(this._align=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))}),__getset(0,n,"lineCount",function(){return this._lineCount},function(t){this._lineCount!=t&&(this._lineCount=t,3!=this._layout&&4!=this._layout||(this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0)))}),__getset(0,n,"columnCount",function(){return this._columnCount},function(t){this._columnCount!=t&&(this._columnCount=t,2!=this._layout&&4!=this._layout||(this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0)))}),__getset(0,n,"lineGap",function(){return this._lineGap},function(t){this._lineGap!=t&&(this._lineGap=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))}),__getset(0,n,"columnGap",function(){return this._columnGap},function(t){this._columnGap!=t&&(this._columnGap=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))}),__getset(0,n,"verticalAlign",function(){return this._verticalAlign},function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))}),__getset(0,n,"virtualItemSize",function(){return this._itemSize},function(t){this._virtual&&(null==this._itemSize&&(this._itemSize=new Point),this._itemSize.setTo(t.x,t.y),this.setVirtualListChangedFlag(!0))}),__getset(0,n,"defaultItem",function(){return this._defaultItem},function(t){this._defaultItem=t}),__getset(0,n,"autoResizeItem",function(){return this._autoResizeItem},function(t){this._autoResizeItem!=t&&(this._autoResizeItem=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))}),__getset(0,n,"selectionMode",function(){return this._selectionMode},function(t){
this._selectionMode=t}),__getset(0,n,"selectionController",function(){return this._selectionController},function(t){this._selectionController=t}),__getset(0,n,"itemPool",function(){return this._pool}),__getset(0,n,"selectedIndex",function(){var t=0;if(this._virtual)for(t=0;t<this._realNumItems;t++){var e=this._virtualItems[t];if(e.obj instanceof fairygui.GButton&&e.obj.selected||null==e.obj&&e.selected)return this._loop?t%this._numItems:t}else{var i=this._children.length;for(t=0;i>t;t++){var n=this._children[t].asButton;if(null!=n&&n.selected)return t}}return-1},function(t){t>=0&&t<this.numItems?(0!=this._selectionMode&&this.clearSelection(),this.addSelection(t)):this.clearSelection()}),__getset(0,n,"numItems",function(){return this._virtual?this._numItems:this._children.length},function(t){var e=0;if(this._virtual){if(null==this.itemRenderer)throw new Error("Set itemRenderer first!");this._numItems=t,this._loop?this._realNumItems=6*this._numItems:this._realNumItems=this._numItems;var n=this._virtualItems.length;if(this._realNumItems>n)for(e=n;e<this._realNumItems;e++){var s=new i;s.width=this._itemSize.x,s.height=this._itemSize.y,this._virtualItems.push(s)}else for(e=this._realNumItems;n>e;e++)this._virtualItems[e].selected=!1;0!=this._virtualListChanged&&Laya.timer.clear(this,this._refreshVirtualList),this._refreshVirtualList()}else{var r=this._children.length;if(t>r)for(e=r;t>e;e++)null==this.itemProvider?this.addItemFromPool():this.addItemFromPool(this.itemProvider.runWith(e));else this.removeChildrenToPool(t,r);if(null!=this.itemRenderer)for(e=0;t>e;e++)this.itemRenderer.runWith([e,this.getChildAt(e)])}}),e.pos_param=NaN,e.__init$=function(){i=function(){function t(){this.width=0,this.height=0,this.obj=null,this.updateFlag=0,this.selected=!1}return __class(t,""),t}()},e}(GComponent),SplashScreen=function(t){function e(){this.mcContent=null,e.__super.call(this),this.setSize(App.dialog.width,App.dialog.height),this.addRelation(App.dialog,24)}__class(e,"com.emugif.core.ui.SplashScreen",t);var i=e.prototype;return i.show=function(t,e){t=t||"";var i=null,n=!1;String(t).indexOf("scale9")>-1?i=new Rectangle(100,100,1080,520):String(t).indexOf("tiled")>-1&&(n=!0);var s=t.getIcon?t.getIcon():String(t);if(this.mcContent instanceof fairygui.GLoader&&this.mcContent.url==s)this.hideScene(this.mcContent,e);else{var r=new UILoader;r.width=this.width,r.height=this.height,r.addRelation(this,24),r.fill=4,r.scaleByTile=n,r.scale9Grid=i,r.url=s,this.hideScene(r,e)}},i.hideScene=function(t,e){return this.mcContent==t?void this.showScene(t,e):(t&&(t.visible=!1,t.alpha=0,this.addChild(t)),void this.showScene(t,e))},i.showScene=function(t,e){this.mcContent&&this.mcContent!=t&&(this.mcContent.removeFromParent(),this.mcContent.removeRelation(this,24),this.mcContent instanceof fairygui.GLoader&&this.mcContent.dispose()),t&&(this.mcContent=t,this.mcContent.visible=!0,this.mcContent.alpha=1,e&&e.run())},e}(GComponent),UIClip=function(t){function e(){e.__super.call(this)}return __class(e,"com.emugif.core.ui.core.UIClip",t),e}(GMovieClip),SDKEvent=function(t){function e(t,i,n,s){void 0===n&&(n=!1),void 0===s&&(s=!1),e.__super.call(this,t,i,n,s)}return __class(e,"com.emugif.camera.plugin.sdk.event.SDKEvent",t),e.SDK_INIT_COMPLETE="sdk_init_complete",e.EXIT_GAME="exit_game",e.SERVER_ENTER_COMPLETE="server_enter_complete",e.WX_LOGIN_COMPLETE="wx_login_complete",e.USER_LOGIN_COMPLETE="user_login_complete",e.USER_LOGOUT_COMPLETE="user_logout_complete",e.USER_RESELECT_SERVER="user_reselect_server",e.USER_ENTERSERVER="enterServer",e.ROOM_UPDATE="room_update",e.USER_UPDATE="user_update",e.MENU_CREATEROOM="menu_createroom",e.USER_CREATEROLE="createRole",e.NOTIFICATION_RECEIVED="notification_received",e.USERCONFIG_CHANGE="userconfig_change",e}(DataEvent),UILoader=function(t){function e(){this._scale9Grid=null,this._scaleByTile=!1,e.__super.call(this),this._scale9Grid=null,this._scaleByTile=!1}__class(e,"com.emugif.core.ui.core.UILoader",t);var i=e.prototype;return i.onExternalLoadSuccess=function(e){t.prototype.onExternalLoadSuccess.call(this,e),this.content instanceof fairygui.display.Image&&(this.content.scaleByTile=this._scaleByTile,this.content.scale9Grid=this._scale9Grid)},__getset(0,i,"scale9Grid",null,function(t){this._scale9Grid=t}),__getset(0,i,"scaleByTile",null,function(t){this._scaleByTile=t}),__getset(0,i,"url",t.prototype._$get_url,function(t){t=t||"",t.indexOf("qlogo.cn/")>-1?t=t.substr(0,t.lastIndexOf("/")).replace("http:",Browser.window.location.protocol)+"/132":t.indexOf("/ui/img/")>-1,Laya.superSet(GLoader,this,"url",String(t))}),e}(GLoader),GameEvent$1=function(t){function e(t,i,n,s){void 0===n&&(n=!1),void 0===s&&(s=!1),e.__super.call(this,t,i,n,s)}return __class(e,"com.emugif.core.events.GameEvent",t,"GameEvent$1"),e.UI_PANEL_SHOW="ui_panel_show",e.LOADING_INIT="loading_init",e}(DataEvent),GBasicTextField=function(t){function e(){this.textField=null,this._font=null,this._color=null,this._ubbEnabled=!1,this._singleLine=!1,this._letterSpacing=0,this._autoSize=0,this._widthAutoSize=!1,this._heightAutoSize=!1,this._updatingSize=!1,this._textWidth=0,this._textHeight=0,this._bitmapFont=null,this._lines=null,e.__super.call(this),this._text="",this._color="#000000",this.textField.align="left",this.textField.font=UIConfig$1.defaultFont,this._autoSize=1,this._widthAutoSize=this._heightAutoSize=!0,this.textField._sizeDirty=!1}var i,n;__class(e,"fairygui.GBasicTextField",t);var s=e.prototype;return s.createDisplayObject=function(){this._displayObject=this.textField=new n(this),this._displayObject.$owner=this,this._displayObject.mouseEnabled=!1},s.setAutoSize=function(t){this._autoSize=t,this._widthAutoSize=1==t,this._heightAutoSize=1==t||2==t,this.textField.wordWrap=!this._widthAutoSize&&!this._singleLine,this._underConstruct||(this._heightAutoSize?this._widthAutoSize||(this.textField.width=this.width):this.textField.size(this.width,this.height))},s.ensureSizeCorrect=function(){!this._underConstruct&&this.textField._isChanged&&this.textField.typeset()},s.typeset=function(){null!=this._bitmapFont?this.renderWithBitmapFont():(this._widthAutoSize||this._heightAutoSize)&&this.updateSize()},s.updateSize=function(){this._textWidth=Math.ceil(this.textField.textWidth),this._textHeight=Math.ceil(this.textField.textHeight);var t=NaN,e=0;this._widthAutoSize?(t=this._textWidth,this.textField.width!=t&&(this.textField.width=t,"left"!=this.textField.align&&this.textField.baseTypeset())):t=this.width,this._heightAutoSize?(e=this._textHeight,this._widthAutoSize||this.textField.height!=this._textHeight&&(this.textField.height=this._textHeight)):(e=this.height,this._textHeight>e&&(this._textHeight=e),this.textField.height!=this._textHeight&&(this.textField.height=this._textHeight)),this._updatingSize=!0,this.setSize(t,e),this._updatingSize=!1},s.renderWithBitmapFont=function(){var t=this._displayObject.graphics;t.clear(),this._lines?i.returnList(this._lines):this._lines=[];var e,n=this.letterSpacing,s=this.leading-1,r=this.width-4,a=0,o=0,h=0,l=0,c=0,u=0,_=0,d=0,f=0,p="",g=2,m=!this._widthAutoSize&&!this._singleLine,v=this.fontSize,y=this._bitmapFont.resizable?v/this._bitmapFont.size:1;this._textWidth=0,this._textHeight=0;var w=this._text;null!=this._templateVars&&(w=this.parseTemplate(w));for(var b=w.length,S=0;b>S;++S){var x=w.charAt(S),C=x.charCodeAt(0);if(10!=C){if(C>=65&&90>=C||C>=97&&122>=C?(0==u&&(_=a),u++):(u>0&&(d=a),u=0),32==C)l=Math.ceil(v/2),c=v;else{var T=this._bitmapFont.glyphs[x];T?(l=Math.ceil(T.advance*y),c=Math.ceil(T.lineHeight*y)):(l=0,c=0)}if(c>h&&(h=c),c>o&&(o=c),0!=a&&(a+=n),a+=l,!m||r>=a)p+=x;else{if(e=i.borrow(),e.height=o,e.textHeight=h,0==p.length)e.text=x;else if(u>0&&d>0){p+=x;var I=p.length-u;e.text=ToolSet.trimRight(p.substr(0,I)),e.width=d,p=p.substr(I),a-=_}else e.text=p,e.width=a-(l+n),p=x,a=l,o=c,h=c;e.y=g,g+=e.height+s,e.width>this._textWidth&&(this._textWidth=e.width),u=0,_=0,d=0,this._lines.push(e)}}else p+=x,e=i.borrow(),e.width=a,0==h&&(0==f&&(f=v),0==o&&(o=f),h=o),e.height=o,f=o,e.textHeight=h,e.text=p,e.y=g,g+=e.height+s,e.width>this._textWidth&&(this._textWidth=e.width),this._lines.push(e),p="",a=0,o=0,h=0,u=0,_=0,d=0}p.length>0&&(e=i.borrow(),e.width=a,0==o&&(o=f),0==h&&(h=o),e.height=o,e.textHeight=h,e.text=p,e.y=g,e.width>this._textWidth&&(this._textWidth=e.width),this._lines.push(e)),this._textWidth>0&&(this._textWidth+=4);var L=this._lines.length;0==L?this._textHeight=0:(e=this._lines[this._lines.length-1],this._textHeight=e.y+e.height+2);var A=NaN,P=0;if(A=this._widthAutoSize?0==this._textWidth?0:this._textWidth:this.width,P=this._heightAutoSize?0==this._textHeight?0:this._textHeight:this.height,this._updatingSize=!0,this.setSize(A,P),this._updatingSize=!1,this.doAlign(),0!=A&&0!=P){var M=2,R=0,E=0;r=this.width-4;for(var B=this._lines.length,k=0;B>k;k++){e=this._lines[k],M=2,R="center"==this.align?(r-e.width)/2:"right"==this.align?r-e.width:0,b=e.text.length;for(var O=0;b>O;O++)x=e.text.charAt(O),C=x.charCodeAt(0),10!=C&&(32!=C?(T=this._bitmapFont.glyphs[x],null!=T?(E=(e.height+e.textHeight)/2-Math.ceil(T.lineHeight*y),T.texture&&t.drawTexture(T.texture,M+R+Math.ceil(T.offsetX*y),e.y+E+Math.ceil(T.offsetY*y),T.texture.width*y,T.texture.height*y),M+=n+Math.ceil(T.advance*y)):M+=n):M+=this._letterSpacing+Math.ceil(v/2))}}},s.handleSizeChanged=function(){this._updatingSize||(this._underConstruct?this.textField.size(this.width,this.height):null!=this._bitmapFont?this._widthAutoSize?this.doAlign():this.textField.setChanged():this._widthAutoSize||(this._heightAutoSize?this.textField.width=this.width:this.textField.size(this.width,this.height)))},s.handleGrayedChanged=function(){fairygui.GObject.prototype.handleGrayedChanged.call(this),this.grayed?this.textField.color="#AAAAAA":this.textField.color=this._color},s.doAlign=function(){if("top"==this.valign||0==this._textHeight)this._yOffset=2;else{var t=this.height-this._textHeight;0>t&&(t=0),"middle"==this.valign?this._yOffset=Math.floor(t/2):this._yOffset=Math.floor(t)}this.handleXYChanged()},s.flushVars=function(){this.text=this._text},__getset(0,s,"bold",function(){return this.textField.bold},function(t){this.textField.bold=t}),__getset(0,s,"letterSpacing",function(){return this._letterSpacing},function(t){this._letterSpacing=t}),__getset(0,s,"align",function(){return this.textField.align},function(t){this.textField.align=t}),__getset(0,s,"text",function(){return this._text},function(t){if(this._text=t,null==this._text&&(this._text=""),null==this._bitmapFont){this._widthAutoSize&&(this.textField.width=1e4);var e=this._text;null!=this._templateVars&&(e=this.parseTemplate(e)),this._ubbEnabled?this.textField.text=ToolSet.removeUBB(ToolSet.encodeHTML(e)):this.textField.text=e}else this.textField.text="",this.textField.setChanged();this.parent&&this.parent._underConstruct&&this.textField.typeset()}),__getset(0,s,"color",function(){return this._color},function(t){this._color!=t&&(this._color=t,this._gearColor.controller&&this._gearColor.updateState(),this.grayed?this.textField.color="#AAAAAA":this.textField.color=this._color)}),__getset(0,s,"font",function(){return this.textField.font},function(t){this._font=t,ToolSet.startsWith(this._font,"ui://")?this._bitmapFont=UIPackage.getItemAssetByURL(this._font):this._bitmapFont=null,null!=this._bitmapFont?this.textField.setChanged():this._font?this.textField.font=this._font:this.textField.font=UIConfig$1.defaultFont}),__getset(0,s,"leading",function(){return this.textField.leading},function(t){this.textField.leading=t}),__getset(0,s,"fontSize",function(){return this.textField.fontSize},function(t){this.textField.fontSize=t}),__getset(0,s,"valign",function(){return this.textField.valign},function(t){this.textField.valign=t}),__getset(0,s,"italic",function(){return this.textField.italic},function(t){this.textField.italic=t}),__getset(0,s,"underline",function(){return this.textField.underline},function(t){this.textField.underline=t}),__getset(0,s,"singleLine",function(){return this._singleLine},function(t){this._singleLine=t,this.textField.wordWrap=!this._widthAutoSize&&!this._singleLine}),__getset(0,s,"stroke",function(){return this.textField.stroke},function(t){this.textField.stroke=t}),__getset(0,s,"strokeColor",function(){return this.textField.strokeColor},function(t){this.textField.strokeColor=t,this.updateGear(4)}),__getset(0,s,"ubbEnabled",function(){return this._ubbEnabled},function(t){this._ubbEnabled=t}),__getset(0,s,"autoSize",function(){return this._autoSize},function(t){this._autoSize!=t&&this.setAutoSize(t)}),__getset(0,s,"textWidth",function(){return this.textField._isChanged&&this.textField.typeset(),this._textWidth}),e.GUTTER_X=2,e.GUTTER_Y=2,e.__init$=function(){i=function(){function t(){this.width=0,this.height=0,this.textHeight=0,this.text=null,this.y=0}return __class(t,""),t.borrow=function(){if(t.pool.length){var e=t.pool.pop();return e.width=0,e.height=0,e.textHeight=0,e.text=null,e.y=0,e}return new t},t.returns=function(e){t.pool.push(e)},t.returnList=function(e){for(var i=e.length,n=0;i>n;n++){var s=e[n];t.pool.push(s)}e.length=0},t.pool=[],t}(),n=function(t){function e(t){this._owner=null,this._lock=!1,this._sizeDirty=!1,e.__super.call(this),this._owner=t}__class(e,"",t);var i=e.prototype;return i.baseTypeset=function(){this._lock=!0,this.typeset(),this._lock=!1},i.typeset=function(){this._sizeDirty=!0,t.prototype.typeset.call(this),this._lock||this._owner.typeset(),this._isChanged&&(Laya.timer.clear(this,this.typeset),this._isChanged=!1),this._sizeDirty=!1},i.setChanged=function(){this.isChanged=!0},__getset(0,i,"isChanged",null,function(t){t&&!this._sizeDirty&&0!=this._owner.autoSize&&this._owner.parent&&(this._sizeDirty=!0,this.event("fui_size_delay_change")),Laya.superSet(Text,this,"isChanged",t)}),e}(Text)},e}(GTextField),Sprite=function(t){function e(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this._childRenderMax=!1,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,e.__super.call(this),this._style=Style.EMPTY}__class(e,"laya.display.Sprite",t);var i=e.prototype;return Laya.imps(i,{"laya.display.ILayout":!0}),i.createConchModel=function(){return new ConchNode},i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._style&&this._style.destroy(),this._transform=null,this._style=null,this._graphics=null},i.updateZOrder=function(){Utils$1.updateOrder(this._childs)&&this.repaint()},i.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},i.setBounds=function(t){this._set$P("uBounds",t)},i.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new Rectangle),Rectangle._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},i.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new Rectangle),Rectangle._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},i._boundPointsToParent=function(t){void 0===t&&(t=!1);var e=0,i=0;this._style&&(e=this._style._tf.translateX,i=this._style._tf.translateY,t=t||0!==this._style._tf.rotate,this._style.scrollRect&&(e+=this._style.scrollRect.x,i+=this._style.scrollRect.y));var n=this._getBoundPointsM(t);if(!n||n.length<1)return n;if(8!=n.length&&(n=t?GrahamScan.scanPList(n):Rectangle._getWrapRec(n,Rectangle.TEMP)._getBoundPoints()),!this.transform)return Utils$1.transPointList(n,this._x-e,this._y-i),n;var s=Point.TEMP,r=0,a=n.length;for(r=0;a>r;r+=2)s.x=n[r],s.y=n[r+1],this.toParentPoint(s),n[r]=s.x,n[r+1]=s.y;return n},i.getGraphicBounds=function(t){return void 0===t&&(t=!1),this._graphics?this._graphics.getBounds(t):Rectangle.TEMP.setTo(0,0,0,0)},i._getBoundPointsM=function(t){if(void 0===t&&(t=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var e=Utils$1.clearArray(this._$P.temBM),i=Rectangle.TEMP;return i.copyFrom(this.scrollRect),Utils$1.concatArray(e,i._getBoundPoints()),e}var n,s,r,a=this._graphics?this._graphics.getBoundPoints():Utils$1.clearArray(this._$P.temBM);r=this._childs;for(var o=0,h=r.length;h>o;o++)n=r[o],n instanceof laya.display.Sprite&&1==n.visible&&(s=n._boundPointsToParent(t),s&&(a=a?Utils$1.concatArray(a,s):s));return a},i.getStyle=function(){return this._style===Style.EMPTY&&(this._style=new Style,this._childRenderMax=!0),this._style},i.setStyle=function(t){this._style=t},i._adjustTransform=function(){"use strict";this._tfChanged=!1;var t,e=this._style,i=e._tf,n=i.scaleX,s=i.scaleY;if(i.rotate||1!==n||1!==s||i.skewX||i.skewY){t=this._transform||(this._transform=Matrix.create()),t.bTransform=!0;var r=.0174532922222222*(i.rotate-i.skewX),a=.0174532922222222*(i.rotate+i.skewY),o=Math.cos(a),h=Math.sin(a),l=Math.sin(r),c=Math.cos(r);return t.a=n*o,t.b=n*h,t.c=-s*l,t.d=s*c,t.tx=t.ty=0,t}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,t},i.pos=function(t,e,i){if(void 0===i&&(i=!1),this._x!==t||this._y!==e){if(this.destroyed)return this;if(i){this._x=t,this._y=e,this.conchModel&&this.conchModel.pos(this._x,this._y);var n=this._parent;n&&0===n._repaint&&(n._repaint=1,n.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=t,this.y=e}return this},i.pivot=function(t,e){return this.pivotX=t,this.pivotY=e,this},i.size=function(t,e){return this.width=t,this.height=e,this},i.scale=function(t,e,i){void 0===i&&(i=!1);var n=this.getStyle(),s=n._tf;if(s.scaleX!=t||s.scaleY!=e){if(this.destroyed)return this;if(i){n.setScale(t,e),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(t,e),this._renderType|=4;var r=this._parent;r&&0===r._repaint&&(r._repaint=1,r.parentRepaint())}else this.scaleX=t,this.scaleY=e}return this},i.skew=function(t,e){return this.skewX=t,this.skewY=e,this},i.render=function(t,e,i){Stat.spriteCount++,RenderSprite.renders[this._renderType]._fun(this,t,e+this._x,i+this._y),this._repaint=0},i.drawToCanvas=function(t,e,i,n){if(Render.isConchNode){var s=HTMLCanvas.create("2D"),r=new RenderContext(t,e,s);return r.ctx.setCanvasType(1),this.conchModel.drawToCanvas(s.source,i,n),s}return RunDriver.drawToCanvas(this,this._renderType,t,e,i,n)},i.customRender=function(t,e,i){this._renderType|=1024},i._applyFilters=function(){if(!Render.isWebGL){var t;if(t=this._$P.filters,t&&!(t.length<1))for(var e=0,i=t.length;i>e;e++)t[e].action.apply(this._$P.cacheCanvas)}},i._isHaveGlowFilter=function(){var t=0,e=0;if(this.filters)for(t=0;t<this.filters.length;t++)if(8==this.filters[t].type)return!0;for(t=0,e=this._childs.length;e>t;t++)if(this._childs[t]._isHaveGlowFilter())return!0;return!1},i.localToGlobal=function(t,e){void 0===e&&(e=!1),e===!0&&(t=new Point(t.x,t.y));for(var i=this;i&&i!=Laya.stage;)t=i.toParentPoint(t),i=i.parent;return t},i.globalToLocal=function(t,e){void 0===e&&(e=!1),e&&(t=new Point(t.x,t.y));for(var i=this,n=[];i&&i!=Laya.stage;)n.push(i),i=i.parent;for(var s=n.length-1;s>=0;)i=n[s],t=i.fromParentPoint(t),s--;return t},i.toParentPoint=function(t){if(!t)return t;t.x-=this.pivotX,t.y-=this.pivotY,this.transform&&this._transform.transformPoint(t),t.x+=this._x,t.y+=this._y;var e=this._style.scrollRect;return e&&(t.x-=e.x,t.y-=e.y),t},i.fromParentPoint=function(t){if(!t)return t;t.x-=this._x,t.y-=this._y;var e=this._style.scrollRect;return e&&(t.x+=e.x,t.y+=e.y),this.transform&&this._transform.invertTransformPoint(t),t.x+=this.pivotX,t.y+=this.pivotY,t},i.on=function(e,i,n,s){return 1!==this._mouseEnableState&&this.isMouseEvent(e)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(e,i,n,s,!1)):t.prototype.on.call(this,e,i,n,s)},i.once=function(e,i,n,s){return 1!==this._mouseEnableState&&this.isMouseEvent(e)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(e,i,n,s,!0)):t.prototype.once.call(this,e,i,n,s)},i._$2__onDisplay=function(){if(1!==this._mouseEnableState){var t=this;for(t=t.parent;t&&1!==t._mouseEnableState&&!t._getBit(2);)t.mouseEnabled=!0,t._setBit(2,!0),t=t.parent}},i.loadImage=function(t,e,i,n,s,r){function a(t){o.destroyed||(o.size(e+(n||t.width),i+(s||t.height)),o.repaint(),r&&r.runWith(t))}var o=this;return void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),this.graphics.loadImage(t,e,i,n,s,a),this},i.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},i._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},i._childChanged=function(t){this._childs.length?this._renderType|=2048:this._renderType&=-2049,t&&this._get$P("hasZorder")&&Laya.timer.callLater(this,this.updateZOrder),this.repaint()},i.parentRepaint=function(){var t=this._parent;t&&0===t._repaint&&(t._repaint=1,t.parentRepaint())},i.startDrag=function(t,e,i,n,s,r,a){void 0===e&&(e=!1),void 0===i&&(i=0),void 0===n&&(n=300),void 0===r&&(r=!1),void 0===a&&(a=.92),this._$P.dragging||this._set$P("dragging",new Dragging),this._$P.dragging.start(this,t,e,i,n,s,r,a)},i.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},i._setDisplay=function(e){if(!e){var i=this._$P.cacheCanvas;i&&i.ctx&&(Pool.recover("RenderContext",i.ctx),i.ctx.canvas.size(0,0),i.ctx=null);var n=this._$P._filterCache;n&&(n.destroy(),n.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1)}t.prototype._setDisplay.call(this,e)},i.hitTestPoint=function(t,e){var i=this.globalToLocal(Point.TEMP.setTo(t,e)),n=this._$P.hitArea?this._$P.hitArea:this._width>0&&this._height>0?Rectangle.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds();return n.contains(i.x,i.y)},i.getMousePoint=function(){return this.globalToLocal(Point.TEMP.setTo(Laya.stage.mouseX,Laya.stage.mouseY))},i._getWords=function(){return null},i._addChildsToLayout=function(t){var e=this._getWords();if(null==e&&0==this._childs.length)return!1;if(e)for(var i=0,n=e.length;n>i;i++)t.push(e[i]);return this._childs.forEach(function(e,i,n){e._style._enableLayout()&&e._addToLayout(t)}),!0},i._addToLayout=function(t){this._style.absolute||(this._style.block?t.push(this):this._addChildsToLayout(t)&&(this.x=this.y=0))},i._isChar=function(){return!1},i._getCSSStyle=function(){return this._style.getCSSStyle()},i._setAttributes=function(t,e){switch(t){case"x":this.x=parseFloat(e);break;case"y":this.y=parseFloat(e);break;case"width":this.width=parseFloat(e);break;case"height":this.height=parseFloat(e);break;default:this[t]=e}},i._layoutLater=function(){this.parent&&this.parent._layoutLater()},__getset(0,i,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(t){this._optimizeScrollRect!=t&&(this._optimizeScrollRect=t,this.conchModel&&this.conchModel.optimizeScrollRect(t))}),__getset(0,i,"customRenderEnable",null,function(t){if(t&&(this._renderType|=1024,Render.isConchNode)){e.CustomList.push(this);var i=new HTMLCanvas("2d");i._setContext(new CanvasRenderingContext2D),this.customContext=new RenderContext(0,0,i),i.context.setCanvasType&&i.context.setCanvasType(2),this.conchModel.custom(i.context)}}),__getset(0,i,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(t){this.cacheAs=t?this._$P.hasFilter?"none":"normal":"none"}),__getset(0,i,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(t){var e=this._$P.cacheCanvas;if(t!==(e?e.type:"none")){if("none"!==t)this._getBit(1)||this._setUpNoticeType(1),e||(e=this._set$P("cacheCanvas",Pool.getItemByClass("cacheCanvas",Object))),e.type=t,e.reCache=!0,this._renderType|=16,"bitmap"==t&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(e){var i=e;i&&i.ctx&&(Pool.recover("RenderContext",i.ctx),i.ctx.canvas.size(0,0),i.ctx=null),Pool.recover("cacheCanvas",e)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),__getset(0,i,"zOrder",function(){return this._zOrder},function(t){this._zOrder!=t&&(this._zOrder=t,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(t),this._parent&&(t&&this._parent._set$P("hasZorder",!0),Laya.timer.callLater(this._parent,this.updateZOrder)))}),__getset(0,i,"rotation",function(){return this._style._tf.rotate},function(t){var e=this.getStyle();if(e._tf.rotate!==t){e.setRotate(t),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(t),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),__getset(0,i,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(t){this._width!==t&&(this._width=t,this.conchModel&&this.conchModel.size(t,this._height),this.repaint())}),__getset(0,i,"x",function(){return this._x},function(t){if(this._x!==t){if(this.destroyed)return;this._x=t,this.conchModel&&this.conchModel.pos(t,this._y);var e=this._parent;e&&0===e._repaint&&(e._repaint=1,e.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),__getset(0,i,"globalScaleY",function(){for(var t=1,e=this;e&&e!==Laya.stage;)t*=e.scaleY,e=e.parent;return t}),__getset(0,i,"hitArea",function(){return this._$P.hitArea},function(t){this._set$P("hitArea",t)}),__getset(0,i,"staticCache",function(){return this._$P.staticCache},function(t){this._set$P("staticCache",t),t||this.reCache()}),__getset(0,i,"texture",function(){return this._texture},function(t){this._texture!=t&&(this._texture=t,this.graphics.cleanByTexture(t,0,0))}),__getset(0,i,"y",function(){return this._y},function(t){if(this._y!==t){if(this.destroyed)return;this._y=t,this.conchModel&&this.conchModel.pos(this._x,t);var e=this._parent;e&&0===e._repaint&&(e._repaint=1,e.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),__getset(0,i,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(t){this._height!==t&&(this._height=t,this.conchModel&&this.conchModel.size(this._width,t),this.repaint())}),__getset(0,i,"blendMode",function(){return this._style.blendMode},function(t){this.getStyle().blendMode=t,this.conchModel&&this.conchModel.blendMode(t),t&&"source-over"!=t?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),__getset(0,i,"scaleX",function(){return this._style._tf.scaleX},function(t){var e=this.getStyle();if(e._tf.scaleX!==t){e.setScaleX(t),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(t,e._tf.scaleY),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),__getset(0,i,"scaleY",function(){return this._style._tf.scaleY},function(t){var e=this.getStyle();if(e._tf.scaleY!==t){e.setScaleY(t),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(e._tf.scaleX,t),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),__getset(0,i,"stage",function(){return Laya.stage}),__getset(0,i,"skewX",function(){return this._style._tf.skewX},function(t){var e=this.getStyle();if(e._tf.skewX!==t){e.setSkewX(t),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(t,e._tf.skewY),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),__getset(0,i,"scrollRect",function(){return this._style.scrollRect},function(t){this.getStyle().scrollRect=t,this.repaint(),t?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(t.x,t.y,t.width,t.height)):(this._renderType&=-129,this.conchModel&&(e.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),__getset(0,i,"skewY",function(){return this._style._tf.skewY},function(t){var e=this.getStyle();if(e._tf.skewY!==t){e.setSkewY(t),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(e._tf.skewX,t),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),__getset(0,i,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(t){this._tfChanged=!1,this._transform=t,t&&(this._x=t.tx,this._y=t.ty,t.tx=t.ty=0,this.conchModel&&this.conchModel.transform(t.a,t.b,t.c,t.d,this._x,this._y)),t?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),__getset(0,i,"pivotX",function(){return this._style._tf.translateX},function(t){this.getStyle().setTranslateX(t),this.conchModel&&this.conchModel.pivot(t,this._style._tf.translateY),this.repaint()}),__getset(0,i,"pivotY",function(){return this._style._tf.translateY},function(t){this.getStyle().setTranslateY(t),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,t),this.repaint()}),__getset(0,i,"alpha",function(){return this._style.alpha},function(t){this._style&&this._style.alpha!==t&&(t=0>t?0:t>1?1:t,this.getStyle().alpha=t,this.conchModel&&this.conchModel.alpha(t),1!==t?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),__getset(0,i,"visible",function(){return this._style.visible},function(t){this._style&&this._style.visible!==t&&(this.getStyle().visible=t,this.conchModel&&this.conchModel.visible(t),this.parentRepaint())}),__getset(0,i,"graphics",function(){return this._graphics||(this.graphics=RunDriver.createGraphics())},function(t){this._graphics&&(this._graphics._sp=null),this._graphics=t,t?(this._renderType&=-2,this._renderType|=512,t._sp=this,this.conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(e.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),__getset(0,i,"filters",function(){return this._$P.filters},function(t){t&&0===t.length&&(t=null),this._$P.filters!=t&&(this._set$P("filters",t?t.slice():null),Render.isConchApp&&(this.conchModel&&(e.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),Render.isWebGL&&(t&&t.length?this._renderType|=32:this._renderType&=-33),t&&t.length>0?(this._getBit(1)||this._setUpNoticeType(1),Render.isWebGL&&1==t.length&&t[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(Render.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),__getset(0,i,"parent",t.prototype._$get_parent,function(t){Laya.superSet(Node,this,"parent",t),t&&this._getBit(2)&&this._$2__onDisplay()}),__getset(0,i,"mask",function(){return this._$P._mask},function(t){t&&this.mask&&this.mask._$P.maskParent||(t?(this.cacheAs="bitmap",this._set$P("_mask",t),t._set$P("maskParent",this)):(this.cacheAs="none",this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",t)),this.conchModel&&this.conchModel.mask(t?t.conchModel:null),this._renderType|=64,this.parentRepaint())}),__getset(0,i,"mouseEnabled",function(){return this._mouseEnableState>1},function(t){this._mouseEnableState=t?2:1}),__getset(0,i,"globalScaleX",function(){for(var t=1,e=this;e&&e!==Laya.stage;)t*=e.scaleX,e=e.parent;return t}),__getset(0,i,"mouseX",function(){return this.getMousePoint().x}),__getset(0,i,"mouseY",function(){return this.getMousePoint().y}),e.fromImage=function(t){return(new e).loadImage(t)},e.CustomList=[],__static(e,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=window.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),e}(Node),Bitmap=function(t){
function e(){this.useNum=0,e.__super.call(this),this._w=0,this._h=0}__class(e,"laya.resource.Bitmap",t);var i=e.prototype;return i.dispose=function(){this.disposed||(this._resourceManager.removeResource(this),t.prototype.dispose.call(this))},__getset(0,i,"width",function(){return this._w}),__getset(0,i,"height",function(){return this._h}),__getset(0,i,"source",function(){return this._source}),e}(Resource),GProgressBar=function(t){function e(){this._max=0,this._value=0,this._titleType=0,this._reverse=!1,this._titleObject=null,this._aniObject=null,this._barObjectH=null,this._barObjectV=null,this._barMaxWidth=0,this._barMaxHeight=0,this._barMaxWidthDelta=0,this._barMaxHeightDelta=0,this._barStartX=0,this._barStartY=0,this._tweening=!1,e.__super.call(this),this._titleType=0,this._value=50,this._max=100}__class(e,"fairygui.GProgressBar",t);var i=e.prototype;return i.tweenValue=function(t,e){var i=this;if(this._value!=t){this._tweening&&(GTween.kill(this,!1,this.update),this._tweening=!1);var n=this._value;return this._value=t,this._tweening=!0,GTween.to(n,this._value,e).setTarget(this,this.update).setEase(0).onComplete(function(){i._tweening=!1},this)}return null},i.update=function(t){var e=0!=this._max?Math.min(t/this._max,1):0;if(this._titleObject)switch(this._titleType){case 0:this._titleObject.text=Math.round(100*e)+"%";break;case 1:this._titleObject.text=Math.round(t)+"/"+Math.round(this._max);break;case 2:this._titleObject.text=""+Math.round(t);break;case 3:this._titleObject.text=""+Math.round(this._max)}var i=this.width-this._barMaxWidthDelta,n=this.height-this._barMaxHeightDelta;this._reverse?(this._barObjectH&&(this._barObjectH instanceof fairygui.GImage&&0!=this._barObjectH.fillMethod?this._barObjectH.fillAmount=1-e:(this._barObjectH.width=Math.round(i*e),this._barObjectH.x=this._barStartX+(i-this._barObjectH.width))),this._barObjectV&&(this._barObjectV instanceof fairygui.GImage&&0!=this._barObjectV.fillMethod?this._barObjectV.fillAmount=1-e:(this._barObjectV.height=Math.round(n*e),this._barObjectV.y=this._barStartY+(n-this._barObjectV.height)))):(this._barObjectH&&(this._barObjectH instanceof fairygui.GImage&&0!=this._barObjectH.fillMethod?this._barObjectH.fillAmount=e:this._barObjectH.width=Math.round(i*e)),this._barObjectV&&(this._barObjectV instanceof fairygui.GImage&&0!=this._barObjectV.fillMethod?this._barObjectV.fillAmount=e:this._barObjectV.height=Math.round(n*e))),this._aniObject instanceof fairygui.GMovieClip&&(this._aniObject.frame=Math.round(100*e))},i.constructExtension=function(t){t.seek(0,6),this._titleType=t.readByte(),this._reverse=t.readBool(),this._titleObject=this.getChild("title"),this._barObjectH=this.getChild("bar"),this._barObjectV=this.getChild("bar_v"),this._aniObject=this.getChild("ani"),this._barObjectH&&(this._barMaxWidth=this._barObjectH.width,this._barMaxWidthDelta=this.width-this._barMaxWidth,this._barStartX=this._barObjectH.x),this._barObjectV&&(this._barMaxHeight=this._barObjectV.height,this._barMaxHeightDelta=this.height-this._barMaxHeight,this._barStartY=this._barObjectV.y)},i.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta),this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta),this._underConstruct||this.update(this._value)},i.setup_afterAdd=function(e,i){return t.prototype.setup_afterAdd.call(this,e,i),e.seek(i,6)?e.readByte()!=this.packageItem.objectType?void this.update(this._value):(this._value=e.getInt32(),this._max=e.getInt32(),void this.update(this._value)):void this.update(this._value)},i.dispose=function(){this._tweening&&GTween.kill(this),t.prototype.dispose.call(this)},__getset(0,i,"max",function(){return this._max},function(t){this._max!=t&&(this._max=t,this.update(this._value))}),__getset(0,i,"titleType",function(){return this._titleType},function(t){this._titleType!=t&&(this._titleType=t,this.update(this._value))}),__getset(0,i,"value",function(){return this._value},function(t){this._tweening&&(GTween.kill(this,!0,this.update),this._tweening=!1),this._value!=t&&(this._value=t,this.update(this._value))}),e}(GComponent),GScrollBar=function(t){function e(){this._grip=null,this._arrowButton1=null,this._arrowButton2=null,this._bar=null,this._target=null,this._vertical=!1,this._scrollPerc=0,this._fixedGripSize=!1,this._dragOffset=null,e.__super.call(this),this._dragOffset=new laya.maths.Point,this._scrollPerc=0}__class(e,"fairygui.GScrollBar",t);var i=e.prototype;return i.setScrollPane=function(t,e){this._target=t,this._vertical=e},i.constructExtension=function(t){return t.seek(0,6),this._fixedGripSize=t.readBool(),this._grip=this.getChild("grip"),this._grip?(this._bar=this.getChild("bar"),this._bar?(this._arrowButton1=this.getChild("arrow1"),this._arrowButton2=this.getChild("arrow2"),this._grip.on("mousedown",this,this.__gripMouseDown),this._arrowButton1&&this._arrowButton1.on("mousedown",this,this.__arrowButton1Click),this._arrowButton2&&this._arrowButton2.on("mousedown",this,this.__arrowButton2Click),void this.on("mousedown",this,this.__barMouseDown)):void Log.print("需要定义bar")):void Log.print("需要定义grip")},i.__gripMouseDown=function(t){this._bar&&(t.stopPropagation(),Laya.stage.on("mousemove",this,this.__gripMouseMove),Laya.stage.on("mouseup",this,this.__gripMouseUp),this.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY,this._dragOffset),this._dragOffset.x-=this._grip.x,this._dragOffset.y-=this._grip.y)},i.__gripMouseMove=function(){var t=this.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY,fairygui.GScrollBar.sScrollbarHelperPoint);if(this._vertical){var e=t.y-this._dragOffset.y;this._target.setPercY((e-this._bar.y)/(this._bar.height-this._grip.height),!1)}else{var i=t.x-this._dragOffset.x;this._target.setPercX((i-this._bar.x)/(this._bar.width-this._grip.width),!1)}},i.__gripMouseUp=function(t){this._bar&&(Laya.stage.off("mousemove",this,this.__gripMouseMove),Laya.stage.off("mouseup",this,this.__gripMouseUp))},i.__arrowButton1Click=function(t){t.stopPropagation(),this._vertical?this._target.scrollUp():this._target.scrollLeft()},i.__arrowButton2Click=function(t){t.stopPropagation(),this._vertical?this._target.scrollDown():this._target.scrollRight()},i.__barMouseDown=function(t){var e=this._grip.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY,fairygui.GScrollBar.sScrollbarHelperPoint);this._vertical?e.y<0?this._target.scrollUp(4):this._target.scrollDown(4):e.x<0?this._target.scrollLeft(4):this._target.scrollRight(4)},__getset(0,i,"displayPerc",null,function(t){this._vertical?(this._fixedGripSize||(this._grip.height=t*this._bar.height),this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc):(this._fixedGripSize||(this._grip.width=t*this._bar.width),this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc)}),__getset(0,i,"scrollPerc",null,function(t){this._scrollPerc=t,this._vertical?this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc:this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc}),__getset(0,i,"minSize",function(){return this._vertical?(null!=this._arrowButton1?this._arrowButton1.height:0)+(null!=this._arrowButton2?this._arrowButton2.height:0):(null!=this._arrowButton1?this._arrowButton1.width:0)+(null!=this._arrowButton2?this._arrowButton2.width:0)}),__static(e,["sScrollbarHelperPoint",function(){return this.sScrollbarHelperPoint=new Point}]),e}(GComponent),GSlider=function(t){function e(){this._max=0,this._value=0,this._titleType=0,this._reverse=!1,this._titleObject=null,this._barObjectH=null,this._barObjectV=null,this._barMaxWidth=0,this._barMaxHeight=0,this._barMaxWidthDelta=0,this._barMaxHeightDelta=0,this._gripObject=null,this._clickPos=null,this._clickPercent=0,this._barStartX=0,this._barStartY=0,this.changeOnClick=!0,this.canDrag=!0,e.__super.call(this),this._titleType=0,this._value=50,this._max=100,this._clickPos=new laya.maths.Point}__class(e,"fairygui.GSlider",t);var i=e.prototype;return i.update=function(){var t=Math.min(this._value/this._max,1);this.updateWidthPercent(t)},i.updateWidthPercent=function(t){if(this._titleObject)switch(this._titleType){case 0:this._titleObject.text=Math.round(100*t)+"%";break;case 1:this._titleObject.text=this._value+"/"+this._max;break;case 2:this._titleObject.text=""+this._value;break;case 3:this._titleObject.text=""+this._max}var e=this.width-this._barMaxWidthDelta,i=this.height-this._barMaxHeightDelta;this._reverse?(this._barObjectH&&(this._barObjectH.width=Math.round(e*t),this._barObjectH.x=this._barStartX+(e-this._barObjectH.width)),this._barObjectV&&(this._barObjectV.height=Math.round(i*t),this._barObjectV.y=this._barStartY+(i-this._barObjectV.height))):(this._barObjectH&&(this._barObjectH.width=Math.round(e*t)),this._barObjectV&&(this._barObjectV.height=Math.round(i*t)))},i.constructExtension=function(t){t.seek(0,6),this._titleType=t.readByte(),this._reverse=t.readBool(),this._titleObject=this.getChild("title"),this._barObjectH=this.getChild("bar"),this._barObjectV=this.getChild("bar_v"),this._gripObject=this.getChild("grip"),this._barObjectH&&(this._barMaxWidth=this._barObjectH.width,this._barMaxWidthDelta=this.width-this._barMaxWidth,this._barStartX=this._barObjectH.x),this._barObjectV&&(this._barMaxHeight=this._barObjectV.height,this._barMaxHeightDelta=this.height-this._barMaxHeight,this._barStartY=this._barObjectV.y),this._gripObject&&this._gripObject.on("mousedown",this,this.__gripMouseDown),this.displayObject.on("mousedown",this,this.__barMouseDown)},i.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta),this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta),this._underConstruct||this.update()},i.setup_afterAdd=function(e,i){return t.prototype.setup_afterAdd.call(this,e,i),e.seek(i,6)?e.readByte()!=this.packageItem.objectType?void this.update():(this._value=e.getInt32(),this._max=e.getInt32(),void this.update()):void this.update()},i.__gripMouseDown=function(t){this.canDrag=!0,t.stopPropagation(),this._clickPos=this.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY),this._clickPercent=this._value/this._max,Laya.stage.on("mousemove",this,this.__gripMouseMove),Laya.stage.on("mouseup",this,this.__gripMouseUp)},i.__gripMouseMove=function(t){if(this.canDrag){var e=this.globalToLocal(Laya.stage.mouseX,Laya.stage.mouseY,fairygui.GSlider.sSilderHelperPoint),i=e.x-this._clickPos.x,n=e.y-this._clickPos.y;this._reverse&&(i=-i,n=-n);var s=NaN;s=this._barObjectH?this._clickPercent+i/this._barMaxWidth:this._clickPercent+n/this._barMaxHeight,s>1?s=1:0>s&&(s=0);var r=Math.round(this._max*s);r!=this._value&&(this._value=r,Events.dispatch("fui_state_changed",this.displayObject,t)),this.updateWidthPercent(s)}},i.__gripMouseUp=function(t){Laya.stage.off("mousemove",this,this.__gripMouseMove),Laya.stage.off("mouseup",this,this.__gripMouseUp)},i.__barMouseDown=function(t){if(this.changeOnClick){var e=this._gripObject.globalToLocal(t.stageX,t.stageY,fairygui.GSlider.sSilderHelperPoint),i=this._value/this._max,n=NaN;this._barObjectH&&(n=(e.x-this._gripObject.width/2)/this._barMaxWidth),this._barObjectV&&(n=(e.y-this._gripObject.height/2)/this._barMaxHeight),this._reverse?i-=n:i+=n,i>1?i=1:0>i&&(i=0);var s=Math.round(this._max*i);s!=this._value&&(this._value=s,Events.dispatch("fui_state_changed",this.displayObject,t)),this.updateWidthPercent(i)}},__getset(0,i,"max",function(){return this._max},function(t){this._max!=t&&(this._max=t,this.update())}),__getset(0,i,"titleType",function(){return this._titleType},function(t){this._titleType=t}),__getset(0,i,"value",function(){return this._value},function(t){this._value!=t&&(this._value=t,this.update())}),__static(e,["sSilderHelperPoint",function(){return this.sSilderHelperPoint=new Point}]),e}(GComponent),BaseShader=function(t){function e(){e.__super.call(this)}return __class(e,"laya.webgl.shader.BaseShader",t),e.activeShader=null,e.bindShader=null,e}(Resource),GRichTextField=function(t){function e(){this.div=null,this._ubbEnabled=!1,this._color=null,e.__super.call(this),this._text=""}__class(e,"fairygui.GRichTextField",t);var i=e.prototype;return i.createDisplayObject=function(){this._displayObject=this.div=new HTMLDivElement,this._displayObject.mouseEnabled=!0,this._displayObject.$owner=this},i.handleSizeChanged=function(){this.div.size(this.width,this.height)},__getset(0,i,"bold",function(){return this.div.style.bold},function(t){this.div.style.bold=t}),__getset(0,i,"align",function(){return this.div.style.align},function(t){this.div.style.align=t}),__getset(0,i,"text",function(){return this._text},function(t){this._text=t;var e=this._text;null!=this._templateVars&&(e=this.parseTemplate(e)),this._ubbEnabled?this.div.innerHTML=ToolSet.parseUBB(e):this.div.innerHTML=e}),__getset(0,i,"color",function(){return this._color},function(t){this._color!=t&&(this._color=t,this.div.color=t,this._gearColor.controller&&this._gearColor.updateState())}),__getset(0,i,"font",function(){return this.div.style.fontFamily},function(t){t?this.div.style.font=t:this.div.style.font=UIConfig$1.defaultFont}),__getset(0,i,"leading",function(){return this.div.style.leading},function(t){this.div.style.leading=t}),__getset(0,i,"fontSize",function(){return this.div.style.fontSize},function(t){this.div.style.fontSize=t}),__getset(0,i,"valign",function(){return this.div.style.valign},function(t){this.div.style.valign=t}),__getset(0,i,"italic",function(){return this.div.style.italic},function(t){this.div.style.italic=t}),__getset(0,i,"stroke",function(){return this.div.style.stroke},function(t){this.div.style.stroke=t}),__getset(0,i,"strokeColor",function(){return this.div.style.strokeColor},function(t){this.div.style.strokeColor=t,this.updateGear(4)}),__getset(0,i,"ubbEnabled",function(){return this._ubbEnabled},function(t){this._ubbEnabled=t}),e}(GTextField),AudioSoundChannel=function(t){function e(t){this._audio=null,this._onEnd=null,this._resumePlay=null,e.__super.call(this),this._onEnd=Utils$1.bind(this.__onEnd,this),this._resumePlay=Utils$1.bind(this.__resumePlay,this),t.addEventListener("ended",this._onEnd),this._audio=t}__class(e,"laya.media.h5audio.AudioSoundChannel",t);var i=e.prototype;return i.__onEnd=function(){return 1==this.loops?(this.completeHandler&&(Laya.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,this.startTime=0,void this.play())},i.__resumePlay=function(){if(this._audio&&this._audio.removeEventListener("canplay",this._resumePlay),!this.isStopped)try{this._audio.currentTime=this.startTime,Browser.container.appendChild(this._audio),this._audio.play()}catch(t){this.event("error")}},i.play=function(){if(this.isStopped=!1,this._audio){try{this._audio.playbackRate=SoundManager.playbackRate,this._audio.currentTime=this.startTime}catch(t){return void this._audio.addEventListener("canplay",this._resumePlay)}SoundManager.addChannel(this),Browser.container.appendChild(this._audio),"play"in this._audio&&this._audio.play()}},i.stop=function(){this.isStopped=!0,SoundManager.removeChannel(this),this.completeHandler=null,this._audio&&("pause"in this._audio&&Render.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),Browser.onIE||this._audio!=AudioSound._musicAudio&&Pool.recover("audio:"+this.url,this._audio),Browser.removeElement(this._audio),this._audio=null)},i.pause=function(){this.isStopped=!0,SoundManager.removeChannel(this),"pause"in this._audio&&this._audio.pause()},i.resume=function(){this._audio&&(this.isStopped=!1,SoundManager.addChannel(this),"play"in this._audio&&this._audio.play())},__getset(0,i,"position",function(){return this._audio?this._audio.currentTime:0}),__getset(0,i,"duration",function(){return this._audio?this._audio.duration:0}),__getset(0,i,"volume",function(){return this._audio?this._audio.volume:1},function(t){this._audio&&(this._audio.volume=t)}),e}(SoundChannel),GTextInput=function(t){function e(){this.input=null,e.__super.call(this)}__class(e,"fairygui.GTextInput",t);var i=e.prototype;return i.createDisplayObject=function(){this._displayObject=this.input=new Input,this._displayObject.mouseEnabled=!0,this._displayObject.$owner=this},i.handleSizeChanged=function(){this.input.size(this.width,this.height)},i.setup_beforeAdd=function(e,i){t.prototype.setup_beforeAdd.call(this,e,i),e.seek(i,4);var n=e.readS();null!=n&&(this.promptText=n),n=e.readS(),null!=n&&(this.input.restrict=n);var s=e.getInt32();0!=s&&(this.input.maxChars=s),s=e.getInt32(),0!=s&&(4==s?this.keyboardType="number":3==s&&(this.keyboardType="url")),e.readBool()&&(this.password=!0)},__getset(0,i,"bold",function(){return this.input.bold},function(t){this.input.bold=t}),__getset(0,i,"align",function(){return this.input.align},function(t){this.input.align=t}),__getset(0,i,"text",function(){return this.input.text},function(t){this.input.text=t}),__getset(0,i,"password",function(){return"password"==this.input.type},function(t){t?this.input.type="password":this.input.type="text"}),__getset(0,i,"color",function(){return this.input.color},function(t){this.input.color=t}),__getset(0,i,"font",function(){return this.input.font},function(t){this.input.font=t}),__getset(0,i,"leading",function(){return this.input.leading},function(t){this.input.leading=t}),__getset(0,i,"maxLength",function(){return this.input.maxChars},function(t){this.input.maxChars=t}),__getset(0,i,"fontSize",function(){return this.input.fontSize},function(t){this.input.fontSize=t}),__getset(0,i,"valign",function(){return this.input.valign},function(t){this.input.valign=t}),__getset(0,i,"italic",function(){return this.input.italic},function(t){this.input.italic=t}),__getset(0,i,"singleLine",function(){return!this.input.multiline},function(t){this.input.multiline=!t}),__getset(0,i,"stroke",function(){return this.input.stroke},function(t){this.input.stroke=t}),__getset(0,i,"strokeColor",function(){return this.input.strokeColor},function(t){this.input.strokeColor=t,this.updateGear(4)}),__getset(0,i,"keyboardType",function(){return this.input.type},function(t){this.input.type=t}),__getset(0,i,"editable",function(){return this.input.editable},function(t){this.input.editable=t}),__getset(0,i,"promptText",function(){return this.input.prompt},function(t){this.input.prompt=t}),__getset(0,i,"restrict",function(){return this.input.restrict},function(t){this.input.restrict=t}),__getset(0,i,"textWidth",function(){return this.input.textWidth}),e}(GTextField),WebAudioSoundChannel=function(t){function e(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=WebAudioSound.ctx,e.__super.call(this),this._onPlayEnd=Utils$1.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}__class(e,"laya.media.webaudio.WebAudioSoundChannel",t);var i=e.prototype;return i.play=function(){if(SoundManager.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var t=this.context,e=this.gain,i=t.createBufferSource();this.bufferSource=i,i.buffer=this.audioBuffer,i.connect(e),e&&e.disconnect(),e.connect(t.destination),i.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=Browser.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.001):this.gain.gain.value=this._volume,0==this.loops&&(i.loop=!0),i.playbackRate.setTargetAtTime?i.playbackRate.setTargetAtTime(SoundManager.playbackRate,this.context.currentTime,.001):i.playbackRate.value=SoundManager.playbackRate,i.start(0,this.startTime),this._currentTime=0}},i.__onPlayEnd=function(){return 1==this.loops?(this.completeHandler&&(Laya.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,this.startTime=0,void this.play())},i._clearBufferSource=function(){if(this.bufferSource){var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),t.disconnect(0),t.onended=null,e._tryCleanFailed||this._tryClearBuffer(t),this.bufferSource=null}},i._tryClearBuffer=function(t){if(Browser.onMac)try{t.buffer=WebAudioSound._miniBuffer}catch(i){e._tryCleanFailed=!0}else try{t.buffer=null}catch(i){e._tryCleanFailed=!0}},i.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,SoundManager.removeChannel(this),this.completeHandler=null,SoundManager.autoReleaseSound&&Laya.timer.once(5e3,null,SoundManager.disposeSoundIfNotUsed,[this.url],!1)},i.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,SoundManager.removeChannel(this),SoundManager.autoReleaseSound&&Laya.timer.once(5e3,null,SoundManager.disposeSoundIfNotUsed,[this.url],!1)},i.resume=function(){this.startTime=this._pauseTime,this.play()},__getset(0,i,"position",function(){return this.bufferSource?(Browser.now()-this._startTime)/1e3+this.startTime:0}),__getset(0,i,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),__getset(0,i,"volume",function(){return this._volume},function(t){this.isStopped||(this._volume=t,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(t,this.context.currentTime,.001):this.gain.gain.value=t)}),e._tryCleanFailed=!1,e.SetTargetDelay=.001,e}(SoundChannel),Buffer=function(t){function e(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,e.__super.call(this),e._gl=WebGL.mainContext}__class(e,"laya.webgl.utils.Buffer",t);var i=e.prototype;return i._bind=function(){this.activeResource(),e._bindActive[this._bufferType]===this._glBuffer||(e._gl.bindBuffer(this._bufferType,e._bindActive[this._bufferType]=this._glBuffer),BaseShader.activeShader=null)},i.recreateResource=function(){this.startCreate(),this._glBuffer||(this._glBuffer=e._gl.createBuffer()),this.completeCreate()},i.detoryResource=function(){this._glBuffer&&(WebGL.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},i.dispose=function(){this.resourceManager.removeResource(this),t.prototype.dispose.call(this)},__getset(0,i,"byteLength",function(){return this._byteLength}),__getset(0,i,"bufferType",function(){return this._bufferType}),__getset(0,i,"bufferUsage",function(){return this._bufferUsage}),e._gl=null,e._bindActive={},e}(Resource),RenderTarget2D=function(t){function e(t,i,n,s,r,a,o,h,l){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===n&&(n=6408),void 0===s&&(s=5121),void 0===r&&(r=34041),void 0===a&&(a=!1),void 0===o&&(o=!1),void 0===h&&(h=-1),void 0===l&&(l=-1),this._type=1,this._w=t,this._h=i,this._surfaceFormat=n,this._surfaceType=s,this._depthStencilFormat=r,this._mipMap=a,this._repeat=o,this._minFifter=h,this._magFifter=l,this._createWebGLRenderTarget(),this.bitmap.lock=!0,e.__super.call(this,this.bitmap,Texture.INV_UV)}__class(e,"laya.webgl.resource.RenderTarget2D",t);var i=e.prototype;return Laya.imps(i,{"laya.resource.IDispose":!0}),i.getType=function(){return this._type},i.getTexture=function(){return this},i.size=function(t,e){this._w==t&&this._h==e||(this._w=t,this._h=e,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},i.release=function(){this.destroy()},i.recycle=function(){e.POOL.push(this)},i.start=function(){var t=WebGL.mainContext;return this._preRenderTarget=RenderState2D.curRenderTarget,RenderState2D.curRenderTarget=this,t.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(t.viewport(0,0,this._w,this._h),this._svWidth=RenderState2D.width,this._svHeight=RenderState2D.height,RenderState2D.width=this._w,RenderState2D.height=this._h,BaseShader.activeShader=null),this},i.clear=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1);var s=WebGL.mainContext;s.clearColor(t,e,i,n);var r=16384;switch(this._depthStencilFormat){case 33189:r|=256;break;case 36168:r|=1024;break;case 34041:r|=256,r|=1024}s.clear(r)},i.end=function(){var t=WebGL.mainContext;t.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,RenderState2D.curRenderTarget=this._preRenderTarget,1==this._type?(t.viewport(0,0,this._svWidth,this._svHeight),RenderState2D.width=this._svWidth,RenderState2D.height=this._svHeight,BaseShader.activeShader=null):t.viewport(0,0,Laya.stage.width,Laya.stage.height)},i.getData=function(t,e,i,n){var s=WebGL.mainContext;s.bindFramebuffer(36160,this.bitmap.frameBuffer);var r=36053===s.checkFramebufferStatus(36160);if(!r)return s.bindFramebuffer(36160,null),null;var a=new Uint8Array(this._w*this._h*4);return s.readPixels(t,e,i,n,this._surfaceFormat,this._surfaceType,a),s.bindFramebuffer(36160,null),a},i.destroy=function(e){void 0===e&&(e=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.detoryResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,t.prototype.destroy.call(this))},i.dispose=function(){},i._createWebGLRenderTarget=function(){this.bitmap=new WebGLRenderTarget(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(t){this.event("recovered")})},__getset(0,i,"surfaceFormat",function(){return this._surfaceFormat}),__getset(0,i,"magFifter",function(){return this._magFifter}),__getset(0,i,"surfaceType",function(){return this._surfaceType}),__getset(0,i,"mipMap",function(){return this._mipMap}),__getset(0,i,"depthStencilFormat",function(){return this._depthStencilFormat}),__getset(0,i,"minFifter",function(){return this._minFifter}),__getset(0,i,"source",function(){return this._alreadyResolved?Laya.superGet(Texture,this,"source"):null}),e.create=function(t,i,n,s,r,a,o,h,l){void 0===n&&(n=6408),void 0===s&&(s=5121),void 0===r&&(r=34041),void 0===a&&(a=!1),void 0===o&&(o=!1),void 0===h&&(h=-1),void 0===l&&(l=-1);var c=e.POOL.pop();return c||(c=new e(t,i)),c.bitmap&&c._w==t&&c._h==i&&c._surfaceFormat==n&&c._surfaceType==s&&c._depthStencilFormat==r&&c._mipMap==a&&c._repeat==o&&c._minFifter==h&&c._magFifter==l||(c._w=t,c._h=i,c._surfaceFormat=n,c._surfaceType=s,c._depthStencilFormat=r,c._mipMap=a,c._repeat=o,c._minFifter=h,c._magFifter=l,c.release(),c._createWebGLRenderTarget()),c},e.TYPE2D=1,e.TYPE3D=2,e.POOL=[],e}(Texture),SkinSV=function(t){function e(t){this.texcoord=null,this.offsetX=300,this.offsetY=0,e.__super.call(this,512,0);var i=8*CONST3D2D.BYTES_PE;this.position=[2,5126,!1,i,0],this.texcoord=[2,5126,!1,i,2*CONST3D2D.BYTES_PE],this.color=[4,5126,!1,i,4*CONST3D2D.BYTES_PE]}return __class(e,"laya.webgl.shader.d2.skinAnishader.SkinSV",t),e}(Value2D),Color2dSV=function(t){function e(t){e.__super.call(this,2,0),this.color=[]}__class(e,"laya.webgl.shader.d2.value.Color2dSV",t);var i=e.prototype;return i.setValue=function(t){t.fillStyle&&(this.color=t.fillStyle._color._color),t.strokeStyle&&(this.color=t.strokeStyle._color._color)},e}(Value2D),FillTextureSV$1=function(t){function e(t){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=Value2D._TEXCOORD,e.__super.call(this,256,0)}__class(e,"laya.webgl.shader.d2.value.FillTextureSV",t,"FillTextureSV$1");var i=e.prototype;return i.setValue=function(t){this.ALPHA=t.ALPHA,t.filters&&this.setFilters(t.filters)},i.clear=function(){this.texture=null,this.shader=null,this.defines.setValue(0)},e}(Value2D),TextureSV=function(t){function e(t){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=Value2D._TEXCOORD,void 0===t&&(t=0),e.__super.call(this,1,t)}__class(e,"laya.webgl.shader.d2.value.TextureSV",t);var i=e.prototype;return i.setValue=function(t){this.ALPHA=t.ALPHA,t.filters&&this.setFilters(t.filters)},i.clear=function(){this.texture=null,this.shader=null,this.defines.setValue(0)},e}(Value2D),PrimitiveSV=function(t){function e(t){this.a_color=null,this.u_pos=[0,0],e.__super.call(this,4,0),this.position=[2,5126,!1,5*CONST3D2D.BYTES_PE,0],this.a_color=[3,5126,!1,5*CONST3D2D.BYTES_PE,2*CONST3D2D.BYTES_PE]}return __class(e,"laya.webgl.shader.d2.value.PrimitiveSV",t),e}(Value2D),UIPanel=function(t){function e(){this._closeHandler=null,this.objScene=null,this.trShow=null,this.trHide=null,this.isFull=!1,this.isHScreen=!1,App.dialog.showModalWait(),this.isHScreen=!1,this.isFull=!1,e.__super.call(this)}__class(e,"com.emugif.core.ui.core.UIPanel",t);var i=e.prototype;return i.show=function(){this.contentPane&&!this.onStage&&(this.contentPane.visible=!1),this.contentPane&&!this.contentPane.visible&&this.onStage&&this.removeFromParent(),!this.contentPane&&this.onStage&&this.removeFromParent(),t.prototype.show.call(this)},i.close=function(t){void 0===t&&(t=""),this.hide()},i.onInit=function(){if(App.dialog.closeModalWait(),t.prototype.onInit.call(this),this.contentPane){var e=this.contentPane.getChild("ok"),i=this.contentPane.getChild("cancel"),n=this.contentPane.getChild("close");e&&(e.clickHandler=new Handler(this,this.close,["ok"])),i&&(i.clickHandler=new Handler(this,this.close,["cancel"])),n&&(n.clickHandler=new Handler(this,this.close,["close"])),this.trShow=this.contentPane.getTransition("show"),this.trHide=this.contentPane.getTransition("hide"),this.contentPane.visible=!1,this.contentPane.getController("_coinType")&&(this.contentPane.getController("_coinType").selectedIndex=App.config.coinType),this.contentPane.getController("_scoreType")&&(this.contentPane.getController("_scoreType").selectedIndex=App.config.scoreType)}},i.doShowAnimation=function(){this.event("ui_panel_show",this),this.objScene?App.splash.show(this.objScene,Handler.create(this,this.onSceneComplete)):this.onSceneComplete()},i.onSceneComplete=function(t){this.onShown(),this.contentPane.visible=!0,this.trShow?this.trShow.play(Handler.create(this,this.onShownComplete)):this.modal?(this.contentPane.y=App.dialog.height,Tween.to(this.contentPane,{y:0},100,null,Handler.create(this,this.onShownComplete),0,!0)):(this.contentPane.x=App.dialog.width,this.onShownComplete(),Tween.to(this.contentPane,{x:0},300,null,Handler.create(this,this.onShownComplete),0,!0))},i.onShownComplete=function(){},i.doHideAnimation=function(){if(this.contentPane)if(this.trHide)this.trHide.play(Handler.create(this,this.hideImmediately));else if(this.trShow)this.trShow.playReverse(Handler.create(this,this.hideImmediately));else if(this.modal){Tween.to(this.contentPane,{y:App.dialog.height},100,null,Handler.create(this,this.hideImmediately),0,!0)}else Tween.to(this.contentPane,{x:0-App.dialog.width},300,null,Handler.create(this,this.hideImmediately),0,!0);else this.hideImmediately()},__getset(0,i,"closeHandler",null,function(t){this._closeHandler=t}),__getset(0,i,"opaque",t.prototype._$get_opaque,function(t){Laya.superSet(Window$2,this,"opaque",t),this.contentPane&&(this.contentPane.opaque=t)}),__getset(0,i,"contentPane",t.prototype._$get_contentPane,function(t){if(this._contentPane!=t&&(null!=this._contentPane&&this.removeChild(this._contentPane),this._contentPane=t,null!=this._contentPane)){this.addChild(this._contentPane);var e=this._contentPane.width,i=this._contentPane.height;if(this.setSize(e,i),this._contentPane.addRelation(this,24),
this.modal&&!this.isFull)this.y=0,this.center(!0);else{var n=Browser.onGameWebView&&!this.isHScreen?DialogManager.UI_DESIGN_TOP:0;this.y=n,this.setSize(App.dialog.width,App.dialog.height-n),this.addRelation(App.dialog,24)}this._frame=this._contentPane.getChild("frame"),null!=this._frame&&(this.closeButton=this._frame.getChild("closeButton"),this.dragArea=this._frame.getChild("dragArea"),this.contentArea=this._frame.getChild("contentArea"))}}),e.OK="ok",e.CANCEL="cancel",e.CLOSE="close",e}(Window$2),TipCenterUI=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.TipCenterUI",t);var i=e.prototype;return i.constructFromXML=function(t){fairygui.GComponent.prototype.constructFromXML.call(this,t)},e.createInstance=function(t){return UIPackage.createObject("common","TipCenter",t||e)},e.URL="ui://1a4c5800iz9qurm",e}(GLabel),TipUI=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.TipUI",t);var i=e.prototype;return i.constructFromXML=function(t){fairygui.GComponent.prototype.constructFromXML.call(this,t)},e.createInstance=function(t){return UIPackage.createObject("common","Tip",t||e)},e.URL="ui://1a4c5800brpxf",e}(GLabel),DisableUI$1=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.DisableUI",t,"DisableUI$1");var i=e.prototype;return i.constructFromXML=function(t){fairygui.GComponent.prototype.constructFromXML.call(this,t)},e.createInstance=function(t){return UIPackage.createObject("common","Disable",t||e)},e.URL="ui://1a4c5800n3jcuvo",e}(GLabel),DialogManager=function(t){function e(){this.objPanels=null,this.intOrder=0,this.objPanels=new Dictionary,this.intOrder=10,e.__super.call(this)}__class(e,"com.emugif.core.global.DialogManager",t);var i=e.prototype;return i.showPanel=function(t,e,i,n){if(void 0===i&&(i=!0),!t)return console.log("面板不存在: "+t),null;var s=this.objPanels.get(t)||new t;return this.objPanels.set(t,s),s?(s.modal&&i&&this.closeAll(!0,s),s.dataSource=e,s.closeHandler=n||(e?e._closeHandler:null),s.on("ui_panel_show",this,this.onPanelShow),s.show(),s):(console.log("面板不存在: "+t),s)},i.isOpen=function(t){return this.objPanels.get(t)?this.objPanels.get(t).isShowing:!1},i.getPanel=function(t){return this.objPanels.get(t)||this.objPanels.set(t,new t),this.objPanels.get(t)},i.closePanel=function(t){this.isOpen(t)&&this.objPanels.get(t).close()},i.confirm=function(t,e,i,n,s,r){void 0===n&&(n=!1),void 0===s&&(s=-1),void 0===r&&(r=0),n&&this.closeAll(!0);var a=UIPoolUtil.getObject("ConfirmView",ConfirmView);return a.modal=!0,a.dataSource={info:t,ok:e,cancel:i,confirm:!0,index:r},a.show(),this.intOrder++,a},i.alert=function(t,e,i,n,s){void 0===i&&(i=!1),void 0===n&&(n=-1),void 0===s&&(s=0),i&&this.closeAll(!0);var r=UIPoolUtil.getObject("AlertView",AlertView);return r.modal=!0,r.dataSource={info:t,ok:e,index:s},r.show(),this.intOrder++,r},i.tip=function(t,e,i,n){if(void 0===e&&(e=0),void 0===i&&(i=1500),void 0===n&&(n=!0),n)var s=UIPoolUtil.getObject("TipCenterView")||TipCenterUI.createInstance(TipCenterView);else s=UIPoolUtil.getObject("TipView")||TipUI.createInstance(TipView);return s.dataSource={info:t,index:e,time:i},s.sortingOrder=e,s.touchable=!1,s.setSize(this.width,this.height),this.addChild(s),this.intOrder++,s},i.closeAll=function(t,e){void 0===t&&(t=!0);for(var i=this.numChildren,n=0;i>n;n++){var s=this.getChildAt(n);s!=e&&s instanceof com.emugif.core.ui.core.UIPanel&&s.modal==t&&(s.close(),i=this.numChildren)}},i.hideWindowImmediately=function(e){e.removeFromParent(),t.prototype.hideWindowImmediately.call(this,e)},i.setScreenRotate=function(t,i){if(void 0===i&&(i=!1),t)var n=i?"horizontal":"horizontalrotate",s=e.UI_DESIGN_HEIGHT,r=e.UI_DESIGN_WIDTH;else n="vertical",s=e.UI_DESIGN_WIDTH,r=e.UI_DESIGN_HEIGHT;console.log("change: ",n,s,r),Laya.stage.screenMode!=n&&(Laya.stage.designWidth=s,Laya.stage.designHeight=r,Laya.stage.screenMode=n,console.log("不等于 change: ",n,s,r),Laya.stage.scaleMode="fixedauto",Laya.stage.setScreenSize(Browser.clientWidth*Browser.pixelRatio,Browser.clientHeight*Browser.pixelRatio))},i.onPanelShow=function(t){var e=t;e&&e.isShowing&&(e.off("ui_panel_show",this,this.onPanelShow),e.modal||this.closeAll(!1,e))},e.PANEL_DISCONNENTION_ORDER=85e3,e.PANEL_DISABLE_ORDER=79999,e.UI_DESIGN_WIDTH=750,e.UI_DESIGN_HEIGHT=1331,e.UI_DESIGN_TOP=80,e}(GRoot),UIButton=function(t){function e(){this._clickHandler=null,e.__super.call(this)}__class(e,"com.emugif.core.ui.core.UIButton",t);var i=e.prototype;return i.dispose=function(){this.clickHandler=null,fairygui.GComponent.prototype.dispose.call(this)},i.constructFromXML=function(t){fairygui.GComponent.prototype.constructFromXML.call(this,t),this.getController("_coinType")&&(this.getController("_coinType").selectedIndex=App.config.coinType),this.getController("_scoreType")&&(this.getController("_scoreType").selectedIndex=App.config.scoreType)},i.onBtnClick=function(t){this._clickHandler&&this._clickHandler.run()},__getset(0,i,"clickHandler",function(){return this._clickHandler},function(t){this._clickHandler=t,t?this.onClick(this,this.onBtnClick):this.offClick(this,this.onBtnClick)}),e}(GButton),UIList=function(t){function e(){this._selectHandler=null,this._renderHandler=null,this._customPos=!1,this._centerGroup=!1,this._flipColumnOrder=!1,this._selectedIndex=0,e.__super.call(this),this._selectedIndex=-1,this._customPos=!1,this._centerGroup=!1,this.itemRenderer=new Handler(this,this.onItemRender),this._flipColumnOrder=!1}__class(e,"com.emugif.core.ui.core.UIList",t);var i=e.prototype;return i.refresh=function(){this.numItems=this.numItems},i.scrollToView=function(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),this.dataSource&&e>=0&&e<this.dataSource.length&&t.prototype.scrollToView.call(this,e,i,n)},i.onItemSelected=function(t){var e=this.selectedIndex;this._selectHandler&&e!=this._selectedIndex&&this._selectHandler.runWith([e]),this._selectedIndex=this.selectedIndex},i.onItemRender=function(t,e){this.dataSource&&(e.dataSource=this.dataSource[t],this._renderHandler&&this._renderHandler.runWith([e,t]),e instanceof com.emugif.core.ui.core.UIButton&&this._selectHandler&&(e.selected=t==this._selectedIndex))},i.updateBounds=function(){this._customPos||t.prototype.updateBounds.call(this)},i.handleAlign=function(e,i){if(t.prototype.handleAlign.call(this,e,i),2==this.layout&&this._centerGroup&&this.columnCount>0){for(var n=0,s=0,r=0,a=this.numChildren,o=0;a>o;o++){var h=this.getChildAt(o);if((!this.foldInvisibleItems||h.visible)&&(o==n&&(s=h.x),o==a-1||this.getChildAt(o+1).y!=h.y)){r=h.x+h.width;var l=Math.floor((e-r+s)/2);console.log(r-s,e,n,o);for(var c=n;o>=c;c++)h=this.getChildAt(c),h.setXY(h.x+l,h.y);n=o+1}}if(this._flipColumnOrder&&a>this.columnCount){console.log("_flipColumnOrder");var u=[];for(o=0;o<this.columnCount;o++)h=this.getChildAt(o),this.foldInvisibleItems&&!h.visible||u.push(h);for(;u.length>0;)this.addChild(u.shift())}}},__getset(0,i,"selectedIndex",t.prototype._$get_selectedIndex,function(t){Laya.superSet(GList,this,"selectedIndex",t),this._selectedIndex=t,this._selectHandler&&this.selectHandler.runWith([t])}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){Laya.superSet(GList,this,"dataSource",t),this.dataSource||(this.dataSource=[]),this.numItems=this.dataSource.length}),__getset(0,i,"renderHandler",function(){return this._renderHandler},function(t){this._renderHandler=t}),__getset(0,i,"selectHandler",function(){return this._selectHandler},function(t){this._selectHandler=t,t?this.on("fui_click_item",this,this.onItemSelected):this.off("fui_click_item",this,this.onItemSelected)}),__getset(0,i,"selectedItem",function(){return this.dataSource?this.dataSource[this.selectedIndex]:null}),__getset(0,i,"flipColumnOrder",function(){return this._flipColumnOrder},function(t){this._flipColumnOrder=t}),__getset(0,i,"customPos",function(){return this._customPos},function(t){this._customPos=t}),__getset(0,i,"centerGroup",function(){return this._centerGroup},function(t){this._centerGroup=t}),__getset(0,i,"length",function(){return this.dataSource?this.dataSource.length:this.numChildren}),e}(GList),Text=function(t){function e(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,e.__super.call(this),this.overflow=e.VISIBLE,this._style=new CSSStyle(this),this._style.wordWrap=!1}__class(e,"laya.display.Text",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._lines=null,this._words&&(this._words.length=0,this._words=null)},i._getBoundPointsM=function(t){void 0===t&&(t=!1);var e=Rectangle.TEMP;return e.setTo(0,0,this.width,this.height),e._getBoundPoints()},i.getGraphicBounds=function(t){void 0===t&&(t=!1);var e=Rectangle.TEMP;return e.setTo(0,0,this.width,this.height),e},i._getCSSStyle=function(){return this._style},i.lang=function(t,i,n,s,r,a,o,h,l,c,u){if(t=e.langPacks&&e.langPacks[t]?e.langPacks[t]:t,arguments.length<2)this._text=t;else{for(var _=0,d=arguments.length;d>_;_++)t=t.replace("{"+_+"}",arguments[_+1]);this._text=t}},i.renderText=function(t,e){var i=this.graphics;i.clear(!0);var n=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(Browser.onIPhone?laya.display.Text._fontFamilyMap[this.font]||this.font:this.font);Browser.context.font=n;var s=this.padding,r=s[3],a="left",o=this._lines,h=this.leading+this._charSize.height,l=this._currBitmapFont;l&&(h=this.leading+l.getMaxHeight());var c=s[0];if(!l&&this._width>0&&this._textWidth<=this._width&&("right"==this.align?(a="right",r=this._width-s[1]):"center"==this.align&&(a="center",r=.5*this._width+s[3]-s[1])),this._height>0){var u=this._textHeight>this._height?"top":this.valign;"middle"===u?c=.5*(this._height-e*h)+s[0]-s[2]:"bottom"===u&&(c=this._height-e*h-s[2])}var _=this._style;if(l&&l.autoScaleSize)var d=l.fontSize/this.fontSize;if(this._clipPoint)if(i.save(),l&&l.autoScaleSize){var f=0,p=0;f=this._width?this._width-s[3]-s[1]:this._textWidth,p=this._height?this._height-s[0]-s[2]:this._textHeight,f*=d,p*=d,i.clipRect(s[3],s[0],f,p)}else i.clipRect(s[3],s[0],this._width?this._width-s[3]-s[1]:this._textWidth,this._height?this._height-s[0]-s[2]:this._textHeight);var g=_.password;"prompt"in this&&this.prompt==this._text&&(g=!1);for(var m=0,v=0,y=Math.min(this._lines.length,e+t)||1,w=t;y>w;w++){var b,S=o[w];if(g){var x=S.length;S="";for(var C=x;C>0;C--)S+="●"}if(m=r-(this._clipPoint?this._clipPoint.x:0),v=c+h*w-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(a,m,v,w),l){var T=this.width;l.autoScaleSize&&(T=this.width*d),l.drawText(S,this,m,v,this.align,T)}else Render.isWebGL?(this._words||(this._words=[]),b=this._words.length>w-t?this._words[w-t]:new WordText,b.setText(S)):b=S,_.stroke?i.fillBorderText(b,m,v,n,this.color,_.strokeColor,_.stroke,a):i.fillText(b,m,v,n,this.color,a)}if(l&&l.autoScaleSize){var I=1/d;this.scale(I,I)}this._clipPoint&&i.restore(),this._startX=r,this._startY=c},i.drawUnderline=function(t,e,i,n){var s=this._lineWidths[n];switch(t){case"center":e-=s/2;break;case"right":e-=s;break;case"left":}i+=this._charSize.height,this._graphics.drawLine(e,i,e+s,i,this.underlineColor||this.color,1)},i.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);Browser.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new Point(0,0)):this._clipPoint=null;var t=this._lines.length;if(this.overflow!=e.VISIBLE){var i=this.overflow==e.HIDDEN?Math.floor:Math.ceil;t=Math.min(t,i((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var n=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(n,t),this.repaint()},i.evalTextSize=function(){var t=NaN,e=NaN;t=Math.max.apply(this,this._lineWidths),e=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],t==this._textWidth&&e==this._textHeight||(this._textWidth=t,this._textHeight=e,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},i.checkEnabledViewportOrNot=function(){return this.overflow==e.SCROLL&&(this._width>0&&this._textWidth>this._width||this._height>0&&this._textHeight>this._height)},i.changeText=function(t){this._text!==t&&(this.lang(t+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},i.parseLines=function(t){var i=this.wordWrap||this.overflow==e.HIDDEN;if(i)var n=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var s=Browser.context.measureText(e._testWord);this._charSize.width=s.width,this._charSize.height=s.height||this.fontSize}for(var r=t.replace(/\r\n/g,"\n").split("\n"),a=0,o=r.length;o>a;a++){var h=r[a];i?this.parseLine(h,n):(this._lineWidths.push(this.getTextWidth(h)),this._lines.push(h))}},i.parseLine=function(t,i){var n,s=(Browser.context,this._lines),r=0,a=NaN,o=NaN,h=0;if(a=this.getTextWidth(t),i>=a)return s.push(t),void this._lineWidths.push(a);a=this._charSize.width,r=Math.floor(i/a),0==r&&(r=1),a=this.getTextWidth(t.substring(0,r)),o=a;for(var l=r,c=t.length;c>l;l++)if(a=this.getTextWidth(t.charAt(l)),o+=a,o>i)if(this.wordWrap){var u=t.substring(h,l);if(u.charCodeAt(u.length-1)<255&&(n=/(?:\w|-)+$/.exec(u),n&&(l=n.index+h,0==n.index?l+=u.length:u=t.substring(h,l))),s.push(u),this._lineWidths.push(o-a),h=l,!(c>l+r)){s.push(t.substring(h,c)),this._lineWidths.push(this.getTextWidth(s[s.length-1])),h=-1;break}l+=r,a=this.getTextWidth(t.substring(h,l)),o=a,l--}else if(this.overflow==e.HIDDEN)return s.push(t.substring(0,l)),void this._lineWidths.push(this.getTextWidth(s[s.length-1]));this.wordWrap&&-1!=h&&(s.push(t.substring(h,c)),this._lineWidths.push(this.getTextWidth(s[s.length-1])))},i.getTextWidth=function(t){return this._currBitmapFont?this._currBitmapFont.getTextWidth(t):Browser.context.measureText(t).width},i.getWordWrapWidth=function(){var t=this.padding,e=NaN;return e=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width,0>=e&&(e=this.wordWrap?100:Browser.width),0>=e&&(e=100),e-t[3]-t[1]},i.getCharPoint=function(t,e){this._isChanged&&Laya.timer.runCallLater(this,this.typeset);for(var i=0,n=this._lines,s=0,r=0,a=n.length;a>r;r++){if(i+=n[r].length,i>t){var o=r;break}s=i}var h=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;Browser.context.font=h;var l=this.getTextWidth(this._text.substring(s,t)),c=e||new Point;return c.setTo(this._startX+l-(this._clipPoint?this._clipPoint.x:0),this._startY+o*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},__getset(0,i,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(t){t!=this._width&&(Laya.superSet(Sprite,this,"width",t),this.isChanged=!0)}),__getset(0,i,"textWidth",function(){return this._isChanged&&Laya.timer.runCallLater(this,this.typeset),this._textWidth}),__getset(0,i,"height",function(){return this._height?this._height:this.textHeight+this.padding[0]+this.padding[2]},function(t){t!=this._height&&(Laya.superSet(Sprite,this,"height",t),this.isChanged=!0)}),__getset(0,i,"textHeight",function(){return this._isChanged&&Laya.timer.runCallLater(this,this.typeset),this._textHeight}),__getset(0,i,"padding",function(){return this._getCSSStyle().padding},function(t){this._getCSSStyle().padding=t,this.isChanged=!0}),__getset(0,i,"bold",function(){return this._getCSSStyle().bold},function(t){this._getCSSStyle().bold=t,this.isChanged=!0}),__getset(0,i,"text",function(){return this._text||""},function(t){this._text!==t&&(this.lang(t+""),this.isChanged=!0,this.event("change"))}),__getset(0,i,"color",function(){return this._getCSSStyle().color},function(t){this._getCSSStyle().color!=t&&(this._getCSSStyle().color=t,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),__getset(0,i,"font",function(){return this._getCSSStyle().fontFamily},function(t){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),e._bitmapFonts&&e._bitmapFonts[t]&&(this._currBitmapFont=e._bitmapFonts[t]),this._getCSSStyle().fontFamily=t,this.isChanged=!0}),__getset(0,i,"fontSize",function(){return this._getCSSStyle().fontSize},function(t){this._getCSSStyle().fontSize=t,this.isChanged=!0}),__getset(0,i,"italic",function(){return this._getCSSStyle().italic},function(t){this._getCSSStyle().italic=t,this.isChanged=!0}),__getset(0,i,"align",function(){return this._getCSSStyle().align},function(t){this._getCSSStyle().align=t,this.isChanged=!0}),__getset(0,i,"valign",function(){return this._getCSSStyle().valign},function(t){this._getCSSStyle().valign=t,this.isChanged=!0}),__getset(0,i,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(t){this._getCSSStyle().wordWrap=t,this.isChanged=!0}),__getset(0,i,"leading",function(){return this._getCSSStyle().leading},function(t){this._getCSSStyle().leading=t,this.isChanged=!0}),__getset(0,i,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(t){this._getCSSStyle().backgroundColor=t,this.isChanged=!0}),__getset(0,i,"borderColor",function(){return this._getCSSStyle().borderColor},function(t){this._getCSSStyle().borderColor=t,this.isChanged=!0}),__getset(0,i,"stroke",function(){return this._getCSSStyle().stroke},function(t){this._getCSSStyle().stroke=t,this.isChanged=!0}),__getset(0,i,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(t){this._getCSSStyle().strokeColor=t,this.isChanged=!0}),__getset(0,i,"isChanged",null,function(t){this._isChanged!==t&&(this._isChanged=t,t&&Laya.timer.callLater(this,this.typeset))}),__getset(0,i,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(t){if(!(this.overflow!=e.SCROLL||this.textWidth<this._width)&&this._clipPoint){t=t<this.padding[3]?this.padding[3]:t;var i=this._textWidth-this._width;t=t>i?i:t;var n=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=t,this.renderText(this._lastVisibleLineIndex,n)}}),__getset(0,i,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(t){if(!(this.overflow!=e.SCROLL||this.textHeight<this._height)&&this._clipPoint){t=t<this.padding[0]?this.padding[0]:t;var i=this._textHeight-this._height;t=t>i?i:t;var n=t/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=n;var s=(this._height/(this._charSize.height+this.leading)|0)+1;this._clipPoint.y=t,this.renderText(n,s)}}),__getset(0,i,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),__getset(0,i,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),__getset(0,i,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),__getset(0,i,"underlineColor",function(){return this._underlineColor},function(t){this._underlineColor=t,this._isChanged=!0,this.typeset()}),e.registerBitmapFont=function(t,i){e._bitmapFonts||(e._bitmapFonts={}),e._bitmapFonts[t]=i},e.unregisterBitmapFont=function(t,i){if(void 0===i&&(i=!0),e._bitmapFonts&&e._bitmapFonts[t]){var n=e._bitmapFonts[t];i&&n.destroy(),delete e._bitmapFonts[t]}},e.supportFont=function(t){Browser.context.font="10px sans-serif";var e=Browser.context.measureText("abcji").width;Browser.context.font="10px "+t;var i=Browser.context.measureText("abcji").width;return console.log(e,i),e!=i},e._testWord="游",e.langPacks=null,e.VISIBLE="visible",e.SCROLL="scroll",e.HIDDEN="hidden",e.CharacterCache=!0,e._bitmapFonts=null,__static(e,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),e}(Sprite),GameInit=function(t){function e(){this.intProgress=0,e.__super.call(this),console.log("Init Web"),Config.isAlpha=!0,Laya.init(DialogManager.UI_DESIGN_WIDTH,DialogManager.UI_DESIGN_HEIGHT,WebGL),Render.isWebGL?Laya.stage.bgColor="none":Laya.stage.bgColor=null,App.config.getCache("token")&&(App.config.token=App.config.getCache("token"));var t=decodeURIComponent(gameConfig);App.config.parseConfig(JSON.parse(t)),URL.customFormat=function(t){return-1==t.indexOf("://")&&(t=App.config.cdn+t),t},Laya.stage.scaleMode="fixedauto",Laya.stage.alignH="top",Laya.stage.alignV="left",Laya.stage.frameRate="fast",Laya.stage.screenMode="vertical",App.config.parseSearch(),App.init(),UIConfig$1.defaultFont="宋体",UIConfig$1.globalModalWaiting="ui://1a4c5800n3jcuvo",UIConfig$1.modalLayerColor="rgba(33,33,33,0)",Laya.stage.addChild(App.splash.displayObject),Laya.stage.addChild(App.dialog.displayObject);var i=UIObjectFactory.newObject2;UIObjectFactory.newObject2=function(t){switch(t){case 10:return new UIList;case 12:return new UIButton;case 9:return new UIComponent}return i(t)},UIObjectFactory.setLoaderExtension(UILoader),UIConfig$1.bringWindowToFrontOnClick=!1,UIConfig$1.defaultFont="黑体",UIConfig$1.defaultScrollBounceEffect=!0,UIConfig$1.defaultScrollTouchEffect=!0,SoundManager.musicMuted=!0,SoundManager.soundMuted=!1,new UIResource("common.fui","1a4c5800",new Handler(this,this.addProgress,[])).load(this.onUILoaded,this)}__class(e,"GameInit",t);var i=e.prototype;return i.onUILoaded=function(){App.config.token?App.action.user.info(Handler.create(this,this.onLoginComplete)):this.onLoginComplete()},i.onLoginComplete=function(t){if(this.progress=100,t){if(App.player=new PlayerVO,App.player.parse(t),App.config.roomid)return void App.player.enterRoom(App.config.roomid,0,!1);if(App.config.initpage)return void("gameRecord"==App.config.initpage?App.dialog.showPanel(LogListView,0):"appeal"==App.config.initpage?App.dialog.showPanel(LogListView,1):"consumeRecord"==App.config.initpage?App.dialog.showPanel(BillListView):"userInfo"==App.config.initpage&&App.dialog.showPanel(UserInfoView));if(Browser.onGameWebView)return void App.dialog.showPanel(GameFrontView)}console.log(GameTitleView),App.dialog.showPanel(GameTitleView)},i.addProgress=function(t){console.log(t),Tween.to(this,{progress:100*t},100,Ease.linearNone,null,0,!0)},__getset(0,i,"progress",function(){return this.intProgress},function(t){this.intProgress=t,Browser.window.setProgress(t,"")}),e}(Sprite),Stage=function(t){function e(){function t(){"hidden"==Browser.document[r]?(i._isVisibility=!1,s._isInputting()&&(Input.inputElement.target.focus=!1)):i._isVisibility=!0,s.event("visibilitychange")}this.focus=null,this.frameRate="fast",this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._safariOffsetY=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._wgColor=null,e.__super.call(this),this.offset=new Point,this._canvasTransform=new Matrix,this._previousOrientation=Browser.window.orientation;var i=this;this.transform=Matrix.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var n=Browser.window,s=this;n.addEventListener("focus",function(){i._isFocused=!0,s.event("focus"),s.event("focuschange")}),n.addEventListener("blur",function(){i._isFocused=!1,s.event("blur"),s.event("focuschange"),s._isInputting()&&(Input.inputElement.target.focus=!1)});var r="visibilityState",a="visibilitychange",o=n.document;"undefined"!=typeof o.hidden?(a="visibilitychange",r="visibilityState"):"undefined"!=typeof o.mozHidden?(a="mozvisibilitychange",r="mozVisibilityState"):"undefined"!=typeof o.msHidden?(a="msvisibilitychange",r="msVisibilityState"):"undefined"!=typeof o.webkitHidden&&(a="webkitvisibilitychange",r="webkitVisibilityState"),n.document.addEventListener(a,t),n.addEventListener("resize",function(){var t=Browser.window.orientation;null!=t&&t!=i._previousOrientation&&s._isInputting()&&(Input.inputElement.target.focus=!1),i._previousOrientation=t,s._isInputting()||(Browser.onSafari&&(s._safariOffsetY=(Browser.window.__innerHeight||Browser.document.body.clientHeight||Browser.document.documentElement.clientHeight)-Browser.window.innerHeight),s._resetCanvas())}),n.addEventListener("orientationchange",function(t){s._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),Browser.onMobile&&this.on("mousedown",this,this._onmouseMove)}__class(e,"laya.display.Stage",t);var i=e.prototype;return i._isInputting=function(){return Browser.onMobile&&Input.isInputting},i._changeCanvasSize=function(){this.setScreenSize(Browser.clientWidth*Browser.pixelRatio,Browser.clientHeight*Browser.pixelRatio)},i._resetCanvas=function(){if(this.screenAdaptationEnabled){var t=Render._mainCanvas;t.source.style;Laya.timer.once(100,this,this._changeCanvasSize)}},i.setScreenSize=function(t,e){var i=!1;if(console.log(this._screenMode,i,t,e),"none"!==this._screenMode){var n=1>t/e?"vertical":"horizontal";if(i=-1==this._screenMode.indexOf(n)){var s=e;e=t,t=s}}this.canvasRotation=i;var r=Render._mainCanvas,a=r.source.style,o=this._canvasTransform.identity(),h=this._scaleMode,l=t/this.designWidth,c=e/this.designHeight,u=this.designWidth,_=this.designHeight,d=t,f=e,p=Browser.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,h){case"noscale":l=c=1,d=this.designWidth,f=this.designHeight;break;case"showall":l=c=Math.min(l,c),u=d=Math.round(this.designWidth*l),_=f=Math.round(this.designHeight*c);break;case"noborder":l=c=Math.max(l,c),d=Math.round(this.designWidth*l),f=Math.round(this.designHeight*c);break;case"full":l=c=1,this._width=u=t,this._height=_=e;break;case"fixedwidth":c=l,this._height=_=Math.round(e/l);break;case"fixedheight":l=c,this._width=u=Math.round(t/c);break;case"fixedauto":t/e<this.designWidth/this.designHeight?(c=l,this._height=_=Math.round(e/l)):(l=c,this._width=u=Math.round(t/c))}var g=t>1306?2:1;console.log(this._screenMode,i,t,e,g),l*=this.scaleX*g,c*=this.scaleY*g,1===l&&1===c?this.transform.identity():(this.transform.a=this._formatData(l/(d/u)),this.transform.d=this._formatData(c/(f/_)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),r.size(u*g,_*g),RunDriver.changeWebGLSize(u*g,_*g),o.scale(d/u/p/g,f/_/p/g),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=t-d:this.offset.x=.5*(t-d)/p,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=e-f:this.offset.y=.5*(e-f)/p,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),o.translate(this.offset.x,this.offset.y),this._safariOffsetY&&o.translate(0,this._safariOffsetY),this.canvasDegree=0,i&&("horizontal"===this._screenMode?(o.rotate(Math.PI/2),o.translate(e/p,0),this.canvasDegree=90):(o.rotate(-Math.PI/2),o.translate(0,t/p),this.canvasDegree=-90)),o.a=this._formatData(o.a),o.d=this._formatData(o.d),o.tx=this._formatData(o.tx),o.ty=this._formatData(o.ty),a.transformOrigin=a.webkitTransformOrigin=a.msTransformOrigin=a.mozTransformOrigin=a.oTransformOrigin="0px 0px 0px",a.transform=a.webkitTransform=a.msTransform=a.mozTransform=a.oTransform="matrix("+o.toString()+")",this._safariOffsetY&&o.translate(0,-this._safariOffsetY),o.translate(parseInt(a.left)||0,parseInt(a.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},i._formatData=function(t){return Math.abs(t)<1e-6?0:Math.abs(1-t)<.001?t>0?1:-1:t},i.getMousePoint=function(){return Point.TEMP.setTo(this.mouseX,this.mouseY)},i.repaint=function(){this._repaint=1},i.parentRepaint=function(){},i._loop=function(){return this.render(Render.context,0,0),!0},i._onmouseMove=function(t){this._mouseMoveTime=Browser.now()},i.getTimeFromFrameStart=function(){return Browser.now()-this._frameStartTime},i.render=function(e,i,n){if("sleep"===this.frameRate){var s=Browser.now();if(!(s-this._frameStartTime>=1e3))return;this._frameStartTime=s}if(this._renderCount++,Render.isFlash&&this.repaint(),!this._style.visible)return void(this._renderCount%5===0&&(Stat.loopCount++,MouseManager.instance.runEvent(),Laya.timer._update()));this._frameStartTime=Browser.now();var r="mouse"===this.frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this.frameRate,a="slow"!==r,o=this._renderCount%2===0;if(Stat.renderSlow=!a,a||o){Stat.loopCount++,MouseManager.instance.runEvent(),Laya.timer._update();var h,l=0,c=0;if(Render.isConchNode)for(l=0,c=this._scenes.length;c>l;l++)h=this._scenes[l],h&&h._updateSceneConch();else for(l=0,c=this._scenes.length;c>l;l++)h=this._scenes[l],h&&h._updateScene();if(Render.isConchNode){var u=Sprite.CustomList;for(l=0,c=u.length;c>l;l++){var _=u[l];_.customRender(_.customContext,0,0)}return}Render.isWebGL&&this.renderingEnabled&&(e.clear(),t.prototype.render.call(this,e,i,n))}Render.isConchNode||!this.renderingEnabled||!a&&o||(Render.isWebGL?(RunDriver.clear(this._bgColor),RunDriver.beginFlush(),e.flush(),RunDriver.endFinish(),VectorGraphManager.instance&&VectorGraphManager.getInstance().endDispose()):(RunDriver.clear(this._bgColor),t.prototype.render.call(this,e,i,n)))},i._requestFullscreen=function(){var t=Browser.document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},i._fullScreenChanged=function(){Laya.stage.event("fullscreenchange")},i.exitFullscreen=function(){var t=Browser.document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()},__getset(0,i,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),__getset(0,i,"width",t.prototype._$get_width,function(t){this.designWidth=t,Laya.superSet(Sprite,this,"width",t),Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,i,"isFocused",function(){return this._isFocused}),__getset(0,i,"alignH",function(){return this._alignH},function(t){this._alignH=t,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,i,"height",t.prototype._$get_height,function(t){this.designHeight=t,Laya.superSet(Sprite,this,"height",t),Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,i,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||Matrix.create()},t.prototype._$set_transform),__getset(0,i,"isVisibility",function(){return this._isVisibility}),__getset(0,i,"scaleMode",function(){return this._scaleMode},function(t){this._scaleMode=t,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,i,"alignV",function(){return this._alignV},function(t){this._alignV=t,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,i,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t,this.conchModel&&this.conchModel.bgColor(t),Render.isWebGL&&(t&&"black"!==t&&"#000000"!==t?this._wgColor=Color.create(t)._color:this._wgColor=null),t?Render.canvas.style.background=t:Render.canvas.style.background="none"}),__getset(0,i,"mouseX",function(){return Math.round(MouseManager.instance.mouseX/this.clientScaleX)}),__getset(0,i,"mouseY",function(){return Math.round(MouseManager.instance.mouseY/this.clientScaleY)}),__getset(0,i,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1;
}),__getset(0,i,"screenMode",function(){return this._screenMode},function(t){this._screenMode=t}),__getset(0,i,"visible",t.prototype._$get_visible,function(t){if(this.visible!==t){Laya.superSet(Sprite,this,"visible",t);var e=Render._mainCanvas.source.style;e.visibility=t?"visible":"hidden"}}),__getset(0,i,"fullScreenEnabled",null,function(t){var e=Browser.document,i=Render.canvas;t?(i.addEventListener("mousedown",this._requestFullscreen),i.addEventListener("touchstart",this._requestFullscreen),e.addEventListener("fullscreenchange",this._fullScreenChanged),e.addEventListener("mozfullscreenchange",this._fullScreenChanged),e.addEventListener("webkitfullscreenchange",this._fullScreenChanged),e.addEventListener("msfullscreenchange",this._fullScreenChanged)):(i.removeEventListener("mousedown",this._requestFullscreen),i.removeEventListener("touchstart",this._requestFullscreen),e.removeEventListener("fullscreenchange",this._fullScreenChanged),e.removeEventListener("mozfullscreenchange",this._fullScreenChanged),e.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),e.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),e.SCALE_NOSCALE="noscale",e.SCALE_EXACTFIT="exactfit",e.SCALE_SHOWALL="showall",e.SCALE_NOBORDER="noborder",e.SCALE_FULL="full",e.SCALE_FIXED_WIDTH="fixedwidth",e.SCALE_FIXED_HEIGHT="fixedheight",e.SCALE_FIXED_AUTO="fixedauto",e.ALIGN_LEFT="left",e.ALIGN_RIGHT="right",e.ALIGN_CENTER="center",e.ALIGN_TOP="top",e.ALIGN_MIDDLE="middle",e.ALIGN_BOTTOM="bottom",e.SCREEN_NONE="none",e.SCREEN_HORIZONTAL="horizontal",e.SCREEN_VERTICAL="vertical",e.SCREEN_HORIZONTAL_ROTATE="horizontalrotate",e.FRAME_FAST="fast",e.FRAME_SLOW="slow",e.FRAME_MOUSE="mouse",e.FRAME_SLEEP="sleep",e}(Sprite),HTMLElement=function(_super){function HTMLElement(){this.URI=null,this._href=null,HTMLElement.__super.call(this),this._text=HTMLElement._EMPTYTEXT,this._childRenderMax=!0,this.setStyle(new CSSStyle(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}__class(HTMLElement,"laya.html.dom.HTMLElement",_super);var __proto=HTMLElement.prototype;return __proto.layaoutCallNative=function(){var t=0;if(this._childs&&(t=this._childs.length)>0)for(var e=0;t>e;e++)this._childs[e].layaoutCallNative&&this._childs[e].layaoutCallNative();var i=this._getWords();i&&HTMLElement.fillWords(this,i,0,0,this.style.font,this.style.color)},__proto.appendChild=function(t){return this.addChild(t)},__proto._getWords=function(){var t=this._text.text;if(!t||0===t.length)return null;var e=this._text.words;if(e&&e.length===t.length)return e;null===e&&(this._text.words=e=[]),e.length=t.length;for(var i,n=this.style,s=n.font,r=0,a=t.length;a>r;r++){i=Utils$1.measureText(t.charAt(r),s);var o=e[r]=new HTMLChar(t.charAt(r),i.width,i.height||n.fontSize,n);if(this.href){var h=new Sprite;this.addChild(h),o.setSprite(h)}}return e},__proto.showLinkSprite=function(){var t=this._text.words;if(t)for(var e,i,n=[],s=0;s<t.length;s++)i=t[s],e=new Sprite,e.graphics.drawRect(0,0,i.width,i.height,"#ff0000"),e.width=i.width,e.height=i.height,this.addChild(e),n.push(e)},__proto._layoutLater=function(){var t=this.style;512&t._type||(t.widthed(this)&&(this._childs.length>0||null!=this._getWords())&&t.block?(Layout.later(this),t._type|=512):this.parent&&this.parent._layoutLater())},__proto._setAttributes=function(t,e){switch(t){case"style":return void this.style.cssText(e);case"class":return void(this.className=e)}_super.prototype._setAttributes.call(this,t,e)},__proto.updateHref=function(){if(null!=this._href){var t=this._getWords();if(t)for(var e,i,n=0;n<t.length;n++)if(e=t[n],i=e.getSprite()){var s=e.height-1,r=.5*e.style.letterSpacing;r||(r=0),i.graphics.drawLine(0-r,s,e.width+r,s,e._getCSSStyle().color),i.size(e.width,e.height),i.on("click",this,this.onLinkHandler)}}},__proto.onLinkHandler=function(t){switch(t.type){case"click":for(var e=this;e;)e.event("link",[this.href]),e=e.parent}},__proto.formatURL=function(t){return this.URI?URL.formatURL(t,this.URI?this.URI.path:null):t},__getset(0,__proto,"href",function(){return this._href},function(t){this._href=t,null!=t&&this.updateHref()}),__getset(0,__proto,"color",null,function(t){this.style.color=t}),__getset(0,__proto,"onClick",null,function(value){var fn;eval("fn=function(event){"+value+";}"),this.on("click",this,fn)}),__getset(0,__proto,"id",null,function(t){HTMLDocument.document.setElementById(t,this)}),__getset(0,__proto,"innerTEXT",function(){return this._text.text},function(t){this.text=t}),__getset(0,__proto,"style",function(){return this._style}),__getset(0,__proto,"text",function(){return this._text.text},function(t){this._text==HTMLElement._EMPTYTEXT?this._text={text:t,words:null}:(this._text.text=t,this._text.words&&(this._text.words.length=0)),this._renderType|=2048,this.repaint(),this.updateHref()}),__getset(0,__proto,"parent",_super.prototype._$get_parent,function(t){if(t instanceof laya.html.dom.HTMLElement){var e=t;this.URI||(this.URI=e.URI),this.style.inherit(e.style)}Laya.superSet(Sprite,this,"parent",t)}),__getset(0,__proto,"className",null,function(t){this.style.attrs(HTMLDocument.document.styleSheets["."+t])}),HTMLElement.fillWords=function(t,e,i,n,s,r){t.graphics.clear();for(var a=0,o=e.length;o>a;a++){var h=e[a];t.graphics.fillText(h["char"],h.x+i,h.y+n,s,r,"left")}},HTMLElement._EMPTYTEXT={text:null,words:null},HTMLElement}(Sprite),FileBitmap=function(t){function e(){this._src=null,this._onload=null,this._onerror=null,e.__super.call(this)}__class(e,"laya.resource.FileBitmap",t);var i=e.prototype;return __getset(0,i,"src",function(){return this._src},function(t){this._src=t}),__getset(0,i,"onload",null,function(t){}),__getset(0,i,"onerror",null,function(t){}),e}(Bitmap),HTMLCanvas=function(t){function e(t){this._is2D=!1,e.__super.call(this);var i=this;if(this._source=this,"2D"===t||"AUTO"===t&&!Render.isWebGL){this._is2D=!0,this._source=Browser.createElement("canvas");var n=this;n.getContext=function(t,e){if(i._ctx)return i._ctx;var s=i._ctx=i._source.getContext(t,e);return s&&(s._canvas=n,Render.isFlash||(s.size=function(t,e){})),s}}}__class(e,"laya.resource.HTMLCanvas",t);var i=e.prototype;return i.clear=function(){this._ctx&&this._ctx.clear()},i.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,this.dispose()},i.release=function(){},i._setContext=function(t){this._ctx=t},i.getContext=function(t,i){return this._ctx?this._ctx:this._ctx=e._createContext(this)},i.getMemSize=function(){return 0},i.size=function(t,e){this._w==t&&this._h==e||(this._w=t,this._h=e,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(t,e),this._source&&(this._source.height=e,this._source.width=t))},i.getCanvas=function(){return this._source},i.toBase64=function(t,e){return this._source?this._source.toDataURL(t,e):null},__getset(0,i,"context",function(){return this._ctx}),__getset(0,i,"asBitmap",null,function(t){}),e.create=function(t){return new e(t)},e.TYPE2D="2D",e.TYPE3D="3D",e.TYPEAUTO="AUTO",e._createContext=null,e}(Bitmap),HTMLSubImage=function(t){function e(t,i,n,s,r,a,o,h){throw e.__super.call(this),new Error("不允许new！")}return __class(e,"laya.resource.HTMLSubImage",t),e.create=function(t,i,n,s,r,a,o,h){return void 0===h&&(h=!1),new e(t,i,n,s,r,a,o,h)},e}(Bitmap),Image$1=function(t){function e(){this._source=null,this._scaleByTile=!1,this._scale9Grid=null,this._tileGridIndice=0,this._needRebuild=0,this._fillMethod=0,this._fillOrigin=0,this._fillAmount=0,this._fillClockwise=!1,this._mask=null,this._color=null,e.__super.call(this),this.mouseEnabled=!1,this._color="#FFFFFF"}__class(e,"fairygui.display.Image",t,"Image$1");var i=e.prototype;return i.markChanged=function(t){this._needRebuild?this._needRebuild|=t:(this._needRebuild=t,Laya.timer.callLater(this,this.rebuild))},i.rebuild=function(t){void 0===t&&(t=!1),(0!=(1&this._needRebuild)||t)&&this.doDraw(),0==(2&this._needRebuild)&&!t||0==this._fillMethod||this.doFill(),this._needRebuild=0},i.doDraw=function(){var t=this.width,e=this.height,i=this.graphics,n=this.texture;if(null==n||0==t||0==e)i.clear();else if(this._scaleByTile)i.clear(),i.fillTexture(n,0,0,t,e);else if(null!=this._scale9Grid){i.clear();var s=n.width,r=n.height,a=this._scale9Grid.x,o=Math.max(s-this._scale9Grid.right,0),h=this._scale9Grid.y,l=Math.max(r-this._scale9Grid.bottom,0),c=NaN;e>=r-this._scale9Grid.height?(h=this._scale9Grid.y,l=r-this._scale9Grid.bottom):(c=this._scale9Grid.y/(r-this._scale9Grid.bottom),c=e*c/(1+c),h=Math.round(c),l=e-c),t>=s-this._scale9Grid.width?(a=this._scale9Grid.x,o=s-this._scale9Grid.right):(c=this._scale9Grid.x/(s-this._scale9Grid.right),c=t*c/(1+c),a=Math.round(c),o=t-c);var u=Math.max(t-a-o,0),_=Math.max(e-h-l,0);a&&h&&i.drawTexture(fairygui.display.Image.getTexture(n,0,0,a,h),0,0,a,h),o&&h&&i.drawTexture(fairygui.display.Image.getTexture(n,s-o,0,o,h),t-o,0,o,h),a&&l&&i.drawTexture(fairygui.display.Image.getTexture(n,0,r-l,a,l),0,e-l,a,l),o&&l&&i.drawTexture(fairygui.display.Image.getTexture(n,s-o,r-l,o,l),t-o,e-l,o,l),u&&h&&this.drawTexture(0,fairygui.display.Image.getTexture(n,a,0,s-a-o,h),a,0,u,h),u&&l&&this.drawTexture(1,fairygui.display.Image.getTexture(n,a,r-l,s-a-o,l),a,e-l,u,l),_&&a&&this.drawTexture(2,fairygui.display.Image.getTexture(n,0,h,a,r-h-l),0,h,a,_),_&&o&&this.drawTexture(3,fairygui.display.Image.getTexture(n,s-o,h,o,r-h-l),t-o,h,o,_),u&&_&&this.drawTexture(4,fairygui.display.Image.getTexture(n,a,h,s-a-o,r-h-l),a,h,u,_)}else i.cleanByTexture(n,0,0,t,e)},i.drawTexture=function(t,e,i,n,s,r){void 0===s&&(s=0),void 0===r&&(r=0),-1==t||0==(this._tileGridIndice&1<<t)?this.graphics.drawTexture(e,i,n,s,r):this.graphics.fillTexture(e,i,n,s,r)},i.doFill=function(){var t=this.width,e=this.height,i=this._mask.graphics;if(i.clear(),0!=t&&0!=e){var n=FillUtils.fill(t,e,this._fillMethod,this._fillOrigin,this._fillClockwise,this._fillAmount);return null==n?(this.mask=null,void(this.mask=this._mask)):void i.drawPoly(0,0,n,"#FFFFFF")}},__getset(0,i,"width",t.prototype._$get_width,function(t){this._width!==t&&(Laya.superSet(Sprite,this,"width",t),this.markChanged(1))}),__getset(0,i,"fillOrigin",function(){return this._fillOrigin},function(t){this._fillOrigin!=t&&(this._fillOrigin=t,0!=this._fillMethod&&this.markChanged(2))}),__getset(0,i,"height",t.prototype._$get_height,function(t){this._height!==t&&(Laya.superSet(Sprite,this,"height",t),this.markChanged(1))}),__getset(0,i,"scaleByTile",function(){return this._scaleByTile},function(t){this._scaleByTile!=t&&(this._scaleByTile=t,this.markChanged(1))}),__getset(0,i,"texture",function(){return this._source},function(t){this._source!=t&&(this._source=t,0==this.width&&(this._source?this.size(this._source.width,this._source.height):this.size(0,0)),this.repaint(),this.markChanged(1))}),__getset(0,i,"scale9Grid",function(){return this._scale9Grid},function(t){this._scale9Grid=t,this.markChanged(1)}),__getset(0,i,"color",function(){return this._color},function(t){this._color!=t&&(this._color=t)}),__getset(0,i,"tileGridIndice",function(){return this._tileGridIndice},function(t){this._tileGridIndice!=t&&(this._tileGridIndice=t,this.markChanged(1))}),__getset(0,i,"fillMethod",function(){return this._fillMethod},function(t){this._fillMethod!=t&&(this._fillMethod=t,0!=this._fillMethod?(this._mask||(this._mask=new Sprite,this._mask.mouseEnabled=!1),this.mask=this._mask,this.markChanged(2)):this.mask&&(this._mask.graphics.clear(),this.mask=null))}),__getset(0,i,"fillClockwise",function(){return this._fillClockwise},function(t){this._fillClockwise!=t&&(this._fillClockwise=t,0!=this._fillMethod&&this.markChanged(2))}),__getset(0,i,"fillAmount",function(){return this._fillAmount},function(t){this._fillAmount!=t&&(this._fillAmount=t,0!=this._fillMethod&&this.markChanged(2))}),e.getTexture=function(t,e,i,n,s){0>=n&&(n=1),0>=s&&(s=1),t.$_GID||(t.$_GID=Utils$1.getGID());var r=t.$_GID+"."+e+"."+i+"."+n+"."+s,a=WeakObject.I.get(r);return a&&a.source||(a=Texture.createFromTexture(t,e,i,n,s),WeakObject.I.set(r,a)),a},e}(Sprite),AtlasWebGLCanvas=function(t){function e(){this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,e.__super.call(this)}__class(e,"laya.webgl.atlas.AtlasWebGLCanvas",t);var i=e.prototype;return i.recreateResource=function(){this.startCreate();var t=WebGL.mainContext,e=this._source=t.createTexture(),i=WebGLContext.curBindTexTarget,n=WebGLContext.curBindTexValue;WebGLContext.bindTexture(t,3553,e),t.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),t.texParameteri(3553,10241,9729),t.texParameteri(3553,10240,9729),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071),i&&n&&WebGLContext.bindTexture(t,i,n),this.memorySize=this._w*this._h*4,this.completeCreate()},i.detoryResource=function(){this._source&&(WebGL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},i.texSubImage2D=function(t,e,i){if(Render.isFlash){this._flashCacheImage||(this._flashCacheImage=HTMLImage.create(""),this._flashCacheImage.image.createCanvas(this._w,this._h));var n=i.bitmapdata;t-1>=0&&this._flashCacheImage.image.copyPixels(n,0,0,n.width-1,n.height,t,e),t+1<=this._w&&this._flashCacheImage.image.copyPixels(n,0,0,n.width+1,n.height,t,e),e-1>=0&&this._flashCacheImage.image.copyPixels(n,0,0,n.width,n.height-1,t,e),e+1<=this._h&&this._flashCacheImage.image.copyPixels(n,0,0,n.width+1,n.height,t,e),this._flashCacheImage.image.copyPixels(n,0,0,n.width,n.height,t,e),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var s=WebGL.mainContext,r=WebGLContext.curBindTexTarget,a=WebGLContext.curBindTexValue;WebGLContext.bindTexture(s,3553,this._source),t-1>=0&&s.texSubImage2D(3553,0,t-1,e,6408,5121,i),t+1<=this._w&&s.texSubImage2D(3553,0,t+1,e,6408,5121,i),e-1>=0&&s.texSubImage2D(3553,0,t,e-1,6408,5121,i),e+1<=this._h&&s.texSubImage2D(3553,0,t,e+1,6408,5121,i),s.texSubImage2D(3553,0,t,e,6408,5121,i),r&&a&&WebGLContext.bindTexture(s,r,a)}},i.texSubImage2DPixel=function(t,e,i,n,s){var r=WebGL.mainContext,a=WebGLContext.curBindTexTarget,o=WebGLContext.curBindTexValue;WebGLContext.bindTexture(r,3553,this._source);var h=new Uint8Array(s.data);r.texSubImage2D(3553,0,t,e,i,n,6408,5121,h),a&&o&&WebGLContext.bindTexture(r,a,o)},__getset(0,i,"width",t.prototype._$get_width,function(t){this._w=t}),__getset(0,i,"height",t.prototype._$get_height,function(t){this._h=t}),e}(Bitmap),WebGLCanvas=function(t){function e(){e.__super.call(this)}__class(e,"laya.webgl.resource.WebGLCanvas",t);var i=e.prototype;return i.getCanvas=function(){return this._canvas},i.clear=function(){this._ctx&&this._ctx.clear()},i.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null},i._setContext=function(t){this._ctx=t},i.getContext=function(t,i){return this._ctx?this._ctx:this._ctx=e._createContext(this)},i.size=function(t,e){this._w==t&&this._h==e||(this._w=t,this._h=e,this._ctx&&this._ctx.size(t,e),this._canvas&&(this._canvas.height=e,this._canvas.width=t))},i.recreateResource=function(){this.startCreate(),this.createWebGlTexture(),this.completeCreate()},i.detoryResource=function(){this._source&&!this.iscpuSource&&(WebGL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},i.createWebGlTexture=function(){var t=WebGL.mainContext;if(!this._canvas)throw"create GLTextur err:no data:"+this._canvas;var e=this._source=t.createTexture();this.iscpuSource=!1;var i=WebGLContext.curBindTexTarget,n=WebGLContext.curBindTexValue;WebGLContext.bindTexture(t,3553,e),t.texImage2D(3553,0,6408,6408,5121,this._canvas),t.texParameteri(3553,10240,9729),t.texParameteri(3553,10241,9729),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071),this.memorySize=this._w*this._h*4,i&&n&&WebGLContext.bindTexture(t,i,n)},i.texSubImage2D=function(t,e,i){var n=WebGL.mainContext,s=WebGLContext.curBindTexTarget,r=WebGLContext.curBindTexValue;WebGLContext.bindTexture(n,3553,this._source),n.texSubImage2D(3553,0,e,i,6408,5121,t._source),s&&r&&WebGLContext.bindTexture(n,s,r)},__getset(0,i,"context",function(){return this._ctx}),__getset(0,i,"asBitmap",null,function(t){this._ctx&&(this._ctx.asBitmap=t)}),e._createContext=null,e}(Bitmap),WebGLCharImage=function(t){function e(t,i){this.CborderSize=12,e.__super.call(this),this["char"]=t,this.isSpace=" "===t,this.xs=i.scaleX,this.ys=i.scaleY,this.font=i.font.toString(),this.fontSize=i.font.size,this.fillColor=i.fillColor,this.borderColor=i.borderColor,this.lineWidth=i.lineWidth;var n,s=Render.isConchApp;s?(n=ConchTextCanvas,n._source=ConchTextCanvas,n._source.canvas=ConchTextCanvas):n=Browser.canvas.source,this.canvas=n,this._enableMerageInAtlas=!0,s?this._ctx=n:this._ctx=this.canvas.getContext("2d",void 0);var r=Utils$1.measureText(this["char"],this.font);this.cw=r.width*this.xs,this.ch=(r.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new Texture(this)}__class(e,"laya.webgl.resource.WebGLCharImage",t);var i=e.prototype;return Laya.imps(i,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),i.active=function(){this.texture.active()},i.recreateResource=function(){this.startCreate();var t=Render.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),t){var e=this.fontSize;1==this.xs&&1==this.ys||(e=parseInt(e*(this.xs>this.ys?this.xs:this.ys)+""));var i="normal 100 "+e+"px Arial";this.borderColor&&(i+=" 1 "+this.borderColor),this._ctx.font=i,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this["char"],this.CborderSize,this.CborderSize,null,null,null)}else this._ctx.save(),this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this["char"],0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this["char"],0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this["char"],0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this["char"],0,0,null,null,0,null)),this._ctx.restore();this.borderSize=this.CborderSize,this.completeCreate()},i.onresize=function(t,e){if(this._w=t,this._h=e,!(this._w<AtlasResourceManager.atlasLimitWidth&&this._h<AtlasResourceManager.atlasLimitHeight))throw this._allowMerageInAtlas=!1,new Error("文字尺寸超出大图合集限制！");this._allowMerageInAtlas=!0},i.clearAtlasSource=function(){},__getset(0,i,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),__getset(0,i,"atlasSource",function(){return this.canvas}),__getset(0,i,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(t){this._enableMerageInAtlas=t}),e.createOneChar=function(t,i){var n=new e(t,i);return n},e}(Bitmap),WebGLRenderTarget=function(t){function e(t,i,n,s,r,a,o,h,l){void 0===n&&(n=6408),void 0===s&&(s=5121),void 0===r&&(r=34041),void 0===a&&(a=!1),void 0===o&&(o=!1),void 0===h&&(h=-1),void 0===l&&(l=1),e.__super.call(this),this._w=t,this._h=i,this._surfaceFormat=n,this._surfaceType=s,this._depthStencilFormat=r,this._mipMap=a,this._repeat=o,this._minFifter=h,this._magFifter=l}__class(e,"laya.webgl.resource.WebGLRenderTarget",t);var i=e.prototype;return i.recreateResource=function(){this.startCreate();var t=WebGL.mainContext;this._frameBuffer||(this._frameBuffer=t.createFramebuffer()),this._source||(this._source=t.createTexture());var e=WebGLContext.curBindTexTarget,i=WebGLContext.curBindTexValue;WebGLContext.bindTexture(t,3553,this._source),t.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var n=this._minFifter,s=this._magFifter,r=this._repeat?10497:33071,a=Arith.isPOT(this._w,this._h);if(a?(this._mipMap?-1!==n||(n=9987):-1!==n||(n=9729),-1!==s||(s=9729),t.texParameteri(3553,10241,n),t.texParameteri(3553,10240,s),t.texParameteri(3553,10242,r),t.texParameteri(3553,10243,r),this._mipMap&&t.generateMipmap(3553)):(-1!==n||(n=9729),-1!==s||(s=9729),t.texParameteri(3553,10241,n),t.texParameteri(3553,10240,s),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)),t.bindFramebuffer(36160,this._frameBuffer),t.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=t.createRenderbuffer()),t.bindRenderbuffer(36161,this._depthStencilBuffer),t.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:t.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:t.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:t.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}t.bindFramebuffer(36160,null),e&&i&&WebGLContext.bindTexture(t,e,i),t.bindRenderbuffer(36161,null),this.memorySize=this._w*this._h*4,this.completeCreate()},i.detoryResource=function(){this._frameBuffer&&(WebGL.mainContext.deleteTexture(this._source),WebGL.mainContext.deleteFramebuffer(this._frameBuffer),WebGL.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},__getset(0,i,"depthStencilBuffer",function(){return this._depthStencilBuffer}),__getset(0,i,"frameBuffer",function(){return this._frameBuffer}),e}(Bitmap),WebGLSubImage=function(t){function e(t,i,n,s,r,a,o){this.offsetX=0,this.offsetY=0,e.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=a,this.canvas=t,this._ctx=t.getContext("2d",void 0),this._w=s,this._h=r,this.offsetX=i,this.offsetY=n,this.src=o,this._enableMerageInAtlas=!0,AtlasResourceManager.enabled&&this._w<AtlasResourceManager.atlasLimitWidth&&this._h<AtlasResourceManager.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}__class(e,"laya.webgl.resource.WebGLSubImage",t);var i=e.prototype;return Laya.imps(i,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),i.size=function(t,e){this._w=t,this._h=e,this._ctx&&this._ctx.size(t,e),this.canvas&&(this.canvas.height=e,this.canvas.width=t)},i.recreateResource=function(){this.startCreate(),this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},i.createWebGlTexture=function(){var t=WebGL.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var e=this._source=t.createTexture(),i=WebGLContext.curBindTexTarget,n=WebGLContext.curBindTexValue;WebGLContext.bindTexture(t,3553,e),t.texImage2D(3553,0,6408,6408,5121,this.canvas);var s=this.minFifter,r=this.magFifter,a=this.repeat?10497:33071,o=Arith.isPOT(this.width,this.height);o?(this.mipmap?-1!==s||(s=9987):-1!==s||(s=9729),-1!==r||(r=9729),t.texParameteri(3553,10240,r),t.texParameteri(3553,10241,s),t.texParameteri(3553,10242,a),t.texParameteri(3553,10243,a),this.mipmap&&t.generateMipmap(3553)):(-1!==s||(s=9729),-1!==r||(r=9729),t.texParameteri(3553,10241,s),t.texParameteri(3553,10240,r),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)),i&&n&&WebGLContext.bindTexture(t,i,n),this.canvas=null,this.memorySize=this._w*this._h*4},i.detoryResource=function(){AtlasResourceManager.enabled&&this._allowMerageInAtlas||!this._source||(WebGL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},i.clearAtlasSource=function(){},i.dispose=function(){this.resourceManager.removeResource(this),t.prototype.dispose.call(this)},__getset(0,i,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),__getset(0,i,"atlasSource",function(){return this.canvas}),__getset(0,i,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(t){this._allowMerageInAtlas=t}),e}(Bitmap),Shader=function(t){function e(t,i,n,s){if(this.customCompile=!1,this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,e.__super.call(this),!t||!i)throw"Shader Error";(Render.isConchApp||Render.isFlash)&&(this.customCompile=!0),this._id=++e._count,this._vs=t,this._ps=i,this._nameMap=s?s:{},null!=n&&(e.sharders[n]=this)}__class(e,"laya.webgl.shader.Shader",t);var i=e.prototype;return i.recreateResource=function(){this.startCreate(),this._compile(),this.completeCreate(),this.memorySize=0},i.detoryResource=function(){WebGL.mainContext.deleteShader(this._vshader),WebGL.mainContext.deleteShader(this._pshader),WebGL.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},i._compile=function(){if(this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var t,i=[this._vs,this._ps];this.customCompile&&(t=this._preGetParams(this._vs,this._ps));var n=WebGL.mainContext;if(this._program=n.createProgram(),this._vshader=e._createShader(n,i[0],35633),this._pshader=e._createShader(n,i[1],35632),n.attachShader(this._program,this._vshader),n.attachShader(this._program,this._pshader),n.linkProgram(this._program),!this.customCompile&&!n.getProgramParameter(this._program,35714))throw n.getProgramInfoLog(this._program);var s,r,a=0,o=0,h=this.customCompile?t.attributes.length:n.getProgramParameter(this._program,35721);for(a=0;h>a;a++){var l=this.customCompile?t.attributes[a]:n.getActiveAttrib(this._program,a);r=n.getAttribLocation(this._program,l.name),s={vartype:"attribute",ivartype:0,attrib:l,location:r,name:l.name,type:l.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(s)}var c=this.customCompile?t.uniforms.length:n.getProgramParameter(this._program,35718);for(a=0;c>a;a++){var u=this.customCompile?t.uniforms[a]:n.getActiveUniform(this._program,a);r=n.getUniformLocation(this._program,u.name),s={vartype:"uniform",ivartype:1,attrib:l,location:r,name:u.name,type:u.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},s.name.indexOf("[0]")>0&&(s.name=s.name.substr(0,s.name.length-3),s.isArray=!0,s.location=n.getUniformLocation(this._program,s.name)),this._params.push(s)}for(a=0,o=this._params.length;o>a;a++)if(s=this._params[a],s.indexOfParams=a,s.index=1,s.value=[s.location,null],s.codename=s.name,s.name=this._nameMap[s.codename]?this._nameMap[s.codename]:s.codename,this._paramsMap[s.name]=s,s._this=this,s.uploadedValue=[],"attribute"!==s.vartype)switch(s.type){case 5124:s.fun=s.isArray?this._uniform1iv:this._uniform1i;break;case 5126:s.fun=s.isArray?this._uniform1fv:this._uniform1f;break;case 35664:s.fun=s.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:s.fun=s.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:s.fun=s.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:s.fun=this._uniform_sampler2D;break;case 35680:s.fun=this._uniform_samplerCube;break;case 35676:s.fun=this._uniformMatrix4fv;break;case 35670:s.fun=this._uniform1i;break;case 35674:case 35675:throw new Error("compile shader err!");default:throw new Error("compile shader err!")}else s.fun=this._attribute}},i.getUniform=function(t){return this._paramsMap[t]},i._attribute=function(t,e){var i=WebGL.mainContext;return i.enableVertexAttribArray(t.location),i.vertexAttribPointer(t.location,e[0],e[1],e[2],e[3],e[4]+this._offset),2},i._uniform1f=function(t,e){var i=t.uploadedValue;return i[0]!==e?(WebGL.mainContext.uniform1f(t.location,i[0]=e),1):0},i._uniform1fv=function(t,e){if(e.length<4){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(WebGL.mainContext.uniform1fv(t.location,e),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],1):0}return WebGL.mainContext.uniform1fv(t.location,e),1},i._uniform_vec2=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]?(WebGL.mainContext.uniform2f(t.location,i[0]=e[0],i[1]=e[1]),1):0},i._uniform_vec2v=function(t,e){if(e.length<2){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(WebGL.mainContext.uniform2fv(t.location,e),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],1):0}return WebGL.mainContext.uniform2fv(t.location,e),1},i._uniform_vec3=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]?(WebGL.mainContext.uniform3f(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2]),1):0},i._uniform_vec3v=function(t,e){return WebGL.mainContext.uniform3fv(t.location,e),1},i._uniform_vec4=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(WebGL.mainContext.uniform4f(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3]),1):0},i._uniform_vec4v=function(t,e){return WebGL.mainContext.uniform4fv(t.location,e),1},i._uniformMatrix2fv=function(t,e){return WebGL.mainContext.uniformMatrix2fv(t.location,!1,e),1},i._uniformMatrix3fv=function(t,e){return WebGL.mainContext.uniformMatrix3fv(t.location,!1,e),1},i._uniformMatrix4fv=function(t,e){return WebGL.mainContext.uniformMatrix4fv(t.location,!1,e),1},i._uniform1i=function(t,e){var i=t.uploadedValue;return i[0]!==e?(WebGL.mainContext.uniform1i(t.location,i[0]=e),1):0},i._uniform1iv=function(t,e){return WebGL.mainContext.uniform1iv(t.location,e),1},i._uniform_ivec2=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]?(WebGL.mainContext.uniform2i(t.location,i[0]=e[0],i[1]=e[1]),1):0},i._uniform_ivec2v=function(t,e){return WebGL.mainContext.uniform2iv(t.location,e),1},i._uniform_vec3i=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]?(WebGL.mainContext.uniform3i(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2]),1):0},i._uniform_vec3vi=function(t,e){return WebGL.mainContext.uniform3iv(t.location,e),1},i._uniform_vec4i=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(WebGL.mainContext.uniform4i(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3]),1):0},i._uniform_vec4vi=function(t,e){return WebGL.mainContext.uniform4iv(t.location,e),1},i._uniform_sampler2D=function(t,i){var n=WebGL.mainContext,s=t.uploadedValue;return null==s[0]?(s[0]=this._curActTexIndex,n.uniform1i(t.location,this._curActTexIndex),n.activeTexture(e._TEXTURES[this._curActTexIndex]),WebGLContext.bindTexture(n,3553,i),this._curActTexIndex++,1):(n.activeTexture(e._TEXTURES[s[0]]),WebGLContext.bindTexture(n,3553,i),0)},i._uniform_samplerCube=function(t,i){var n=WebGL.mainContext,s=t.uploadedValue;return null==s[0]?(s[0]=this._curActTexIndex,n.uniform1i(t.location,this._curActTexIndex),n.activeTexture(e._TEXTURES[this._curActTexIndex]),WebGLContext.bindTexture(n,34067,i),this._curActTexIndex++,1):(n.activeTexture(e._TEXTURES[s[0]]),WebGLContext.bindTexture(n,34067,i),0)},i._noSetValue=function(t){console.log("no....:"+t.name)},i.uploadOne=function(t,e){this.activeResource(),WebGLContext.UseProgram(this._program);var i=this._paramsMap[t];i.fun.call(this,i,e)},i.uploadTexture2D=function(t){Stat.shaderCall++;var e=WebGL.mainContext;e.activeTexture(33984),WebGLContext.bindTexture(e,3553,t)},i.upload=function(t,e){BaseShader.activeShader=this,BaseShader.bindShader=this,this.activeResource(),WebGLContext.UseProgram(this._program),this._reCompile?(e=this._params,this._reCompile=!1):e=e||this._params;for(var i,n,s=e.length,r=0,a=0;s>a;a++)i=e[a],null!==(n=t[i.name])&&(r+=i.fun.call(this,i,n));Stat.shaderCall+=r},i.uploadArray=function(t,e,i){BaseShader.activeShader=this,BaseShader.bindShader=this,this.activeResource(),WebGLContext.UseProgram(this._program);for(var n,s,r=(this._params,0),a=e-2;a>=0;a-=2)s=this._paramsMap[t[a]],s&&(n=t[a+1],null!=n&&(i&&i[s.name]&&i[s.name].bind(),r+=s.fun.call(this,s,n)));Stat.shaderCall+=r},i.getParams=function(){return this._params},i._preGetParams=function(t,e){var i=[t,e],n={},s=[],r=[],a={},o=[];n.attributes=s,n.uniforms=r,n.defines=a;
for(var h=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),l=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),c=0,u=0,_=0;2>_;_++){i[_]=i[_].replace(h,"");var d,f=i[_].match(l);for(c=0,u=f.length;u>c;c++){var p=f[c];if("attribute"==p||"uniform"==p)c=this.parseOne(s,r,f,c,p,!0);else{if("#define"==p){p=f[++c],o[p]=1;continue}if("#ifdef"==p){d=f[++c];a[d]=a[d]||[];for(c++;u>c;c++)if(p=f[c],"attribute"==p||"uniform"==p)c=this.parseOne(s,r,f,c,p,o[d]);else if("#else"==p)for(c++;u>c;c++)if(p=f[c],"attribute"==p||"uniform"==p)c=this.parseOne(s,r,f,c,p,!o[d]);else if("#endif"==p)break}}}}return n},i.parseOne=function(t,i,n,s,r,a){var o={type:e.shaderParamsMap[n[s+1]],name:n[s+2],size:isNaN(parseInt(n[s+3]))?1:parseInt(n[s+3])};return a&&("attribute"==r?t.push(o):i.push(o)),":"==n[s+3]&&(o.type=n[s+4],s+=2),s+=2},i.dispose=function(){this.resourceManager.removeResource(this),laya.resource.Resource.prototype.dispose.call(this)},e.getShader=function(t){return e.sharders[t]},e.create=function(t,i,n,s){return new e(t,i,n,s)},e.withCompile=function(t,i,n,s){if(n&&e.sharders[n])return e.sharders[n];var r=e._preCompileShader[2e-4*t];if(!r)throw new Error("withCompile shader err!"+t);return r.createShader(i,n,s)},e.withCompile2D=function(t,i,n,s,r){if(s&&e.sharders[s])return e.sharders[s];var a=e._preCompileShader[2e-4*t+i];if(!a)throw new Error("withCompile shader err!"+t+" "+i);return a.createShader(n,s,r)},e.addInclude=function(t,i){if(!i||0===i.length)throw new Error("add shader include file err:"+t);if(e._includeFiles[t])throw new Error("add shader include file err, has add:"+t);e._includeFiles[t]=i},e.preCompile=function(t,i,n,s){var r=2e-4*t;e._preCompileShader[r]=new ShaderCompile(r,i,n,s,e._includeFiles)},e.preCompile2D=function(t,i,n,s,r){var a=2e-4*t+i;e._preCompileShader[a]=new ShaderCompile(a,n,s,r,e._includeFiles)},e._createShader=function(t,e,i){var n=t.createShader(i);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,35713))throw t.getShaderInfoLog(n);return n},e._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],e._includeFiles={},e._count=0,e._preCompileShader={},e.SHADERNAME2ID=2e-4,e.sharders=(e.sharders=[],e.sharders.length=32,e.sharders),__static(e,["shaderParamsMap",function(){return this.shaderParamsMap={"float":5126,"int":5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new StringKey}]),e}(BaseShader),Buffer2D=function(t){function e(){this._maxsize=0,this._upload=!0,this._uploadSize=0,e.__super.call(this),this.lock=!0}__class(e,"laya.webgl.utils.Buffer2D",t);var i=e.prototype;return i._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),Stat.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,Buffer._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),Buffer._gl.bufferSubData(this._bufferType,0,this._buffer)},i._bufferSubData=function(t,e,i){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this._maxsize=Math.max(this._maxsize,this._byteLength),Stat.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,Buffer._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),e||i){var n=this._buffer.slice(e,i);Buffer._gl.bufferSubData(this._bufferType,t,n)}else Buffer._gl.bufferSubData(this._bufferType,t,this._buffer)},i._checkArrayUse=function(){},i._bind_upload=function(){return this._upload?(this._upload=!1,this._bind(),this._bufferData(),!0):!1},i._bind_subUpload=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this._upload?(this._upload=!1,this._bind(),this._bufferSubData(t,e,i),!0):!1},i._resizeBuffer=function(t,e){if(t<this._buffer.byteLength)return this;if(this.memorySize=t,e&&this._buffer&&this._buffer.byteLength>0){var i=new ArrayBuffer(t),n=new Uint8Array(i);n.set(new Uint8Array(this._buffer),0),this._buffer=i}else this._buffer=new ArrayBuffer(t);return this._checkArrayUse(),this._upload=!0,this},i.append=function(t){this._upload=!0;var e,i=0;i=t.byteLength,t instanceof Uint8Array?(this._resizeBuffer(this._byteLength+i,!0),e=new Uint8Array(this._buffer,this._byteLength)):t instanceof Uint16Array?(this._resizeBuffer(this._byteLength+i,!0),e=new Uint16Array(this._buffer,this._byteLength)):t instanceof Float32Array&&(this._resizeBuffer(this._byteLength+i,!0),e=new Float32Array(this._buffer,this._byteLength)),e.set(t,0),this._byteLength+=i,this._checkArrayUse()},i.appendEx=function(t,e){this._upload=!0;var i,n=0;n=t.byteLength,this._resizeBuffer(this._byteLength+n,!0),i=new e(this._buffer,this._byteLength),i.set(t,0),this._byteLength+=n,this._checkArrayUse()},i.appendEx2=function(t,e,i,n){void 0===n&&(n=1),this._upload=!0;var s,r=0;r=i*n,this._resizeBuffer(this._byteLength+r,!0),s=new e(this._buffer,this._byteLength);var a=0;for(a=0;i>a;a++)s[a]=t[a];this._byteLength+=r,this._checkArrayUse()},i.getBuffer=function(){return this._buffer},i.setNeedUpload=function(){this._upload=!0},i.getNeedUpload=function(){return this._upload},i.upload=function(){var t=this._bind_upload();return Buffer._gl.bindBuffer(this._bufferType,null),Buffer._bindActive[this._bufferType]=null,BaseShader.activeShader=null,t},i.subUpload=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var n=this._bind_subUpload();return Buffer._gl.bindBuffer(this._bufferType,null),Buffer._bindActive[this._bufferType]=null,BaseShader.activeShader=null,n},i.detoryResource=function(){t.prototype.detoryResource.call(this),this._upload=!0,this._uploadSize=0},i.clear=function(){this._byteLength=0,this._upload=!0},__getset(0,i,"bufferLength",function(){return this._buffer.byteLength}),__getset(0,i,"byteLength",t.prototype._$get_byteLength,function(t){this._byteLength!==t&&(t<=this._buffer.byteLength||this._resizeBuffer(2*t+256,!0),this._byteLength=t)}),e.__int__=function(t){IndexBuffer2D.QuadrangleIB=IndexBuffer2D.create(35044),GlUtils.fillIBQuadrangle(IndexBuffer2D.QuadrangleIB,16)},e.FLOAT32=4,e.SHORT=2,e}(Buffer),TextSV=function(t){function e(t){e.__super.call(this,64),this.defines.add(64)}__class(e,"laya.webgl.shader.d2.value.TextSV",t);var i=e.prototype;return i.release=function(){e.pool[e._length++]=this,this.clear()},i.clear=function(){t.prototype.clear.call(this)},e.create=function(){return e._length?e.pool[--e._length]:new e(null)},e.pool=[],e._length=0,e}(TextureSV),AlertUI=function(t){function e(){this._tfInfo=null,e.__super.call(this),this.modal=!0,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.AlertUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","Alert").asCom,this._tfInfo=this.contentPane.getChild("_info"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800ffbc8",e}(UIPanel),ConfirmUI=function(t){function e(){this._tfInfo=null,e.__super.call(this),this.modal=!0,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.ConfirmUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","Confirm").asCom,this._tfInfo=this.contentPane.getChild("_info"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800c5bae",e}(UIPanel),MetalListUI=function(t){function e(){this._ctrlCoinType=null,this._ctrlScoreType=null,this._mcList=null,this._btnAvatar=null,this._mcLevel=null,this._btnCoin=null,this._btnPoint=null,e.__super.call(this),this.modal=!1,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.MetalListUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","MetalList").asCom,this._ctrlCoinType=this.contentPane.getController("_coinType"),this._ctrlScoreType=this.contentPane.getController("_scoreType"),this._mcList=this.contentPane.getChild("_list"),this._btnAvatar=this.contentPane.getChild("_avatar"),this._mcLevel=this.contentPane.getChild("_level"),this._btnCoin=this.contentPane.getChild("_coin"),this._btnPoint=this.contentPane.getChild("_point"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800iz9quro",e}(UIPanel),MissionListUI=function(t){function e(){this._mcTop=null,this._mcList=null,this._mcProgress=null,this._tfReward=null,e.__super.call(this),this.modal=!1,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.MissionListUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","MissionList").asCom,this._mcTop=this.contentPane.getChild("_top"),this._mcList=this.contentPane.getChild("_list"),this._mcProgress=this.contentPane.getChild("_progress"),this._tfReward=this.contentPane.getChild("_reward"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800yipsuia",e}(UIPanel),SignDailyUI=function(t){function e(){this._mcList=null,e.__super.call(this),this.modal=!0,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.SignDailyUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","SignDaily").asCom,this._mcList=this.contentPane.getChild("_list"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800wn00urf",e}(UIPanel),GameCamera1UI=function(t){function e(){this._ctrlStatus=null,this._ctrlCoinType=null,this._ctrlMember=null,this._btnAvatar=null,this._mcMembers=null,this._tfMemberCount=null,this._tfRoomName=null,this._tfPlayerName=null,this._btnStart=null,this._btnOrder=null,this._btnCancel=null,this._tfCost=null,this._btnJoyr=null,this._btnJoyl=null,this._btnJoyu=null,this._btnJoyd=null,this._btnFire=null,this._btnCoin=null,this._btnCharge=null,this._btnChat=null,this._btnRule=null,this._btnSound=null,this._btnReport=null,this._btnExchange=null,e.__super.call(this),this.modal=!1,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.GameCamera1UI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","GameCamera1").asCom,this._ctrlStatus=this.contentPane.getController("_status"),this._ctrlCoinType=this.contentPane.getController("_coinType"),this._ctrlMember=this.contentPane.getController("_member"),this._btnAvatar=this.contentPane.getChild("_avatar"),this._mcMembers=this.contentPane.getChild("_members"),this._tfMemberCount=this.contentPane.getChild("_memberCount"),this._tfRoomName=this.contentPane.getChild("_roomName"),this._tfPlayerName=this.contentPane.getChild("_playerName"),this._btnStart=this.contentPane.getChild("_start"),this._btnOrder=this.contentPane.getChild("_order"),this._btnCancel=this.contentPane.getChild("_cancel"),this._tfCost=this.contentPane.getChild("_cost"),this._btnJoyr=this.contentPane.getChild("_joyr"),this._btnJoyl=this.contentPane.getChild("_joyl"),this._btnJoyu=this.contentPane.getChild("_joyu"),this._btnJoyd=this.contentPane.getChild("_joyd"),this._btnFire=this.contentPane.getChild("_fire"),this._btnCoin=this.contentPane.getChild("_coin"),this._btnCharge=this.contentPane.getChild("_charge"),this._btnChat=this.contentPane.getChild("_chat"),this._btnRule=this.contentPane.getChild("_rule"),this._btnSound=this.contentPane.getChild("_sound"),this._btnReport=this.contentPane.getChild("_report"),this._btnExchange=this.contentPane.getChild("_exchange"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800tzzwut7",e}(UIPanel),GameCamera3UI=function(t){function e(){this._ctrlStatus=null,this._ctrlCoinType=null,this._ctrlMember=null,this._ctrlScoreType=null,this._btnRule=null,this._btnSound=null,this._btnReport=null,this._btnCharge=null,this._btnExchange=null,this._btnWiper=null,this._btnAvatar=null,this._btnCoin=null,this._btnPoint=null,this._btnStop=null,this._tfScore=null,this._mcMembers=null,this._tfMemberCount=null,this._tfOrders=null,this._btnStart=null,this._tfCost=null,this._btn1coin=null,this._btn3coin=null,this._btnOrder=null,this._btnCancel=null,this._tfCountdown=null,e.__super.call(this),this.modal=!1,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.GameCamera3UI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","GameCamera3").asCom,this._ctrlStatus=this.contentPane.getController("_status"),this._ctrlCoinType=this.contentPane.getController("_coinType"),this._ctrlMember=this.contentPane.getController("_member"),this._ctrlScoreType=this.contentPane.getController("_scoreType"),this._btnRule=this.contentPane.getChild("_rule"),this._btnSound=this.contentPane.getChild("_sound"),this._btnReport=this.contentPane.getChild("_report"),this._btnCharge=this.contentPane.getChild("_charge"),this._btnExchange=this.contentPane.getChild("_exchange"),this._btnWiper=this.contentPane.getChild("_wiper"),this._btnAvatar=this.contentPane.getChild("_avatar"),this._btnCoin=this.contentPane.getChild("_coin"),this._btnPoint=this.contentPane.getChild("_point"),this._btnStop=this.contentPane.getChild("_stop"),this._tfScore=this.contentPane.getChild("_score"),this._mcMembers=this.contentPane.getChild("_members"),this._tfMemberCount=this.contentPane.getChild("_memberCount"),this._tfOrders=this.contentPane.getChild("_orders"),this._btnStart=this.contentPane.getChild("_start"),this._tfCost=this.contentPane.getChild("_cost"),this._btn1coin=this.contentPane.getChild("_1coin"),this._btn3coin=this.contentPane.getChild("_3coin"),this._btnOrder=this.contentPane.getChild("_order"),this._btnCancel=this.contentPane.getChild("_cancel"),this._tfCountdown=this.contentPane.getChild("_countdown"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800iz9qurx",e}(UIPanel),GameCamera4_0UI=function(t){function e(){this._ctrlStatus=null,this._ctrlIsmulti=null,this._ctrlCoinType=null,this._ctrlMember=null,this._ctrlScoreType=null,this._mcBorder0=null,this._mcBorder1=null,this._btnAvatar=null,this._btnCoin=null,this._btnPoint=null,this._mcMembers=null,this._tfMemberCount=null,this._mcSeats=null,this._btnStop=null,this._btnRule=null,this._btnSound=null,this._btnResult=null,this._btnCharge=null,this._btnExchange=null,this._mcStart=null,this._mcInsert=null,this._btnJoyr=null,this._btnJoyl=null,this._btnJoyu=null,this._btnJoyd=null,this._mcMulti=null,this._btnDouble=null,this._btnBet=null,this._btnFire=null,e.__super.call(this),this.modal=!1,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.GameCamera4_0UI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","GameCamera4_0").asCom,this._ctrlStatus=this.contentPane.getController("_status"),this._ctrlIsmulti=this.contentPane.getController("_ismulti"),this._ctrlCoinType=this.contentPane.getController("_coinType"),this._ctrlMember=this.contentPane.getController("_member"),this._ctrlScoreType=this.contentPane.getController("_scoreType"),this._mcBorder0=this.contentPane.getChild("_border0"),this._mcBorder1=this.contentPane.getChild("_border1"),this._btnAvatar=this.contentPane.getChild("_avatar"),this._btnCoin=this.contentPane.getChild("_coin"),this._btnPoint=this.contentPane.getChild("_point"),this._mcMembers=this.contentPane.getChild("_members"),this._tfMemberCount=this.contentPane.getChild("_memberCount"),this._mcSeats=this.contentPane.getChild("_seats"),this._btnStop=this.contentPane.getChild("_stop"),this._btnRule=this.contentPane.getChild("_rule"),this._btnSound=this.contentPane.getChild("_sound"),this._btnResult=this.contentPane.getChild("_result"),this._btnCharge=this.contentPane.getChild("_charge"),this._btnExchange=this.contentPane.getChild("_exchange"),this._mcStart=this.contentPane.getChild("_start"),this._mcInsert=this.contentPane.getChild("_insert"),this._btnJoyr=this.contentPane.getChild("_joyr"),this._btnJoyl=this.contentPane.getChild("_joyl"),this._btnJoyu=this.contentPane.getChild("_joyu"),this._btnJoyd=this.contentPane.getChild("_joyd"),this._mcMulti=this.contentPane.getChild("_multi"),this._btnDouble=this.contentPane.getChild("_double"),this._btnBet=this.contentPane.getChild("_bet"),this._btnFire=this.contentPane.getChild("_fire"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800yipsuif",e}(UIPanel),TipCenterView=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.game.common.dialog.TipCenterView",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.dataSource=this.dataSource},__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(Laya.superSet(TipCenterUI,this,"dataSource",t),this.getChild("title")){this.getChild("title").text=this.dataSource?String(this.dataSource.info):"";var e=this.dataSource&&this.dataSource.time?this.dataSource.time:1500;Laya.timer.once(e,this,this.removeFromParent)}}),e}(TipCenterUI),GameFrontUI=function(t){function e(){this._ctrlCoinType=null,this._ctrlWebview=null,this._ctrlScoreType=null,this._mcList=null,this._btnAvatar=null,this._mcLevel=null,this._btnCoin=null,this._btnPoint=null,this._btnSign=null,this._btnMedal=null,this._btnMission=null,this._btnRank=null,this._btnSetup=null,this._btnExit=null,e.__super.call(this),this.modal=!1,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.GameFrontUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","GameFront").asCom,this._ctrlCoinType=this.contentPane.getController("_coinType"),this._ctrlWebview=this.contentPane.getController("_webview"),this._ctrlScoreType=this.contentPane.getController("_scoreType"),this._mcList=this.contentPane.getChild("_list"),this._btnAvatar=this.contentPane.getChild("_avatar"),this._mcLevel=this.contentPane.getChild("_level"),this._btnCoin=this.contentPane.getChild("_coin"),this._btnPoint=this.contentPane.getChild("_point"),this._btnSign=this.contentPane.getChild("_sign"),this._btnMedal=this.contentPane.getChild("_medal"),this._btnMission=this.contentPane.getChild("_mission"),this._btnRank=this.contentPane.getChild("_rank"),this._btnSetup=this.contentPane.getChild("_setup"),this._btnExit=this.contentPane.getChild("_exit"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800122hue8",e}(UIPanel),RoomListUI=function(t){function e(){this._mcList=null,e.__super.call(this),this.modal=!1,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.RoomListUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","RoomList").asCom,this._mcList=this.contentPane.getChild("_list"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800wn00ur8",e}(UIPanel),ShopBuyCoinUI=function(t){function e(){this._ctrlCoinType=null,this._ctrlScoreType=null,this._mcList=null,this._btnCoin=null,this._btnPoint=null,e.__super.call(this),this.modal=!0,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.ShopBuyCoinUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","ShopBuyCoin").asCom,this._ctrlCoinType=this.contentPane.getController("_coinType"),this._ctrlScoreType=this.contentPane.getController("_scoreType"),this._mcList=this.contentPane.getChild("_list"),this._btnCoin=this.contentPane.getChild("_coin"),this._btnPoint=this.contentPane.getChild("_point"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800npds1y",e}(UIPanel),TipView=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.game.common.dialog.TipView",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this.dataSource=this.dataSource},__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(Laya.superSet(TipUI,this,"dataSource",t),this.getChild("title")){this.getChild("title").text=this.dataSource?String(this.dataSource.info):"";var e=this.dataSource&&this.dataSource.time?this.dataSource.time:1500;Laya.timer.once(e,this,this.removeFromParent)}}),e}(TipUI),ShopBuyLifeUI=function(t){function e(){this._ctrlCoinType=null,this._ctrlScoreType=null,this._mcList=null,this._btnCoin=null,this._btnPoint=null,e.__super.call(this),this.modal=!0,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.ShopBuyLifeUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","ShopBuyLife").asCom,this._ctrlCoinType=this.contentPane.getController("_coinType"),this._ctrlScoreType=this.contentPane.getController("_scoreType"),this._mcList=this.contentPane.getChild("_list"),this._btnCoin=this.contentPane.getChild("_coin"),this._btnPoint=this.contentPane.getChild("_point"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800iz9qus9",e}(UIPanel),GameTitleUI=function(t){function e(){this._btnMode1=null,e.__super.call(this),this.modal=!1,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.GameTitleUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","GameTitle").asCom,this._btnMode1=this.contentPane.getChild("_mode1"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800npdsx",e}(UIPanel),BillListUI=function(t){function e(){this._ctrlMoney=null,this._ctrlInout=null,this._ctrlData=null,this._mcList=null,e.__super.call(this),this.modal=!1,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.BillListUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","BillList").asCom,this._ctrlMoney=this.contentPane.getController("_money"),this._ctrlInout=this.contentPane.getController("_inout"),this._ctrlData=this.contentPane.getController("_data"),this._mcList=this.contentPane.getChild("_list"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800iz9qusr",e}(UIPanel),EditNameUI=function(t){function e(){this._ctrlType=null,this._tfCode=null,this._tfName=null,this._btnEnter=null,e.__super.call(this),this.modal=!0,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.EditNameUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","EditName").asCom,this._ctrlType=this.contentPane.getController("_type"),this._tfCode=this.contentPane.getChild("_code"),this._tfName=this.contentPane.getChild("_name"),this._btnEnter=this.contentPane.getChild("_enter"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800iz9qusp",e}(UIPanel),InviteInfoUI=function(t){function e(){this._mcTop=null,this._btnImage=null,this._tfCode=null,this._btnInput=null,e.__super.call(this),this.modal=!1,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.InviteInfoUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","InviteInfo").asCom,this._mcTop=this.contentPane.getChild("_top"),this._btnImage=this.contentPane.getChild("_image"),this._tfCode=this.contentPane.getChild("_code"),this._btnInput=this.contentPane.getChild("_input"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800iz9qusv",e}(UIPanel),LogAppealUI=function(t){function e(){this._mcList=null,e.__super.call(this),this.modal=!0,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.LogAppealUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","LogAppeal").asCom,this._mcList=this.contentPane.getChild("_list"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800lo5susy",e}(UIPanel),LogDetailUI=function(t){function e(){this._mcList=null,e.__super.call(this),this.modal=!0,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.LogDetailUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","LogDetail").asCom,this._mcList=this.contentPane.getChild("_list"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800iz9qusk",e}(UIPanel),LogListUI=function(t){function e(){this._ctrlType=null,this._ctrlData=null,this._mcList=null,e.__super.call(this),this.modal=!1,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.LogListUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","LogList").asCom,this._ctrlType=this.contentPane.getController("_type"),this._ctrlData=this.contentPane.getController("_data"),this._mcList=this.contentPane.getChild("_list"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800iz9qusg",e}(UIPanel),MobileLoginUI=function(t){function e(){this._btnLogin=null,this._tfPhone=null,this._tfCode=null,this._btnSend=null,e.__super.call(this),this.modal=!0,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.MobileLoginUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","MobileLogin").asCom,this._btnLogin=this.contentPane.getChild("_login"),this._tfPhone=this.contentPane.getChild("_phone"),this._tfCode=this.contentPane.getChild("_code"),this._btnSend=this.contentPane.getChild("_send"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800tchbuig",e}(UIPanel),RankListUI=function(t){function e(){this._ctrlType=null,this._btnRank1=null,this._btnRank2=null,this._btnRank3=null,this._mcList=null,this._btnMy=null,e.__super.call(this),this.modal=!1,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.RankListUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","RankList").asCom,this._ctrlType=this.contentPane.getController("_type"),this._btnRank1=this.contentPane.getChild("_rank1"),this._btnRank2=this.contentPane.getChild("_rank2"),this._btnRank3=this.contentPane.getChild("_rank3"),this._mcList=this.contentPane.getChild("_list"),this._btnMy=this.contentPane.getChild("_my"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800iz9qurz",e}(UIPanel),RealAuthUI=function(t){function e(){this._btnEnter=null,this._tfName=null,this._tfCard=null,e.__super.call(this),this.modal=!0,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.RealAuthUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","RealAuth").asCom,this._btnEnter=this.contentPane.getChild("_enter"),this._tfName=this.contentPane.getChild("_name"),this._tfCard=this.contentPane.getChild("_card"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800iz9qusf",e}(UIPanel),SetupUI=function(t){function e(){this._mcList=null,e.__super.call(this),this.modal=!1,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.SetupUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","Setup").asCom,this._mcList=this.contentPane.getChild("_list"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800iz9qusn",e}(UIPanel),UserInfoUI=function(t){function e(){this._ctrlCoinType=null,this._ctrlScoreType=null,this._mcList=null,this._btnHead=null,this._tfName=null,this._tfId=null,this._btnCoin=null,this._btnPoint=null,this._btnEdit=null,e.__super.call(this),this.modal=!1,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.UserInfoUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","UserInfo").asCom,this._ctrlCoinType=this.contentPane.getController("_coinType"),this._ctrlScoreType=this.contentPane.getController("_scoreType"),this._mcList=this.contentPane.getChild("_list"),this._btnHead=this.contentPane.getChild("_head"),this._tfName=this.contentPane.getChild("_name"),this._tfId=this.contentPane.getChild("_id"),this._btnCoin=this.contentPane.getChild("_coin"),this._btnPoint=this.contentPane.getChild("_point"),this._btnEdit=this.contentPane.getChild("_edit"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800wn00urc",e}(UIPanel),WebFrameUI=function(t){function e(){this._tfTitle=null,e.__super.call(this),this.modal=!1,this.addUISource(new UIResource("common.fui","1a4c5800"))}__class(e,"com.emugif.camera.ui.common.panel.WebFrameUI",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","WebFrame").asCom,this._tfTitle=this.contentPane.getChild("_title"),t.prototype.onInit.call(this)},e.URL="ui://1a4c5800iz9quso",e}(UIPanel),BillListItemUI=function(t){function e(){this._ctrlAppeal=null,this._tfTime=null,this._tfScore=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.BillListItemUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlAppeal=this.getController("_appeal"),this._tfTime=this.getChild("_time"),this._tfScore=this.getChild("_score")},e.createInstance=function(t){return UIPackage.createObject("common","BillListItem",t||e)},e.URL="ui://1a4c5800iz9qusu",e}(UIButton),GameSeatItemUI=function(t){function e(){this._ctrlStatus=null,this._ctrlPlayer=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.GameSeatItemUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlStatus=this.getController("_status"),this._ctrlPlayer=this.getController("_player")},e.createInstance=function(t){return UIPackage.createObject("common","GameSeatItem",t||e)},e.URL="ui://1a4c5800iz9qusc",e}(UIButton),GroupListItemUI=function(t){function e(){this._ctrlIcon=null,this._ctrlOpen=null,this._ctrlCoinType=null,this._mcRoom=null,this._btnEnter=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.GroupListItemUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlIcon=this.getController("_icon"),this._ctrlOpen=this.getController("_open"),this._ctrlCoinType=this.getController("_coinType"),this._mcRoom=this.getChild("_room"),this._btnEnter=this.getChild("_enter")},e.createInstance=function(t){return UIPackage.createObject("common","GroupListItem",t||e)},e.URL="ui://1a4c5800122huea",e}(UIButton),GroupListRoomItemUI=function(t){function e(){this._ctrlStatus=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.GroupListRoomItemUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlStatus=this.getController("_status")},e.createInstance=function(t){return UIPackage.createObject("common","GroupListRoomItem",t||e)},e.URL="ui://1a4c5800yipsui9",e}(UIButton),LogAppealItemUI=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.LogAppealItemUI",t);var i=e.prototype;return i.constructFromXML=function(e){
t.prototype.constructFromXML.call(this,e)},e.createInstance=function(t){return UIPackage.createObject("common","LogAppealItem",t||e)},e.URL="ui://1a4c5800lo5susz",e}(UIButton),LogDetailItemUI=function(t){function e(){this._ctrlAppeal=null,this._tfTime=null,this._tfScore=null,this._btnAppeal=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.LogDetailItemUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlAppeal=this.getController("_appeal"),this._tfTime=this.getChild("_time"),this._tfScore=this.getChild("_score"),this._btnAppeal=this.getChild("_appeal")},e.createInstance=function(t){return UIPackage.createObject("common","LogDetailItem",t||e)},e.URL="ui://1a4c5800iz9qusl",e}(UIButton),LogListItemNewUI=function(t){function e(){this._ctrlAppeal=null,this._ctrlDoll=null,this._tfTime=null,this._tfScore=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.LogListItemNewUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlAppeal=this.getController("_appeal"),this._ctrlDoll=this.getController("_doll"),this._tfTime=this.getChild("_time"),this._tfScore=this.getChild("_score")},e.createInstance=function(t){return UIPackage.createObject("common","LogListItemNew",t||e)},e.URL="ui://1a4c5800idlauvm",e}(UIButton),LogListItemUI=function(t){function e(){this._ctrlAppeal=null,this._ctrlDoll=null,this._tfTime=null,this._tfScore=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.LogListItemUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlAppeal=this.getController("_appeal"),this._ctrlDoll=this.getController("_doll"),this._tfTime=this.getChild("_time"),this._tfScore=this.getChild("_score")},e.createInstance=function(t){return UIPackage.createObject("common","LogListItem",t||e)},e.URL="ui://1a4c5800iz9qusi",e}(UIButton),MetalListItemUI=function(t){function e(){this._ctrlPos=null,this._ctrlRocket=null,this._ctrlLine=null,this._ctrlReceive=null,this._mcMetal=null,this._tfGoal=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.MetalListItemUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlPos=this.getController("_pos"),this._ctrlRocket=this.getController("_rocket"),this._ctrlLine=this.getController("_line"),this._ctrlReceive=this.getController("_receive"),this._mcMetal=this.getChild("_metal"),this._tfGoal=this.getChild("_goal")},e.createInstance=function(t){return UIPackage.createObject("common","MetalListItem",t||e)},e.URL="ui://1a4c5800iz9qurq",e}(UIButton),MissionListItemUI=function(t){function e(){this._ctrlStatus=null,this._btnGet=null,this._tfReward=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.MissionListItemUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlStatus=this.getController("_status"),this._btnGet=this.getChild("_get"),this._tfReward=this.getChild("_reward")},e.createInstance=function(t){return UIPackage.createObject("common","MissionListItem",t||e)},e.URL="ui://1a4c5800yipsuid",e}(UIButton),RankListItem0UI=function(t){function e(){this._tfScore=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.RankListItem0UI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._tfScore=this.getChild("_score")},e.createInstance=function(t){return UIPackage.createObject("common","RankListItem0",t||e)},e.URL="ui://1a4c5800iz9qus4",e}(UIButton),RankListItemUI=function(t){function e(){this._ctrlType=null,this._ctrlName=null,this._ctrlScoreType=null,this._tfId=null,this._tfScore=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.RankListItemUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlType=this.getController("_type"),this._ctrlName=this.getController("_name"),this._ctrlScoreType=this.getController("_scoreType"),this._tfId=this.getChild("_id"),this._tfScore=this.getChild("_score")},e.createInstance=function(t){return UIPackage.createObject("common","RankListItem",t||e)},e.URL="ui://1a4c5800iz9qus3",e}(UIButton),RoomListItemUI=function(t){function e(){this._ctrlStatus=null,this._ctrlLevel=null,this._ctrlMultiple=null,this._ctrlCoinType=null,this._tfMultiple=null,this._tfLevel=null,this._tfCost=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.RoomListItemUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlStatus=this.getController("_status"),this._ctrlLevel=this.getController("_level"),this._ctrlMultiple=this.getController("_multiple"),this._ctrlCoinType=this.getController("_coinType"),this._tfMultiple=this.getChild("_multiple"),this._tfLevel=this.getChild("_level"),this._tfCost=this.getChild("_cost")},e.createInstance=function(t){return UIPackage.createObject("common","RoomListItem",t||e)},e.URL="ui://1a4c5800wn00ura",e}(UIButton),ShopBuyCoinListItemUI=function(t){function e(){this._ctrlType=null,this._ctrlCoinType=null,this._btnPrice1=null,this._btnPrice2=null,this._tfPrice=null,this._tfDesc=null,this._tfMoney=null,this._tfNext=null,this._tfExcharge=null,this._tfGet=null,this._tfDay=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.ShopBuyCoinListItemUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlType=this.getController("_type"),this._ctrlCoinType=this.getController("_coinType"),this._btnPrice1=this.getChild("_price1"),this._btnPrice2=this.getChild("_price2"),this._tfPrice=this.getChild("_price"),this._tfDesc=this.getChild("_desc"),this._tfMoney=this.getChild("_money"),this._tfNext=this.getChild("_next"),this._tfExcharge=this.getChild("_excharge"),this._tfGet=this.getChild("_get"),this._tfDay=this.getChild("_day")},e.createInstance=function(t){return UIPackage.createObject("common","ShopBuyCoinListItem",t||e)},e.URL="ui://1a4c5800npds22",e}(UIButton),ShopBuyLifeListItemNewUI=function(t){function e(){this._ctrlCoinType=null,this._tfPrice=null,this._tfCoin=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.ShopBuyLifeListItemNewUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlCoinType=this.getController("_coinType"),this._tfPrice=this.getChild("_price"),this._tfCoin=this.getChild("_coin")},e.createInstance=function(t){return UIPackage.createObject("common","ShopBuyLifeListItemNew",t||e)},e.URL="ui://1a4c5800idlauvk",e}(UIButton),ShopBuyLifeListItemUI=function(t){function e(){this._ctrlCoinType=null,this._tfPrice=null,this._tfCoin=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.ShopBuyLifeListItemUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlCoinType=this.getController("_coinType"),this._tfPrice=this.getChild("_price"),this._tfCoin=this.getChild("_coin")},e.createInstance=function(t){return UIPackage.createObject("common","ShopBuyLifeListItem",t||e)},e.URL="ui://1a4c5800iz9qusq",e}(UIButton),SignDailyItem1UI=function(t){function e(){this._ctrlStatus=null,this._ctrlType=null,this._ctrlCoinType=null,this._ctrlScoreType=null,this._tfBonus=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.SignDailyItem1UI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlStatus=this.getController("_status"),this._ctrlType=this.getController("_type"),this._ctrlCoinType=this.getController("_coinType"),this._ctrlScoreType=this.getController("_scoreType"),this._tfBonus=this.getChild("_bonus")},e.createInstance=function(t){return UIPackage.createObject("common","SignDailyItem1",t||e)},e.URL="ui://1a4c5800wn00uri",e}(UIButton),SignDailyItemUI=function(t){function e(){this._ctrlStatus=null,this._ctrlType=null,this._ctrlCoinType=null,this._ctrlScoreType=null,this._tfBonus=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.SignDailyItemUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlStatus=this.getController("_status"),this._ctrlType=this.getController("_type"),this._ctrlCoinType=this.getController("_coinType"),this._ctrlScoreType=this.getController("_scoreType"),this._tfBonus=this.getChild("_bonus")},e.createInstance=function(t){return UIPackage.createObject("common","SignDailyItem",t||e)},e.URL="ui://1a4c5800wn00urh",e}(UIButton),UserInfoItemUI=function(t){function e(){this._ctrlReal=null,e.__super.call(this)}__class(e,"com.emugif.camera.ui.common.component.UserInfoItemUI",t);var i=e.prototype;return i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._ctrlReal=this.getController("_real")},e.createInstance=function(t){return UIPackage.createObject("common","UserInfoItem",t||e)},e.URL="ui://1a4c5800iz9qusd",e}(UIButton),Input=function(t){function e(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",e.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=Text.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}__class(e,"laya.display.Input",t);var i=e.prototype;return i.setSelection=function(t,e){laya.display.Input.inputElement.selectionStart=t,laya.display.Input.inputElement.selectionEnd=e},i._onUnDisplay=function(t){this.focus=!1},i._onMouseDown=function(t){this.focus=!0},i.render=function(t,e,i){laya.display.Sprite.prototype.render.call(this,t,e,i)},i._syncInputTransform=function(){var t=this.nativeInput,i=Utils$1.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),n=this._width-this.padding[1]-this.padding[3],s=this._height-this.padding[0]-this.padding[2];Render.isConchApp?(t.setScale(i.scaleX,i.scaleY),t.setSize(n,s),t.setPos(i.x,i.y)):(e.inputContainer.style.transform=e.inputContainer.style.webkitTransform="scale("+i.scaleX+","+i.scaleY+") rotate("+Laya.stage.canvasDegree+"deg)",t.style.width=n+"px",t.style.height=s+"px",e.inputContainer.style.left=i.x+"px",e.inputContainer.style.top=i.y+"px")},i.select=function(){this.nativeInput.select()},i._setInputMethod=function(){e.input.parentElement&&e.inputContainer.removeChild(e.input),e.area.parentElement&&e.inputContainer.removeChild(e.area),e.inputElement=this._multiline?e.area:e.input,e.inputContainer.appendChild(e.inputElement)},i._focusIn=function(){laya.display.Input.isInputting=!0;var t=this.nativeInput;this._focus=!0;var e=t.style;e.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),t.readOnly=!this._editable,Render.isConchApp&&t.setForbidEdit(!this._editable),t.maxLength=this._maxChars;this.padding;t.type=this._type,t.value=this._content,t.placeholder=this._prompt,Laya.stage.off("keydown",this,this._onKeyDown),Laya.stage.on("keydown",this,this._onKeyDown),Laya.stage.focus=this,this.event("focus"),Browser.onPC&&t.focus();this._text;this._text=null,this.typeset(),t.setColor(this._originColor),t.setFontSize(this.fontSize),t.setFontFace(Browser.onIPhone?Text._fontFamilyMap[this.font]||this.font:this.font),Render.isConchApp&&t.setMultiAble&&t.setMultiAble(this._multiline),e.lineHeight=this.leading+this.fontSize+"px",e.fontStyle=this.italic?"italic":"normal",e.fontWeight=this.bold?"bold":"normal",e.textAlign=this.align,e.padding="0 0",this._syncInputTransform(),!Render.isConchApp&&Browser.onPC&&Laya.timer.frameLoop(1,this,this._syncInputTransform)},i._setPromptColor=function(){e.promptStyleDOM=Browser.getElementById("promptStyle"),e.promptStyleDOM||(e.promptStyleDOM=Browser.createElement("style"),e.promptStyleDOM.setAttribute("id","promptStyle"),Browser.document.head.appendChild(e.promptStyleDOM)),e.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},i._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(Laya.superSet(Text,this,"text",this._content),Laya.superSet(Text,this,"color",this._originColor)):(Laya.superSet(Text,this,"text",this._prompt),Laya.superSet(Text,this,"color",this._promptColor)),Laya.stage.off("keydown",this,this._onKeyDown),Laya.stage.focus=null,this.event("blur"),Render.isConchApp&&this.nativeInput.blur(),Browser.onPC&&Laya.timer.clear(this,this._syncInputTransform)},i._onKeyDown=function(t){13===t.keyCode&&(Browser.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},i.changeText=function(e){this._content=e,this._focus?(this.nativeInput.value=e||"",this.event("change")):t.prototype.changeText.call(this,e)},__getset(0,i,"color",t.prototype._$get_color,function(t){this._focus&&this.nativeInput.setColor(t),Laya.superSet(Text,this,"color",this._content?t:this._promptColor),this._originColor=t}),__getset(0,i,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(t){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),__getset(0,i,"multiline",function(){return this._multiline},function(t){this._multiline=t,this.valign=t?"top":"middle"}),__getset(0,i,"maxChars",function(){return this._maxChars},function(t){0>=t&&(t=1e5),this._maxChars=t}),__getset(0,i,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(t){Laya.superSet(Text,this,"color",this._originColor),t+="",this._focus?(this.nativeInput.value=t||"",this.event("change")):(this._multiline||(t=t.replace(/\r?\n/g,"")),this._content=t,t?Laya.superSet(Text,this,"text",t):(Laya.superSet(Text,this,"text",this._prompt),Laya.superSet(Text,this,"color",this.promptColor)))}),__getset(0,i,"nativeInput",function(){return this._multiline?e.area:e.input}),__getset(0,i,"prompt",function(){return this._prompt},function(t){!this._text&&t&&Laya.superSet(Text,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?Laya.superSet(Text,this,"text",this._text==this._prompt?t:this._text):Laya.superSet(Text,this,"text",t),this._prompt=Text.langPacks&&Text.langPacks[t]?Text.langPacks[t]:t}),__getset(0,i,"focus",function(){return this._focus},function(t){var i=this.nativeInput;this._focus!==t&&(t?(i.target?i.target._focusOut():this._setInputMethod(),i.target=this,this._focusIn()):(i.target=null,this._focusOut(),i.blur(),Render.isConchApp?i.setPos(-1e4,-1e4):e.inputContainer.contains(i)&&e.inputContainer.removeChild(i)))}),__getset(0,i,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(t){t?(t="[^"+t+"]",t.indexOf("^^")>-1&&(t=t.replace("^^","")),this._restrictPattern=new RegExp(t,"g")):this._restrictPattern=null}),__getset(0,i,"editable",function(){return this._editable},function(t){this._editable=t,Render.isConchApp&&e.input.setForbidEdit(!t)}),__getset(0,i,"promptColor",function(){return this._promptColor},function(t){this._promptColor=t,this._content||Laya.superSet(Text,this,"color",t)}),__getset(0,i,"type",function(){return this._type},function(t){"password"==t?this._getCSSStyle().password=!0:this._getCSSStyle().password=!1,this._type=t}),__getset(0,i,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(t){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),__getset(0,i,"asPassword",function(){return this._getCSSStyle().password},function(t){this._getCSSStyle().password=t,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),e.__init__=function(){e._createInputElement(),Browser.onMobile&&Render.canvas.addEventListener(e.IOS_IFRAME?"click":"touchend",e._popupInputMethod)},e._popupInputMethod=function(t){if(laya.display.Input.isInputting){var e=laya.display.Input.inputElement;e.focus()}},e._createInputElement=function(){e._initInput(e.area=Browser.createElement("textarea")),e._initInput(e.input=Browser.createElement("input")),e.inputContainer=Browser.createElement("div"),e.inputContainer.style.position="absolute",e.inputContainer.style.zIndex=1e5,Browser.container.appendChild(e.inputContainer),e.inputContainer.setPos=function(t,i){e.inputContainer.style.left=t+"px",e.inputContainer.style.top=i+"px"}},e._initInput=function(t){var i=t.style;i.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",i.resize="none",i.backgroundColor="transparent",i.border="none",i.outline="none",i.zIndex=1,t.addEventListener("input",e._processInputting),t.addEventListener("mousemove",e._stopEvent),t.addEventListener("mousedown",e._stopEvent),t.addEventListener("touchmove",e._stopEvent),t.setFontFace=function(e){t.style.fontFamily=e},Render.isConchApp||(t.setColor=function(e){t.style.color=e},t.setFontSize=function(e){t.style.fontSize=e+"px"})},e._processInputting=function(t){var e=laya.display.Input.inputElement.target;if(e){var i=laya.display.Input.inputElement.value;e._restrictPattern&&(i=i.replace(/\u2006|\x27/g,""),e._restrictPattern.test(i)&&(i=i.replace(e._restrictPattern,""),laya.display.Input.inputElement.value=i)),e._text=i,e.event("input")}},e._stopEvent=function(t){"touchmove"==t.type&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},e.TYPE_TEXT="text",e.TYPE_PASSWORD="password",e.TYPE_EMAIL="email",e.TYPE_URL="url",e.TYPE_NUMBER="number",e.TYPE_RANGE="range",e.TYPE_DATE="date",e.TYPE_MONTH="month",e.TYPE_WEEK="week",e.TYPE_TIME="time",e.TYPE_DATE_TIME="datetime",e.TYPE_DATE_TIME_LOCAL="datetime-local",e.TYPE_SEARCH="search",e.input=null,e.area=null,e.inputElement=null,e.inputContainer=null,e.confirmButton=null,e.promptStyleDOM=null,e.inputHeight=45,e.isInputting=!1,e.stageMatrix=null,__static(e,["IOS_IFRAME",function(){return this.IOS_IFRAME=Browser.onIOS&&Browser.window.top!=Browser.window.self}]),e}(Text),HTMLBrElement=function(t){function e(){e.__super.call(this),this.style.lineElement=!0,this.style.block=!0}return __class(e,"laya.html.dom.HTMLBrElement",t),e}(HTMLElement),HTMLDivElement=function(t){function e(){this.contextHeight=NaN,this.contextWidth=NaN,e.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}__class(e,"laya.html.dom.HTMLDivElement",t);var i=e.prototype;return i.appendHTML=function(t){HTMLParse.parse(this,t,this.URI),this.layout()},i._addChildsToLayout=function(t){var e=this._getWords();if(null==e&&0==this._childs.length)return!1;e&&e.forEach(function(e){t.push(e)});for(var i=!0,n=0,s=this._childs.length;s>n;n++){var r=this._childs[n];i?i=!1:t.push(null),r._addToLayout(t)}return!0},i._addToLayout=function(t){this.layout()},i.layout=function(){this.style._type|=512;var t=Layout.layout(this);if(t){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new Rectangle);var e=this._$P.mHtmlBounds;e.x=e.y=0,e.width=this.contextWidth=t[0],e.height=this.contextHeight=t[1],this.setBounds(e)}},__getset(0,i,"height",function(){return this._height?this._height:this.contextHeight},t.prototype._$set_height),__getset(0,i,"innerHTML",null,function(t){this.destroyChildren(),this.appendHTML(t)}),__getset(0,i,"width",function(){return this._width?this._width:this.contextWidth},function(t){var e=!1;e=0===t?t!=this._width:t!=this.width,Laya.superSet(HTMLElement,this,"width",t),e&&this.layout()}),e}(HTMLElement),HTMLDocument=function(t){function e(){this.all=new Array,this.styleSheets=CSSStyle.styleSheets,e.__super.call(this)}__class(e,"laya.html.dom.HTMLDocument",t);var i=e.prototype;return i.getElementById=function(t){return this.all[t]},i.setElementById=function(t,e){this.all[t]=e},__static(e,["document",function(){return this.document=new e}]),e}(HTMLElement),HTMLImageElement=function(t){function e(){this._tex=null,this._url=null,this._renderArgs=[],e.__super.call(this),this.style.block=!0}__class(e,"laya.html.dom.HTMLImageElement",t);var i=e.prototype;return i._addToLayout=function(t){!this._style.absolute&&t.push(this)},i.render=function(t,e,i){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(Stat.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,t.ctx.drawTexture2(e,i,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},__getset(0,i,"src",null,function(t){function e(){var t=i._style;t.widthed(i)?-1:i._tex.width,t.heighted(i)?-1:i._tex.height;t.widthed(i)||i._width==i._tex.width||(i.width=i._tex.width,i.parent&&i.parent._layoutLater()),t.heighted(i)||i._height==i._tex.height||(i.height=i._tex.height,i.parent&&i.parent._layoutLater()),Render.isConchApp&&(i._renderArgs[0]=i._tex,i._renderArgs[1]=i.x,i._renderArgs[2]=i.y,i._renderArgs[3]=i.width||i._tex.width,i._renderArgs[4]=i.height||i._tex.height,i.graphics.drawTexture(i._tex,0,0,i._renderArgs[3],i._renderArgs[4])),i.repaint(),i.parentRepaint()}var i=this;if(t=this.formatURL(t),this._url!=t){this._url=t;var n=this._tex=Loader.getRes(t);n||(this._tex=n=new Texture,n.load(t),Loader.cacheRes(t,n)),n.loaded?e():n.on("loaded",null,e)}}),e}(HTMLElement),HTMLStyleElement=function(t){function e(){e.__super.call(this),this.visible=!1}__class(e,"laya.html.dom.HTMLStyleElement",t);var i=e.prototype;return __getset(0,i,"text",t.prototype._$get_text,function(t){CSSStyle.parseCSS(t,null)}),e}(HTMLElement),HTMLImage=function(t){function e(t,i){this._recreateLock=!1,this._needReleaseAgain=!1,e.__super.call(this),this._init_(t,i)}__class(e,"laya.resource.HTMLImage",t);var i=e.prototype;return i._init_=function(t,e){this._src=t,this._source=new Browser.window.Image,e&&(e.onload&&(this.onload=e.onload),e.onerror&&(this.onerror=e.onerror),e.onCreate&&e.onCreate(this)),0!=t.indexOf("data:image")&&(this._source.crossOrigin=""),t&&(this._source.src=t)},i.recreateResource=function(){var t=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.startCreate(),this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0,this.startCreate();var e=this;this._source=new Browser.window.Image,this._source.crossOrigin="",this._source.onload=function(){return e._needReleaseAgain?(e._needReleaseAgain=!1,e._source.onload=null,void(e._source=null)):(e._source.onload=null,e.memorySize=t._w*t._h*4,e._recreateLock=!1,void e.completeCreate())},this._source.src=this._src}},i.detoryResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},i.onresize=function(){this._w=this._source.width,this._h=this._source.height},__getset(0,i,"onload",null,function(t){var e=this;this._onload=t,this._source&&(this._source.onload=null!=this._onload?function(){e.onresize(),e._onload()}:null)}),__getset(0,i,"onerror",null,function(t){var e=this;this._onerror=t,this._source&&(this._source.onerror=null!=this._onerror?function(){e._onerror()}:null)}),e.create=function(t,i){return new e(t,i)},e}(FileBitmap),Shader2X=function(t){function e(t,i,n,s){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,e.__super.call(this,t,i,n,s)}__class(e,"laya.webgl.shader.d2.Shader2X",t);var i=e.prototype;return i.upload2dQuick1=function(t){this.upload(t,this._params2dQuick1||this._make2dQuick1())},i._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var t,e=this._params,i=0,n=e.length;n>i;i++)t=e[i],(Render.isFlash||"size"!==t.name&&"position"!==t.name&&"texcoord"!==t.name)&&this._params2dQuick1.push(t)}return this._params2dQuick1},i.detoryResource=function(){t.prototype.detoryResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},i.upload2dQuick2=function(t){this.upload(t,this._params2dQuick2||this._make2dQuick2())},i._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var t,e=this._params,i=0,n=e.length;n>i;i++)t=e[i],(Render.isFlash||"size"!==t.name)&&this._params2dQuick2.push(t)}return this._params2dQuick2},e.create=function(t,i,n,s){return new e(t,i,n,s)},e}(Shader),MovieClip$1=function(t){function e(){this.interval=0,this.swing=!1,this.repeatDelay=0,this.timeScale=1,this._playing=!0,this._frameCount=0,this._frames=null,this._frame=0,this._start=0,this._end=0,this._times=0,this._endAt=0,this._status=0,this._endHandler=null,this._frameElapsed=0,this._reversed=!1,this._repeatedCount=0,e.__super.call(this),this.mouseEnabled=!1,this.setPlaySettings(),this.on("display",this,this.__addToStage),this.on("undisplay",this,this.__removeFromStage)}__class(e,"fairygui.display.MovieClip",t,"MovieClip$1");var i=e.prototype;return i.rewind=function(){this._frame=0,this._frameElapsed=0,this._reversed=!1,this._repeatedCount=0,this.drawFrame()},i.syncStatus=function(t){this._frame=t._frame,this._frameElapsed=t._frameElapsed,this._reversed=t._reversed,this._repeatedCount=t._repeatedCount,this.drawFrame()},i.advance=function(t){for(var e=this._frame,i=this._reversed,n=t;;){var s=this.interval+this._frames[this._frame].addDelay;if(0==this._frame&&this._repeatedCount>0&&(s+=this.repeatDelay),s>t){this._frameElapsed=0;break}if(t-=s,this.swing?this._reversed?(this._frame--,this._frame<=0&&(this._frame=0,this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=Math.max(0,this._frameCount-2),this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=0,this._repeatedCount++)),this._frame==e&&this._reversed==i){var r=n-t;t-=Math.floor(t/r)*r}}this.drawFrame()},i.setPlaySettings=function(t,e,i,n,s){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=0),void 0===n&&(n=-1),this._start=t,this._end=e,(-1==this._end||this._end>this._frameCount-1)&&(this._end=this._frameCount-1),this._times=i,this._endAt=n,-1==this._endAt&&(this._endAt=this._end),this._status=0,this._endHandler=s,this.frame=t},i.update=function(){if(this._playing&&0!=this._frameCount&&3!=this._status){var t=Laya.timer.delta;t>100&&(t=100),1!=this.timeScale&&(t*=this.timeScale),this._frameElapsed+=t;var e=this.interval+this._frames[this._frame].addDelay;if(0==this._frame&&this._repeatedCount>0&&(e+=this.repeatDelay),!(this._frameElapsed<e)){if(this._frameElapsed-=e,this._frameElapsed>this.interval&&(this._frameElapsed=this.interval),this.swing?this._reversed?(this._frame--,this._frame<=0&&(this._frame=0,this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=Math.max(0,this._frameCount-2),this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=0,this._repeatedCount++)),1==this._status)this._frame=this._start,this._frameElapsed=0,this._status=0;else if(2==this._status){if(this._frame=this._endAt,this._frameElapsed=0,this._status=3,null!=this._endHandler){var i=this._endHandler;this._endHandler=null,i.run()}}else this._frame==this._end&&(this._times>0?(this._times--,0==this._times?this._status=2:this._status=1):0!=this._start&&(this._status=1));this.drawFrame()}}},i.drawFrame=function(){if(this._frameCount>0&&this._frame<this._frames.length){var t=this._frames[this._frame];this.texture=t.texture}else this.texture=null;this.rebuild()},i.checkTimer=function(){this._playing&&this._frameCount>0&&null!=this.stage?Laya.timer.frameLoop(1,this,this.update):Laya.timer.clear(this,this.update)},i.__addToStage=function(){this._playing&&this._frameCount>0&&Laya.timer.frameLoop(1,this,this.update)},i.__removeFromStage=function(){Laya.timer.clear(this,this.update)},__getset(0,i,"frames",function(){return this._frames},function(t){this._frames=t,this._scaleByTile=!1,this._scale9Grid=null,null!=this._frames?(this._frameCount=this._frames.length,(-1==this._end||this._end>this._frameCount-1)&&(this._end=this._frameCount-1),(-1==this._endAt||this._endAt>this._frameCount-1)&&(this._endAt=this._frameCount-1),(this._frame<0||this._frame>this._frameCount-1)&&(this._frame=this._frameCount-1),this._frameElapsed=0,this._repeatedCount=0,this._reversed=!1):this._frameCount=0,this.drawFrame(),this.checkTimer()}),__getset(0,i,"playing",function(){return this._playing},function(t){this._playing!=t&&(this._playing=t,this.checkTimer())}),__getset(0,i,"frameCount",function(){return this._frameCount}),__getset(0,i,"frame",function(){return this._frame},function(t){this._frame!=t&&(null!=this._frames&&t>=this._frameCount&&(t=this._frameCount-1),this._frame=t,this._frameElapsed=0,this.drawFrame())}),e}(Image$1),IndexBuffer2D=function(t){function e(t){this._uint8Array=null,this._uint16Array=null,void 0===t&&(t=35044),e.__super.call(this),this._bufferUsage=t,this._bufferType=34963,Render.isFlash||(this._buffer=new ArrayBuffer(8))}__class(e,"laya.webgl.utils.IndexBuffer2D",t);var i=e.prototype;return i._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},i.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},i.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},i.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},e.QuadrangleIB=null,e.create=function(t){return void 0===t&&(t=35044),new e(t)},e}(Buffer2D),VertexBuffer2D=function(t){function e(t,i){this._floatArray32=null,this._vertexStride=0,e.__super.call(this),this._vertexStride=t,this._bufferUsage=i,this._bufferType=34962,Render.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}__class(e,"laya.webgl.utils.VertexBuffer2D",t);var i=e.prototype;return i.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},i.bind=function(t){t&&t._bind(),this._bind()},i.insertData=function(t,e){var i=this.getFloat32Array();i.set(t,e),this._upload=!0},i.bind_upload=function(t){t._bind_upload()||t._bind(),this._bind_upload()||this._bind()},i._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},i.detoryResource=function(){t.prototype.detoryResource.call(this);for(var e=0;10>e;e++)WebGL.mainContext.disableVertexAttribArray(e)},i.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},__getset(0,i,"vertexStride",function(){return this._vertexStride}),e.create=function(t,i){return void 0===i&&(i=35048),new e(t,i)},e}(Buffer2D),AlertView=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.game.common.dialog.AlertView",t);var i=e.prototype;return i.close=function(t){com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t),"ok"==t&&this.dataSource.ok instanceof laya.utils.Handler&&this.dataSource.ok.run()},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this.dataSource=this.dataSource,SoundManager.playSound("game/libs/sound/alert.mp3")},__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){Laya.superSet(AlertUI,this,"dataSource",t),
this._tfInfo&&(this._tfInfo.text=t.info)}),__getset(0,i,"content",null,function(t){this._tfInfo&&(this._tfInfo.text=t)}),e}(AlertUI),ConfirmView=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.game.common.dialog.ConfirmView",t);var i=e.prototype;return i.close=function(t){com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t),"ok"==t&&this.dataSource.ok instanceof laya.utils.Handler?this.dataSource.ok.run():"cancel"==t&&this.dataSource.cancel instanceof laya.utils.Handler&&this.dataSource.cancel.run()},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this._tfInfo.text=this.dataSource.info,SoundManager.playSound("game/libs/sound/alert.mp3")},e}(ConfirmUI),MetalListView=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.game.event.MetalListView",t);var i=e.prototype;return i.close=function(t){void 0===t&&(t=""),"close"==t&&App.dialog.showPanel(GameFrontView),com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t)},i.onInit=function(){t.prototype.onInit.call(this),this._btnAvatar.clickHandler=new Handler(App.dialog,App.dialog.showPanel,[UserInfoView]),this._btnCoin.clickHandler=new Handler(App.player,App.player.charge),this._btnPoint.clickHandler=new Handler(App.player,App.player.exchange),this._mcList.renderHandler=new Handler(this,this.onListRender,[""]),this._mcList.selectHandler=new Handler(this,this.onListSelect)},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this._mcList.dataSource=[],this.onUserUpdate(),this.updateMetal(),App.events.add("updatecache",this,this.onUserUpdate)},i.onUserUpdate=function(){this._btnAvatar.icon=App.player.avatar,this._btnCoin.title=String(App.player.showCoin),this._btnPoint.title=Utils.formatNumber(App.player.points),App.player.memberLevelDto?(this._mcLevel.max=App.player.memberLevelDto.targetMoney||100,this._mcLevel.tweenValue(App.player.memberLevelDto.progress||0,.3),this._mcLevel.tooltips=App.player.memberLevelDto.tips||"",this._mcLevel.getChild("_vip").frame=(App.player.memberLevelDto.level||0)%10):(this._mcLevel.max=100,this._mcLevel.value=0)},i.updateMetal=function(){App.action.event.medalList(Handler.create(this,this.onMetalList))},i.onMetalList=function(t){t&&(this._mcList.dataSource=t)},i.onListRender=function(t,e,i){var n=e.dataSource;e._tfGoal.text=n.name||"充值"+n.goal+"获得本勋章",e._ctrlPos.selectedIndex=i%2,e._ctrlLine.selectedIndex=i==this._mcList.dataSource.length-1?0:1,e._ctrlRocket.selectedIndex=0==i?1:0,e.icon="game/libs/img/plant/"+i%8+".png",e._mcMetal.frame=i%8,e._ctrlReceive.selectedIndex=n.receiveStatus+1},i.onListSelect=function(t){if(!(0>t)){this._mcList.selectedIndex=-1;var e=this._mcList.dataSource[t];-1==e.receiveStatus?App.dialog.tip("充值"+e.goal+"获得本勋章",0,1500,!0):0==e.receiveStatus&&App.action.event.metalReceive(this._mcList.dataSource[t].id,Handler.create(this,this.updateMetal))}},e}(MetalListUI),MissionListView=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.game.event.MissionListView",t);var i=e.prototype;return i.close=function(t){void 0===t&&(t=""),"close"==t&&App.dialog.showPanel(GameFrontView),com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t)},i.onInit=function(){t.prototype.onInit.call(this),this._mcTop.url="game/libs/img/mission.jpg",this._mcProgress.value=0,this._mcProgress.max=100,this._mcList.renderHandler=new Handler(this,this.onListRender,[""]),this._mcList.selectHandler=new Handler(this,this.onListSelect)},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this._mcList.dataSource=[],this.updateTask()},i.updateTask=function(){App.action.event.taskList(Handler.create(this,this.onTaskList))},i.onTaskList=function(t){t&&(t.data.sort(function(t,e){return 0==t.reached&&-1==e.reached?-1:0==e.reached&&-1==t.reached?1:t.reached-e.reached}),this._mcList.renderHandler.args[0]=t.key,this._mcList.dataSource=t.data,this._tfReward.text=t.reward+App.config.scoreName[App.config.scoreType],this._mcProgress.max=t.totalProgress,this._mcProgress.tweenValue(t.completeProgress,.3))},i.onListRender=function(t,e,i){var n=e.dataSource;e.title=n.title||"",e._tfReward.text="+"+n.reward+App.config.coinNameS[App.config.coinType],e._btnGet.clickHandler?(e._btnGet.clickHandler.args[0]=t,e._btnGet.clickHandler.args[1]=n.childId):e._btnGet.clickHandler=new Handler(this,this.onBtnGet,[t,n.childId]),e._ctrlStatus.selectedIndex=n.reached+1},i.onListSelect=function(t){0>t||(this._mcList.selectedIndex=-1)},i.onBtnGet=function(t,e){App.action.event.taskReceive(t,e,Handler.create(this,this.updateTask))},e}(MissionListUI),SignDailyView=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.game.event.SignDailyView",t);var i=e.prototype;return i.onInit=function(){t.prototype.onInit.call(this),this._mcList.selectHandler=new Handler(this,this.onListSelect)},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this.updateSign()},i.updateSign=function(t){t&&(App.player.parse(t),App.events.dispatch("updatecache")),App.action.event.signList(Handler.create(this,this.onSignList))},i.onSignList=function(t){if(t&&t.list)for(var e=0;e<t.list.length;e++){var i=t.list[e],n=this._mcList.getChildAt(e);n.dataSource=i,n._ctrlType.selectedIndex=i.type||0,n._ctrlStatus.selectedIndex=1==i.status?0:1,n.title=i.desc||"",n._tfBonus.text=i.points+(2==i.type?App.config.scoreName[App.config.scoreType]:App.config.coinName[App.config.coinType])}else this._mcList.enabled=!1},i.onListSelect=function(t){if(!(0>t)){this._mcList.selectedIndex=-1;var e=this._mcList.getChildAt(t).dataSource;1==e.type?App.dialog.tip("该奖励已领取",0,1500,!0):1==App.player.isSign?App.dialog.tip("今日已签到",0,1500,!0):App.action.event.sign(Handler.create(this,this.onSignComplete))}},i.onSignComplete=function(){App.player.update(Handler.create(this,this.updateSign))},e}(SignDailyUI),GameCamera1View=function(t){function e(){this.isFire=!1,this.isMove=!1,e.__super.call(this),this.objScene="game/libs/img/empty.png"}__class(e,"com.emugif.camera.game.gamefront.camera.GameCamera1View",t);var i=e.prototype;return i.close=function(t){if(void 0===t&&(t=""),t){if(App.game.isGame&&"close"==t)return void App.dialog.confirm("当前正在游戏中，是否强制退出房间？",Handler.create(this,this.exitRoom));this._ctrlStatus.selectedIndex=0,App.game.offAll(),App.game.leave(),App.dialog.setScreenRotate(!1),App.config.roomid?(App.sdk.exit(!0),this.close()):this.dataSource.groupId?App.dialog.showPanel(RoomListView,{id:this.dataSource.groupId}):App.dialog.showPanel(GameFrontView)}else com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t)},i.onInit=function(){t.prototype.onInit.call(this),this._btnStart.clickHandler=new Handler(App.game,App.game.start),this._btnOrder.clickHandler=new Handler(App.game,App.game.appointment),this._btnCancel.clickHandler=new Handler(App.game,App.game.cancelAppointment),this._btnFire.clickHandler=new Handler(App.game,App.game.grab),this._btnCharge.clickHandler=new Handler(App.player,App.player.charge),this._btnExchange.clickHandler=new Handler(App.player,App.player.exchange),this._btnCoin.clickHandler=new Handler(App.player,App.player.charge),this._btnReport.clickHandler=new Handler(this,this.onBtnReport),this._btnSound.clickHandler=new Handler(this,this.onBtnSound),this._mcMembers.renderHandler=new Handler(this,this.onMemberRender),this._btnJoyu.on("mousedown",this,this.onBtnPress,[1]),this._btnJoyd.on("mousedown",this,this.onBtnPress,[2]),this._btnJoyl.on("mousedown",this,this.onBtnPress,[3]),this._btnJoyr.on("mousedown",this,this.onBtnPress,[4]),App.events.add("updatecache",this,this.onGameUpdate)},i.onShown=function(){return fairygui.Window.prototype.onShown.call(this),Browser.window.wsrtcplayer?this.dataSource&&this.dataSource.machineSn?(this._ctrlStatus.selectedIndex=0,this.onGameUpdate(),this._tfCost.text=this.dataSource.price+App.config.coinNameS[App.config.coinType]+"/次",this._tfRoomName.text=this.dataSource.roomName,this._tfPlayerName.text=App.player.nickname,App.dialog.setScreenRotate(!1),App.game.on("updatecache",this,this.onGameUpdate),App.game.on("getbonus",this,this.onGameBonus),void App.game.enter(this.dataSource)):void App.dialog.alert("游戏数据获取失败"):void App.dialog.alert("游戏数据流初始化失败")},i.onGameBonus=function(t){t&&(1==t.value?App.dialog.confirm("已获得【"+t.name+"】，是否再来一次？",this._btnStart.clickHandler):App.dialog.confirm("未获得奖励，是否再来一次？",this._btnStart.clickHandler))},i.onGameUpdate=function(){this._btnSound.selected=App.game.muted,this._btnAvatar.icon=App.player.avatar,this._btnCoin.title="我的"+App.config.coinName[App.config.coinType]+"："+App.player.showCoin,this._btnOrder.text="预约游戏（"+App.game.appointmentCount+"）",this._tfMemberCount.text=App.game.member_count+"人\n围观",this._mcMembers.dataSource=App.game.players||[],this._ctrlMember.selectedIndex=this._mcMembers.length>0?1:0,App.game.isGame?this._ctrlStatus.selectedIndex=2:1==App.game.room_status?this._ctrlStatus.selectedIndex=App.game.isOrder?4:3:0==App.game.room_status?this._ctrlStatus.selectedIndex=1:this._ctrlStatus.selectedIndex=0},i.onMemberRender=function(t,e){t.icon=t.dataSource.avatar},i.onBtnSound=function(){App.game.muted=this._btnSound.selected},i.exitRoom=function(){this.close("cancel")},i.onBtnReport=function(t){void 0===t&&(t=0),0==t?App.dialog.confirm("是否上报机台错误信息？",Handler.create(this,this.onBtnReport,[1])):1==t?App.action.room.report(App.game.vmc_no,Handler.create(this,this.onBtnReport,[2])):2==t&&App.dialog.tip("上报成功",0,1500,!0)},i.onBtnStop=function(){App.dialog.confirm("当前正在游戏中，是否下机？",Handler.create(App.game,App.game.pushCoinStop))},i.onBtnPress=function(t,e){0==t?App.game.grab():App.game.dollMove(t),Laya.stage.on("mouseup",this,this.onFireRelease,[t]),Laya.timer.once(400,this,this.onFireLongPress,[t])},i.onFireLongPress=function(t,e){0==t?(this.isFire=!0,App.game.fireStart()):(this.isMove=!0,App.game.arcadeMoveStart(t))},i.onFireRelease=function(t,e){Laya.stage.off("mouseup",this,this.onFireRelease),Laya.timer.clear(this,this.onFireLongPress),0==t?this.isFire&&App.game.fireStop():this.isMove&&App.game.arcadeMoveStop(t),this.isFire=!1},e}(GameCamera1UI),GameCamera3View=function(t){function e(){e.__super.call(this),this.objScene="game/libs/img/empty.png"}__class(e,"com.emugif.camera.game.gamefront.camera.GameCamera3View",t);var i=e.prototype;return i.close=function(t){if(void 0===t&&(t=""),t){if(App.game.isGame&&"close"==t)return void App.dialog.confirm("当前正在游戏中，是否强制退出房间？",Handler.create(this,this.exitRoom));this._ctrlStatus.selectedIndex=0,App.game.offAll(),App.game.leave(),App.dialog.setScreenRotate(!1),App.config.roomid?(App.sdk.exit(!0),this.close()):this.dataSource.groupId?App.dialog.showPanel(RoomListView,{id:this.dataSource.groupId}):App.dialog.showPanel(GameFrontView)}else com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t)},i.onInit=function(){t.prototype.onInit.call(this),this._btnStart.clickHandler=new Handler(App.game,App.game.start),this._btnOrder.clickHandler=new Handler(App.game,App.game.appointment),this._btnCancel.clickHandler=new Handler(App.game,App.game.cancelAppointment),this._btnStop.clickHandler=new Handler(this,this.onBtnStop),this._btn1coin.clickHandler=new Handler(App.game,App.game.pushCoin,[1]),this._btn3coin.clickHandler=new Handler(App.game,App.game.pushCoin,[3]),this._btnWiper.clickHandler=new Handler(App.game,App.game.wiper),this._btnCharge.clickHandler=new Handler(App.player,App.player.charge),this._btnExchange.clickHandler=new Handler(App.player,App.player.exchange),this._btnCoin.clickHandler=new Handler(App.player,App.player.charge),this._btnPoint.clickHandler=new Handler(App.player,App.player.exchange),this._btnReport.clickHandler=new Handler(this,this.onBtnReport),this._btnSound.clickHandler=new Handler(this,this.onBtnSound),this._mcMembers.renderHandler=new Handler(this,this.onMemberRender),App.events.add("updatecache",this,this.onGameUpdate)},i.onShown=function(){return fairygui.Window.prototype.onShown.call(this),Browser.window.wsrtcplayer?this.dataSource&&this.dataSource.machineSn?(this._ctrlStatus.selectedIndex=0,this.onGameUpdate(),this._tfCost.text=this.dataSource.price+App.config.coinNameS[App.config.coinType]+"/次",App.dialog.setScreenRotate(!1),App.game.on("updatecache",this,this.onGameUpdate),App.game.on("getbonus",this,this.onGameBonus),void App.game.enter(this.dataSource)):void App.dialog.alert("游戏数据获取失败"):void App.dialog.alert("游戏数据流初始化失败")},i.onGameUpdate=function(){this._btnSound.selected=App.game.muted,this._btnAvatar.icon=App.player.avatar,this._btnCoin.title=String(App.player.showCoin),this._btnPoint.title=String(App.player.points),this._tfScore.text="赢 "+App.game.getPoints+" 分",this._tfOrders.text="当前排队："+App.game.appointmentCount,this._tfMemberCount.text=App.game.member_count+"人围观",this._mcMembers.dataSource=App.game.players||[],this._ctrlMember.selectedIndex=this._mcMembers.length>0?1:0,App.game.isGame?(this._ctrlStatus.selectedIndex=2,this.updateCountDown()):1==App.game.room_status?this._ctrlStatus.selectedIndex=App.game.isOrder?4:3:0==App.game.room_status?this._ctrlStatus.selectedIndex=1:this._ctrlStatus.selectedIndex=0},i.onGameBonus=function(t){App.dialog.alert("已获得"+(t||0)+"分")},i.onMemberRender=function(t,e){t.icon=t.dataSource.avatar},i.onBtnSound=function(){App.game.muted=this._btnSound.selected},i.exitRoom=function(){App.game.once("arcade_down_r",this,this.close,["cancel"]),App.game.pushCoinStop(!0)},i.onBtnReport=function(t){void 0===t&&(t=0),0==t?App.dialog.confirm("是否上报机台错误信息？",Handler.create(this,this.onBtnReport,[1])):1==t?App.action.room.report(App.game.vmc_no,Handler.create(this,this.onBtnReport,[2])):2==t&&App.dialog.tip("上报成功",0,1500,!0)},i.onBtnStop=function(){App.dialog.confirm("当前正在游戏中，是否下机？",Handler.create(App.game,App.game.pushCoinStop))},i.updateCountDown=function(){var t=Math.round((App.game.lastOptTime+99e3-(new Date).getTime())/1e3);0>=t?(t=0,App.dialog.closeAll(),App.dialog.tip("操作超时，自动下机"),App.game.pushCoinStop()):(t>=99&&(t=99),2==this._ctrlStatus.selectedIndex&&Laya.timer.once(1e3,this,this.updateCountDown)),this._tfCountdown.text=String(t)},e}(GameCamera3UI),GameCamera4View=function(t){function e(){this.isFire=!1,this.isMove=!1,this.ARR_BET_MUTI=[5,10,20],e.__super.call(this),this.objScene="game/libs/img/empty.png",this.isHScreen=!0}__class(e,"com.emugif.camera.game.gamefront.camera.GameCamera4View",t);var i=e.prototype;return i.close=function(t){if(void 0===t&&(t=""),t){if(2==this._ctrlStatus.selectedIndex&&"close"==t)return void App.dialog.confirm("当前正在游戏中，是否强制退出房间并结算？",Handler.create(this,this.exitRoom));App.game.arcadeDown(!0),App.game.offAll(),App.game.leave(),App.dialog.setScreenRotate(!1),App.config.roomid?(App.sdk.exit(!0),this.close()):this.dataSource.groupId?App.dialog.showPanel(RoomListView,{id:this.dataSource.groupId}):App.dialog.showPanel(GameFrontView)}else com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t)},i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","GameCamera4_"+App.config.uiskin4).asCom,t.prototype.onInit.call(this),this._mcMulti.selectHandler=new Handler(this,this.onMultiSelect),this._mcStart.selectHandler=new Handler(this,this.onBtnStart),this._btnStop.clickHandler=new Handler(this,this.onBtnStop,[!0]),this._btnResult.clickHandler=new Handler(this,this.onBtnStop,[!1]),this._btnSound.clickHandler=new Handler(this,this.onBtnSound),this._btnCharge.clickHandler=new Handler(App.player,App.player.charge,[App.config.uiskin4]),this._btnExchange.clickHandler=new Handler(App.player,App.player.exchange,[App.config.uiskin4]),this._btnCoin.clickHandler=new Handler(App.player,App.player.charge,[App.config.uiskin4]),this._btnPoint.clickHandler=new Handler(App.player,App.player.exchange,[App.config.uiskin4]),this._btnFire.on("mousedown",this,this.onBtnPress,[0]),this._btnJoyu.on("mousedown",this,this.onBtnPress,[1]),this._btnJoyd.on("mousedown",this,this.onBtnPress,[2]),this._btnJoyl.on("mousedown",this,this.onBtnPress,[3]),this._btnJoyr.on("mousedown",this,this.onBtnPress,[4]),this._btnBet.on("mousedown",this,this.onBtnPress,[5]),this._btnDouble.clickHandler=new Handler(App.game,App.game.fireDouble),this._mcBorder0.url="game/libs/img/camera4_l.jpg",this._mcBorder1.url="game/libs/img/camera4_l.jpg",App.events.add("updatecache",this,this.onGameUpdate),Laya.stage.on("resize",this,this.onStageResize)},i.onShown=function(){return fairygui.Window.prototype.onShown.call(this),Browser.window.wsrtcplayer?this.dataSource&&this.dataSource.machineSn?(this._ctrlIsmulti.selectedIndex=0,this._ctrlStatus.selectedIndex=0,this.onGameUpdate(),App.dialog.setScreenRotate(!0,!0),App.game.on("updatecache",this,this.onGameUpdate),App.game.enter(this.dataSource),void this.onStageResize()):void App.dialog.alert("游戏数据获取失败"):void App.dialog.alert("游戏数据流初始化失败")},i.onGameUpdate=function(){this._btnSound.selected=App.game.muted,this._btnAvatar.icon=App.player.avatar,this._btnCoin.title=String(App.player.showCoin),this._btnPoint.title=String(App.player.points),this._tfMemberCount.text=App.game.member_count+"人围观",this._mcMembers.dataSource=App.game.players||[],this._ctrlMember.selectedIndex=this._mcMembers.length>0?1:0;for(var t=0;4>t;t++){var e=this._mcSeats.getChildAt(t);if(e._ctrlStatus.selectedIndex=0,App.game.seats)for(var i=0;i<App.game.seats.length;i++){var n=App.game.seats[i];n&&n.position==t+1&&(e._ctrlStatus.selectedIndex=1,e.icon=n.headUrl)}}App.game.isGame&&App.game.position>0?(this._ctrlStatus.selectedIndex=2,this._btnResult.enabled=App.game.isResult):1==App.game.room_status?this._ctrlStatus.selectedIndex=1:0==App.game.room_status?this._ctrlStatus.selectedIndex=1:this._ctrlStatus.selectedIndex=0},i.onBtnStart=function(t){0>t||(this._mcStart.selectedIndex=-1,App.game.operate(t+1))},i.onBtnPress=function(t,e){0==t?App.game.fire():5==t||App.game.arcadeMove(t),Laya.stage.on("mouseup",this,this.onFireRelease,[t]),Laya.timer.once(400,this,this.onFireLongPress,[t])},i.onFireLongPress=function(t,e){0==t?(this.isFire=!0,App.game.fireStart()):5==t?(this._ctrlIsmulti.selectedIndex=1,Laya.stage.off("mouseup",this,this.onFireRelease)):(this.isMove=!0,App.game.arcadeMoveStart(t))},i.onFireRelease=function(t,e){Laya.stage.off("mouseup",this,this.onFireRelease),Laya.timer.clear(this,this.onFireLongPress),0==t?this.isFire&&App.game.fireStop():5==t?App.game.arcadeCoin():this.isMove&&App.game.arcadeMoveStop(t),this.isFire=!1},i.onMultiSelect=function(t){0>t||(this._mcMulti.selectedIndex=-1,this._ctrlIsmulti.selectedIndex=0,App.game.arcadeCoin(this.ARR_BET_MUTI[t]))},i.onBtnSound=function(){App.game.muted=this._btnSound.selected},i.exitRoom=function(){App.game.once("arcade_down_r",this,this.close,["cancel"]),App.game.settlement(!0,!0)},i.onBtnStop=function(t){void 0===t&&(t=!1),App.dialog.confirm("当前正在游戏中，是否"+(t?"结算并下机？":"结算？"),Handler.create(App.game,App.game.settlement,[t]))},i.onStageResize=function(t){console.log(this.width,this.height);var e=Math.round(this.width/2-this._mcBorder0.width-DialogManager.UI_DESIGN_HEIGHT/2);this._mcBorder0.x=e+2,this._mcBorder1.x=this.width-e-2},e}(GameCamera4_0UI),GameFrontView=function(t){function e(){this.arrStars=null,e.__super.call(this),this.objScene="game/libs/img/gamefront.jpg"}__class(e,"com.emugif.camera.game.gamefront.GameFrontView",t);var i=e.prototype;return i.close=function(t){void 0===t&&(t=""),"close"==t?App.dialog.showPanel(GameTitleView):com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t)},i.onInit=function(){t.prototype.onInit.call(this),this._mcLevel.max=100,this._mcLevel.value=0,this._btnSign.clickHandler=new Handler(App.dialog,App.dialog.showPanel,[SignDailyView]),this._btnMission.clickHandler=new Handler(App.dialog,App.dialog.showPanel,[MissionListView]),this._btnMedal.clickHandler=new Handler(App.dialog,App.dialog.showPanel,[MetalListView]),this._btnRank.clickHandler=new Handler(App.dialog,App.dialog.showPanel,[RankListView]),this._btnCoin.clickHandler=new Handler(App.player,App.player.charge),this._btnPoint.clickHandler=new Handler(App.player,App.player.exchange),this._btnAvatar.clickHandler=new Handler(App.dialog,App.dialog.showPanel,[UserInfoView]),this._btnSetup.clickHandler=new Handler(App.dialog,App.dialog.showPanel,[UserInfoView]),this._btnExit.clickHandler=new Handler(App.dialog,App.dialog.confirm,["确定要退出游戏吗？",Handler.create(App.sdk,App.sdk.exit)]),this._mcList.renderHandler=new Handler(this,this.onListRender),this._mcList.setVirtual(),this._ctrlWebview.selectedIndex=0,App.events.add("updatecache",this,this.onUserUpdate)},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this._mcList.dataSource=[],this.onUserUpdate(),App.action.room.groupList(Handler.create(this,this.onRoomListComplete)),0==App.player.isSign&&App.dialog.showPanel(SignDailyView)},i.onUserUpdate=function(){this._btnAvatar.icon=App.player.avatar,this._btnCoin.title=String(App.player.showCoin),this._btnPoint.title=Utils.formatNumber(App.player.points),App.player.memberLevelDto?(this._mcLevel.max=App.player.memberLevelDto.targetMoney||100,this._mcLevel.tweenValue(App.player.memberLevelDto.progress||0,.3),this._mcLevel.tooltips=App.player.memberLevelDto.tips||"",this._mcLevel.getChild("_vip").frame=(App.player.memberLevelDto.level||0)%10):(this._mcLevel.max=100,this._mcLevel.value=0)},i.onRoomListComplete=function(t){this._mcList.dataSource=t||[]},i.onListRender=function(t,e){t.icon="game/libs/img/plant/"+e%8+".png",t._ctrlIcon.selectedIndex=e%2,t._mcRoom.renderHandler||(t._mcRoom.renderHandler=new Handler(this,this.onRoomItemRender)),t._mcRoom.selectHandler?t._mcRoom.selectHandler.args[0]=t._mcRoom:t._mcRoom.selectHandler=new Handler(this,this.onRoomSelect,[t._mcRoom]),t._btnEnter.clickHandler?t._btnEnter.clickHandler.args[0]=e:t._btnEnter.clickHandler=new Handler(this,this.onListSelect,[e]);var i=t.dataSource;t._mcRoom.dataSource=i.roomList||[],t._ctrlOpen.selectedIndex=1,t.title=i.groupName||""},i.onListSelect=function(t){if(!(0>t)){this._mcList.selectedIndex=-1;var e=this._mcList.dataSource[t];App.dialog.showPanel(RoomListView,e)}},i.onRoomSelect=function(t,e){if(!(0>e)&&(t.selectedIndex=-1,App.player.isAuth(!0))){var i=t.dataSource[e];App.player.enterRoom(i.roomId)}},i.onRoomItemRender=function(t,e){var i=t.dataSource;t.icon=i.roomImg,t.text=(i.cost||0)+App.config.coinNameS[App.config.coinType]+"/次",t._ctrlStatus.selectedIndex=i.status||0},e}(GameFrontUI),RoomListView=function(t){function e(){e.__super.call(this),this.objScene="game/libs/img/roomlist.jpg"}__class(e,"com.emugif.camera.game.gamefront.RoomListView",t);var i=e.prototype;return i.close=function(t){void 0===t&&(t=""),"close"==t&&App.dialog.showPanel(GameFrontView),com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t)},i.onInit=function(){t.prototype.onInit.call(this),this._mcList.renderHandler=new Handler(this,this.onListRender),this._mcList.selectHandler=new Handler(this,this.onListSelect),this._mcList.setVirtual()},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this._mcList.dataSource=[],App.action.room.list(this.dataSource.id,"",0,20,Handler.create(this,this.onRoomList))},i.onRoomList=function(t){t&&(this._mcList.dataSource=t.data||[])},i.onListRender=function(t,e){var i=t.dataSource;t.title=i.roomName,t.icon=i.roomImg,t._tfCost.text=(i.cost||"-")+App.config.coinName[App.config.coinType]+"/次",t._ctrlMultiple.selectedIndex=i.multiple>1?1:0,t._tfMultiple.text="积分X"+i.multiple,t._ctrlLevel.selectedIndex=i.level>1?1:0,t._tfLevel.text="VIP"+i.level+"+",t._ctrlStatus.selectedIndex=i.status||0,t.enabled=2!=i.status},i.onListSelect=function(t){if(!(0>t)&&(this._mcList.selectedIndex=-1,App.player.isAuth(!0))){var e=this._mcList.dataSource[t];App.player.enterRoom(e.roomId,this.dataSource.id)}},e}(RoomListUI),ShopBuyCoinView=function(t){function e(){e.__super.call(this),this.isFull=!0}__class(e,"com.emugif.camera.game.shop.ShopBuyCoinView",t);var i=e.prototype;return i.onInit=function(){t.prototype.onInit.call(this),this._mcList.renderHandler=new Handler(this,this.onListRender),this._mcList.selectHandler=new Handler(this,this.onListSelect),App.events.add("updatecache",this,this.onUserUpdate)},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this._mcList.dataSource=[],App.action.sys.chargeList(1==App.config.coinType?1:2,Handler.create(this,this.onChargeList)),this.onUserUpdate()},i.onUserUpdate=function(){this._btnCoin.text=String(App.player.showCoin),this._btnPoint.text=String(App.player.points)},i.onChargeList=function(t){if(t)if(t.optionList){for(var e=0;e<t.optionList.length;e++);this._mcList.dataSource=t.optionList}else if(t.normal){for(e=0;e<t.normal.length;e++);t.week&&t.normal.unshift(t.week),t.month&&t.normal.unshift(t.month),this._mcList.dataSource=t.normal}},i.onListRender=function(t,e){var i=t.dataSource,n=1;"月卡"==i.mark||"月卡"==i.title?(t._ctrlType.selectedIndex=2,n=30):"周卡"==i.mark||"周卡"==i.title?(t._ctrlType.selectedIndex=1,n=7):t._ctrlType.selectedIndex=0,t._tfPrice.text="￥"+i.price,t._btnPrice1.text="￥"+i.price,t._btnPrice2.text="￥"+i.price,t._tfDesc.text=i.desc||"",t._tfMoney.text="×"+i.money,t._tfGet.text="购买立得"+i.money,t._tfDay.text="每日赠送"+i.dayMoney,t._tfNext.text="●次日赠送"+i.price+"钻",t._tfExcharge.text="●共可得"+(i.dayMoney*n+i.money)},i.onListSelect=function(t){0>t||(this._mcList.selectedIndex=-1,App.sdk.buy(this._mcList.dataSource[t]),App.events.dispatch("updatecache"))},e}(ShopBuyCoinUI),ShopBuyLifeView=function(t){function e(){e.__super.call(this),this.isFull=!0}__class(e,"com.emugif.camera.game.shop.ShopBuyLifeView",t);var i=e.prototype;return i.onInit=function(){t.prototype.onInit.call(this),this._mcList.renderHandler=new Handler(this,this.onListRender),this._mcList.selectHandler=new Handler(this,this.onListSelect),App.events.add("updatecache",this,this.onUserUpdate)},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this._mcList.dataSource=[],this.getDataList(),this.onUserUpdate()},i.getDataList=function(){1==App.config.coinType?App.action.sys.exchangeDiamondList(Handler.create(this,this.onExchangeList)):App.action.sys.exchangeCoinList(Handler.create(this,this.onExchangeList))},i.onUserUpdate=function(){this._btnCoin.text=String(App.player.showCoin),this._btnPoint.text=String(App.player.points)},i.onExchangeList=function(t){t&&(this._mcList.dataSource=t.list)},i.onListRender=function(t,e){var i=t.dataSource;t._tfPrice.text="需"+i.points+App.config.scoreName[App.config.scoreType],t._tfCoin.text=(1==App.config.coinType?i.diamond:i.goldCoin)+App.config.coinName[App.config.coinType]},i.onListSelect=function(t){0>t||(this._mcList.selectedIndex=-1,this.exchange(this._mcList.dataSource[t]))},i.exchange=function(t){App.dialog.confirm("是否用"+t.points+App.config.scoreName[App.config.scoreType]+"兑换"+(1==App.config.coinType?t.diamond:t.goldCoin)+App.config.coinName[App.config.coinType]+"？",Handler.create(App.action.sys,1==App.config.coinType?App.action.sys.exchangeDiamond:App.action.sys.exchangeCoin,[t.id,Handler.create(this,this.onExchangeComplete,[t])]))},i.onExchangeComplete=function(t,e){App.player.showCoin+=1==App.config.coinType?t.diamond:t.goldCoin,App.player.points-=t.points,App.events.dispatch("updatecache")},e}(ShopBuyLifeUI),GameTitleView=function(t){function e(){e.__super.call(this),this.objScene="game/libs/img/empty.png"}__class(e,"com.emugif.camera.game.title.GameTitleView",t);var i=e.prototype;return i.onInit=function(){t.prototype.onInit.call(this),this._btnMode1.clickHandler=new Handler(this,this.onBtnMode)},i.onShown=function(){fairygui.Window.prototype.onShown.call(this)},i.onBtnMode=function(t){return App.player?void App.dialog.showPanel(GameFrontView):void App.dialog.showPanel(MobileLoginView,null,!0,Handler.create(this,this.onBtnMode,[t]))},e}(GameTitleUI),BillListView=function(t){function e(){e.__super.call(this),this.objScene="game/libs/img/roomlist.jpg"}__class(e,"com.emugif.camera.game.user.BillListView",t);var i=e.prototype;return i.close=function(t){return void 0===t&&(t=""),"consumeRecord"==App.config.initpage?(com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t),void App.sdk.exit()):void(t?App.dialog.showPanel(UserInfoView):com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t))},i.onInit=function(){t.prototype.onInit.call(this),this._ctrlMoney.on("fui_state_changed",this,this.onListUpdate),this._ctrlInout.on("fui_state_changed",this,this.onListUpdate),this._mcList.setVirtual(),this._mcList.renderHandler=new Handler(this,this.onListRender)},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this.onListUpdate()},i.onListUpdate=function(){this._ctrlData.selectedIndex=0,this._mcList.dataSource=[],App.action.user.billList(this._ctrlMoney.selectedIndex+2,this._ctrlInout.selectedIndex,Handler.create(this,this.onBillList))},i.onBillList=function(t){t&&(this._mcList.dataSource=t.data),this._mcList.length>0?this._ctrlData.selectedIndex=1:this._ctrlData.selectedIndex=0},i.onListRender=function(t,e){var i=t.dataSource;t._tfTime.text=i.createTime,t._tfScore.text=i.money,t.title=i.remark||""},e}(BillListUI),EditNameView=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.game.user.EditNameView",t);var i=e.prototype;return i.onInit=function(){t.prototype.onInit.call(this),this._btnEnter.clickHandler=new Handler(this,this.onBtnEnter)},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this._ctrlType.selectedIndex=this.dataSource||0},i.onBtnEnter=function(){if(0==this._ctrlType.selectedIndex){if(!this._tfName.text)return;App.action.auth.edit(this._tfName.text,"",Handler.create(this,this.onEditComplete))}else if(1==this._ctrlType.selectedIndex){if(!this._tfCode.text)return;App.action.auth.inviteCode(this._tfCode.text,Handler.create(this,this.onEditComplete))}},i.onEditComplete=function(t){0==this._ctrlType.selectedIndex&&(App.player.nickname=this._tfName.text),App.events.dispatch("updatecache"),this.close()},e}(EditNameUI),InviteInfoView=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.game.user.InviteInfoView",t);var i=e.prototype;return i.close=function(t){void 0===t&&(t=""),"close"==t?App.dialog.showPanel(UserInfoView):com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t)},i.onInit=function(){t.prototype.onInit.call(this),this._mcTop.url="game/libs/img/invite.jpg",this._btnInput.clickHandler=new Handler(App.dialog,App.dialog.showPanel,[EditNameView,1])},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this._tfCode.text=App.player.inviteCode},e}(InviteInfoUI),LogAppealView=function(t){function e(){this.LOG_TYPE_3=["画面黑屏或定格","操作按键失灵","其他原因","取消"],this.LOG_TYPE_4=["爆击奖励领取","操作按键失灵","结算失败","取消"],e.__super.call(this),this.isFull=!0}__class(e,"com.emugif.camera.game.user.LogAppealView",t);var i=e.prototype;return i.onInit=function(){t.prototype.onInit.call(this),this._mcList.renderHandler=new Handler(this,this.onListRender),this._mcList.selectHandler=new Handler(this,this.onListSelect)},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this.dataSource&&3==this.dataSource.type?this._mcList.dataSource=this.LOG_TYPE_3:this.dataSource&&4==this.dataSource.machineType?this._mcList.dataSource=this.LOG_TYPE_4:this._mcList.dataSource=["取消"],this._mcList.resizeToFit()},i.onListRender=function(t,e){t.text=t.dataSource},i.onListSelect=function(t){if(!(0>t)){this._mcList.selectedIndex=-1;var e=this._mcList.dataSource[t];return"取消"==e?void this.close("close"):void(this.dataSource&&3==this.dataSource.type?App.action.user.appeal3(this.dataSource.id,e,4,Handler.create(this,this.onAppealComplete)):this.dataSource&&4==this.dataSource.machineType&&App.action.user.appeal4(this.dataSource.id,e,Handler.create(this,this.onAppealComplete)))}},i.onAppealComplete=function(t){App.dialog.tip("申诉已提交",0,1500,!0),this._closeHandler&&this._closeHandler.run(),this.close("close")},e}(LogAppealUI),LogDetailView=function(t){function e(){e.__super.call(this),this.isFull=!0}__class(e,"com.emugif.camera.game.user.LogDetailView",t);var i=e.prototype;return i.onInit=function(){t.prototype.onInit.call(this),this._mcList.renderHandler=new Handler(this,this.onListRender)},i.onShown=function(){
fairygui.Window.prototype.onShown.call(this),this.updateInfo()},i.updateInfo=function(){this.dataSource&&(3==this.dataSource.type?App.action.user.logInfo3(this.dataSource.id,Handler.create(this,this.onLogInfo3)):4==this.dataSource.type&&App.action.user.logInfo4(this.dataSource.id,Handler.create(this,this.onLogInfo4)))},i.onLogInfo3=function(t){this._mcList.dataSource=[t],this._mcList.resizeToFit(6)},i.onLogInfo4=function(t){this._mcList.dataSource=t.list,this._mcList.resizeToFit(6)},i.onListRender=function(t,e){var i=t.dataSource;t.icon=i.localUrl||i.roomImg,t._tfTime.text=i.createTime,t._tfScore.text=i.points,t._ctrlAppeal.selectedIndex=0,i.appealId?0==i.status?t._ctrlAppeal.selectedIndex=1:1==i.status?t._ctrlAppeal.selectedIndex=2:2==i.status&&(t._ctrlAppeal.selectedIndex=3):i.appeal&&(0==i.appeal.status?t._ctrlAppeal.selectedIndex=1:1==i.appeal.status?t._ctrlAppeal.selectedIndex=2:2==i.appeal.status&&(t._ctrlAppeal.selectedIndex=3)),t._btnAppeal.clickHandler?t._btnAppeal.clickHandler.args[0]=i:t._btnAppeal.clickHandler=new Handler(this,this.onBtnAppeal,[i])},i.onBtnAppeal=function(t){App.dialog.showPanel(LogAppealView,t,!1,Handler.create(this,this.updateInfo))},e}(LogDetailUI),LogListView=function(t){function e(){e.__super.call(this),this.objScene="game/libs/img/roomlist.jpg"}__class(e,"com.emugif.camera.game.user.LogListView",t);var i=e.prototype;return i.close=function(t){return void 0===t&&(t=""),"gameRecord"==App.config.initpage||"appeal"==App.config.initpage?(com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t),void App.sdk.exit()):void("close"==t?App.dialog.showPanel(UserInfoView):com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t))},i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common",1==App.config.uiskin4?"LogListNew":"LogList").asCom,t.prototype.onInit.call(this),this._mcList.setVirtual(),this._mcList.renderHandler=new Handler(this,this.onListRender),this._mcList.selectHandler=new Handler(this,this.onListSelect)},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this._ctrlData.selectedIndex=0,this._mcList.dataSource=[],this._ctrlType.selectedIndex=this.dataSource,0==this.dataSource?App.action.user.logList(2,Handler.create(this,this.onLogComplete)):1==this.dataSource?App.action.user.appealList(Handler.create(this,this.onLogComplete)):2==this.dataSource&&App.action.user.dollList(Handler.create(this,this.onLogComplete))},i.onLogComplete=function(t){t&&t.data&&(this._mcList.dataSource=this._mcList.dataSource.concat(t.data)),this._mcList.length>0?this._ctrlData.selectedIndex=1:this._ctrlData.selectedIndex=0},i.onListRender=function(t,e){var i=t.dataSource;t.title=2==this.dataSource?i.roomName+"-"+i.name:i.roomName,t.icon=2==this.dataSource?i.img:i.roomImg,t._tfTime.text=i.createTime,t._tfScore.text=i.points,t._ctrlAppeal.selectedIndex=0,t._ctrlDoll.selectedIndex=0,1==this.dataSource?t._ctrlAppeal.selectedIndex=(i.appealStatus||0)+1:2==this.dataSource&&(t._ctrlDoll.selectedIndex=(i.status||0)+1)},i.onListSelect=function(t){0>t||(this._mcList.selectedIndex=-1,0==this.dataSource?App.dialog.showPanel(LogDetailView,this._mcList.dataSource[t]):1==this.dataSource&&App.action.user.appealInfo(this._mcList.dataSource[t].id,Handler.create(this,this.onAppealInfo)))},i.onAppealInfo=function(t){var e=t.appeal;if(e){var i="申诉理由："+e.reason+"\n\n申诉结果：";i+=0==e.status?"申诉中":1==e.status?"申诉成功":2==e.status?"申诉失败":"未知",App.dialog.alert(i)}},e}(LogListUI),MobileLoginView=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.game.user.MobileLoginView",t);var i=e.prototype;return i.close=function(t){void 0===t&&(t=""),"ok"==t&&(this._closeHandler&&this._closeHandler.run(),this._closeHandler=null),com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t)},i.onInit=function(){t.prototype.onInit.call(this),this._btnSend.clickHandler=new Handler(this,this.onBtnSend),this._btnLogin.clickHandler=new Handler(this,this.onBtnLogin)},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this._tfPhone.text=App.config.getCache("mobile")||"",this._tfCode.text=App.config.getCache("code")||""},i.onBtnSend=function(){var t=this._tfPhone.text;return Utils.isPhone(t)?(App.config.setCache("mobile",t),void App.action.auth.captcha(t,Handler.create(this,this.onSendComplete))):void App.dialog.tip("手机号必须为11位数字")},i.onSendComplete=function(){App.dialog.alert("验证码已发送")},i.onBtnLogin=function(){var t=this._tfPhone.text;if(!Utils.isPhone(t))return void App.dialog.tip("手机号必须为11位数字");App.config.setCache("mobile",t);var e=this._tfCode.text;return Utils.isNumSix(e)?(App.config.setCache("code",e),void App.action.auth.login(t,e,"3",Handler.create(this,this.onLoginComplete,[!0]))):void App.dialog.tip("验证码不正确")},i.onLoginComplete=function(t,e){App.player=new PlayerVO,App.player.parse(e),App.config.token=App.player.accessToken,App.config.setCache("token",App.config.token),App.player.update(Handler.create(this,this.close,["ok"]))},e}(MobileLoginUI),RankListView=function(t){function e(){this.objMy=null,e.__super.call(this)}__class(e,"com.emugif.camera.game.user.RankListView",t);var i=e.prototype;return i.close=function(t){void 0===t&&(t=""),"close"==t?App.dialog.showPanel(GameFrontView):com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t)},i.onInit=function(){t.prototype.onInit.call(this),this.objScene="game/libs/img/roomlist.jpg",this._mcList.renderHandler=new Handler(this,this.onListRender),this._mcList.selectHandler=new Handler(this,this.onListSelect),this._ctrlType.on("fui_state_changed",this,this.updateRank)},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this._mcList.dataSource=[],this.updateRank()},i.updateRank=function(){0==this._ctrlType.selectedIndex?App.action.sys.scoreRank(Handler.create(this,this.onRankList)):App.action.sys.chargeRank(Handler.create(this,this.onRankList))},i.onRankList=function(t){if(t){var e=t.list||[];this._btnRank1.dataSource=e.shift(),this._btnRank2.dataSource=e.shift(),this._btnRank3.dataSource=e.shift(),this.onListRender(this._btnRank1,0),this.onListRender(this._btnRank2,1),this.onListRender(this._btnRank3,2),this._mcList.dataSource=e,this._btnMy.dataSource=t.my||App.player;for(var i=0;i<e.length;i++)if(e[i].memberId==App.player.memberId){this._btnMy.dataSource=e[i];break}this.onListRender(this._btnMy,0),this._btnMy._ctrlType.selectedIndex=1-this._ctrlType.selectedIndex}},i.onListRender=function(t,e){var i=t.dataSource;t._ctrlType&&(t._ctrlType.selectedIndex=this._ctrlType.selectedIndex),t._ctrlName&&(t._ctrlName.selectedIndex=this._ctrlType.selectedIndex),i?(t._tfId&&(t._tfId.text=i.rank?i.rank:"未上榜"),t.title=i.nickName||i.nickname||"",t.icon=i.avatar,t._tfScore.text=Utils.formatNumber(i.total||0)):(t._tfId&&(t._tfId.text=""),t.title="",t.icon="",t._tfScore.text="")},i.onListSelect=function(t){0>t||(this._mcList.selectedIndex=-1)},i.onBtnGet=function(t,e){},e}(RankListUI),RealAuthView=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.game.user.RealAuthView",t);var i=e.prototype;return i.onInit=function(){t.prototype.onInit.call(this),this._btnEnter.clickHandler=new Handler(this,this.onBtnEnter)},i.onBtnEnter=function(){this._tfName.text&&this._tfCard.text&&App.action.auth.realAuth(this._tfName.text,this._tfCard.text,Handler.create(this,this.onAuthComplete))},i.onAuthComplete=function(t){App.player.authStatus=1,App.events.dispatch("updatecache"),this.close()},e}(RealAuthUI),SetupView=function(t){function e(){e.__super.call(this),this.objScene="game/libs/img/roomlist.jpg"}__class(e,"com.emugif.camera.game.user.SetupView",t);var i=e.prototype;return i.close=function(t){void 0===t&&(t=""),t?App.dialog.showPanel(UserInfoView):com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t)},i.onInit=function(){t.prototype.onInit.call(this),this._mcList.foldInvisibleItems=!0,this._mcList.selectHandler=new Handler(this,this.onListSelect),this._mcList.getChildAt(3).text=Browser.onGameWebView?"退出游戏":"退出登录"},i.onListSelect=function(t){0>t||(this._mcList.selectedIndex=-1,0==t?App.config.userurl&&App.dialog.showPanel(WebFrameView,{url:App.config.userurl,title:"用户协议"}):1==t?App.config.policyurl&&App.dialog.showPanel(WebFrameView,{url:App.config.policyurl,title:"隐私政策"}):2==t?App.dialog.confirm("确定要注销账户吗？\n\n该操作确认后无法撤销！",Handler.create(this,this.onBtnDelete)):3==t&&App.dialog.confirm("确定要"+this._mcList.getChildAt(3).text+"吗？",Handler.create(this,this.onBtnLogout)))},i.onBtnDelete=function(){App.action.auth.cancel(Handler.create(this,this.onBtnLogout))},i.onBtnLogout=function(){App.player=null,App.config.token="",App.config.setCache("token",""),Browser.onGameWebView?App.sdk.exit(!1,"logoutGame"):App.dialog.showPanel(GameTitleView)},e}(SetupUI),UserInfoView=function(t){function e(){e.__super.call(this),this.objScene="game/libs/img/roomlist.jpg"}__class(e,"com.emugif.camera.game.user.UserInfoView",t);var i=e.prototype;return i.close=function(t){return void 0===t&&(t=""),"userInfo"==App.config.initpage&&"close"==t?(com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t),void App.sdk.exit()):void(t?App.dialog.showPanel(GameFrontView):com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t))},i.onInit=function(){t.prototype.onInit.call(this),this._btnHead.clickHandler=new Handler(this,this.onBtnHead),this._btnEdit.clickHandler=new Handler(App.dialog,App.dialog.showPanel,[EditNameView]),this._btnCoin.clickHandler=new Handler(App.player,App.player.charge),this._btnPoint.clickHandler=new Handler(App.player,App.player.exchange),this._mcList.selectHandler=new Handler(this,this.onListSelect),App.events.add("updatecache",this,this.onUserUpdate)},i.onShown=function(){fairygui.Window.prototype.onShown.call(this),this.onUserUpdate()},i.onUserUpdate=function(){App.player.isAuth(!0)?this._mcList.getChildAt(0)._ctrlReal.selectedIndex=2:this._mcList.getChildAt(0)._ctrlReal.selectedIndex=1,this._btnHead.icon=App.player.avatar,this._tfId.text="ID："+App.player.memberId,this._tfName.text=App.player.nickname,this._btnCoin.text=String(App.player.showCoin),this._btnPoint.text=App.player.points+""},i.onListSelect=function(t){0>t||(this._mcList.selectedIndex=-1,0==t?App.player.isAuth(!0)&&App.dialog.tip("已实名"):1==t?App.dialog.showPanel(LogListView,0):2==t?App.dialog.showPanel(LogListView,2):3==t?App.dialog.showPanel(LogListView,1):4==t?App.dialog.showPanel(BillListView):5==t?App.dialog.showPanel(InviteInfoView):6==t&&App.dialog.showPanel(SetupView))},i.onBtnHead=function(){var t=Browser.document.createElement("input");t.type="file",t.accept="image/*",t.style.display="none",Browser.document.body.appendChild(t),t.addEventListener("change",function(e){var i=e.target.files[0];App.action.sys.uploadImage(i),Browser.document.body.removeChild(t)}),t.click()},e}(UserInfoUI),WebFrameView=function(t){function e(){this.objFrame=null,e.__super.call(this),this.objScene="game/libs/img/roomlist.jpg"}__class(e,"com.emugif.camera.game.user.WebFrameView",t);var i=e.prototype;return i.close=function(t){void 0===t&&(t=""),this.objFrame&&(this.objFrame.parentNode&&this.objFrame.parentNode.removeChild(this.objFrame),this.objFrame.src="",this.objFrame=null),t?App.dialog.showPanel(SetupView):com.emugif.core.ui.core.UIPanel.prototype.close.call(this,t)},i.onShown=function(){if(fairygui.Window.prototype.onShown.call(this),this.dataSource){var t=Math.round(100*(100+(Browser.onGameWebView?DialogManager.UI_DESIGN_TOP:0))/App.dialog.viewHeight);this._tfTitle.text=this.dataSource.title||"",this.objFrame=Browser.document.createElement("iframe"),this.objFrame.id="frame_"+(new Date).getTime(),this.objFrame.src=this.dataSource.url,this.objFrame.style.position="absolute",this.objFrame.style.top=t+"%",this.objFrame.style.width="100%",this.objFrame.style.height=100-t+"%",this.objFrame.style.border="none",Browser.document.body.appendChild(this.objFrame)}},e}(WebFrameUI),WebGLImage=function(t){function e(t,i){this._image=null,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this.mipmap=!1,this.minFifter=0,this.magFifter=0,e.__super.call(this,t,i),this.repeat=!1,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof t?(this.url=t,this._src=t,this._image=new Browser.window.Image,i&&(i.onload&&(this.onload=i.onload),i.onerror&&(this.onerror=i.onerror),i.onCreate&&i.onCreate(this)),this._image.crossOrigin=t&&0==t.indexOf("data:")?null:"",t&&(this._image.src=t)):(this._src=i,this.url=this._src,this._image=t.source,this.onresize()),this._enableMerageInAtlas=!0}__class(e,"laya.webgl.resource.WebGLImage",t);var i=e.prototype;return Laya.imps(i,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),i._init_=function(t,e){},i._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var t=WebGL.mainContext,e=this._source=t.createTexture(),i=WebGLContext.curBindTexTarget,n=WebGLContext.curBindTexValue;WebGLContext.bindTexture(t,3553,e),t.texImage2D(3553,0,6408,6408,5121,this._image);var s=this.minFifter,r=this.magFifter,a=this.repeat?10497:33071,o=Arith.isPOT(this._w,this._h);o?(this.mipmap?-1!==s||(s=9987):-1!==s||(s=9729),-1!==r||(r=9729),t.texParameteri(3553,10241,s),t.texParameteri(3553,10240,r),t.texParameteri(3553,10242,a),t.texParameteri(3553,10243,a),this.mipmap&&t.generateMipmap(3553)):(-1!==s||(s=9729),-1!==r||(r=9729),t.texParameteri(3553,10241,s),t.texParameteri(3553,10240,r),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)),i&&n&&WebGLContext.bindTexture(t,i,n),this._image.onload=null,this._image=null,o?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._recreateLock=!1},i.recreateResource=function(){var t=this;if(null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this.startCreate(),this._allowMerageInAtlas&&this._enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0,this.startCreate();var e=this;this._image=new Browser.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){return e._needReleaseAgain?(e._needReleaseAgain=!1,e._image.onload=null,void(e._image=null)):(e._allowMerageInAtlas&&e._enableMerageInAtlas?(t.memorySize=0,t._recreateLock=!1):e._createWebGlTexture(),void e.completeCreate())},this._image.src=this._src}},i.detoryResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(WebGL.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},i.onresize=function(){this._w=this._image.width,this._h=this._image.height,AtlasResourceManager.enabled&&this._w<AtlasResourceManager.atlasLimitWidth&&this._h<AtlasResourceManager.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},i.clearAtlasSource=function(){this._image=null},__getset(0,i,"image",function(){return this._image}),__getset(0,i,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),__getset(0,i,"atlasSource",function(){return this._image}),__getset(0,i,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(t){this._enableMerageInAtlas=t}),__getset(0,i,"onload",null,function(t){var e=this;this._onload=t,this._image&&(this._image.onload=null!=this._onload?function(){e.onresize(),e._onload()}:null)}),__getset(0,i,"onerror",null,function(t){var e=this;this._onerror=t,this._image&&(this._image.onerror=null!=this._onerror?function(){e._onerror()}:null)}),e}(HTMLImage),ShopBuyLifeNewView=function(t){function e(){e.__super.call(this)}__class(e,"com.emugif.camera.game.shop.ShopBuyLifeNewView",t);var i=e.prototype;return i.onInit=function(){this.contentPane=this.contentPane||UIPackage.createObject("common","ShopBuyLifeNew").asCom,t.prototype.onInit.call(this)},i.onShown=function(){t.prototype.onShown.call(this),this.contentPane.getController("_shopType").selectedIndex=this.dataSource},i.getDataList=function(){0==this.dataSource?App.action.sys.chargeList(1==App.config.coinType?1:2,Handler.create(this,this.onChargeList)):t.prototype.getDataList.call(this)},i.onChargeList=function(t){if(t)if(t.optionList){for(var e=0;e<t.optionList.length;e++);this._mcList.dataSource=t.optionList}else if(t.normal){for(e=0;e<t.normal.length;e++);t.week&&t.normal.unshift(t.week),t.month&&t.normal.unshift(t.month),this._mcList.dataSource=t.normal}},i.onListRender=function(e,i){if(1==this.dataSource)return t.prototype.onListRender.call(this,e,i),void(e.icon="game/libs/img/shop/0.png");var n=e.dataSource;e._tfPrice.text="￥"+n.price,e._tfCoin.text=n.money+"多送"+n.price+App.config.coinNameS[App.config.coinType],1==App.config.coinType&&(e.icon="game/libs/img/shop/"+i+".png")},i.exchange=function(e){1==this.dataSource?t.prototype.exchange.call(this,e):(App.sdk.buy(e),App.events.dispatch("updatecache"))},e}(ShopBuyLifeView);Laya.__init([EventDispatcher,LoaderManager,Browser,UIPackage,RelationItem,WebGLContext2D,GearSize,Transition,GList,DrawText,GBasicTextField,LocalStorage,Render,AtlasGrid,Timer,GearColor,ShaderCompile,EaseManager,GearAnimation,GearLook]),new GameInit}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var i in Laya){var n=Laya[i];n&&n.__isclass&&(e[i]=n)}});
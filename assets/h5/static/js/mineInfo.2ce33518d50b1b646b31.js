webpackJsonp([33],{"Jzl+":function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=t("3cXf"),s=t.n(i),o=t("a3Yh"),c=t.n(o),l=(t("ux1N"),t("a2VW")),r=t.n(l),d=(t("7RVw"),t("eqCR")),m=t.n(d),v=(t("W6ni"),t("LHpw")),u=t.n(v),h=(t("loei"),t("lBnC")),g=t.n(h),p=(t("u/Zp"),t("fmO/")),f=t.n(p),b=t("P7/f"),w=t("MTyd"),k=t("cMGX"),C={components:(n={},c()(n,f.a.name,f.a),c()(n,g.a.name,g.a),c()(n,u.a.name,u.a),c()(n,"navBar",b.a),c()(n,"tabbar",w.a),c()(n,"pagination",k.a),c()(n,m.a.name,m.a),c()(n,r.a.name,r.a),c()(n,r.a.Component.name,r.a.Component),n),props:{},data:function(){return{avatar:"",nickname:"",mobile:"",showBox:!1,newNickname:"",bindMoney:""}},created:function(){this.getMineInfo()},mounted:function(){},methods:{clickLeft:function(){this.$router.back()},clickRight:function(){g()("按钮")},getMineInfo:function(){var a=this;g.a.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0}),this.$api.getMineInfo().then(function(e){console.log(e.data),a.avatar=e.data.avatar,a.nickname=e.data.nickname,a.mobile=e.data.mobile,a.bindMoney=e.data.bindMoney,g.a.clear()})},toPage:function(a){this.$,router.push(a.url)},changeNickname:function(){this.showBox=!0,window.scrollTo(0,0)},changeCount:function(){window.scrollTo(0,0)},onConfirm:function(){this.newNickname?(console.log(this.newNickname),this.userEdit(null,this.newNickname)):g()("昵称不能为空")},changeAvatar:function(){if(!this.$config.isH5){var a=this.$tool.getUserAgent(),e=s()({type:"changeHead",id:"changeHead",imgInput:"headImg"});switch(a){case"iOS":window.webkit.messageHandlers.ReactNativeWebView.postMessage(e);break;case"Android":window.ReactNativeWebView.postMessage(e)}}},changeHead:function(){console.log(document.getElementById("headImg").value),this.userEdit(document.getElementById("headImg").value,null)},userEdit:function(a,e){var t=this;this.$api.userEdit({avatar:a,nickname:e}).then(function(n){console.log(n),t.nickname=e||t.nickname,t.avatar=a||t.avatar,t.newNickname="",document.getElementById("upload-avatar").value="",g.a.clear()})},bindingPhone:function(a){a.params||this.$router.replace("/bindingPhone")}}},_={render:function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"mine"},[n("navBar",{attrs:{title:"个人中心",hasBack:!0,leftText:"",rightText:"",clickLeft:a.clickLeft,clickRight:a.clickRight,hasBorder:!1}}),a._v(" "),n("div",{staticClass:"listBox"},[n("div",{directives:[{name:"tap",rawName:"v-tap",value:{methods:a.changeAvatar},expression:"{methods:changeAvatar}"}],staticClass:"list"},[n("div",{staticClass:"label"},[a._v("头像")]),a._v(" "),n("div",{staticClass:"right"},[n("div",{staticClass:"imgBox"},[n("img",{attrs:{src:a.avatar,alt:""}})]),a._v(" "),n("img",{staticClass:"jiantou",attrs:{src:t("er74"),alt:""}})])]),a._v(" "),n("div",{directives:[{name:"tap",rawName:"v-tap",value:{methods:a.changeNickname},expression:"{methods:changeNickname}"}],staticClass:"list"},[n("div",{staticClass:"label"},[a._v("昵称")]),a._v(" "),n("div",{staticClass:"right"},[n("div",{staticClass:"input"},[a._v(a._s(a.nickname))]),a._v(" "),n("img",{staticClass:"jiantou",attrs:{src:t("er74"),alt:""}})])]),a._v(" "),n("div",{directives:[{name:"tap",rawName:"v-tap",value:{methods:a.bindingPhone,params:a.mobile},expression:"{methods:bindingPhone,params:mobile}"}],staticClass:"list"},[n("div",{staticClass:"label"},[a._v("手机号码")]),a._v(" "),n("div",{staticClass:"right"},[n("div",{staticClass:"input"},[a._v(a._s(a.mobile?a.mobile:"绑定赠送 "+a.bindMoney+"钻石"))]),a._v(" "),a.mobile?a._e():n("img",{staticClass:"jiantou",attrs:{src:t("er74"),alt:""}})])])]),a._v(" "),n("van-dialog",{attrs:{title:"修改昵称","show-cancel-button":""},on:{confirm:a.onConfirm},model:{value:a.showBox,callback:function(e){a.showBox=e},expression:"showBox"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:a.newNickname,expression:"newNickname"}],attrs:{name:"",id:"",placeholder:"请填写修改后昵称"},domProps:{value:a.newNickname},on:{blur:function(e){return e.preventDefault(),a.changeCount()},input:function(e){e.target.composing||(a.newNickname=e.target.value)}}})]),a._v(" "),n("input",{staticStyle:{display:"none"},attrs:{type:"text",id:"headImg"}}),a._v(" "),n("button",{staticStyle:{display:"none"},attrs:{id:"changeHead"},on:{click:a.changeHead}},[a._v("555")])],1)},staticRenderFns:[]};var N=t("C7Lr")(C,_,!1,function(a){t("Y0YU")},"data-v-647ec05b",null);e.default=N.exports},Y0YU:function(a,e){}});
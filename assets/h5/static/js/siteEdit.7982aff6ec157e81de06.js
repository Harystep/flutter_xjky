webpackJsonp([5],{"9XLH":function(t,e){},Aqfy:function(t,e,i){"use strict";var s=i("X+FI");e.__esModule=!0,e.default=void 0;var n=s(i("DcSe")),a=i("HYbQ"),r=i("o3EJ"),o=i("Nx9O"),l=i("ltWp"),c=i("5Wcp"),u=s(i("G8c2")),h=s(i("XLor")),d=(0,a.createNamespace)("picker"),f=d[0],m=d[1],v=d[2],p=f({props:(0,n.default)({},l.pickerProps,{defaultIndex:{type:[Number,String],default:0},columns:{type:Array,default:function(){return[]}},toolbarPosition:{type:String,default:"top"},valueKey:{type:String,default:"text"}}),data:function(){return{children:[],formattedColumns:[]}},computed:{itemPxHeight:function(){return this.itemHeight?(0,c.unitToPx)(this.itemHeight):l.DEFAULT_ITEM_HEIGHT},dataType:function(){var t=this.columns[0]||{};return t.children?"cascade":t.values?"object":"text"}},watch:{columns:{handler:"format",immediate:!0}},methods:{format:function(){var t=this.columns,e=this.dataType;"text"===e?this.formattedColumns=[{values:t}]:"cascade"===e?this.formatCascade():this.formattedColumns=t},formatCascade:function(){for(var t=[],e={children:this.columns};e&&e.children;){for(var i,s=e.children,n=null!=(i=e.defaultIndex)?i:+this.defaultIndex;s[n]&&s[n].disabled;){if(!(n<s.length-1)){n=0;break}n++}t.push({values:e.children,className:e.className,defaultIndex:n}),e=s[n]}this.formattedColumns=t},emit:function(t){var e=this;if("text"===this.dataType)this.$emit(t,this.getColumnValue(0),this.getColumnIndex(0));else{var i=this.getValues();"cascade"===this.dataType&&(i=i.map(function(t){return t[e.valueKey]})),this.$emit(t,i,this.getIndexes())}},onCascadeChange:function(t){for(var e={children:this.columns},i=this.getIndexes(),s=0;s<=t;s++)e=e.children[i[s]];for(;e&&e.children;)t++,this.setColumnValues(t,e.children),e=e.children[e.defaultIndex||0]},onChange:function(t){var e=this;if("cascade"===this.dataType&&this.onCascadeChange(t),"text"===this.dataType)this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0));else{var i=this.getValues();"cascade"===this.dataType&&(i=i.map(function(t){return t[e.valueKey]})),this.$emit("change",this,i,t)}},getColumn:function(t){return this.children[t]},getColumnValue:function(t){var e=this.getColumn(t);return e&&e.getValue()},setColumnValue:function(t,e){var i=this.getColumn(t);i&&(i.setValue(e),"cascade"===this.dataType&&this.onCascadeChange(t))},getColumnIndex:function(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex:function(t,e){var i=this.getColumn(t);i&&(i.setIndex(e),"cascade"===this.dataType&&this.onCascadeChange(t))},getColumnValues:function(t){return(this.children[t]||{}).options},setColumnValues:function(t,e){var i=this.children[t];i&&i.setOptions(e)},getValues:function(){return this.children.map(function(t){return t.getValue()})},setValues:function(t){var e=this;t.forEach(function(t,i){e.setColumnValue(i,t)})},getIndexes:function(){return this.children.map(function(t){return t.currentIndex})},setIndexes:function(t){var e=this;t.forEach(function(t,i){e.setColumnIndex(i,t)})},confirm:function(){this.children.forEach(function(t){return t.stopMomentum()}),this.emit("confirm")},cancel:function(){this.emit("cancel")},genTitle:function(){var t=this.$createElement,e=this.slots("title");return e||(this.title?t("div",{class:["van-ellipsis",m("title")]},[this.title]):void 0)},genCancel:function(){return(0,this.$createElement)("button",{attrs:{type:"button"},class:m("cancel"),on:{click:this.cancel}},[this.slots("cancel")||this.cancelButtonText||v("cancel")])},genConfirm:function(){return(0,this.$createElement)("button",{attrs:{type:"button"},class:m("confirm"),on:{click:this.confirm}},[this.slots("confirm")||this.confirmButtonText||v("confirm")])},genToolbar:function(){var t=this.$createElement;if(this.showToolbar)return t("div",{class:m("toolbar")},[this.slots()||[this.genCancel(),this.genTitle(),this.genConfirm()]])},genColumns:function(){var t=this.$createElement,e=this.itemPxHeight,i=e*this.visibleItemCount,s={height:e+"px"},n={height:i+"px"},a={backgroundSize:"100% "+(i-e)/2+"px"};return t("div",{class:m("columns"),style:n,on:{touchmove:r.preventDefault}},[this.genColumnItems(),t("div",{class:m("mask"),style:a}),t("div",{class:[o.BORDER_UNSET_TOP_BOTTOM,m("frame")],style:s})])},genColumnItems:function(){var t=this,e=this.$createElement;return this.formattedColumns.map(function(i,s){var n;return e(h.default,{attrs:{readonly:t.readonly,valueKey:t.valueKey,allowHtml:t.allowHtml,className:i.className,itemHeight:t.itemPxHeight,defaultIndex:null!=(n=i.defaultIndex)?n:+t.defaultIndex,swipeDuration:t.swipeDuration,visibleItemCount:t.visibleItemCount,initialOptions:i.values},scopedSlots:{option:t.$scopedSlots.option},on:{change:function(){t.onChange(s)}}})})}},render:function(t){return t("div",{class:m()},["top"===this.toolbarPosition?this.genToolbar():t(),this.loading?t(u.default,{class:m("loading")}):t(),this.slots("columns-top"),this.genColumns(),this.slots("columns-bottom"),"bottom"===this.toolbarPosition?this.genToolbar():t()])}});e.default=p},QzFE:function(t,e,i){"use strict";e.__esModule=!0,e.deepClone=function t(e){if(!(0,s.isDef)(e))return e;if(Array.isArray(e))return e.map(function(e){return t(e)});if("object"==typeof e){var i={};return Object.keys(e).forEach(function(s){i[s]=t(e[s])}),i}return e};var s=i("HYbQ")},UbNJ:function(t,e){},WPs3:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,n,a=i("a3Yh"),r=i.n(a),o=(i("mOxo"),i("MHxF")),l=i.n(o),c=(i("loei"),i("lBnC")),u=i.n(c),h=(i("x4Wh"),i("uqip")),d=i.n(h),f=(i("u/Zp"),i("fmO/")),m=i.n(f),v=i("P7/f"),p=(i("Z2of"),i("Aqfy")),g=i.n(p),y=(i("NqIV"),i("Xl1F")),I=i.n(y),C={components:(s={},r()(s,I.a.name,I.a),r()(s,g.a.name,g.a),s),props:{arearenders:{type:Function,required:!0},areaclose:{type:Function,required:!0},showarea:{type:Boolean,required:!0,default:!0}},data:function(){return{textTip:this.showarea,areas:[{values:[],defaultIndex:0},{values:[],defaultIndex:0},{values:[],defaultIndex:0}],cityvalues:{pId:"",cId:"",dId:""},areaArr:["北京市","北京","东城区"],areaArrStr:"北京市,北京,西城区"}},created:function(){this.areas[0].values=this.$city.area,this.areas[1].values=this.$city.area[0].childs,this.areas[2].values=this.$city.area[0].childs[0].childs,this.cityvalues.pId=this.$city.area[0].id,this.cityvalues.cId=this.$city.area[0].childs[0].id,this.cityvalues.dId=this.$city.area[0].childs[0].childs[0].id},methods:{areaChange:function(t,e){var i=this;this.cityvalues.pId!=e[0].id?(this.cityvalues.pId=e[0].id,e[0].childs.length>0?(t.setColumnValues(1,e[0].childs),t.setColumnValues(2,e[0].childs[0].childs)):(t.setColumnValues(1,[]),t.setColumnValues(2,[]))):void 0!==e[1]&&this.cityvalues.cId!=e[1].id&&(e[0].childs.length>0?t.setColumnValues(2,e[1].childs):t.setColumnValues(2,[]));var s=t.getValues();this.cityvalues.pId=s[0]?s[0].id:null,this.cityvalues.cId=s[1]?s[1].id:null,this.cityvalues.dId=s[2]?s[2].id:null,this.areaArr=[s[0]?s[0].name:"",s[1]?s[1].name:"",s[2]?s[2].name:""],this.areaArrStr="",s.forEach(function(t){t&&(i.areaArrStr+=t.name+",")}),this.areaArrStr=this.areaArrStr.substring(0,this.areaArrStr.length-1)},closeArea:function(){this.areaclose()},sureChooses:function(){this.arearenders(this.cityvalues,this.areaArr,this.areaArrStr)}}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-popup",{attrs:{position:"bottom"},on:{close:t.closeArea,"click-overlay":t.closeArea},model:{value:t.showarea,callback:function(e){t.showarea=e},expression:"showarea"}},[i("van-picker",{attrs:{"show-toolbar":"",columns:t.areas,"value-key":"name"},on:{change:t.areaChange,cancel:t.closeArea,confirm:t.sureChooses}})],1)},staticRenderFns:[]},T=i("C7Lr")(C,x,!1,null,null,null).exports,b={components:(n={},r()(n,m.a.name,m.a),r()(n,d.a.name,d.a),r()(n,u.a.name,u.a),r()(n,l.a.name,l.a),r()(n,"navBar",v.a),r()(n,"city",T),n),props:{},data:function(){return{title:"新增地址",id:"",name:"",phone:"",areaArrStr:"",siteDetail:"",checked:!1,showarea:!1,cityvalues:"",areaArr:[],provinceId:"",provinceName:"",cityId:"",cityName:"",districtId:"",districtName:""}},created:function(){console.log(this.$route.query.id),this.$route.query.id&&(this.title="编辑地址",this.id=this.$route.query.id,this.getDiteDetail())},mounted:function(){},methods:{clickLeft:function(){this.$route.query.ids?this.$router.replace("/siteChoose?ids="+this.$route.query.ids):this.$router.back()},clickRight:function(){u()("按钮")},chooseCity:function(){this.showarea=!0},areaclose:function(){this.showarea=!1},getDiteDetail:function(){var t=this;this.$api.getSiteDetail({id:this.id}).then(function(e){console.log(e),t.name=e.data.consignee,t.phone=e.data.mobile,t.siteDetail=e.data.address,t.areaArrStr=e.data.provinceName+(e.data.cityName?",":"")+(e.data.cityName?e.data.cityName:"")+(e.data.districtName?",":"")+(e.data.districtName?e.data.districtName:""),t.provinceId=e.data.provinceId,t.provinceName=e.data.provinceName,t.cityId=e.data.cityId,t.cityName=e.data.cityName,t.districtId=e.data.districtId,t.districtName=e.data.districtName,t.checked=1==e.data.isDefault})},arearenders:function(t,e,i){console.log(t),console.log(i),console.log(e),this.showarea=!1,this.areaArrStr=i,this.cityvalues=t,this.areaArr=e,this.provinceId=t.pId,this.provinceName=e[0],this.cityId=t.cId?this.cityvalues.cId:null,this.cityName=e[1]?this.areaArr[1]:null,this.districtId=t.dId?this.cityvalues.dId:null,this.districtName=e[2]?this.areaArr[2]:null},affirmSite:function(){var t=this;if(this.name)if(this.phone)if(this.isPoneAvailable(this.phone))if(this.areaArrStr)if(this.siteDetail){var e={consignee:this.name,mobile:this.phone,provinceId:this.provinceId,provinceName:this.provinceName,cityId:this.cityId,cityName:this.cityName,districtId:this.districtId,districtName:this.districtName,address:this.siteDetail,isDefault:this.checked?1:0};this.id&&(e.id=this.id),console.log(e),u.a.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0}),this.$api.address(e).then(function(e){console.log(e),u.a.success("地址编辑成功"),t.$route.query.ids?t.$router.replace("/siteChoose?ids="+t.$route.query.ids):t.$router.replace("/siteChoose")})}else u()("请填写详细地址");else u()("请选择省市区");else u()("请填写正确的手机号码");else u()("请填写手机号码");else u()("请填写收货人")},isPoneAvailable:function(t){return!!/^[1][0-9]{10}$/.test(t)},deleteSite:function(){var t=this;u.a.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0}),this.$api.deleteSite({id:this.id}).then(function(e){u.a.success("地址删除成功"),t.$router.replace("/siteChoose")})}}},N={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"siteEdit"},[s("navBar",{attrs:{title:t.title,hasBack:!0,leftText:"",rightText:"",clickLeft:t.clickLeft,clickRight:t.clickRight,hasBorder:!1}}),t._v(" "),s("div",{staticClass:"inputBox"},[s("div",{staticClass:"inputList listHeight"},[s("div",{staticClass:"label"},[t._v("收货人")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",placeholder:"请填写收货人姓名"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"inputList listHeight"},[s("div",{staticClass:"label"},[t._v("手机号码")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"text",placeholder:"请填写收货人手机号码"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),t._v(" "),s("div",{directives:[{name:"tap",rawName:"v-tap",value:{methods:t.chooseCity},expression:"{methods:chooseCity}"}],staticClass:"inputList listHeight"},[s("div",{staticClass:"label"},[t._v("选择地区")]),t._v(" "),s("div",{staticClass:"inputListBox"},[s("div",{staticClass:"name",class:{active:""!=t.areaArrStr}},[t._v(t._s(t.areaArrStr?t.areaArrStr:"省、市、区"))]),t._v(" "),s("img",{attrs:{src:i("er74"),alt:""}})])]),t._v(" "),s("div",{staticClass:"inputList textareaList"},[s("div",{staticClass:"label"},[t._v("详细地址")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.siteDetail,expression:"siteDetail"}],attrs:{name:"",id:"",cols:"30",rows:"5",placeholder:"街道、楼牌号等"},domProps:{value:t.siteDetail},on:{input:function(e){e.target.composing||(t.siteDetail=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"siteDefault"},[s("div",{staticClass:"label"},[t._v("设为默认地址")]),t._v(" "),s("van-switch",{attrs:{"active-color":"#FE7C7D"},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1),t._v(" "),t.id?s("div",{directives:[{name:"tap",rawName:"v-tap",value:{methods:t.deleteSite},expression:"{methods:deleteSite}"}],staticClass:"delete"},[t._v("删除")]):t._e(),t._v(" "),s("div",{staticClass:"footerButtonTemplateBox"},[s("div",{directives:[{name:"tap",rawName:"v-tap",value:{methods:t.affirmSite},expression:"{methods:affirmSite}"}],staticClass:"affirm footer footerButtonTemplate"},[t._v("确认")])]),t._v(" "),s("city",{attrs:{showarea:t.showarea,areaclose:t.areaclose,arearenders:t.arearenders}})],1)},staticRenderFns:[]};var _=i("C7Lr")(b,N,!1,function(t){i("9XLH")},"data-v-0cb8e83b",null);e.default=_.exports},XLor:function(t,e,i){"use strict";var s=i("X+FI");e.__esModule=!0,e.default=e.MOMENTUM_LIMIT_DISTANCE=e.MOMENTUM_LIMIT_TIME=void 0;var n=s(i("vRMc")),a=i("QzFE"),r=i("HYbQ"),o=i("E9Gb"),l=i("o3EJ"),c=i("RT20");e.MOMENTUM_LIMIT_TIME=300;e.MOMENTUM_LIMIT_DISTANCE=15;var u=(0,r.createNamespace)("picker-column"),h=u[0],d=u[1];function f(t){var e=window.getComputedStyle(t),i=e.transform||e.webkitTransform,s=i.slice(7,i.length-1).split(", ")[5];return Number(s)}function m(t){return(0,r.isObject)(t)&&t.disabled}var v=r.inBrowser&&"onwheel"in window,p=null,g=h({mixins:[c.TouchMixin],props:{valueKey:String,readonly:Boolean,allowHtml:Boolean,className:String,itemHeight:Number,defaultIndex:Number,swipeDuration:[Number,String],visibleItemCount:[Number,String],initialOptions:{type:Array,default:function(){return[]}}},data:function(){return{offset:0,duration:0,options:(0,a.deepClone)(this.initialOptions),currentIndex:this.defaultIndex}},created:function(){this.$parent.children&&this.$parent.children.push(this),this.setIndex(this.currentIndex)},mounted:function(){this.bindTouchEvent(this.$el),v&&(0,l.on)(this.$el,"wheel",this.onMouseWheel,!1)},destroyed:function(){var t=this.$parent.children;t&&t.splice(t.indexOf(this),1),v&&(0,l.off)(this.$el,"wheel")},watch:{initialOptions:"setOptions",defaultIndex:function(t){this.setIndex(t)}},computed:{count:function(){return this.options.length},baseOffset:function(){return this.itemHeight*(this.visibleItemCount-1)/2}},methods:{setOptions:function(t){JSON.stringify(t)!==JSON.stringify(this.options)&&(this.options=(0,a.deepClone)(t),this.setIndex(this.defaultIndex))},onTouchStart:function(t){if(!this.readonly){if(this.touchStart(t),this.moving){var e=f(this.$refs.wrapper);this.offset=Math.min(0,e-this.baseOffset),this.startOffset=this.offset}else this.startOffset=this.offset;this.duration=0,this.transitionEndTrigger=null,this.touchStartTime=Date.now(),this.momentumOffset=this.startOffset}},onTouchMove:function(t){if(!this.readonly){this.touchMove(t),"vertical"===this.direction&&(this.moving=!0,(0,l.preventDefault)(t,!0)),this.offset=(0,o.range)(this.startOffset+this.deltaY,-this.count*this.itemHeight,this.itemHeight);var e=Date.now();e-this.touchStartTime>300&&(this.touchStartTime=e,this.momentumOffset=this.offset)}},onTouchEnd:function(){var t=this;if(!this.readonly){var e=this.offset-this.momentumOffset,i=Date.now()-this.touchStartTime;if(i<300&&Math.abs(e)>15)this.momentum(e,i);else{var s=this.getIndexByOffset(this.offset);this.duration=200,this.setIndex(s,!0),setTimeout(function(){t.moving=!1},0)}}},onMouseWheel:function(t){var e=this;if(!this.readonly){(0,l.preventDefault)(t,!0);var i=f(this.$refs.wrapper);this.startOffset=Math.min(0,i-this.baseOffset),this.momentumOffset=this.startOffset,this.transitionEndTrigger=null;var s=t.deltaY;if(!(0===this.startOffset&&s<0)){var n=this.itemHeight*(s>0?-1:1);this.offset=(0,o.range)(this.startOffset+n,-this.count*this.itemHeight,this.itemHeight),p&&clearTimeout(p),p=setTimeout(function(){e.onTouchEnd(),e.touchStartTime=0},300)}}},onTransitionEnd:function(){this.stopMomentum()},onClickItem:function(t){this.moving||this.readonly||(this.transitionEndTrigger=null,this.duration=200,this.setIndex(t,!0))},adjustIndex:function(t){for(var e=t=(0,o.range)(t,0,this.count);e<this.count;e++)if(!m(this.options[e]))return e;for(var i=t-1;i>=0;i--)if(!m(this.options[i]))return i},getOptionText:function(t){return(0,r.isObject)(t)&&this.valueKey in t?t[this.valueKey]:t},setIndex:function(t,e){var i=this,s=-(t=this.adjustIndex(t)||0)*this.itemHeight,n=function(){t!==i.currentIndex&&(i.currentIndex=t,e&&i.$emit("change",t))};this.moving&&s!==this.offset?this.transitionEndTrigger=n:n(),this.offset=s},setValue:function(t){for(var e=this.options,i=0;i<e.length;i++)if(this.getOptionText(e[i])===t)return this.setIndex(i)},getValue:function(){return this.options[this.currentIndex]},getIndexByOffset:function(t){return(0,o.range)(Math.round(-t/this.itemHeight),0,this.count-1)},momentum:function(t,e){var i=Math.abs(t/e);t=this.offset+i/.003*(t<0?-1:1);var s=this.getIndexByOffset(t);this.duration=+this.swipeDuration,this.setIndex(s,!0)},stopMomentum:function(){this.moving=!1,this.duration=0,this.transitionEndTrigger&&(this.transitionEndTrigger(),this.transitionEndTrigger=null)},genOptions:function(){var t=this,e=this.$createElement,i={height:this.itemHeight+"px"};return this.options.map(function(s,a){var r,o=t.getOptionText(s),l=m(s),c={style:i,attrs:{role:"button",tabindex:l?-1:0},class:[d("item",{disabled:l,selected:a===t.currentIndex})],on:{click:function(){t.onClickItem(a)}}},u={class:"van-ellipsis",domProps:(r={},r[t.allowHtml?"innerHTML":"textContent"]=o,r)};return e("li",(0,n.default)([{},c]),[t.slots("option",s)||e("div",(0,n.default)([{},u]))])})}},render:function(){var t=arguments[0],e={transform:"translate3d(0, "+(this.offset+this.baseOffset)+"px, 0)",transitionDuration:this.duration+"ms",transitionProperty:this.duration?"all":"none"};return t("div",{class:[d(),this.className]},[t("ul",{ref:"wrapper",style:e,class:d("wrapper"),on:{transitionend:this.onTransitionEnd}},[this.genOptions()])])}});e.default=g},Z2of:function(t,e,i){i("BlTd"),i("PENG"),i("UbNJ")},ltWp:function(t,e,i){"use strict";e.__esModule=!0,e.pickerProps=e.DEFAULT_ITEM_HEIGHT=void 0;e.DEFAULT_ITEM_HEIGHT=44;var s={title:String,loading:Boolean,readonly:Boolean,itemHeight:[Number,String],showToolbar:Boolean,cancelButtonText:String,confirmButtonText:String,allowHtml:{type:Boolean,default:!0},visibleItemCount:{type:[Number,String],default:6},swipeDuration:{type:[Number,String],default:1e3}};e.pickerProps=s}});
webpackJsonp([4],{"8Wz/":function(t,i,e){"use strict";var s=e("X+FI");i.__esModule=!0,i.default=void 0;var n=s(e("DcSe")),a=e("HYbQ"),o=e("EXxz"),c=(0,a.createNamespace)("swipe-item"),r=c[0],h=c[1],u=r({mixins:[(0,o.ChildrenMixin)("vanSwipe")],data:function(){return{offset:0,inited:!1,mounted:!1}},mounted:function(){var t=this;this.$nextTick(function(){t.mounted=!0})},computed:{style:function(){var t={},i=this.parent,e=i.size,s=i.vertical;return e&&(t[s?"height":"width"]=e+"px"),this.offset&&(t.transform="translate"+(s?"Y":"X")+"("+this.offset+"px)"),t},shouldRender:function(){var t=this.index,i=this.inited,e=this.parent,s=this.mounted;if(!e.lazyRender||i)return!0;if(!s)return!1;var n=e.activeIndicator,a=e.count-1,o=0===n&&e.loop?a:n-1,c=n===a&&e.loop?0:n+1,r=t===n||t===o||t===c;return r&&(this.inited=!0),r}},render:function(){return(0,arguments[0])("div",{class:h(),style:this.style,on:(0,n.default)({},this.$listeners)},[this.shouldRender&&this.slots()])}});i.default=u},IGHJ:function(t,i){},JOW8:function(t,i,e){e("BlTd"),e("OVg9")},OVg9:function(t,i){},U5oY:function(t,i,e){"use strict";i.__esModule=!0,i.default=void 0;var s=e("HYbQ"),n=e("CvCA"),a=e("o3EJ"),o=e("MQiC"),c=e("E9Gb"),r=e("RT20"),h=e("EXxz"),u=e("bV3A"),l=(0,s.createNamespace)("swipe"),d=l[0],v=l[1],f=d({mixins:[r.TouchMixin,(0,h.ParentMixin)("vanSwipe"),(0,u.BindEventMixin)(function(t,i){t(window,"resize",this.resize,!0),t(window,"orientationchange",this.resize,!0),t(window,"visibilitychange",this.onVisibilityChange),i?this.initialize():this.clear()})],props:{width:[Number,String],height:[Number,String],autoplay:[Number,String],vertical:Boolean,lazyRender:Boolean,indicatorColor:String,loop:{type:Boolean,default:!0},duration:{type:[Number,String],default:500},touchable:{type:Boolean,default:!0},initialSwipe:{type:[Number,String],default:0},showIndicators:{type:Boolean,default:!0},stopPropagation:{type:Boolean,default:!0}},data:function(){return{rect:null,offset:0,active:0,deltaX:0,deltaY:0,swiping:!1,computedWidth:0,computedHeight:0}},watch:{children:function(){this.initialize()},initialSwipe:function(){this.initialize()},autoplay:function(t){t>0?this.autoPlay():this.clear()}},computed:{count:function(){return this.children.length},maxCount:function(){return Math.ceil(Math.abs(this.minOffset)/this.size)},delta:function(){return this.vertical?this.deltaY:this.deltaX},size:function(){return this[this.vertical?"computedHeight":"computedWidth"]},trackSize:function(){return this.count*this.size},activeIndicator:function(){return(this.active+this.count)%this.count},isCorrectDirection:function(){var t=this.vertical?"vertical":"horizontal";return this.direction===t},trackStyle:function(){var t={transitionDuration:(this.swiping?0:this.duration)+"ms",transform:"translate"+(this.vertical?"Y":"X")+"("+this.offset+"px)"};if(this.size){var i=this.vertical?"height":"width",e=this.vertical?"width":"height";t[i]=this.trackSize+"px",t[e]=this[e]?this[e]+"px":""}return t},indicatorStyle:function(){return{backgroundColor:this.indicatorColor}},minOffset:function(){return(this.vertical?this.rect.height:this.rect.width)-this.size*this.count}},mounted:function(){this.bindTouchEvent(this.$refs.track)},methods:{initialize:function(t){if(void 0===t&&(t=+this.initialSwipe),this.$el&&!(0,n.isHidden)(this.$el)){clearTimeout(this.timer);var i={width:this.$el.offsetWidth,height:this.$el.offsetHeight};this.rect=i,this.swiping=!0,this.active=t,this.computedWidth=+this.width||i.width,this.computedHeight=+this.height||i.height,this.offset=this.getTargetOffset(t),this.children.forEach(function(t){t.offset=0}),this.autoPlay()}},resize:function(){this.initialize(this.activeIndicator)},onVisibilityChange:function(){document.hidden?this.clear():this.autoPlay()},onTouchStart:function(t){this.touchable&&(this.clear(),this.touchStartTime=Date.now(),this.touchStart(t),this.correctPosition())},onTouchMove:function(t){this.touchable&&this.swiping&&(this.touchMove(t),this.isCorrectDirection&&((0,a.preventDefault)(t,this.stopPropagation),this.move({offset:this.delta})))},onTouchEnd:function(){if(this.touchable&&this.swiping){var t=this.size,i=this.delta,e=i/(Date.now()-this.touchStartTime);if((Math.abs(e)>.25||Math.abs(i)>t/2)&&this.isCorrectDirection){var s=this.vertical?this.offsetY:this.offsetX,n=0;n=this.loop?s>0?i>0?-1:1:0:-Math[i>0?"ceil":"floor"](i/t),this.move({pace:n,emitChange:!0})}else i&&this.move({pace:0});this.swiping=!1,this.autoPlay()}},getTargetActive:function(t){var i=this.active,e=this.count,s=this.maxCount;return t?this.loop?(0,c.range)(i+t,-1,e):(0,c.range)(i+t,0,s):i},getTargetOffset:function(t,i){void 0===i&&(i=0);var e=t*this.size;this.loop||(e=Math.min(e,-this.minOffset));var s=i-e;return this.loop||(s=(0,c.range)(s,this.minOffset,0)),s},move:function(t){var i=t.pace,e=void 0===i?0:i,s=t.offset,n=void 0===s?0:s,a=t.emitChange,o=this.loop,c=this.count,r=this.active,h=this.children,u=this.trackSize,l=this.minOffset;if(!(c<=1)){var d=this.getTargetActive(e),v=this.getTargetOffset(d,n);if(o){if(h[0]&&v!==l){var f=v<l;h[0].offset=f?u:0}if(h[c-1]&&0!==v){var p=v>0;h[c-1].offset=p?-u:0}}this.active=d,this.offset=v,a&&d!==r&&this.$emit("change",this.activeIndicator)}},prev:function(){var t=this;this.correctPosition(),this.resetTouchStatus(),(0,o.doubleRaf)(function(){t.swiping=!1,t.move({pace:-1,emitChange:!0})})},next:function(){var t=this;this.correctPosition(),this.resetTouchStatus(),(0,o.doubleRaf)(function(){t.swiping=!1,t.move({pace:1,emitChange:!0})})},swipeTo:function(t,i){var e=this;void 0===i&&(i={}),this.correctPosition(),this.resetTouchStatus(),(0,o.doubleRaf)(function(){var s;s=e.loop&&t===e.count?0===e.active?0:t:t%e.count,i.immediate?(0,o.doubleRaf)(function(){e.swiping=!1}):e.swiping=!1,e.move({pace:s-e.active,emitChange:!0})})},correctPosition:function(){this.swiping=!0,this.active<=-1&&this.move({pace:this.count}),this.active>=this.count&&this.move({pace:-this.count})},clear:function(){clearTimeout(this.timer)},autoPlay:function(){var t=this,i=this.autoplay;i>0&&this.count>1&&(this.clear(),this.timer=setTimeout(function(){t.next(),t.autoPlay()},i))},genIndicator:function(){var t=this,i=this.$createElement,e=this.count,s=this.activeIndicator,n=this.slots("indicator");return n||(this.showIndicators&&e>1?i("div",{class:v("indicators",{vertical:this.vertical})},[Array.apply(void 0,Array(e)).map(function(e,n){return i("i",{class:v("indicator",{active:n===s}),style:n===s?t.indicatorStyle:null})})]):void 0)}},render:function(){var t=arguments[0];return t("div",{class:v()},[t("div",{ref:"track",style:this.trackStyle,class:v("track",{vertical:this.vertical})},[this.slots()]),this.genIndicator()])}});i.default=f},XsYR:function(t,i,e){e("BlTd"),e("p1g8")},glOA:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s,n=e("a3Yh"),a=e.n(n),o=(e("ux1N"),e("a2VW")),c=e.n(o),r=(e("pG91"),e("R4p2")),h=e.n(r),u=(e("loei"),e("lBnC")),l=e.n(u),d=(e("x4Wh"),e("uqip")),v=e.n(d),f=(e("u/Zp"),e("fmO/")),p=e.n(f),m=(e("JOW8"),e("8Wz/")),g=e.n(m),C=(e("XsYR"),e("U5oY")),y=e.n(C),w=e("P7/f"),x={components:(s={},a()(s,y.a.name,y.a),a()(s,g.a.name,g.a),a()(s,p.a.name,p.a),a()(s,v.a.name,v.a),a()(s,l.a.name,l.a),a()(s,h.a.name,h.a),a()(s,c.a.name,c.a),a()(s,"navBar",w.a),s),props:{},data:function(){return{id:"",isX:!1,value:1,name:"",exchangeType:"",points:"",diamondNum:"",pics:[],description:[],stock:0,userPoints:"",needConversion:!1,type:1,message:"确认使用积分兑换该商品？\n兑换后商品将寄存在背包中"}},created:function(){this.isX=this.$tool.isIPhoneX(),this.$route.query.id&&(this.id=this.$route.query.id,this.getUserInfo())},mounted:function(){},methods:{clickLeft:function(){this.$router.back()},clickRight:function(){l()("按钮")},exchargeDetail:function(){var t=this;this.$api.exchangeDetail({goodsId:this.id}).then(function(i){console.log(i.data),t.name=i.data.name,t.exchangeType=i.data.exchangeType,t.points=i.data.points,t.diamondNum=i.data.diamondNum,t.pics=i.data.pics,t.description=i.data.description.split(";"),t.type=i.data.type,-1==i.data.stock?t.stock=99999999999:t.stock=i.data.stock,console.log(t.points),console.log(t.userPoints),t.userPoints<t.points?t.needConversion=!1:t.needConversion=!0})},getUserInfo:function(){var t=this;this.$api.getUserInfo().then(function(i){t.userPoints=i.data.points,t.exchargeDetail()})},reduceNum:function(){this.value>1&&this.value--,this.integralEnough()},plusNum:function(){this.value<this.stock?this.value++:l()("库存不够"),this.integralEnough()},integralEnough:function(){this.value*this.points<=this.userPoints?this.needConversion=!0:this.needConversion=!1},promptToLogin:function(){var t=this;this.$storage.get("token")||c.a.confirm({title:"去登陆",message:"还没有登录，是否登录？",confirmButtonText:"去登陆"}).then(function(){t.$router.replace({path:"/login"})}).catch(function(){})},wantChange:function(){var t=this;this.promptToLogin(),this.needConversion&&(1==this.type?this.message="确认使用积分兑换该商品？\n兑换后商品将寄存在背包中":this.message="购买的钻石将会放入您的钻石\n余额中，请记得查看",c.a.confirm({title:"兑换",message:this.message}).then(function(){t.$api.exchange({goods_id:t.id,quantity:t.value}).then(function(i){console.log(i),"库存不足！"==i.errMsg?l()("库存不足..."):t.$router.push("/forRecord")})}).catch(function(){}))}}},_={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"goodDetail"},[s("navBar",{attrs:{title:"商品详情",hasBack:!0,leftText:"",rightText:"",clickLeft:t.clickLeft,clickRight:t.clickRight,hasBorder:!0}}),t._v(" "),s("div",{staticClass:"detailTop"},[s("div",{staticClass:"imgBoxBig"},[s("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"#FFFFFF"}},t._l(t.pics,function(t,i){return s("van-swipe-item",{key:i},[s("van-image",{attrs:{width:"100%",height:"100%",fit:"cover","v-lazy":t.pic,src:t.pic}})],1)}),1)],1),t._v(" "),s("div",{staticClass:"msgBox"},[s("div",{staticClass:"top"},[s("div",{staticClass:"name"},[t._v(t._s(t.name))])]),t._v(" "),s("div",{staticClass:"bottom"},[s("div",{staticClass:"left"},[1==t.exchangeType?s("img",{attrs:{src:e("UWkc"),alt:""}}):s("img",{attrs:{src:e("X98l"),alt:""}}),t._v(" "),s("div",{staticClass:"numBox"},[s("div",{staticClass:"num"},[t._v(t._s(t.diamondNum))]),t._v(" "),s("div",{staticClass:"integral"},[t._v("钻石")])])]),t._v(" "),s("div",{staticClass:"right"},[t._v("库存："+t._s("99999999999"==t.stock?"不限":t.stock))])])])]),t._v(" "),s("div",{staticClass:"detailBottom"},[t._m(0),t._v(" "),s("div",{staticClass:"goodBoxDetail"},t._l(t.description,function(t,i){return s("img",{key:i,attrs:{src:t,alt:""}})}),0)]),t._v(" "),s("div",{staticClass:"bottonOperation",style:{paddingBottom:t.isX?"34px":"0.22rem"}},[s("div",{staticClass:"stepper"},[s("div",{directives:[{name:"tap",rawName:"v-tap",value:{methods:t.reduceNum},expression:"{ methods: reduceNum }"}],staticClass:"reduce",class:{reduceHide:t.value<=1}},[t._v("-")]),t._v(" "),s("div",{staticClass:"inputBox"},[t._v(t._s(t.value))]),t._v(" "),s("div",{directives:[{name:"tap",rawName:"v-tap",value:{methods:t.plusNum},expression:"{ methods: plusNum }"}],staticClass:"plus",class:{plusHide:t.value>=t.stock}},[t._v("＋")])]),t._v(" "),s("div",{directives:[{name:"tap",rawName:"v-tap",value:{methods:t.wantChange},expression:"{ methods: wantChange }"}],staticClass:"button",class:{buttonHide:this.needConversion}},[t._v("我要兑换")])])],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"titleBox"},[i("div",{staticClass:"line"}),this._v(" "),i("div",{staticClass:"title"},[this._v("宝贝详情")]),this._v(" "),i("div",{staticClass:"line"})])}]};var b=e("C7Lr")(x,_,!1,function(t){e("IGHJ"),e("zUjd")},"data-v-3c2522eb",null);i.default=b.exports},p1g8:function(t,i){},zUjd:function(t,i){}});
webpackJsonp([15],{"3i5U":function(e,t,i){e.exports=i.p+"static/img/login_apple.63cb565.png"},M3DI:function(e,t,i){e.exports=i.p+"static/img/login_1.123b02b.png"},Quw4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,o=i("3cXf"),a=i.n(o),n=i("a3Yh"),r=i.n(n),c=(i("mOxo"),i("MHxF")),d=i.n(c),u=(i("loei"),i("lBnC")),g=i.n(u),l=i("P7/f"),v=i("xYkB"),m={components:(s={},r()(s,g.a.name,g.a),r()(s,d.a.name,d.a),r()(s,"navBar",l.a),s),data:function(){return{pushMessage:!0,backgroundMusic:!0,backgroundSound:!1,deviceNumberID:""}},created:function(){var e=window.innerHeight;console.log("视口的高度是: "+e+" 像素"),-1!=location.href.indexOf("code")&&this.isWx&&this.getCode(),this.getTouristId(),this.getDeviceNumber()},mounted:function(){},methods:{getDeviceNumber:function(){if(!this.$config.isH5){var e=this.$tool.getUserAgent(),t=a()({type:"iosDeviceNumberID",id:"getDeviceNumberID",inputCode:"deviceNumberBox"});switch(e){case"iOS":window.webkit.messageHandlers.ReactNativeWebView.postMessage(t);break;case"Android":window.ReactNativeWebView.postMessage(t)}}},getDeviceNumberID:function(){this.deviceNumberID=document.getElementById("deviceNumberBox").value},touristGetCode:function(){var e=document.getElementById("touristCodeBox").value;this.$storage.set("identity",e)},getTouristId:function(){if(!this.$config.isH5&&!this.$storage.get("identity")){var e=this.$tool.getUserAgent(),t=a()({type:"getTouristId",id:"touristGetCode",inputCode:"touristCodeBox"});switch(e){case"iOS":window.webkit.messageHandlers.ReactNativeWebView.postMessage(t);break;case"Android":window.ReactNativeWebView.postMessage(t)}}},touristLogin:function(){var e=this;this.$api.touristLogin({identity:this.$storage.get("identity")||"",deviceNumberID:this.deviceNumberID}).then(function(t){if(console.log("rrr",t),0==t.errCode){e.$storage.set("token",t.data.accessToken.accessToken),e.$storage.set("nickname",t.data.nickname),e.$storage.set("mobile",t.data.mobile||""),e.$storage.set("identity",t.data.memberId);var i={type:"saveTouristId",url:"/tourist?touristId"+t.data.touristId,touristId:t.data.touristId,token:e.$storage.get("token")};Object(v.a)(i),e.$router.replace("/")}})},clickLeft:function(){this.$router.back()},clickRight:function(){g()("按钮")},toPage:function(e){"/loginPhone"==e.url&&this.$storage.remove("awardDate"),this.$router.push(e.url)},iosLogin:function(){if(!this.$config.isH5){this.$storage.remove("awardDate");var e=this.$tool.getUserAgent(),t=a()({type:"iosLogin",id:"iosGetCode",inputCode:"iosCodeBox"});switch(console.log("ios",t),e){case"iOS":window.webkit.messageHandlers.ReactNativeWebView.postMessage(t);break;case"Android":window.ReactNativeWebView.postMessage(t)}}},iosGetCode:function(){console.log("value值",document.getElementById("iosCodeBox").value),this.iosRegister(document.getElementById("iosCodeBox").value)},iosRegister:function(e){var t=this;this.$api.iosLogin({identityToken:e,channelKey:"cjzww"}).then(function(e){if(console.log("苹果登录",e),"OK"==e.errMsg){if(t.$storage.set("token",e.data.accessToken.accessToken),t.$storage.set("nickname",e.data.nickname),t.$storage.set("mobile",e.data.mobile),t.transferToken(),!t.$config.isH5){var i=t.$tool.getUserAgent(),s={type:"aliasId",aliasId:e.data.aliasId},o=a()(s);switch(i){case"iOS":window.webkit.messageHandlers.ReactNativeWebView.postMessage(o);break;case"Android":window.ReactNativeWebView.postMessage(o)}}t.$router.replace("/"),g.a.success("登录成功")}else g.a.fail("苹果登录失败,请重新登录!")})},transferToken:function(){if(!this.$config.isH5){var e=this.$tool.getUserAgent(),t={type:"transferToken",url:"/play?token="+this.$storage.get("token"),token:this.$storage.get("token")},i=a()(t);switch(e){case"iOS":window.webkit.messageHandlers.ReactNativeWebView.postMessage(i);break;case"Android":window.ReactNativeWebView.postMessage(i)}}},getCode:function(){console.log(document.getElementById("codeBox").value),this.register(document.getElementById("codeBox").value)},register:function(e){var t=this;this.$api.wxLogin({code:e,platform:1}).then(function(e){if(console.log(e),"OK"==e.errMsg){if(t.$storage.set("token",e.data.accessToken.accessToken),t.$storage.set("nickname",e.data.nickname),!t.$config.isH5){var i=t.$tool.getUserAgent(),s={type:"aliasId",aliasId:e.data.aliasId},o=a()(s);switch(i){case"iOS":window.webkit.messageHandlers.ReactNativeWebView.postMessage(o);break;case"Android":window.ReactNativeWebView.postMessage(o)}}t.$router.replace("/"),g.a.success("登录成功")}})},backHome:function(){this.$router.back()}}},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login"},[i("input",{staticStyle:{display:"none"},attrs:{type:"text",id:"deviceNumberBox"}}),e._v(" "),i("button",{staticStyle:{display:"none"},attrs:{id:"getDeviceNumberID"},on:{click:e.getDeviceNumberID}},[e._v("555")]),e._v(" "),i("div",{directives:[{name:"tap",rawName:"v-tap",value:{methods:e.touristLogin},expression:"{ methods: touristLogin }"}],staticClass:"touristButton"},[i("div",{staticClass:"touristLogin"},[e._v("游客登录")])]),e._v(" "),e._m(0),e._v(" "),i("div",{staticClass:"loginButtons"},[i("div",{staticClass:"loginButtons_tips"},[e._v("第三方账户快速登录")]),e._v(" "),i("div",{staticClass:"loginButtons_box"},[i("div",{directives:[{name:"tap",rawName:"v-tap",value:{methods:e.iosLogin},expression:"{ methods: iosLogin }"}],staticClass:"button"},[e._m(1)])])]),e._v(" "),i("div",{staticClass:"agreement"},[e._v("\n      登录或注册及同意\n      "),i("span",{directives:[{name:"tap",rawName:"v-tap",value:{methods:e.toPage,url:"/userAgreement?params=2"},expression:"{ methods: toPage, url: '/userAgreement?params=2' }"}]},[e._v("《用户协议》")]),e._v("\n      及\n      "),i("span",{directives:[{name:"tap",rawName:"v-tap",value:{methods:e.toPage,url:"/userAgreement?params=3"},expression:"{ methods: toPage, url: '/userAgreement?params=3' }"}]},[e._v("《隐私条款》")])]),e._v(" "),i("input",{staticStyle:{display:"none"},attrs:{type:"text",id:"codeBox"}}),e._v(" "),i("button",{staticStyle:{display:"none"},attrs:{id:"getCode"},on:{click:e.getCode}},[e._v("555")]),e._v(" "),i("input",{staticStyle:{display:"none"},attrs:{type:"text",id:"iosCodeBox"}}),e._v(" "),i("button",{staticStyle:{display:"none"},attrs:{id:"iosGetCode"},on:{click:e.iosGetCode}},[e._v("555")]),e._v(" "),i("input",{staticStyle:{display:"none"},attrs:{type:"text",id:"touristCodeBox"}}),e._v(" "),i("button",{staticStyle:{display:"none"},attrs:{id:"touristGetCode"},on:{click:e.touristGetCode}},[e._v("555")])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo"},[t("img",{attrs:{src:i("M3DI"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"imgBox"},[t("img",{attrs:{src:i("3i5U"),alt:""}})])}]};var h=i("C7Lr")(m,p,!1,function(e){i("Ss6z")},"data-v-23b27a08",null);t.default=h.exports},Ss6z:function(e,t){}});